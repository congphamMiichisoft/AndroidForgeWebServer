/*!
 * LMV v7.34.2
 * 
 * Copyright 2021 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.BimMarkups =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./extensions/BimMarkups/BimMarkups.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./extensions/BimMarkups/Actions/AddMarkupAction.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/Actions/AddMarkupAction.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AddMarkupAction; });
/* harmony import */ var _Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/ActionManager/Action */ "./extensions/BimMarkups/Utils/ActionManager/Action.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

AddMarkupAction = /*#__PURE__*/function (_Action) {_inherits(AddMarkupAction, _Action);var _super = _createSuper(AddMarkupAction);
  function AddMarkupAction(markupsManager, markup, layer) {var _this;_classCallCheck(this, AddMarkupAction);
    _this = _super.call(this, markupsManager.actionManager);

    _this.markupsManager = markupsManager;
    _this.markup = markup;
    _this.layer = layer;return _this;
  }_createClass(AddMarkupAction, [{ key: "undo", value: function undo()

    {
      this.markupsManager.removeMarkupFromLayer(this.markup);
    } }, { key: "redo", value: function redo()

    {
      this.markupsManager.addMarkupToLayer(this.markup, this.layer);
    } }]);return AddMarkupAction;}(_Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Actions/DeleteMarkupAction.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/Actions/DeleteMarkupAction.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DeleteMarkupAction; });
/* harmony import */ var _Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/ActionManager/Action */ "./extensions/BimMarkups/Utils/ActionManager/Action.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

DeleteMarkupAction = /*#__PURE__*/function (_Action) {_inherits(DeleteMarkupAction, _Action);var _super = _createSuper(DeleteMarkupAction);
  function DeleteMarkupAction(markupsManager, markup) {var _this;_classCallCheck(this, DeleteMarkupAction);
    _this = _super.call(this, markupsManager.actionManager);

    _this.markupsManager = markupsManager;
    _this.markup = markup;
    _this.layer = _this.markup.layer;return _this;
  }_createClass(DeleteMarkupAction, [{ key: "undo", value: function undo()

    {
      this.markupsManager.addMarkupToLayer(this.markup, this.layer);
    } }, { key: "redo", value: function redo()

    {
      this.markupsManager.removeMarkupFromLayer(this.markup);
    } }]);return DeleteMarkupAction;}(_Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Actions/UpdateMarkupAction.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/Actions/UpdateMarkupAction.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return UpdateMarkupAction; });
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/ActionManager/Action */ "./extensions/BimMarkups/Utils/ActionManager/Action.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

UpdateMarkupAction = /*#__PURE__*/function (_Action) {_inherits(UpdateMarkupAction, _Action);var _super = _createSuper(UpdateMarkupAction);
  function UpdateMarkupAction(markupsManager, markup, newState) {var _this;_classCallCheck(this, UpdateMarkupAction);
    _this = _super.call(this, markupsManager.actionManager);

    _this.markupsManager = markupsManager;
    _this.markup = markup;
    _this.layer = _this.markup.layer;

    _this.oldState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(_this.markup.getState());
    _this.newState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(newState);return _this;
  }_createClass(UpdateMarkupAction, [{ key: "undo", value: function undo()

    {
      this.markup.setState(this.oldState);
      this.markup.syncEditState();
    } }, { key: "redo", value: function redo()

    {
      this.markup.setState(this.newState);
      this.markup.syncEditState();
    } }]);return UpdateMarkupAction;}(_Utils_ActionManager_Action__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/BimMarkups.js":
/*!*********************************************!*\
  !*** ./extensions/BimMarkups/BimMarkups.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsExtension; });
/* harmony import */ var _MarkupsTool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarkupsTool */ "./extensions/BimMarkups/MarkupsTool.js");
/* harmony import */ var _UI_MarkupsUI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UI/MarkupsUI */ "./extensions/BimMarkups/UI/MarkupsUI.js");
/* harmony import */ var _MarkupsManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsManager */ "./extensions/BimMarkups/MarkupsManager.js");
/* harmony import */ var _MarkupsRenderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsRenderer */ "./extensions/BimMarkups/MarkupsRenderer.js");
/* harmony import */ var _FilterManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./FilterManager */ "./extensions/BimMarkups/FilterManager.js");
/* harmony import */ var _MarkupsPermissionManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MarkupsPermissionManager */ "./extensions/BimMarkups/MarkupsPermissionManager.js");
/* harmony import */ var _MarkupsMobileCallbacks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MarkupsMobileCallbacks */ "./extensions/BimMarkups/MarkupsMobileCallbacks.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _CacheObject__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./CacheObject */ "./extensions/BimMarkups/CacheObject.js");
/* harmony import */ var _Service_MarkupsServiceOperator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Service/MarkupsServiceOperator */ "./extensions/BimMarkups/Service/MarkupsServiceOperator.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}












var namespace = AutodeskNamespace('Autodesk.BIM360.Markups');var

MarkupsExtension = /*#__PURE__*/function (_Autodesk$Viewing$Ext) {_inherits(MarkupsExtension, _Autodesk$Viewing$Ext);var _super = _createSuper(MarkupsExtension);
  function MarkupsExtension(viewer) {var _this;var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};_classCallCheck(this, MarkupsExtension);
    _this = _super.call(this, viewer, options);
    _this.viewer = viewer;
    _this.options = options;

    _this.cache = _this.getCache();
    _this.onModelLoadedBinded = _this.onModelLoaded.bind(_assertThisInitialized(_this));return _this;
  }_createClass(MarkupsExtension, [{ key: "onModelLoaded", value: function onModelLoaded(

    event) {
      // It is possible that a model has been loaded as hidden, and it's not the viewer's main model.
      if (!this.viewer.model || this.initialized) {
        return;
      }

      this.initCache();

      var model = event.model;
      var node = model.getDocumentNode();

      if (node) {
        this.sheetList = node.getRootNode().search({ type: 'geometry' });
        this.options.sheetGUID = node.guid();
        this.options.sheetName = node.name();
        this.options.fileName = node.findViewableParent().name();
      } else {
        this.sheetList = [];
      }

      this.markupsManager = new _MarkupsManager__WEBPACK_IMPORTED_MODULE_2__["default"](this);

      this.filterManager = new _FilterManager__WEBPACK_IMPORTED_MODULE_4__["default"](this, this.options);

      this.permissionManager = new _MarkupsPermissionManager__WEBPACK_IMPORTED_MODULE_5__["default"](this.options);

      this.markupsTool = new _MarkupsTool__WEBPACK_IMPORTED_MODULE_0__["default"](this);

      this.viewer.toolController.registerTool(this.markupsTool);

      var prevLock = this.viewer.toolController.setIsLocked(false);
      this.viewer.toolController.activateTool(this.markupsTool.getName());
      this.viewer.toolController.setIsLocked(prevLock);

      this.renderer = new _MarkupsRenderer__WEBPACK_IMPORTED_MODULE_3__["default"](this);

      this.markupsManager.setDefaultCreationStyleProperties(); // Needs renderer to set default thickness

      if (!this.options.isMobileApp) {
        this.markupsUI = new _UI_MarkupsUI__WEBPACK_IMPORTED_MODULE_1__["default"](this);
        this.initMarkupsPanel();
      } else {
        this.mobileCallbacks = new _MarkupsMobileCallbacks__WEBPACK_IMPORTED_MODULE_6__["default"](this);
      }

      this.initServiceOperator();

      this.selectInitialLayer();

      this.initialized = true;
    } }, { key: "initCache", value: function initCache()

    {
      if (!this.cache.hasOwnProperty('markupsCache')) {
        this.cache.markupsCache = new _CacheObject__WEBPACK_IMPORTED_MODULE_9__["default"]();
      }

      this.markupsCache = this.cache.markupsCache;

      if (this.markupsCache.currentUrn !== this.options.documentUrn) {
        this.cache.layerToSelect = null;
        this.cache.layerToEdit = null;
        this.cache.filters = null;
      }

      this.cache.markupsCache.setCurrentUrn(this.options.documentUrn);

    } }, { key: "initServiceOperator", value: function initServiceOperator()

    {
      if (!this.serviceOperator) {
        this.serviceOperator = new _Service_MarkupsServiceOperator__WEBPACK_IMPORTED_MODULE_10__["default"]();
      }

      this.serviceOperator.reset(this);
      this.serviceOperator.fetchMarkups();
    } }, { key: "initMarkupsPanel", value: function initMarkupsPanel()

    {
      if (this.options.panelContainer && this.options.uiClasses && this.options.uiClasses.MarkupPanelClass) {
        if (!this.cache.markupsPanel) {
          this.cache.markupsPanel = new this.options.uiClasses.MarkupPanelClass();
          this.cache.markupsPanel.reset(this);
        } else {
          this.cache.markupsPanel.reset(this);
        }
      }
    } }, { key: "selectInitialLayer", value: function selectInitialLayer()

    {var _this2 = this;
      // Wait until the camera will be initialized before selecting a layer.
      setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {return regeneratorRuntime.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:_context.next = 2;return (
                  Autodesk.Viewing.EventUtils.waitUntilTransitionEnded(_this2.viewer));case 2:

                if (_this2.cache.layerToSelect) {
                  _this2.selectLayer(_this2.cache.layerToSelect, true, true);
                  _this2.cache.layerToSelect = null;
                }

                if (_this2.cache.layerToEdit) {
                  _this2.editLayer(_this2.cache.layerToEdit, true, true, true);
                  _this2.cache.layerToEdit = null;
                }case 4:case "end":return _context.stop();}}}, _callee);})));

    } }, { key: "load", value: function () {var _load = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {return regeneratorRuntime.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:_context2.next = 2;return (


                  this.viewer.loadExtension('Autodesk.Snapping'));case 2:

                if (this.viewer.model) {
                  this.onModelLoaded({ model: this.viewer.model });
                } else {
                  this.viewer.addEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT, this.onModelLoadedBinded);
                }return _context2.abrupt("return",

                true);case 4:case "end":return _context2.stop();}}}, _callee2, this);}));function load() {return _load.apply(this, arguments);}return load;}() }, { key: "unload", value: function unload()


    {
      this.viewer.removeEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT, this.onModelLoadedBinded);

      if (this.mobileCallbacks) {
        this.mobileCallbacks.destroy();
        this.mobileCallbacks = null;
      }

      if (this.markupsUI) {
        this.markupsUI.destroy();
        this.markupsUI = null;
      }

      if (this.renderer) {
        this.renderer.destroy();
        this.renderer = null;
      }

      if (this.markupsTool) {
        this.viewer.toolController.deregisterTool(this.markupsTool);
        this.markupsTool = null;
      }

      if (this.markupsManager) {
        this.markupsManager.destroy();
        this.markupsManager = null;
      }

      if (this.filterManager) {
        this.filterManager.destroy();
        this.filterManager = null;
      }

      if (this.permissionManager) {
        this.permissionManager.destroy();
        this.permissionManager = null;
      }

      if (this.serviceOperator) {
        this.serviceOperator.terminate();
        this.serviceOperator = null;
      }

      this.markupsCache = null;
      this.initialized = false;

      return true;
    }

    /**
       * Public interface
       */ }, { key: "startMarkupSession", value: function startMarkupSession(

    creationType, layer) {
      this.markupsManager.startMarkupSession(creationType, layer);
    } }, { key: "endMarkupSession", value: function endMarkupSession(

    save) {
      this.markupsManager.endMarkupSession(save);
    } }, { key: "setToolEnabled", value: function setToolEnabled(

    enable) {
      this.markupsManager.setToolEnabled(enable);
    } }, { key: "isToolEnabled", value: function isToolEnabled()

    {
      return this.markupsManager.isToolEnabled();
    } }, { key: "editLayer", value: function editLayer(

    layer, focus, selectAllMarkups, immediate) {
      this.markupsManager.editLayer(layer, focus, selectAllMarkups, immediate);
    } }, { key: "changeMarkupCreationType", value: function changeMarkupCreationType(

    creationType, startSession) {
      if (this.markupsManager.isMarkupSessionOpen() || startSession) {
        this.markupsManager.changeMarkupCreationType(creationType);
      }
    }

    // Removes the markup for the canvas.
  }, { key: "deleteMarkup", value: function deleteMarkup(markup) {
      this.markupsManager.deleteMarkup(markup);
    } }, { key: "deleteInEditMarkups", value: function deleteInEditMarkups()

    {
      this.markupsManager.deleteInEditMarkups();
    } }, { key: "undo", value: function undo()

    {
      this.markupsManager.undo();
    } }, { key: "redo", value: function redo()

    {
      this.markupsManager.redo();
    } }, { key: "copy", value: function copy()

    {
      this.markupsManager.copy();
    } }, { key: "paste", value: function paste()

    {
      this.markupsManager.paste();
    } }, { key: "cut", value: function cut()

    {
      this.markupsManager.cut();
    } }, { key: "selectMarkup", value: function selectMarkup(

    markup) {
      this.markupsManager.selectMarkup(markup);
    } }, { key: "deselectMarkup", value: function deselectMarkup(

    markup) {
      this.markupsManager.deselectMarkup(markup);
    } }, { key: "deselectAllMarkups", value: function deselectAllMarkups(

    exclude) {
      this.markupsManager.deselectAllMarkups(exclude);
    } }, { key: "deselectAllLayers", value: function deselectAllLayers(

    exclude) {
      this.markupsManager.deselectAllLayers(exclude);
    } }, { key: "exitMarkupView", value: function exitMarkupView()

    {
      this.markupsManager.exitMarkupView();
    } }, { key: "getSelectedMarkups", value: function getSelectedMarkups()

    {
      return this.markupsManager.getSelectedMarkups();
    } }, { key: "getSelectedLayer", value: function getSelectedLayer()

    {
      return this.markupsManager.getSelectedLayer();
    } }, { key: "getVisibleMarkups", value: function getVisibleMarkups()

    {
      return this.markupsManager.getVisibleMarkups();
    } }, { key: "selectLayer", value: function selectLayer(

    layer, focus, immediate) {
      this.markupsManager.selectLayer(layer, focus, immediate);
    } }, { key: "deselectLayer", value: function deselectLayer(

    layer) {
      this.markupsManager.deselectLayer(layer);
    } }, { key: "getStyleProperty", value: function getStyleProperty(

    key) {
      return this.markupsManager.getStyleProperty(key);
    } }, { key: "changeStyleProperty", value: function changeStyleProperty(

    key, value, dontSubmit) {
      this.markupsManager.changeStyleProperty(key, value, dontSubmit);
    } }, { key: "loadLayers", value: function loadLayers()



    {var layersJson = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.markupsCache && this.markupsCache.getAsList();var ignoreFilters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;var removeExistingLayers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      this.markupsManager.loadLayers(layersJson, ignoreFilters, removeExistingLayers);
    }

    // Remove layer from canvas.
  }, { key: "removeLayer", value: function removeLayer(layer) {
      this.markupsManager.removeLayer(layer);
    } }, { key: "changeCreationStatusType", value: function changeCreationStatusType(

    status) {
      this.markupsManager.changeCreationStatusType(status);
    } }, { key: "getCreationStatusType", value: function getCreationStatusType()

    {
      return this.markupsManager.getCreationStatusType();
    } }, { key: "updateFilters", value: function updateFilters(

    filters) {
      this.filterManager.updateFilters(filters);
    } }]);return MarkupsExtension;}(Autodesk.Viewing.Extension);


// Register the extension with the extension manager.
Autodesk.Viewing.theExtensionManager.registerExtension('Autodesk.BIM360.Markups', MarkupsExtension);

namespace.Constants = Object.assign({}, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__);
namespace.Events = Object.assign({}, _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"]);
namespace.markupsOverlayRenderer = _MarkupsCommon__WEBPACK_IMPORTED_MODULE_11__["markupsOverlayRenderer"];

/***/ }),

/***/ "./extensions/BimMarkups/CacheObject.js":
/*!**********************************************!*\
  !*** ./extensions/BimMarkups/CacheObject.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CacheObject; });
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var CacheObject = /*#__PURE__*/function () {
  function CacheObject() {_classCallCheck(this, CacheObject);
    this.cache = {};
    this.currentUrn = 'default';
  }_createClass(CacheObject, [{ key: "setCurrentUrn", value: function setCurrentUrn(

    urn) {
      this.currentUrn = urn;
      this.cache[urn] = this.cache[urn] || {};
    } }, { key: "add", value: function add(

    id, item) {var urn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.currentUrn;
      this.cache[urn][id] = item;
    } }, { key: "remove", value: function remove(

    id) {var urn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.currentUrn;
      delete this.cache[urn][id];
    } }, { key: "get", value: function get(

    id) {var urn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.currentUrn;
      return this.cache[urn][id];
    } }, { key: "getAsList", value: function getAsList()

    {var _this = this;var urn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentUrn;
      var list = [];

      Object.keys(this.cache[urn]).forEach(function (key) {
        list.push(_this.cache[urn][key]);
      });

      return list;
    } }, { key: "getCache", value: function getCache()

    {var urn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentUrn;
      return this.cache[urn];
    } }, { key: "cleanCache", value: function cleanCache()

    {var _this2 = this;var urn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentUrn;
      Object.keys(this.cache[urn]).forEach(function (key) {
        _this2.remove(key);
      });
    } }, { key: "length", value: function length()

    {var urn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentUrn;
      return Object.keys(this.cache[urn]).length;
    } }, { key: "isEmpty", value: function isEmpty()

    {var urn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentUrn;
      return this.length(urn) === 0;
    } }]);return CacheObject;}();

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/AnchorHandler.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/AnchorHandler.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AnchorHandler; });
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

AnchorHandler = /*#__PURE__*/function (_EditHandler) {_inherits(AnchorHandler, _EditHandler);var _super = _createSuper(AnchorHandler);function AnchorHandler() {_classCallCheck(this, AnchorHandler);return _super.apply(this, arguments);}_createClass(AnchorHandler, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {
      if (this.activeAnchor) {
        point = this.getSnappedPosition();

        this.markup.applyInverseRotation(point);
        this.markup.applyInverseScaleAndTranslation(point);

        if (this.markupsExtension.markupsTool.shiftDown) {
          this.snapAxis(point);
        }

        this.updateActiveAnchor(point);

        return true;
      }

      return false;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.activeAnchor) {
        this.activeAnchor = this.intersect(point);

        if (this.activeAnchor) {
          this.originalAnchor = this.activeAnchor.clone();
          this.editStart();
        }

        return !!this.activeAnchor;
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.activeAnchor) {
        point = this.getSnappedPosition();

        this.markup.applyInverseRotation(point);
        this.markup.applyInverseScaleAndTranslation(point);

        if (this.markupsExtension.markupsTool.shiftDown) {
          this.snapAxis(point);
        }

        this.updateActiveAnchor(point);

        if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__["isEqualVectors"])(this.activeAnchor, this.originalAnchor, this.getMinChangeDistanceWorld())) {
          this.cancelAnchorEditing();
        } else {
          this.submitChanges();
          this.editEnd();
        }

        this.activeAnchor = null;

        return true;
      }

      return false;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      if (this.activeAnchor) {
        switch (keyCode) {
          case Autodesk.Viewing.KeyCode.BACKSPACE:
          case Autodesk.Viewing.KeyCode.DELETE:
          case Autodesk.Viewing.KeyCode.ESCAPE:
            this.cancelAnchorEditing();
            return true;
          default:
            break;}

      }

      return false;
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
    } }, { key: "updateActiveAnchor", value: function updateActiveAnchor(

    point) {
      var anchors = this.markup.getAnchors();
      this.activeAnchor.copy(point);
      this.updateEditStateAnchors();
      this.handleCompensation();
    } }, { key: "cancelAnchorEditing", value: function cancelAnchorEditing()

    {
      this.activeAnchor = null;
      this.markup.syncEditState();
      this.updateEditStateAnchors();
      this.editEnd();
    } }, { key: "isDragging", value: function isDragging()

    {
      return !!this.activeAnchor;
    } }, { key: "snapAxis", value: function snapAxis(

    point) {var _this = this;
      var anchors = this.markup.getAnchors();
      var index = anchors.findIndex(function (anchor) {return anchor === _this.activeAnchor;});

      if (anchors[index - 1]) {
        this.snapPointToAxis(point, anchors[index - 1], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"]);
      } else if (anchors[index + 1]) {
        this.snapPointToAxis(point, anchors[index + 1], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"]);
      }
    } }, { key: "intersect", value: function intersect(

    point) {var _this2 = this;
      point = point.clone();
      this.markup.applyInverseRotation(point);
      this.markup.applyInverseScaleAndTranslation(point);

      var p = this.markupsExtension.renderer.worldToClient(point);

      var anchors = this.markup.getAnchors();

      return anchors.find(function (anchor) {
        if (!_this2.markup.isAnchorHandlingAllowed(anchor)) return;

        var a = _this2.markupsExtension.renderer.worldToClient(anchor);
        return a.distanceTo(p) <= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["TOUCH_RADIUS"];
      });
    } }, { key: "getCursor", value: function getCursor()

    {
      if (this.activeAnchor) {
        return 'grabbing';
      } else {
        return 'grab';
      }
    } }]);return AnchorHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js":
/*!********************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandler; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}



var

CreationHandler = /*#__PURE__*/function (_EditHandler) {_inherits(CreationHandler, _EditHandler);var _super = _createSuper(CreationHandler);
  function CreationHandler(markupsExtension, markup) {var _this;var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};_classCallCheck(this, CreationHandler);
    _this = _super.call(this, markupsExtension, markup, options);

    // Used for compound markups.
    _this.onCreationStartCB = options.onCreationStart;
    _this.onCreationEndCB = options.onCreationEnd;return _this;
  }

  // Use creationStart when markup creation begins (First click).
  _createClass(CreationHandler, [{ key: "creationStart", value: function creationStart() {
      this.creationStarted = true;

      if (this.onCreationStartCB) {
        this.onCreationStartCB();
      } else {
        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DRAWING_START, markup: this.markup });
        this.markupsExtension.markupsManager.deselectAllMarkups();
        this.markupsExtension.markupsManager.deselectAllLinks();

        this.editStart();
      }
    }

    // TODO: Replace this logic with initial rotation of the markup.

    // Initial markup's bounding box should always be aligned with the screen.
    // In case the camera's rotation is not 0 in markup's creation time, we have to rotate it accordingly.
    // The process is not trivial when the markup has several creation steps (like polyline). In this scenario,
    // What we need to do is modifying the rotation for all the history of the markup's creation.
    // In order to do that, we traverse through all the actions that's relevant to the markup's creation, and change their history.
  }, { key: "fixInitialRotation", value: function fixInitialRotation() {var _this2 = this;
      // rotationNotAllowed check: for group components not allowed to rotate through interaction
      if (this.markup.rotationHandler || this.markup.options.rotationNotAllowed) {(function () {
          var cameraRotation = _this2.markupsExtension.renderer.getCameraRotation();

          if (Math.abs(cameraRotation) > _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["EPSILON"]) {(function () {
              var eyeDirection = _this2.markupsExtension.renderer.getCameraEyeVector();var

              actionManager = _this2.markupsExtension.markupsManager.actionManager;

              while (!actionManager.isUndoStackEmpty()) {
                var currentAction = actionManager.undoStack[actionManager.undoStack.length - 1];

                if (Array.isArray(currentAction)) {
                  currentAction = currentAction[currentAction.length - 1];
                }

                if (currentAction.markup !== _this2.markup) {
                  break;
                }

                // Modify markup's anchors, so the rotation won't affect the final result, except of the bounding box.
                var _this2$getEditState = _this2.getEditState(),anchors = _this2$getEditState.anchors;
                anchors.forEach(function (anchor) {
                  _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(anchor, cameraRotation, _this2.markup.getWorldCenter(), eyeDirection);
                });

                _this2.prevCenter = _this2.markup.center.clone();

                _this2.markup.setLocked(true);
                _this2.updateEditStateAnchors();
                _this2.updateEditState({ rotation: -cameraRotation });
                _this2.markup.setLocked(false);

                // In order to prevent a jump in the markup's position, we call handleCompensation.
                _this2.handleCompensation();

                // Override history
                var clonedState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(_this2.getEditState());

                currentAction.markup.state = clonedState;
                currentAction.markup.editState = clonedState;

                if (currentAction.newState) {
                  currentAction.newState = clonedState;
                }

                if (!actionManager.isRedoStackEmpty()) {
                  actionManager.redoStack[actionManager.redoStack.length - 1].oldState = clonedState;
                }

                if (actionManager.isGroupOpen) {
                  // Can't undo while group is open, so break to avoid infinite loop
                  // Furthermore, this case will happen when creating a group markup
                  break;
                }
                actionManager.undo();
              }

              while (!actionManager.isRedoStackEmpty()) {
                actionManager.redo();
              }})();
          }})();
      }
    }

    // Use creationEnd when the markup creation / edition is complete.
  }, { key: "creationEnd", value: function creationEnd(point) {
      this.fixInitialRotation();

      if (this.onCreationEndCB) {
        this.onCreationEndCB(point);
      } else {
        this.markup.disableEdit();

        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, markup: this.markup });
        this.markupsExtension.markupsManager.duringCreationMarkup = null;
        this.editEnd();

        this.markup.complete();
      }
    } }, { key: "creationCancel", value: function creationCancel()

    {
      if (this.markup.anchorHandler) {
        this.markup.anchorHandler.cancelAnchorEditing();
      }

      this.markup.disableEdit();

      this.markup.remove();

      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, markup: this.markup });
      this.markupsExtension.markupsManager.duringCreationMarkup = null;
      this.editEnd();
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
          this.creationCancel();
          return true;
        case Autodesk.Viewing.KeyCode.ESCAPE:
          return this.onEscape();
        default:
          break;}


      return false;
    } }, { key: "onEscape", value: function onEscape()

    {
      this.creationCancel();

      return true;
    } }]);return CreationHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_2__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrow.js":
/*!*************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrow.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerArrow; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerArrow = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerArrow, _CreationHandler);var _super = _createSuper(CreationHandlerArrow);
  function CreationHandlerArrow(markupsExtension, markup) {var _this;var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};_classCallCheck(this, CreationHandlerArrow);
    _this = _super.call(this, markupsExtension, markup, options);

    _this.tailIndex = options.reverseHead ? 1 : 0;
    _this.headIndex = options.reverseHead ? 0 : 1;return _this;
  }_createClass(CreationHandlerArrow, [{ key: "handleMouseMove", value: function handleMouseMove(

    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;

      if (!anchors[this.headIndex]) {
        anchors[this.headIndex] = anchors[this.tailIndex]; // For the case when creation starts at index 1 (reverseHead=true)
      }

      if (!this.creationStarted) {
        this.creationStart();
      }

      if (anchors[this.tailIndex]) {
        if (this.markupsExtension.markupsTool.shiftDown) {
          this.snapPointToAxis(point, anchors[this.tailIndex], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["ROTATION_SNAP_DEGREES"]);
        }

        anchors[this.headIndex] = point;
        this.updateEditStateAnchors();
      }

      return true;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {var _this$getEditState2 =
      this.getEditState(),anchors = _this$getEditState2.anchors;

      if (!anchors[this.tailIndex]) {
        anchors[this.tailIndex] = point;
        this.updateEditStateAnchors();
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {var _this$getEditState3 =
      this.getEditState(),anchors = _this$getEditState3.anchors;

      if (!anchors[this.headIndex]) {
        return this.handleMouseMove(point, button);
      } else if (!this.isSamePoint(point, anchors[this.tailIndex])) {
        if (this.markupsExtension.markupsTool.shiftDown) {
          this.snapPointToAxis(point, anchors[this.tailIndex], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["ROTATION_SNAP_DEGREES"]);
        }

        anchors[this.headIndex] = point;

        this.updateEditStateAnchors();

        this.submitChanges();

        this.creationEnd(point);
      } else {
        this.creationCancel();
        return false;
      }

      return true;
    } }]);return CreationHandlerArrow;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCallout.js":
/*!********************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCallout.js ***!
  \********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerArrowCallout; });
/* harmony import */ var _CreationHandlerCallout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandlerCallout */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCallout.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerArrowCallout = /*#__PURE__*/function (_CreationHandlerCallo) {_inherits(CreationHandlerArrowCallout, _CreationHandlerCallo);var _super = _createSuper(CreationHandlerArrowCallout);
  function CreationHandlerArrowCallout(markupsExtension, markup, options) {_classCallCheck(this, CreationHandlerArrowCallout);return _super.call(this,
    markupsExtension, markup, options, [
    {
      class: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_ARROW"],
      options: { reverseHead: true, tailHandlingNotAllowed: true } },

    {
      class: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_CALLOUT"],
      options: { requiresClick: true, rotationNotAllowed: true, frameType: options.calloutFrameType ? options.calloutFrameType : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_RECTANGLE"] } }]);


  }_createClass(CreationHandlerArrowCallout, [{ key: "getArrowIndex", value: function getArrowIndex()

    {
      return 0;
    } }, { key: "getTextIndex", value: function getTextIndex()

    {
      return 1;
    } }]);return CreationHandlerArrowCallout;}(_CreationHandlerCallout__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCloudCallout.js":
/*!*************************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCloudCallout.js ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerArrowCloudCallout; });
/* harmony import */ var _CreationHandlerCallout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandlerCallout */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCallout.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerArrowCloudCallout = /*#__PURE__*/function (_CreationHandlerCallo) {_inherits(CreationHandlerArrowCloudCallout, _CreationHandlerCallo);var _super = _createSuper(CreationHandlerArrowCloudCallout);
  function CreationHandlerArrowCloudCallout(markupsExtension, markup, options) {_classCallCheck(this, CreationHandlerArrowCloudCallout);return _super.call(this,
    markupsExtension, markup, options, [
    {
      class: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_CLOUD"],
      options: { fillNotAllowed: true, rotationNotAllowed: true } },

    {
      class: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_ARROW"],
      options: { reverseHead: true, headHandlingNotAllowed: true, tailHandlingNotAllowed: true } },

    {
      class: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_CALLOUT"],
      options: { requiresClick: true, rotationNotAllowed: true, frameType: options.calloutFrameType ? options.calloutFrameType : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_RECTANGLE"] } }]);


  }_createClass(CreationHandlerArrowCloudCallout, [{ key: "getArrowIndex", value: function getArrowIndex()

    {
      return 1;
    } }, { key: "getTextIndex", value: function getTextIndex()

    {
      return 2;
    } }]);return CreationHandlerArrowCloudCallout;}(_CreationHandlerCallout__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCallout.js":
/*!***************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCallout.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerCallout; });
/* harmony import */ var _CreationHandlerCompound__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandlerCompound */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCompound.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerCallout = /*#__PURE__*/function (_CreationHandlerCompo) {_inherits(CreationHandlerCallout, _CreationHandlerCompo);var _super = _createSuper(CreationHandlerCallout);
  function CreationHandlerCallout(markupsExtension, markup, options, classes) {_classCallCheck(this, CreationHandlerCallout);return _super.call(this,
    markupsExtension, markup, options, classes);
  }_createClass(CreationHandlerCallout, [{ key: "afterNextMarkupCreated", value: function afterNextMarkupCreated(

    step) {
      if (step !== this.getTextIndex()) {
        return;
      }

      var arrow = this.getArrow();
      var text = this.getText();

      var bbox = text.getWorldBoundingBox(true);
      var halfThickness = text.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["STYLE_PROPERTIES"].THICKNESS] / 2;
      var halfHeight = bbox.size().y / 2 - halfThickness;
      var halfWidth = bbox.size().x / 2 - halfThickness;

      var arrowHead = arrow.getHead();
      var arrowTail = arrow.getTail();

      var angle = Math.atan2(arrowHead.y - arrowTail.y, arrowHead.x - arrowTail.x);

      var translation;
      switch (this.markup.getTextQuadrant(angle)) {
        case 1:
          translation = new THREE.Vector3(0, halfHeight, 0);
          break;
        case 2:
          translation = new THREE.Vector3(-halfWidth, 0, 0);
          break;
        case 3:
          translation = new THREE.Vector3(0, -halfHeight, 0);
          break;
        case 4:
          translation = new THREE.Vector3(halfWidth, 0, 0);
          break;}


      if (text.editState.frameType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_CLOUD"]) {
        var tailPoint = translation.clone().negate();
        var delta = this.markup.getVectorToClosestPointOnCloud(tailPoint);
        translation.add(delta);
      }

      text.creationHandler.updateEditState({ translation: translation });
      text.creationHandler.submitChanges();
    } }, { key: "getArrowIndex", value: function getArrowIndex()

    {
      throw new Error('getArrowIndex needs implementation');
    } }, { key: "getTextIndex", value: function getTextIndex()

    {
      throw new Error('getTextIndex needs implementation');
    } }, { key: "getArrow", value: function getArrow()

    {
      return this.markup.markups[this.getArrowIndex()];
    } }, { key: "getText", value: function getText()

    {
      return this.markup.markups[this.getTextIndex()];
    } }]);return CreationHandlerCallout;}(_CreationHandlerCompound__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCompound.js":
/*!****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCompound.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerCompound; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerCompound = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerCompound, _CreationHandler);var _super = _createSuper(CreationHandlerCompound);
  function CreationHandlerCompound(markupsExtension, markup, options) {var _this;var markupClasses = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];_classCallCheck(this, CreationHandlerCompound);
    _this = _super.call(this, markupsExtension, markup, options);

    _this.creationHandlers = [];
    _this.currentStep = 0;
    _this.lastCompleted = -1;

    _this.markup.markups = [];

    var componentsState = [];
    // The uuid is used to connect the group markup with its components
    // They will have this same number saved under groupId
    if (_this.markup.state.uuid) {
      // uuid already exists, so markup is being loaded
      componentsState = _this.markup.state.componentsState.sort(function (a, b) {return a.groupOrder - b.groupOrder;});
    } else {
      _this.markup.state.uuid = _this.markup.editState.uuid = THREE.Math.generateUUID();
    }

    _this.markupClasses = markupClasses;
    _this.numMarkups = markupClasses.length;

    for (var i = 0; i < _this.numMarkups; i++) {
      var markupType = markupClasses[i].class;
      var _options = markupClasses[i].options || {};

      _this._restoreFill(componentsState[i], markupClasses[i], componentsState);

      var isLast = i === markupClasses.length - 1;
      _options.onCreationEnd = function (point) {_this.onCreationEnd(point);};
      _options.onCreationStart = function () {_this.onCreationStart();};

      var componentState = Object.assign({}, componentsState[i], { groupId: _this.markup.state.uuid, groupOrder: i });
      var subMarkup = _this.markupsExtension.markupsManager.createMarkup(markupType, componentState, _options);

      if (!isLast) {
        subMarkup.selectWhenCompleted = function () {return false;};
      }

      subMarkup.markupGroup = _this.markup;

      _this.markup.markups.push(subMarkup);

      _this.creationHandlers.push(subMarkup.creationHandler);
    }

    delete _this.markup.state.componentsState; // Used only for loading
    return _this;}_createClass(CreationHandlerCompound, [{ key: "_restoreFill", value: function _restoreFill(

    currentComponentState, markupClass, componentsState) {
      if (currentComponentState && markupClass.options.fillNotAllowed) {
        // Get the fill values from another markup class. We set it to none only for export purposes
        // To keep things consistent in the UI, all markups should have the same values
        for (var j = 0; j < this.numMarkups; j++) {
          if (markupClass !== this.markupClasses[j] && (!this.markupClasses[j].options || !this.markupClasses[j].options.fillNotAllowed)) {
            currentComponentState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["STYLE_PROPERTIES"].FILL_OPACITY] = componentsState[j].style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["STYLE_PROPERTIES"].FILL_OPACITY];
            currentComponentState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["STYLE_PROPERTIES"].FILL_COLOR] = componentsState[j].style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["STYLE_PROPERTIES"].FILL_COLOR];
            break;
          }
        }
      }
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    point) {
      return this.creationHandlers[this.currentStep].handleMouseMove(point);
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      return this.creationHandlers[this.currentStep].handleButtonDown(point, button);
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      return this.creationHandlers[this.currentStep].handleButtonUp(point, button);
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    point, button) {
      return this.creationHandlers[this.currentStep].handleDoubleClick(point, button);
    } }, { key: "creationCancel", value: function creationCancel()

    {
      _get(_getPrototypeOf(CreationHandlerCompound.prototype), "creationCancel", this).call(this);

      this.markupsExtension.markupsManager.closeActionGroup();

      while (this.currentStep-- > 0) {
        this.markupsExtension.markupsManager.actionManager.undo(false);
      }
    } }, { key: "onCreationStart", value: function onCreationStart()

    {
      if (this.currentStep === 0) {
        this.markupsExtension.markupsManager.openActionGroup();
        this.creationStart();
      }
      this.markup.markups[this.currentStep].setVisible(true);
      this.markup.markups[this.currentStep].enableEdit();
    } }, { key: "closeGroup", value: function closeGroup()

    {
      // For the case when the last markup requires a click, the last onCreationEnd will be called 
      // before the previous one finishes. This check assures that Whichever ends last will close the group.
      // (lastCompleted will always lag one step behind currentStep until the end)
      if (this.lastCompleted === this.currentStep) {
        this.markupsExtension.markupsManager.closeActionGroup();
      }
      this.lastCompleted = this.currentStep;
    } }, { key: "onCreationEnd", value: function onCreationEnd(

    point) {
      this.markup.markups[this.currentStep].disableEdit();
      this.markup.markups[this.currentStep].complete();

      if (this.currentStep === this.numMarkups - 1) {
        this.submitChanges();
        this.creationEnd(point);
      } else {
        var nextPoint = this.markup.markups[this.currentStep].getStartPointForNextMarkup();
        this.currentStep += 1;

        if (this.markupClasses[this.currentStep].options.requiresClick) {
          this.creationHandlers[this.currentStep].handleClick(nextPoint);
        } else {
          this.creationHandlers[this.currentStep].handleButtonDown(nextPoint);
        }

        this.afterNextMarkupCreated(this.currentStep);
      }

      this.closeGroup();
    }

    // For optionally locating the markups in the correct position after creating
    // (to take into account constraints)
  }, { key: "afterNextMarkupCreated", value: function afterNextMarkupCreated(step) {

    } }]);return CreationHandlerCompound;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerDimension.js":
/*!*****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerDimension.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerDimension; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerDimension = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerDimension, _CreationHandler);var _super = _createSuper(CreationHandlerDimension);
  function CreationHandlerDimension(markupsExtension, markup, options) {var _this;_classCallCheck(this, CreationHandlerDimension);
    _this = _super.call(this, markupsExtension, markup, options);

    _this.measurement = new Autodesk.Viewing.MeasureCommon.Measurement(Autodesk.Viewing.MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);

    _this.snapper = _this.markupsExtension.markupsTool.snapper;
    _this.viewer = _this.markupsExtension.viewer;return _this;
  }_createClass(CreationHandlerDimension, [{ key: "getMeasureExtension", value: function getMeasureExtension()

    {
      if (!this.measureExtension) {
        this.measureExtension = this.markupsExtension.viewer.getExtension('Autodesk.Measure');

        if (!this.measureExtension) {
          console.error('Measure extension not available!');
        }
      }

      return this.measureExtension;
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;

      if (!this.creationStarted) {
        this.creationStart();
      }

      if (anchors[0]) {
        if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {
          this.snapPointToAxis(point, anchors[0], 90);
        }

        // No need to update viewportId for each mousemove. Only for the first time.
        if (!anchors[1]) {
          this.updateViewportId(this.measurement.getPick(1).viewportIndex2d);
        }

        this.pickSecondAnchor(point);
      }

      return true;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      var measureExtension = this.getMeasureExtension();

      // If PDF, force calibration
      if ((measureExtension.forceCalibrate || this.viewer.model.isLeaflet() || this.viewer.model.isPdf(true)) && !measureExtension.calibrationTool.isCalibrated()) {
        measureExtension.openCalibrationRequiredDialog('dimension');
        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__["MARKUPS_EVENTS"].CALIBRATION_REQUIRED });

        this.creationCancel();
        return true;
      }var _this$getEditState2 =

      this.getEditState(),anchors = _this$getEditState2.anchors;

      if (!anchors[0]) {
        if (this.snapper.isSnapped()) {
          this.snapper.copyResults(this.measurement.getPick(1));
          var p = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);

          anchors[0] = this.markupsExtension.renderer.documentCameraToMarkupsCamera(p);

          this.updateEditStateAnchors();
        } else {
          return false;
        }
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {var _this$getEditState3 =
      this.getEditState(),anchors = _this$getEditState3.anchors;

      if (!anchors[1]) {
        return this.handleMouseMove(point, button);
      } else if (!this.isSamePoint(point, anchors[0])) {
        if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {
          this.snapPointToAxis(point, anchors[0], 90);
        }

        var isSnapped = this.pickSecondAnchor(point);

        if (isSnapped) {
          this.updateViewportId();

          this.submitChanges();
          this.creationEnd(point);

          if (this.markup.dimensionEditHandler) {
            this.markup.dimensionEditHandler.handleButtonDown(point, button);
          }
        } else {
          return false;
        }
      } else {
        this.creationCancel();

        return false;
      }

      return true;
    } }, { key: "pickSecondAnchor", value: function pickSecondAnchor(

    point) {var _this$getEditState4 =
      this.getEditState(),anchors = _this$getEditState4.anchors;

      // After changing the point position with shiftDown, try to snap again.
      if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {
        var projectedPoint = this.markupsExtension.renderer.worldToClient(point);
        this.snapper.onMouseMove({ x: projectedPoint.x, y: projectedPoint.y });
      }

      var pick = this.measurement.getPick(2);
      var isSnapped = this.snapper.isSnapped();

      if (isSnapped) {
        this.snapper.copyResults(pick);
        anchors[1] = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);
      } else {
        anchors[1] = point;
        pick.geomType = Autodesk.Viewing.MeasureCommon.SnapType.SNAP_VERTEX;
        pick.geomVertex = point;
        pick.intersectPoint = point;
      }

      // Correct Perpendicular
      if (Autodesk.Viewing.MeasureCommon.correctPerpendicularPicks(this.measurement.getPick(1), this.measurement.getPick(2), this.viewer, this.snapper)) {
        anchors[1] = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.measurement.getPick(2), this.viewer);
        this.snapper.indicator.render();
      }

      if (isSnapped) {
        anchors[1] = this.markupsExtension.renderer.documentCameraToMarkupsCamera(anchors[1]);
      }

      var text = isSnapped || this.viewer.impl.is2d ? this.getDistance() : '';

      this.updateEditState({ text: text, anchors: anchors });

      return isSnapped;
    } }, { key: "creationCancel", value: function creationCancel()

    {
      _get(_getPrototypeOf(CreationHandlerDimension.prototype), "creationCancel", this).call(this);
      this.updateViewportId();
    } }, { key: "updateViewportId", value: function updateViewportId(

    viewportId) {
      if (this.viewer.model && this.viewer.impl.is2d) {
        if (!viewportId) {
          this.viewer.impl.updateViewportId(0);
          this.snapper.setViewportId(null);
        } else {
          // Pass viewport Id to LineShader to make all other geometries with different viewport transparent
          this.viewer.impl.updateViewportId(viewportId);
          this.snapper.setViewportId(viewportId);
        }
      }
    } }, { key: "getDistance", value: function getDistance()

    {
      var distance = null;
      var measureExtension = this.getMeasureExtension();var
      sharedMeasureConfig = measureExtension.sharedMeasureConfig;

      this.measurement.computeResult(this.measurement.picks, this.markupsExtension.viewer);

      if (this.markupsExtension.viewer.model && this.measurement.distanceXYZ) {
        var d = Autodesk.Viewing.Private.convertUnits(this.markupsExtension.viewer.model.getUnitString(), sharedMeasureConfig.units, sharedMeasureConfig.calibrationFactor, this.measurement.distanceXYZ);
        return Autodesk.Viewing.Private.formatValueWithUnits(d, sharedMeasureConfig.units, 3, sharedMeasureConfig.precision);
      }

      return distance;
    } }]);return CreationHandlerDimension;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFactory.js":
/*!***************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFactory.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerFactory; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _CreationHandlerRectangle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CreationHandlerRectangle */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerRectangle.js");
/* harmony import */ var _CreationHandlerPolyline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CreationHandlerPolyline */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolyline.js");
/* harmony import */ var _CreationHandlerPolycloud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CreationHandlerPolycloud */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolycloud.js");
/* harmony import */ var _CreationHandlerFreehand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CreationHandlerFreehand */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFreehand.js");
/* harmony import */ var _CreationHandlerArrow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CreationHandlerArrow */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrow.js");
/* harmony import */ var _CreationHandlerText__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CreationHandlerText */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerText.js");
/* harmony import */ var _CreationHandlerDimension__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CreationHandlerDimension */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerDimension.js");
/* harmony import */ var _CreationHandlerArrowCallout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CreationHandlerArrowCallout */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCallout.js");
/* harmony import */ var _CreationHandlerArrowCloudCallout__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./CreationHandlerArrowCloudCallout */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCloudCallout.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}








var

CreationHandlerFactory = /*#__PURE__*/function () {function CreationHandlerFactory() {_classCallCheck(this, CreationHandlerFactory);}_createClass(CreationHandlerFactory, null, [{ key: "getCreationHandler", value: function getCreationHandler(
    type, markupsExtension, markup) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      switch (type) {
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_LINE"]:
          return new _CreationHandlerArrow__WEBPACK_IMPORTED_MODULE_5__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_RECTANGLE"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CIRCLE"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CLOUD"]:
          return new _CreationHandlerRectangle__WEBPACK_IMPORTED_MODULE_1__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_FREEHAND"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_HIGHLIGHT"]:
          return new _CreationHandlerFreehand__WEBPACK_IMPORTED_MODULE_4__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYCLOUD"]:
          return new _CreationHandlerPolycloud__WEBPACK_IMPORTED_MODULE_3__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYLINE"]:
          return new _CreationHandlerPolyline__WEBPACK_IMPORTED_MODULE_2__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CALLOUT"]:
          return new _CreationHandlerText__WEBPACK_IMPORTED_MODULE_6__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_DIMENSION"]:
          return new _CreationHandlerDimension__WEBPACK_IMPORTED_MODULE_7__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CALLOUT"]:
          return new _CreationHandlerArrowCallout__WEBPACK_IMPORTED_MODULE_8__["default"](markupsExtension, markup, options);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CLOUD_CALLOUT"]:
          return new _CreationHandlerArrowCloudCallout__WEBPACK_IMPORTED_MODULE_9__["default"](markupsExtension, markup, options);

        default:}


      throw new Error("".concat(type, " creation handler does not exist"));
    } }]);return CreationHandlerFactory;}();

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFreehand.js":
/*!****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFreehand.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerFreehand; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

CreationHandlerFreehand = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerFreehand, _CreationHandler);var _super = _createSuper(CreationHandlerFreehand);function CreationHandlerFreehand() {_classCallCheck(this, CreationHandlerFreehand);return _super.apply(this, arguments);}_createClass(CreationHandlerFreehand, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;

      if (anchors.length === 1) {
        this.creationStart();
      }

      this.addPoint(point);

      return true;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      this.addPoint(point);

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      this.addPoint(point);

      this.submitChanges();
      this.creationEnd(point);

      return true;
    } }, { key: "addPoint", value: function addPoint(

    point) {var _this$getEditState2 =
      this.getEditState(),anchors = _this$getEditState2.anchors;

      if (anchors.length === 0 || !Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isEqualVectors"])(point, anchors[anchors.length - 1], this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MIN_FREEHAND_POINT_DISTANCE"]))) {
        // WIP for variable width. Needs further tweaking
        // if (anchors.length > 0) {
        //     const VELOCITY_WEIGHT = 0.8;
        //     const MIN_WIDTH = 0.1;
        //     const newStamp = performance.now();
        //     const deltaTime = newStamp - this.prevStamp;
        //     const distance = this.markupsExtension.renderer.sizeFromWorldToClient(point.distanceTo(anchors[anchors.length - 1]));
        //     let speed = distance / deltaTime * 1000; // px per second
        //     if (this.prevSpeed !== null) { // Low pass filter to 
        //         speed = VELOCITY_WEIGHT * speed + (1 - VELOCITY_WEIGHT) * this.prevSpeed;
        //     }
        //     point.width = Math.max(Math.min(1000 / speed, 1), MIN_WIDTH);
        //     this.prevStamp = newStamp;
        //     this.prevSpeed = speed;
        // } else {
        //     point.width = 1.0;
        //     this.prevStamp = performance.now();
        //     this.prevSpeed = null;
        // }

        anchors.push(point);

        anchors = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["simplify"])(anchors, this.markupsExtension.renderer.sizeFromClientToWorld(0.5), true);

        this.updateEditStateAnchors(anchors);
      }
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {var _this$getEditState3 =
      this.getEditState(),anchors = _this$getEditState3.anchors;

      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
        case Autodesk.Viewing.KeyCode.ESCAPE:
          if (anchors.length > 0) {
            this.creationCancel();
          }

          return true;
        default:
          break;}


      return false;
    } }]);return CreationHandlerFreehand;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolycloud.js":
/*!*****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolycloud.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerPolycloud; });
/* harmony import */ var _CreationHandlerPolyline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandlerPolyline */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolyline.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

CreationHandlerPolycloud = /*#__PURE__*/function (_CreationHandlerPolyl) {_inherits(CreationHandlerPolycloud, _CreationHandlerPolyl);var _super = _createSuper(CreationHandlerPolycloud);function CreationHandlerPolycloud() {_classCallCheck(this, CreationHandlerPolycloud);return _super.apply(this, arguments);}_createClass(CreationHandlerPolycloud, [{ key: "beforeCreationEnd",
    // CreationHandlerPolycloud is the same as CreationHandlerPolyline.
    value: function beforeCreationEnd()
    {
      this.updateEditState({ closed: true });
      this.submitChanges();
    } }, { key: "getMinimumPoints", value: function getMinimumPoints()

    {
      return 3;
    } }]);return CreationHandlerPolycloud;}(_CreationHandlerPolyline__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolyline.js":
/*!****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolyline.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerPolyline; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

CreationHandlerPolyline = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerPolyline, _CreationHandler);var _super = _createSuper(CreationHandlerPolyline);function CreationHandlerPolyline() {_classCallCheck(this, CreationHandlerPolyline);return _super.apply(this, arguments);}_createClass(CreationHandlerPolyline, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;

      if (!this.creationStarted) {
        this.creationStart();
      }

      if (anchors.length > 0) {
        this.popTemporaryPoint();

        if (this.markupsExtension.markupsTool.shiftDown && anchors.length > 0) {
          this.snapPointToAxis(point, anchors[anchors.length - 1], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"]);
        }

        var isClosingLoop = this.isClosingLoop(point);
        if (!isClosingLoop) {
          anchors.push(point);
          this.needPop = true;
        }

        this.updateEditState({ anchors: anchors, closed: isClosingLoop });
      }

      return true;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {var _this$getEditState2 =
      this.getEditState(),anchors = _this$getEditState2.anchors;
      if (anchors.length === 0) {
        anchors.push(point);
        this.updateEditStateAnchors();
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {var _this$getEditState3 =
      this.getEditState(),anchors = _this$getEditState3.anchors;

      if (!this.creationStarted) {
        this.creationStart();
      }

      this.popTemporaryPoint();

      var isClosingLoop = this.isClosingLoop(point);

      if (isClosingLoop || this.isNewLocation(point)) {
        if (this.markupsExtension.markupsTool.shiftDown && anchors.length > 0) {
          this.snapPointToAxis(point, anchors[anchors.length - 1], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"]);
        }

        if (!isClosingLoop) {
          anchors.push(point);
        }

        this.updateEditState({ anchors: anchors, closed: isClosingLoop });

        if (anchors.length > 1) {
          this.submitChanges();
        }

        if (isClosingLoop) {
          this.creationEnd(point);
        }
      }

      return true;
    } }, { key: "beforeCreationEnd", value: function beforeCreationEnd()

    {
      return true;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    point, button) {var _this$getEditState4 =
      this.getEditState(),anchors = _this$getEditState4.anchors;

      if (anchors.length >= this.getMinimumPoints()) {
        this.popTemporaryPoint();

        // Got an extra point from handleButtonUp.
        // anchors.pop(); // TODO maybe do this only for mobile

        this.beforeCreationEnd();
        this.creationEnd(point);
      } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {
        this.deleteMarkup();
      } else {
        this.creationCancel();
      }

      return true;
    } }, { key: "getMinimumPoints", value: function getMinimumPoints()

    {
      return 2;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:var _this$getEditState5 =
          this.getEditState(),anchors = _this$getEditState5.anchors;

          if (anchors.length > 0) {
            this.popTemporaryPoint();

            anchors.pop();

            this.updateEditStateAnchors();

            if (anchors.length > 1) {
              this.submitChanges();
            } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {
              this.deleteMarkup();
            } else {
              this.creationCancel();
            }
          }

          return true;
        case Autodesk.Viewing.KeyCode.ESCAPE:
          return this.onEscape();
        default:
          break;}


      return false;
    } }, { key: "onEscape", value: function onEscape()

    {var doBeforeCreationEnd = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;var _this$getEditState6 =
      this.getEditState(),anchors = _this$getEditState6.anchors;

      if (anchors.length > 0) {
        this.popTemporaryPoint();

        if (anchors.length >= this.getMinimumPoints()) {
          if (doBeforeCreationEnd) {
            this.beforeCreationEnd();
          }
          this.creationEnd();
        } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {
          this.deleteMarkup();
        } else {
          this.creationCancel();
        }

        return true;
      }

      return false;
    } }, { key: "isClosingLoop", value: function isClosingLoop(

    point) {var _this$getEditState7 =
      this.getEditState(),anchors = _this$getEditState7.anchors;
      return anchors.length > 2 && Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isEqualVectors"])(point, anchors[0], this.snapDistance());
    } }, { key: "isNewLocation", value: function isNewLocation(

    point) {var _this$getEditState8 =
      this.getEditState(),anchors = _this$getEditState8.anchors;

      if (anchors.length > 0) {
        return !this.isSamePoint(point, anchors[anchors.length - 1]);
      }

      return true;
    } }, { key: "popTemporaryPoint", value: function popTemporaryPoint()

    {
      if (this.needPop) {var _this$getEditState9 =
        this.getEditState(),anchors = _this$getEditState9.anchors;
        anchors.pop();
        this.needPop = false;
        this.updateEditStateAnchors();
      }
    } }]);return CreationHandlerPolyline;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerRectangle.js":
/*!*****************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerRectangle.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerRectangle; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

CreationHandlerRectangle = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerRectangle, _CreationHandler);var _super = _createSuper(CreationHandlerRectangle);function CreationHandlerRectangle() {_classCallCheck(this, CreationHandlerRectangle);return _super.apply(this, arguments);}_createClass(CreationHandlerRectangle, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;

      if (anchors[0]) {
        if (!this.creationStarted) {
          this.creationStart();
        }

        this.updateRectPoints(anchors, point);
      }

      return true;
    } }, { key: "updateRectPoints", value: function updateRectPoints(

    anchors, point) {
      if (this.markupsExtension.markupsTool.shiftDown) {
        this.snapPointToAxis(point, anchors[0], 90, 45);
      }

      var rightVec = this.markupsExtension.renderer.getCameraRightVector();
      var upVec = this.markupsExtension.renderer.getCameraUpVector();

      anchors[2] = point;

      var diagonal = anchors[2].clone().sub(anchors[0]);
      var width = diagonal.dot(rightVec);
      anchors[1] = anchors[0].clone().add(rightVec.multiplyScalar(width));

      var height = diagonal.dot(upVec);
      anchors[3] = anchors[0].clone().add(upVec.multiplyScalar(height));

      this.updateEditStateAnchors();
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {var _this$getEditState2 =
      this.getEditState(),anchors = _this$getEditState2.anchors;

      if (!anchors[0]) {
        anchors[0] = point;
        this.updateEditStateAnchors();
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {var _this$getEditState3 =
      this.getEditState(),anchors = _this$getEditState3.anchors;

      if (!anchors[1]) {
        return this.handleMouseMove(point, button);
      } else if (!this.isSamePoint(point, anchors[0])) {
        this.updateRectPoints(anchors, point);

        this.submitChanges();

        this.creationEnd(point);
      } else {
        this.creationCancel();
        return false;
      }

      return true;
    } }]);return CreationHandlerRectangle;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerText.js":
/*!************************************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerText.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CreationHandlerText; });
/* harmony import */ var _CreationHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreationHandler */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

CreationHandlerText = /*#__PURE__*/function (_CreationHandler) {_inherits(CreationHandlerText, _CreationHandler);var _super = _createSuper(CreationHandlerText);function CreationHandlerText() {_classCallCheck(this, CreationHandlerText);return _super.apply(this, arguments);}_createClass(CreationHandlerText, [{ key: "calculateAnchorsByCenterPoint", value: function calculateAnchorsByCenterPoint(
    point) {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors,text = _this$getEditState.text;

      var rightVec = this.markupsExtension.renderer.getCameraRightVector();
      var upVec = this.markupsExtension.renderer.getCameraUpVector();

      var style = this.markup.getTextStyle();

      var size = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["getTextSize"])(text, style);
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale();
      var width = Math.ceil(size.width) * fontToWorldScale;
      var height = size.height * fontToWorldScale;

      anchors[0] = point.clone().sub(upVec.clone().multiplyScalar(height / 2)).sub(rightVec.clone().multiplyScalar(width / 2));
      anchors[1] = anchors[0].clone().add(rightVec.multiplyScalar(width));
      anchors[2] = anchors[1].clone().add(upVec.clone().multiplyScalar(height));
      anchors[3] = anchors[0].clone().add(upVec.clone().multiplyScalar(height));
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (!this.didMouseMove()) {
        return this.handleClick(point, button);
      }

      return false;
    } }, { key: "handleClick", value: function handleClick(

    point, button) {
      this.calculateAnchorsByCenterPoint(point);
      this.creationStart();
      this.updateEditStateAnchors();
      this.submitChanges();
      this.creationEnd(point);

      // iOS text input can't be focused programatically.
      if (!Autodesk.Viewing.isIOSDevice()) {
        this.markup.textInputHandler.startTextEditing(true);
      }

      return true;
    } }]);return CreationHandlerText;}(_CreationHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/DimensionEditHandler.js":
/*!********************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/DimensionEditHandler.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DimensionEditHandler; });
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

DimensionEditHandler = /*#__PURE__*/function (_EditHandler) {_inherits(DimensionEditHandler, _EditHandler);var _super = _createSuper(DimensionEditHandler);
  function DimensionEditHandler(markupsExtension, markup) {var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};_classCallCheck(this, DimensionEditHandler);return _super.call(this,
    markupsExtension, markup, options);
  }_createClass(DimensionEditHandler, [{ key: "handleMouseMove", value: function handleMouseMove(

    point) {
      if (this.translating) {
        this.handleMouseTranslation(point);
      }

      return this.translating;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.translating) {
        this.translating = this.intersect(point);

        if (this.translating) {
          var anchors = this.markup.getAnchors();

          var direction = anchors[1].clone().sub(anchors[0]).normalize();
          var eyeVec = this.markupsExtension.renderer.getCameraEyeVector();
          this.normal = direction.clone().cross(eyeVec).normalize();

          this.editStart();
        }

        return this.translating;
      }

      return true;
    } }, { key: "getPointOnNormal", value: function getPointOnNormal(

    point) {
      var anchors = this.markup.getAnchors();
      var p2 = anchors[0].clone().add(this.normal);
      var newPoint = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["nearestPointInPointToLine"])(point, anchors[0], p2);
      return newPoint;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.translating) {
        var newPoint = this.getPointOnNormal(point);
        if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isEqualVectors"])(newPoint, this.lastTranslationPoint, this.getMinChangeDistanceWorld())) {
          this.cancelTransformEditing();
        } else if (this.lastTranslationPoint) {
          this.submitChanges();
          this.editEnd();
        }

        this.translating = false;
        this.lastTranslationPoint = null;

        return true;
      }

      return false;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
      return this.translating;
    } }, { key: "getCursor", value: function getCursor()

    {
      return 'move';
    } }, { key: "cancelTransformEditing", value: function cancelTransformEditing()

    {
      this.markup.syncEditState();
      this.translating = false;
      this.lastTranslationPoint = null;
      this.editEnd();
    } }, { key: "handleMouseTranslation", value: function handleMouseTranslation(

    point) {
      var newPoint = this.getPointOnNormal(point);

      if (!this.lastTranslationPoint) {
        this.lastTranslationPoint = newPoint;
      }

      var translation = newPoint.clone().sub(this.lastTranslationPoint);
      var translationAbs = translation.clone().add(this.markup.state.translation);

      this.updateEditState({ translation: translationAbs });
    } }, { key: "intersect", value: function intersect(

    point) {
      point = point.clone();
      this.markup.applyInverseRotation(point);
      var p = this.markupsExtension.renderer.worldToClient(point);
      var boundingBox = this.markup.getClientBoundingBox(true);
      return boundingBox.containsPoint(p);
    } }, { key: "isDragging", value: function isDragging()

    {
      return this.translating;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
        case Autodesk.Viewing.KeyCode.ESCAPE:
          if (this.translating) {
            this.cancelTransformEditing();
            return true;
          }
          break;
        default:
          break;}


      return false;
    } }]);return DimensionEditHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/EditHandler.js":
/*!***********************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/EditHandler.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return EditHandler; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _Actions_AddMarkupAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Actions/AddMarkupAction */ "./extensions/BimMarkups/Actions/AddMarkupAction.js");
/* harmony import */ var _Actions_UpdateMarkupAction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Actions/UpdateMarkupAction */ "./extensions/BimMarkups/Actions/UpdateMarkupAction.js");
/* harmony import */ var _Actions_DeleteMarkupAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Actions/DeleteMarkupAction */ "./extensions/BimMarkups/Actions/DeleteMarkupAction.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}








var av = Autodesk.Viewing;var

EditHandler = /*#__PURE__*/function () {
  function EditHandler(markupsExtension, markup) {var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};_classCallCheck(this, EditHandler);
    this.setGlobalManager(markupsExtension.globalManager);
    this.markupsExtension = markupsExtension;
    this.viewer = markupsExtension.viewer;
    this.markup = markup;
    this.options = options;
  }_createClass(EditHandler, [{ key: "getEditState", value: function getEditState()

    {
      return this.markup.getEditState();
    } }, { key: "setEditState", value: function setEditState(

    editState, changes) {
      this.markup.setEditState(editState, changes, this);
    } }, { key: "getAnchors", value: function getAnchors()

    {
      return this.getEditState().anchors;
    }

    // Use updateEditState whenever there are changes you want to update in the markup's edit state.
  }, { key: "updateEditState", value: function updateEditState(changes) {
      this.setEditState(this.getEditState(), changes);
    }

    // Use updateEditStateAnchors whenever there are changes you want to update in the markup's edit state's anchors.
  }, { key: "updateEditStateAnchors", value: function updateEditStateAnchors() {var anchors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getEditState().anchors;
      this.updateEditState({ anchors: anchors });
    } }, { key: "handleCompensation", value: function handleCompensation()

    {
      if (!this.markup.layer) {
        return;
      }

      // Move anchors so center stays same as before. Add translation to offset to new center
      var anchors = this.markup.getAnchors();

      if (!this.prevCenter) {
        this.prevCenter = this.markup.center.clone();
      }

      var translation = this.markup.center.clone().sub(this.prevCenter);
      anchors.forEach(function (anchor) {
        anchor.sub(translation);
      });

      // Add scale/rotation to new offset
      translation.applyMatrix4(this.markup.scaleMatrix);
      var rotation = this.markup.getRotation();
      if (rotation !== 0) {
        var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(translation, rotation, new THREE.Vector3(), eyeDirection);
      }
      translation.add(this.markup.editState.translation);

      this.updateEditState({ anchors: anchors, translation: translation });

      this.prevCenter.copy(this.markup.center);
    }

    // Use submitChanges to update the markup with the recent changes of the edit handler.
    // Using this will change the history of the markups, and will add an undo / redo actions.
    // Use it only after you committed changes to the editState, using updateEditState.
    // isDuringEdit: set to true when we don't want to update the UI after submitting changes.
    //              Useful when many changes are submitted together which can slow down the UI.
  }, { key: "submitChanges", value: function submitChanges(isDuringEdit) {
      var action;

      var isNewMarkup = !this.markup.layer;

      if (isNewMarkup) {
        var layer = this.markupsExtension.markupsManager.getActiveLayer();

        this.markup.syncState();
        action = new _Actions_AddMarkupAction__WEBPACK_IMPORTED_MODULE_2__["default"](this.markupsExtension.markupsManager, this.markup, layer);
      } else {
        if (this.markup.belongsToGroup()) {
          this.submitGroupUpdate(isDuringEdit);
          return;
        } else {
          action = new _Actions_UpdateMarkupAction__WEBPACK_IMPORTED_MODULE_3__["default"](this.markupsExtension.markupsManager, this.markup, this.getEditState());
        }
      }
      action.isDuringEdit = isDuringEdit;
      action.execute();
    } }, { key: "submitGroupUpdate", value: function submitGroupUpdate(

    isDuringEdit) {var _this = this;
      var markups = this.markup.markupGroup.markups;

      var isGroupOpen = this.markupsExtension.markupsManager.isActionGroupOpen();

      if (!isGroupOpen) {
        this.markupsExtension.markupsManager.openActionGroup();
      }

      markups.forEach(function (markup, i) {
        var action = new _Actions_UpdateMarkupAction__WEBPACK_IMPORTED_MODULE_3__["default"](_this.markupsExtension.markupsManager, markup, markup.getEditState());
        action.isDuringEdit = i < markups.length - 1 ? true : isDuringEdit;
        action.execute();
      });

      if (!isGroupOpen) {
        this.markupsExtension.markupsManager.closeActionGroup();
      }
    } }, { key: "deleteMarkup", value: function deleteMarkup()

    {
      var action = new _Actions_DeleteMarkupAction__WEBPACK_IMPORTED_MODULE_4__["default"](this.markupsExtension.markupsManager, this.markup);
      action.execute();
    } }, { key: "changeStyleProperty", value: function changeStyleProperty(

    key, value, dontSubmit) {
      var editState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.getEditState());
      editState.style[key] = value;

      this.updateEditState({ style: Object.assign({}, editState.style) });

      if (!dontSubmit) {
        this.submitChanges(true);
        this.editEnd(true);
      }
    } }, { key: "snapPointToAxis", value: function snapPointToAxis(

    point, previousPoint, degrees) {var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["isEqualVectors"])(point, previousPoint)) {
        return;
      }

      var pointProjected = this.markupsExtension.renderer.worldToClient(point);
      var previousPointProjected = this.markupsExtension.renderer.worldToClient(previousPoint);

      var direction = pointProjected.clone().sub(previousPointProjected).normalize();

      var cameraAngle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].getSignedAngle(this.markupsExtension.renderer.absoluteUpVec, direction, this.markupsExtension.renderer.getCameraEyeVector());
      var angle = cameraAngle + _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(offset);
      var snap = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(degrees);
      var newAngle = Math.ceil((angle - _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(degrees / 2)) / snap) * snap;
      var eyeDirection = new THREE.Vector3(0, 0, -1);
      var rotatedPoint = pointProjected.clone();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(rotatedPoint, newAngle - angle, previousPointProjected, eyeDirection);

      var axis = rotatedPoint.clone().sub(previousPointProjected).normalize();
      var length = pointProjected.clone().sub(previousPointProjected).dot(axis);
      var newPoint = previousPointProjected.add(axis.multiplyScalar(length));

      point.copy(this.markupsExtension.renderer.clientToWorld(newPoint));
    } }, { key: "getSnappedPosition", value: function getSnappedPosition()

    {
      if (this.markupsExtension.markupsTool.isSnappingAllowed()) {
        return this.markupsExtension.markupsTool.getSnappedPosition();
      } else {
        return this.markupsExtension.markupsTool.lastMousePos;
      }
    } }, { key: "didMouseMove", value: function didMouseMove()

    {
      return this.markupsExtension.markupsTool.mouseMoved;
    } }, { key: "getTouchRadiusWorld", value: function getTouchRadiusWorld()

    {
      return this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["TOUCH_RADIUS"]);
    } }, { key: "getMinChangeDistanceWorld", value: function getMinChangeDistanceWorld()

    {
      return this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["MIN_CHANGE_DISTANCE"]);
    } }, { key: "snapDistance", value: function snapDistance()

    {
      return this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["SNAP_DISTANCE"]);
    } }, { key: "intersect", value: function intersect(

    point) {
      return null;
    }

    // Default creation cursor.
  }, { key: "getCursor", value: function getCursor() {
      return 'crosshair';
    } }, { key: "isDragging", value: function isDragging()

    {
      return false;
    } }, { key: "editStart", value: function editStart()

    {
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_START, markup: this.markup, handler: this });
    }

    // See submitChanges above for isDuringEdit usage
  }, { key: "editEnd", value: function editEnd(isDuringEdit) {
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_END, markup: this.markup, isDuringEdit: isDuringEdit, handler: this });
    } }, { key: "isSamePoint", value: function isSamePoint(

    p1, p2) {
      return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["isEqualVectors"])(p1, p2, this.getMinChangeDistanceWorld());
    } }, { key: "isSamePointClient", value: function isSamePointClient(

    p1, p2) {
      return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["isEqualVectors"])(p1, p2, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["MIN_CHANGE_DISTANCE"]);
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    event, button) {
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    event, button) {
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    event) {
    } }, { key: "handleGesture", value: function handleGesture(

    event) {
    } }, { key: "handleResize", value: function handleResize()

    {
    } }, { key: "destroy", value: function destroy()

    {
      this.markupsExtension = null;
      this.viewer = null;
      this.markup = null;
    } }]);return EditHandler;}();


av.GlobalManagerMixin.call(EditHandler.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/RectSelector.js":
/*!************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/RectSelector.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RectSelector; });
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

RectSelector = /*#__PURE__*/function (_EditHandler) {_inherits(RectSelector, _EditHandler);var _super = _createSuper(RectSelector);
  function RectSelector(markupsExtension) {var _this;var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};_classCallCheck(this, RectSelector);
    _this = _super.call(this, markupsExtension, null, options);

    _this.bounds = new THREE.Box3();
    _this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, _this.clean.bind(_assertThisInitialized(_this)));return _this;
  }_createClass(RectSelector, [{ key: "handleMouseMove", value: function handleMouseMove(

    point) {var _this2 = this;
      if (this.buttonDownPoint && this.markupsExtension.markupsTool.dragging && this.didMouseMove()) {
        this.bounds.makeEmpty();

        // Ignore difference in z coordinate.
        this.bounds.expandByVector(new THREE.Vector3(0, 0, Infinity));

        this.bounds.expandByPoint(point);
        this.bounds.expandByPoint(this.buttonDownPoint);

        var selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(function (m) {return !m.isSelected();});

        selectableMarkups.forEach(function (markup) {
          var markupBounds = markup.getWorldBoundingBox(true);

          if (_this2.bounds.isIntersectionBox(markupBounds)) {
            markup.setHover(true);
          }
        });

        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].RECT_SELECTOR_UPDATED, bounds: this.bounds });
        return true;
      }

      return false;
    } }, { key: "clean", value: function clean()

    {
      this.buttonDownPoint = null;
      this.bounds.makeEmpty();
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].RECT_SELECTOR_UPDATED, bounds: this.bounds });
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      this.clean();
      this.buttonDownPoint = point;
      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      var selected = false;

      this.selectMarkups();

      this.clean();

      return selected;
    } }, { key: "selectMarkups", value: function selectMarkups()

    {var _this3 = this;
      if (!this.markupsExtension.markupsTool.shiftDown) {
        this.markupsExtension.markupsManager.deselectAllMarkups();
      }

      var selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(function (m) {return !m.isSelected();});

      selectableMarkups.forEach(function (markup) {
        var markupBounds = markup.getWorldBoundingBox(true);
        if (_this3.bounds.isIntersectionBox(markupBounds)) {
          markup.select();
        }
      });
    } }]);return RectSelector;}(_EditHandler__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/RotationHandler.js":
/*!***************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/RotationHandler.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RotationHandler; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

RotationHandler = /*#__PURE__*/function (_EditHandler) {_inherits(RotationHandler, _EditHandler);var _super = _createSuper(RotationHandler);function RotationHandler() {_classCallCheck(this, RotationHandler);return _super.apply(this, arguments);}_createClass(RotationHandler, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {
      if (this.rotating) {
        this.handleRotation(point);
      }

      return this.rotating;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.rotating) {
        this.rotating = this.intersect(point);

        if (this.rotating) {
          this.originalRotation = this.markup.getRotation();
          this.handleRotation(point);
          this.editStart();
        }
      }

      return this.rotating;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.rotating) {
        this.rotating = false;

        if (Math.abs(this.originalRotation - this.markup.getRotation()) < _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MIN_ANGLE_CHANGE"]) {
          this.cancelTransformEditing();
        } else {
          this.submitChanges();
          this.editEnd();
        }

        this.originalRotation = null;

        return true;
      }

      return false;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
        case Autodesk.Viewing.KeyCode.ESCAPE:
          if (this.rotating) {
            this.cancelTransformEditing();
            return true;
          }
          break;
        default:
          break;}


      return false;
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
      return false;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
      return this.rotating;
    } }, { key: "getCursor", value: function getCursor()

    {
      return 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjAgMCAyMCAyMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5tb3VzZSBjdXJzb3Ivcm90YXRlPC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBhdGggZD0iTTMsOCBMMSw4IEw0LDQgTDcsOCBMNSw4IEM1LDEwLjQ4NTI4MTQgNy41MTQ3MTg2MywxMyAxMCwxMyBDMTIuNDg1MjgxNCwxMyAxNSwxMC40ODUyODE0IDE1LDggTDEzLDggTDE2LDQgTDE5LDggTDE3LDggQzE3LDExLjU4OTg1MDkgMTMuNTg5ODUwOSwxNSAxMCwxNSBDNi40MTAxNDkxMywxNSAzLDExLjU4OTg1MDkgMyw4IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4gICAgICAgIDxmaWx0ZXIgeD0iLTMzLjMlIiB5PSItNjkuNyUiIHdpZHRoPSIxNjYuNyUiIGhlaWdodD0iMTk3LjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+ICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9Ii0yIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4gICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+ICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0ib3V0IiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb21wb3NpdGU+ICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuNSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICA8L2ZpbHRlcj4gICAgPC9kZWZzPiAgICA8ZyBpZD0ibW91c2UtY3Vyc29yL3JvdGF0ZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGwtcnVsZT0ibm9uemVybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAuMDAwMDAwLCA5LjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEwLjAwMDAwMCwgLTkuNTAwMDAwKSAiPiAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjEiIGQ9Ik0yLjUyMDExNDgzLDguNSBMMy40MjUyNjAwOGUtMTIsOC41IEw0LDMuMTY2NjY2NjcgTDgsOC41IEw1LjUzODA0MjA3LDguNSBDNS44NDQ5MzkyOCwxMC41NDE1MjMyIDcuOTU3NDAyMDYsMTIuNSAxMCwxMi41IEMxMi4wNDI1OTc5LDEyLjUgMTQuMTU1MDYwNywxMC41NDE1MjMyIDE0LjQ2MTk1NzksOC41IEwxMiw4LjUgTDE2LDMuMTY2NjY2NjcgTDIwLDguNSBMMTcuNDc5ODg1Miw4LjUgQzE3LjE4NTI0NywxMi4xNzM1MTU3IDEzLjY5ODgwMSwxNS41IDEwLDE1LjUgQzYuMzAxMTk5MDIsMTUuNSAyLjgxNDc1MzAzLDEyLjE3MzUxNTcgMi41MjAxMTQ4Myw4LjUgWiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJldmVub2RkIj48L3BhdGg+ICAgICAgICA8L2c+ICAgIDwvZz48L3N2Zz4=) 10 10, auto';
    } }, { key: "cancelTransformEditing", value: function cancelTransformEditing()

    {
      this.markup.syncEditState();

      this.rotating = false;
      this.editEnd();
    } }, { key: "handleRotation", value: function handleRotation(

    point) {
      var p = this.markupsExtension.renderer.worldToClient(point);
      var center = this.markup.getClientCenter();
      var vec = p.clone().sub(center).normalize();

      var angle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].getSignedAngle(vec, this.markupsExtension.renderer.getCameraUpVector(), this.markupsExtension.renderer.getCameraEyeVector());

      if (this.markupsExtension.markupsTool.shiftDown) {
        var snap = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"]);
        angle = Math.ceil((angle - _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_SNAP_DEGREES"] / 2)) / snap) * snap;
      }

      this.updateEditState({ rotation: angle });
    } }, { key: "getRotationAnchor", value: function getRotationAnchor()

    {
      var boundingBox = this.markup.getClientBoundingBox(true);
      var vec = boundingBox.center().add(new THREE.Vector3(0, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ROTATION_ANCHOR_DISTANCE"] + boundingBox.size().y / 2, 0));
      var pivot = boundingBox.center();
      var rotation = this.markup.getRotation() + this.markupsExtension.renderer.getCameraRotation();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(vec, rotation, pivot, this.markupsExtension.renderer.absoluteEyeVec);
      return vec;
    } }, { key: "intersect", value: function intersect(

    point) {
      point = point.clone();
      var p = this.markupsExtension.renderer.worldToClient(point);

      var rotationAnchor = this.getRotationAnchor();

      return rotationAnchor.distanceTo(p) <= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["TOUCH_RADIUS"];
    } }, { key: "isDragging", value: function isDragging()

    {
      return this.rotating;
    } }]);return RotationHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/ScaleHandler.js":
/*!************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/ScaleHandler.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ScaleHandler; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}


var

ScaleHandler = /*#__PURE__*/function (_EditHandler) {_inherits(ScaleHandler, _EditHandler);var _super = _createSuper(ScaleHandler);function ScaleHandler() {_classCallCheck(this, ScaleHandler);return _super.apply(this, arguments);}_createClass(ScaleHandler, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {
      if (this.scaling) {
        var p = point.clone();
        this.markup.applyInverseRotation(p);
        this.markup.applyInverseCameraRotation(p);

        this.handleScaling(p);
      }

      return this.scaling;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.scaling) {
        this.scaleAnchor = this.intersect(point);
        this.scaling = !!this.scaleAnchor;

        if (this.scaling) {
          this.originalPoint = point.clone();
          this.editStart();
        }
      }

      return this.scaling;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.scaling) {
        this.scaleAnchor = null;
        this.scaling = false;

        if (this.isSamePoint(point, this.originalPoint)) {
          this.cancelTransformEditing();
        } else {
          this.submitChanges();
          this.editEnd();
        }

        return true;
      }

      return false;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
        case Autodesk.Viewing.KeyCode.ESCAPE:
          if (this.scaling) {
            this.cancelTransformEditing();
            return true;
          }
          break;
        default:
          break;}


      return false;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
      return this.scaling;
    } }, { key: "getCursor", value: function getCursor()

    {
      if (this.cursor && this.scaling) {
        return this.cursor;
      }

      var p = this.markup.getClientCenter();

      var direction = this.lastIntersectPoint.clone().sub(p).normalize();
      var rightVec = new THREE.Vector3(1, 0, 0);
      var sign = this.lastIntersectPoint.y < p.y ? 1 : -1;
      var angle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].radiansToDegrees(direction.angleTo(rightVec)) * sign;
      var newAngle = Math.ceil((angle - 22.5) / 45) * 45;

      this.cursor = null;

      switch (newAngle) {
        case 180:
        case -180:
        case 0:
          this.cursor = 'ew-resize';
          break;
        case 90:
        case -90:
          this.cursor = 'ns-resize';
          break;
        case 135:
        case -45:
          this.cursor = 'nwse-resize';
          break;
        case -135:
        case 45:
          this.cursor = 'nesw-resize';
          break;
        default:}


      return this.cursor;
    } }, { key: "cancelTransformEditing", value: function cancelTransformEditing()

    {
      this.markup.syncEditState();
      this.scaleAnchor = null;
      this.scaling = false;
      this.editEnd();
    } }, { key: "handleScaling", value: function handleScaling(

    point) {var _this = this;
      var pointProjected = this.markupsExtension.renderer.worldToClient(point);

      this.originalBoundingBox = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());

      this.scaleAnchor.axisList.forEach(function (axis) {
        var currentAnchorPos = _this.getAnchorPosByAxisList([axis], false);
        var pointWithoutMargin = pointProjected.clone().sub(axis.clone().multiplyScalar(_this.markup.getMarginSize()));
        _this.resize(pointWithoutMargin, currentAnchorPos, axis);
      });

      this.updateTranslation();
    } }, { key: "updateTranslation", value: function updateTranslation()

    {
      var axisSummed = this.scaleAnchor.axisList.reduce(function (acc, current) {
        return acc.clone().add(current);
      });

      var newBoundingBox = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());

      var diffVector = newBoundingBox.size().sub(this.originalBoundingBox.size()).multiply(axisSummed).multiplyScalar(0.5);
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(diffVector, this.markup.getRotation(), new THREE.Vector3(), eyeDirection);
      var translation = diffVector.add(this.markup.editState.translation);

      this.updateEditState({ translation: translation });

      this.originalBoundingBox = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());
    } }, { key: "resize", value: function resize(

    point, currentAnchorPos, axis, deep) {
      var p2 = currentAnchorPos.clone().add(axis);
      var newAnchorPos = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__["nearestPointInPointToLine"])(point, currentAnchorPos, p2);

      var boundingBox = this.markup.getClientBoundingBox(false);
      var oppositeAnchor = this.getOppositePoint(currentAnchorPos, boundingBox);
      var distanceVector = newAnchorPos.clone().sub(oppositeAnchor);
      var lengthVector = axis.clone().multiply(distanceVector);

      var currentLength = boundingBox.size().multiply(axis).length();
      var newLength = distanceVector.length();

      // Don't let markup's size be smaller than the bounding box
      if (!deep && newLength < this.markup.getMinimumSize()) {
        return;
      }

      // // Flip to other side.
      if (!deep && lengthVector.x + lengthVector.y < 0) {
        var flipPoint = oppositeAnchor.clone().add(axis);
        this.resize(flipPoint, currentAnchorPos, axis, true);
        this.updateTranslation();
        axis.negate();
        this.applyReflection(axis);
        this.resize(point, flipPoint, axis, true);
        return;
      }

      var scaleRatio = newLength / currentLength - 1;

      var axisMask = this.markupsExtension.markupsTool.shiftDown ? new THREE.Vector3(1, 1, 0) : new THREE.Vector3(Math.abs(axis.x), Math.abs(axis.y), Math.abs(axis.z));
      var scaleVector = axisMask.clone().multiplyScalar(scaleRatio).addScalar(1);

      var scaleAbs = scaleVector.clone().multiply(this.markup.editState.scale);

      this.updateEditState({ scale: scaleAbs });
    } }, { key: "intersect", value: function intersect(

    point) {
      var scaleAnchors = this.getScaleAnchors();
      var p = point.clone();
      this.markup.applyInverseRotation(p);
      this.markup.applyInverseCameraRotation(p);

      var pProjected = this.markupsExtension.renderer.worldToClient(p);
      this.lastIntersectPoint = pProjected;

      return scaleAnchors.find(function (anc) {
        return anc.pos.distanceTo(pProjected) <= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["TOUCH_RADIUS"];
      });
    } }, { key: "isDragging", value: function isDragging()

    {
      return this.scaling;
    } }, { key: "getOppositePoint", value: function getOppositePoint(

    point, boundingBox) {
      var center = boundingBox.center();
      var pointToCenterDistance = point.clone().distanceTo(center);
      var pointToCenterDirection = point.clone().sub(center).normalize();
      return point.clone().sub(pointToCenterDirection.multiplyScalar(pointToCenterDistance * 2));
    } }, { key: "applyReflection", value: function applyReflection(

    axis) {
      var v = new THREE.Vector3(1, 1, 1).sub(axis.clone().multiply(axis).multiplyScalar(2));
      var scale = this.markup.editState.scale.clone();
      scale.multiply(v);
      this.updateEditState({ scale: scale });
    }

    /**
       *
       * Scale Anchors
       *
      */ }, { key: "getScaleAnchors", value: function getScaleAnchors()

    {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors;
      if (anchors.length < 2) {
        return [];
      }

      if (this.options.onlyHorizontal) {
        return [
        this.getEastAnchor(), this.getWestAnchor()];

      } else {
        return [
        this.getEastAnchor(), this.getWestAnchor(), this.getNorthAnchor(), this.getSouthAnchor(),
        this.getNorthWestAnchor(), this.getSouthWestAnchor(), this.getNorthEastAnchor(), this.getSouthEastAnchor()];

      }
    } }, { key: "getAnchorPosByAxisList", value: function getAnchorPosByAxisList(

    axisList, withMargin) {
      var boundingBox = this.markup.getClientBoundingBox(withMargin);
      var pos = boundingBox.center();

      axisList.forEach(function (axis) {
        var corner = axis.clone().multiply(boundingBox.size().multiplyScalar(0.5));
        pos.add(corner);
      });

      return pos;
    } }, { key: "getAnchor", value: function getAnchor(

    axisList, id) {
      var pos = this.getAnchorPosByAxisList(axisList, !this.markup.belongsToGroup());

      return {
        pos: pos, axisList: axisList, id: id };

    } }, { key: "getNorthAnchor", value: function getNorthAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, 1, 0)], 'n');
    } }, { key: "getSouthAnchor", value: function getSouthAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, -1, 0)], 's');
    } }, { key: "getEastAnchor", value: function getEastAnchor()

    {
      return this.getAnchor([new THREE.Vector3(1, 0, 0)], 'e');
    } }, { key: "getWestAnchor", value: function getWestAnchor()

    {
      return this.getAnchor([new THREE.Vector3(-1, 0, 0)], 'w');
    } }, { key: "getNorthWestAnchor", value: function getNorthWestAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, 1, 0), new THREE.Vector3(-1, 0, 0)], 'nw');
    } }, { key: "getSouthWestAnchor", value: function getSouthWestAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, -1, 0), new THREE.Vector3(-1, 0, 0)], 'sw');
    } }, { key: "getNorthEastAnchor", value: function getNorthEastAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, 1, 0), new THREE.Vector3(1, 0, 0)], 'ne');
    } }, { key: "getSouthEastAnchor", value: function getSouthEastAnchor()

    {
      return this.getAnchor([new THREE.Vector3(0, -1, 0), new THREE.Vector3(1, 0, 0)], 'se');
    } }]);return ScaleHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/SelectionHandler.js":
/*!****************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/SelectionHandler.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectionHandler; });
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

SelectionHandler = /*#__PURE__*/function (_EditHandler) {_inherits(SelectionHandler, _EditHandler);var _super = _createSuper(SelectionHandler);function SelectionHandler() {_classCallCheck(this, SelectionHandler);return _super.apply(this, arguments);}_createClass(SelectionHandler, [{ key: "getCursor", value: function getCursor()
    {
      return 'pointer';
    } }, { key: "intersect", value: function intersect(

    point) {
      return this.markup.intersect(point);
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    point) {
      if (this.markupsExtension.markupsTool.dragging || Autodesk.Viewing.isMobileDevice()) {
        return false;
      }

      var intersected = this.markup.intersect(point);

      if (intersected) {
        if (this.markup.layer === this.markupsExtension.markupsManager.getActiveLayer()) {
          this.markup.setHover(true);
        } else {
          this.markup.layer.setHover(true);
        }
      }

      return intersected;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    point, button) {
      if (this.didMouseMove()) {
        return false;
      }

      if (this.markup.intersect(point)) {
        if (!this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markup.layer !== this.markupsExtension.markupsManager.getActiveLayer()) {
          this.markupsExtension.markupsManager.editLayer(this.markup.layer, false, false, false);
        }

        if (!this.markupsExtension.markupsTool.shiftDown && !this.markupsExtension.markupsTool.ctrlDown) {
          this.markupsExtension.markupsManager.deselectAllMarkups([this.markup]);
        }

        this.markup.select();

        return true;
      }

      return false;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      return false;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.didMouseMove()) {
        return false;
      }

      if (this.markup.intersect(point)) {
        this.markupsExtension.markupsManager.deselectAllLayers([this.markup.layer]);
        this.markupsExtension.markupsManager.selectLayer(this.markup.layer, false, false);

        if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
          if (!this.markupsExtension.markupsTool.shiftDown && !this.markupsExtension.markupsTool.ctrlDown) {
            this.markupsExtension.markupsManager.deselectAllMarkups([this.markup]);
          }

          this.markup.select();
        }

        return true;
      }

      return false;
    } }]);return SelectionHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/TextInputHandler.js":
/*!****************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/TextInputHandler.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TextInputHandler; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/ActionManager/ActionManager */ "./extensions/BimMarkups/Utils/ActionManager/ActionManager.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _ThirdParty_textarea_caret_textarea_caret__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ThirdParty/textarea-caret/textarea-caret */ "./extensions/BimMarkups/ThirdParty/textarea-caret/textarea-caret.js");
/* harmony import */ var _ThirdParty_textarea_caret_textarea_caret__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_ThirdParty_textarea_caret_textarea_caret__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _EditHandlers_RotationHandler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../EditHandlers/RotationHandler */ "./extensions/BimMarkups/EditHandlers/RotationHandler.js");
/* harmony import */ var _thirdparty_mouse_event_polyfill_MouseEventPolyfill__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../thirdparty/mouse-event-polyfill/MouseEventPolyfill */ "./thirdparty/mouse-event-polyfill/MouseEventPolyfill.js");
/* harmony import */ var _thirdparty_mouse_event_polyfill_MouseEventPolyfill__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_thirdparty_mouse_event_polyfill_MouseEventPolyfill__WEBPACK_IMPORTED_MODULE_9__);
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}








var


TextInputHandler = /*#__PURE__*/function (_EditHandler) {_inherits(TextInputHandler, _EditHandler);var _super = _createSuper(TextInputHandler);
  function TextInputHandler(markupsExtension, markup, options) {var _this;_classCallCheck(this, TextInputHandler);
    _this = _super.call(this, markupsExtension, markup, options);

    _this.textboxActive = false;
    _this.submitChangesDebounced = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_2__["default"].debounce(_this.options.submitChanges || _this.submitChanges, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["TEXT_DEBOUNCE"]);

    // Relevent for iOS only. Look at the methods at the end of this file.
    if (Autodesk.Viewing.isIOSDevice()) {
      _this.onMarkupEditEnabledBinded = _this.onMarkupEditEnabled.bind(_assertThisInitialized(_this));
      _this.onMarkupEditDisabledBinded = _this.onMarkupEditDisabled.bind(_assertThisInitialized(_this));
      _this.onMarkupEditStartBinded = _this.onMarkupEditStart.bind(_assertThisInitialized(_this));
      _this.onMarkupEditEndBinded = _this.onMarkupEditEnd.bind(_assertThisInitialized(_this));
      _this.onTouchEndBinded = _this.onTouchEnd.bind(_assertThisInitialized(_this));
      _this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_ENABLE_EDIT, _this.onMarkupEditEnabledBinded);
      _this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_DISABLE_EDIT, _this.onMarkupEditDisabledBinded);
    }return _this;
  }_createClass(TextInputHandler, [{ key: "intersect", value: function intersect(

    point) {
      if (!this.markup.isTextMarkup()) {
        return false;
      }

      point = point.clone();
      this.markup.applyInverseRotation(point);
      this.markup.applyInverseCameraRotation(point);
      var p = this.markupsExtension.renderer.worldToClient(point);
      var boundingBox = this.markup.getClientBoundingBox(true);
      return boundingBox.containsPoint(p);
    } }, { key: "updateCaretPosition", value: function updateCaretPosition()

    {
      var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);
      var pos = this.getUpdatedCaretPosition(label);
      if (pos.start !== 0 || pos.end !== 0) {
        this.lastCaretPosition = pos;
      }
    } }, { key: "getCursor", value: function getCursor()

    {
      return 'pointer';
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    point, button) {
      if (Autodesk.Viewing.isIOSDevice()) {
        return false;
      }

      if (this.intersect(point)) {
        var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);
        this.lastCaretPosition = { start: label.innerText.length, end: label.innerText.length };
        this.startTextEditing();
        return true;
      }
      return false;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point) {
      if (this.textboxActive) {
        this.submitChangesDebounced.flush();
        this.endTextEditing();
        return true;
      }
      return this.isEmpty();
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point) {
      if (this.isEmpty()) {
        this.onEmptyTextMarkup();
        return true;
      }

      return false;
    } }, { key: "isEmpty", value: function isEmpty()

    {
      return this.markup.editState.text.trim() === '';
    } }, { key: "onEmptyTextMarkup", value: function onEmptyTextMarkup()

    {
      if (this.options.onEmptyTextMarkup) {
        this.textboxActive = false;
        this.options.onEmptyTextMarkup();
      } else {
        this.deleteEmptyTextMarkup();
      }
    } }, { key: "deleteEmptyTextMarkup", value: function deleteEmptyTextMarkup()

    {
      this.textboxActive = false;
      this.markupsExtension.markupsManager.actionManager.undo();
      this.markupsExtension.markupsManager.deleteMarkup(this.markup);
    } }, { key: "onCameraChanged", value: function onCameraChanged(

    e) {
      var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);
      label.focus();
    } }, { key: "startTextEditing", value: function startTextEditing(

    markText) {var _this2 = this;

      var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);
      this.label = label;
      if (!label) {
        return;
      }

      this.textboxActive = true;

      // changing position to 'fixed' solves the 'out of screen' text expansion, but cause the text be visible on top of other element.
      label.style.position = 'fixed';

      label.setAttribute('contenteditable', true);
      label.style.webkitUserSelect = 'text';
      label.style.userSelect = 'text';
      label.style.pointerEvents = 'auto';
      label.setAttribute('spellcheck', false);
      this.setCaretPosition(label);

      label.blur();
      label.focus();

      var _document = this.getDocument();
      if (markText) {
        _document.execCommand('selectAll', false, null);
      }

      this.onCameraChanged = function () {
        // When the div is outside of canvas, Safari doesn't fire events unless it's focused.
        label.focus();
      };

      var isSafari = Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice();

      this.onCameraChangedDebounced = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_2__["default"].debounce(this.onCameraChanged, 5);

      if (isSafari) {
        this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedDebounced);
      }

      this.onKeyDown = function (e) {
        label.focus();

        var labelBounds = label.getBoundingClientRect();
        var canvasBounds = _this2.markupsExtension.viewer.impl.getCanvasBoundingClientRect();
        var style = _this2.markup.getTextStyle();
        var spareSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getTextSize"])('AA', style);
        var fontToWorldScale = _this2.markupsExtension.renderer.getFontToWorldScale();
        var fontToClient = _this2.markupsExtension.renderer.sizeFromWorldToClient(fontToWorldScale);
        var canvasMargin = 30;

        var isCaretOverBottomEdge = function isCaretOverBottomEdge() {
          return labelBounds.bottom + spareSize.height * fontToClient > canvasBounds.bottom - canvasMargin;
        };

        var isCaretOverRightEdge = function isCaretOverRightEdge() {
          var caretPosition = _this2.getUpdatedCaretPosition(label);
          var _window = _this2.getWindow();
          var div = _window.getSelection().anchorNode.parentElement;
          div.value = div.innerText;
          var caretRelativeClientPosition = _ThirdParty_textarea_caret_textarea_caret__WEBPACK_IMPORTED_MODULE_3___default()(div, caretPosition.end);

          return labelBounds.left + (caretRelativeClientPosition.left + spareSize.width * fontToClient) > canvasBounds.right - canvasMargin;
        };

        var _window = _this2.getWindow();
        switch (e.keyCode) {
          case Autodesk.Viewing.KeyCode.ESCAPE:
            _this2.submitChangesDebounced.flush();
            _this2.endTextEditing();
            _this2.textboxActive = true;
            break;

          case Autodesk.Viewing.KeyCode.ENTER:
            // Prevent text caret to be out of screen in Safari
            if (isSafari && isCaretOverBottomEdge()) {
              e.preventDefault();
            } else if (_this2.options.singleLine) {
              e.preventDefault();
              // Preventing multiple BRs in a row, because of browser bug that adds extra spaces.
            } else if (_window.getSelection().anchorNode.firstChild && _window.getSelection().anchorNode.firstChild.tagName === 'BR' || _window.getSelection().anchorOffset === 0) {
              e.preventDefault();
              if (Autodesk.Viewing.isIE11) {
                _this2.enterPressed = true; // workaround for double enter click;
              }
            } else {
              _this2.enterPressed = true;
            }
            break;

          case Autodesk.Viewing.KeyCode.BACKSPACE:
            _this2.backspacePressed = true;
            break;

          default:
            if (isSafari) {
              // Prevent text caret to be out of screen in Safari
              if (isCaretOverRightEdge()) {
                if (isCaretOverBottomEdge() || _this2.options.singleLine) {
                  // Reached the bottom edge of the canvas. No more space to write.
                  e.preventDefault();
                } else if (labelBounds.right < canvasBounds.right) {
                  // Add a new line and continue writing.
                  _this2.addNewline = true;
                } else {
                  // Label is already out of canvas. Don't write anything.
                  e.preventDefault();
                }
              } else if (isCaretOverBottomEdge()) {
                // Reached the bottom edge of the canvas. No more space to write.
                e.preventDefault();
              }
            }}


        // Text limitation.
        var caretLength = _this2.lastCaretPosition.end - _this2.lastCaretPosition.start;
        if (!e.metaKey && e.keyCode > 47 && label.innerText.length - caretLength > _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["TEXT_LENGTH_LIMIT"]) {
          e.preventDefault();
        }

        if (Autodesk.Viewing.isIE11) {
          _this2.onInput(true);
        }
      };

      this.onKeyUp = function () {
        _this2.onInput(true);
      };

      this.onInput = function (isKeyUpEvent) {
        if (!label.innerText) {
          label.innerText = Autodesk.Viewing.isIE11 ? " " : String.fromCharCode(10);
        }

        _this2.lastCaretPosition = _this2.getUpdatedCaretPosition(label);

        var text = label.innerText;

        if (_this2.addNewline) {
          text = text + "\r\n";
        }

        if (Autodesk.Viewing.isIE11 && isKeyUpEvent === true) {
          //IE innerText creates \r\n\r\n after a <p> tag element, replacing it with single break line.
          //also handles case when pressing enter in middle of content - 2+ occurrences 
          text = text.replace(/(\r\n){2,}/g, "\r\n");
          if (_this2.enterPressed) {
            //using keyup event instead of input, event is fired before content
            //is changed with enter key. This way we simulate it enter press.
            text = text + "\r\n\r\n";
          }
        }

        if (!_this2.options.singleLine) {
          _this2.expandBoundingBox(text);
        }

        _this2.updateEditState({ text: text });
        _this2.submitChangesDebounced();

        _this2.enterPressed = false;
        _this2.addNewline = false;
        _this2.backspacePressed = false;
      };

      this.onPaste = function (e) {
        // Paste the text without style.
        e.preventDefault();
        var _window = _this2.getWindow();
        var _document = _this2.getDocument();
        var text = e.clipboardData && e.clipboardData.getData('text') || _window.clipboardData && _window.clipboardData.getData && _window.clipboardData.getData('Text'); // window.clipboardData needed for IE
        if (text) {
          var caretLength = _this2.lastCaretPosition.end - _this2.lastCaretPosition.start;
          var limit = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_7__["TEXT_LENGTH_LIMIT"] + caretLength - label.innerText.length;

          if (text.length > limit) {
            // trim text and add ellipsis at the end.
            text = text.substr(0, limit) + "\u2026";
          }

          if (Autodesk.Viewing.isIE11) {
            var sel = _window.getSelection();
            var range = sel.getRangeAt(0);
            var frag = _document.createDocumentFragment();
            frag.appendChild(_document.createElement('br'));
            var span = _document.createElement('span');
            span.innerText = text;
            frag.appendChild(span);
            range.insertNode(frag);
            range.selectNodeContents(span);
            sel.removeAllRanges();
            sel.addRange(range);
            _document.execCommand('ms-endUndoUnit', false, null);
          } else {
            _document.execCommand('insertText', false, text);
          }
        }
      };

      this.onMouseWheel = function (e) {
        var newEvent = new MouseEvent(e.type, e);

        newEvent.wheelDelta = e.wheelDelta;
        newEvent.deltaY = e.deltaY;

        _this2.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);

        if (newEvent.defaultPrevented) {
          e.preventDefault();
        }
      };

      this.onDOMMouseScroll = function (e) {
        var newEvent = new MouseEvent(e.type, e);

        newEvent.wheelDelta = e.wheelDelta;
        newEvent.deltaY = e.deltaY;

        _this2.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);

        if (newEvent.defaultPrevented) {
          e.preventDefault();
        }
      };

      this.onMouseMove = function (e) {
        var newEvent = new MouseEvent(e.type, e);
        _this2.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);

        if (newEvent.defaultPrevented) {
          e.preventDefault();
        }
      };

      label.addEventListener('keydown', this.onKeyDown);
      label.addEventListener('keypress', this.onKeyPress);
      label.addEventListener('input', this.onInput);
      label.addEventListener('paste', this.onPaste);

      if (Autodesk.Viewing.isIE11) {
        label.addEventListener('keyup', this.onKeyUp);
      }

      label.addEventListener('mousewheel', this.onMouseWheel);
      label.addEventListener('DOMMouseScroll', this.onDOMMouseScroll); // Firefox
      label.addEventListener('mousemove', this.onMouseMove);
      label.addEventListener('mouseup', function () {
        setTimeout(function () {
          _this2.lastCaretPosition = _this2.getUpdatedCaretPosition(label);
        }, 25);
      });
      label.addEventListener('touchend', function () {
        setTimeout(function () {
          _this2.lastCaretPosition = _this2.getUpdatedCaretPosition(label);
        }, 25);
      });

      this.onHistoryChangedBinded = this.onHistoryChanged.bind(this);
      this.endTextEditingBinded = this.endTextEditing.bind(this);
      this.onStyleChangedBinded = this.onStyleChanged.bind(this);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_DISABLE_EDIT, this.endTextEditingBinded, { once: true });
      this.markupsExtension.markupsManager.addEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_STYLE_PROPERTY_CHANGED, this.onStyleChangedBinded);

      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].TEXT_EDITING_STARTED });
    } }, { key: "removeSelection", value: function removeSelection()

    {
      var _window = this.getWindow();
      _window.getSelection().removeAllRanges(); // deselect text.
      this.label.style.position = 'absolute';
      this.label.style.pointerEvents = 'none';
      this.label.setAttribute('contenteditable', false);
      this.label.style.webkitUserSelect = 'none';
      this.label.style.userSelect = 'none';
    } }, { key: "setCaretPosition", value: function setCaretPosition(

    label) {
      if (!this.lastCaretPosition) {
        this.lastCaretPosition = { start: 0, end: label.innerText.length };
      }
      var _window = this.getWindow();
      var _document = this.getDocument();
      var range = _document.createRange();
      var sel = _window.getSelection();
      var start = Math.min(this.lastCaretPosition.start, label.childNodes[0].length); // Clamp values
      var end = Math.min(this.lastCaretPosition.end, label.childNodes[0].length);
      range.setStart(label.childNodes[0], start);
      range.setEnd(label.childNodes[0], end);
      sel.removeAllRanges();
      sel.addRange(range);
    } }, { key: "getUpdatedCaretPosition", value: function getUpdatedCaretPosition(

    label) {
      var caretPos = { start: 0, end: 0 };
      var sel;
      var range;
      var _window = this.getWindow();
      if (_window.getSelection) {
        sel = _window.getSelection();
        if (sel.rangeCount) {
          range = sel.getRangeAt(0);
          if (range.commonAncestorContainer.parentNode === label) {
            caretPos = { start: range.startOffset, end: range.endOffset };
          } else if (range.commonAncestorContainer.parentNode.parentNode === label) {
            caretPos = { start: range.startOffset, end: range.endOffset };
          }
        }
      } else {
        caretPos = { start: label.innerText.length, end: label.innerText.length };
      }
      return caretPos;
    } }, { key: "onHistoryChanged", value: function onHistoryChanged(_ref)

    {var _this3 = this;var actionGroup = _ref.actionGroup;
      actionGroup.forEach(function (action) {
        if (action.trigger === _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].UNDO || action.trigger === _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].REDO) {
          if (_this3.markupsExtension.renderer && _this3.markupsExtension.renderer.textRenderer.getLabel(_this3.markup)) {
            _this3.endTextEditing();
          }
        }
      });
    } }, { key: "endTextEditing", value: function endTextEditing()

    {
      if (!this.textboxActive) {
        return;
      }

      if (!this.markupsExtension.renderer) {
        return;
      }

      var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);

      label.removeEventListener('keydown', this.onKeyDown);
      label.removeEventListener('input', this.onInput);
      label.removeEventListener('paste', this.onPaste);

      if (Autodesk.Viewing.isIE11) {
        label.removeEventListener('keyup', this.onKeyUp);
      }

      label.removeEventListener('mousewheel', this.onMouseWheel);
      label.removeEventListener('DOMMouseScroll', this.onDOMMouseScroll); // Firefox
      label.removeEventListener('mousemove', this.onMouseMove);

      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_DISABLE_EDIT, this.endTextEditingBinded);
      this.markupsExtension.markupsManager.removeEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_STYLE_PROPERTY_CHANGED, this.onStyleChangedBinded);
      this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedDebounced);

      var _window = this.getWindow();
      _window.getSelection().removeAllRanges(); // deselect text.
      label.style.position = 'absolute';
      label.style.pointerEvents = 'none';
      label.blur();
      label.setAttribute('contenteditable', false);
      label.style.webkitUserSelect = 'none';
      label.style.userSelect = 'none';

      this.textboxActive = false;

      if (this.isEmpty()) {
        this.onEmptyTextMarkup();
      } else {
        this.markup.syncEditState();
        this.editEnd();
      }

      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].TEXT_EDITING_ENDED });
    } }, { key: "onStyleChanged", value: function onStyleChanged()

    {
      if (this.textboxActive) {
        this.onCameraChanged();
      }
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      if (this.textboxActive && event.keyCode === Autodesk.Viewing.KeyCode.ESCAPE) {
        if (this.isEmpty()) {
          this.onEmptyTextMarkup();
        }

        this.textboxActive = false;
        return true;
      }

      return false;
    }

    // When typing text, instead of expanding the textbox height, we want to expand its width.
  }, { key: "expandBoundingBox", value: function expandBoundingBox(text) {var _this$getEditState =
      this.getEditState(),translation = _this$getEditState.translation,scale = _this$getEditState.scale;
      var style = this.markup.getTextStyle();

      var size = this.markup.getWorldBoundingBoxTextOnly().size();
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion
      var _this$markup$getTextW = this.markup.getTextWidthInFontScale(),width = _this$markup$getTextW.width;
      style.width = "".concat(width, "px");

      var oldSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getTextSize"])(this.markup.editState.text, style);
      var newSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getTextSize"])(text, style);

      if ((this.enterPressed || this.backspacePressed || this.addNewline) && newSize.height !== oldSize.height) {
        var offsetWorld = (newSize.height - oldSize.height) * fontToWorldScale;
        this.translateBoundingBox(offsetWorld);
        return;
      }

      if (newSize.height > oldSize.height) {
        style.width = null;
        var letterSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getTextSize"])('A', style).width;
        var offset = letterSize * fontToWorldScale;
        scale.multiply(new THREE.Vector3((size.x + offset) / size.x, 1, 1));

        var rotation = this.markup.getRotation();
        var delta = new THREE.Vector3(offset / 2, 0, 0);
        if (rotation !== 0) {
          var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
          _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(delta, rotation, new THREE.Vector3(), eyeDirection);
        }

        translation.add(delta);
        this.updateEditState({ scale: scale, translation: translation });
      }
    } }, { key: "translateBoundingBox", value: function translateBoundingBox(

    offsetWorld) {var _this$getEditState2 =
      this.getEditState(),translation = _this$getEditState2.translation;
      var delta = this.markup.getBoundingBoxVerticalTranslation(offsetWorld);

      translation.add(delta);
      this.updateEditState({ translation: translation });
    } }, { key: "destroy", value: function destroy()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_ENABLE_EDIT, this.onMarkupEditStartBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.onMarkupEditEndBinded);
    }

    /** 
       * These methods are being used only by iOS devices.
       * The reason is that iOS text input can't be focused programatically.
       * So, in order to select and edit the text area, we have to allow tapping on the div first.
       */ }, { key: "onMarkupEditEnabled", value: function onMarkupEditEnabled(
    event) {var _this4 = this;
      if (event.markup === this.markup) {
        if (!this.markupsExtension.markupsManager.hasEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.onMarkupEditStartBinded)) {
          this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.onMarkupEditStartBinded);
        }
        if (!this.markupsExtension.markupsManager.hasEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.onMarkupEditEndBinded)) {
          this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.onMarkupEditEndBinded);
        }

        setTimeout(function () {
          var label = _this4.markupsExtension.renderer.textRenderer.getLabel(_this4.markup);

          if (label) {
            label.addEventListener('touchend', _this4.onTouchEndBinded);
            label.style.pointerEvents = 'auto';
          }
        }, 10);
      }
    } }, { key: "onTouchEnd", value: function onTouchEnd(

    e) {
      e.preventDefault();
      e.stopPropagation();
      this.startTextEditing();
    } }, { key: "onMarkupEditDisabled", value: function onMarkupEditDisabled(

    event) {
      if (event.markup === this.markup) {
        var label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);

        if (label) {
          label.removeEventListener('touchend', this.onTouchEndBinded);
          label.style.pointerEvents = 'none';
        }
      }
    } }, { key: "onMarkupEditStart", value: function onMarkupEditStart(

    event) {
      if (this.textboxActive) {
        this.textboxWasActive = true;
      }
      if (event.markup === this.markup && event.handler instanceof _EditHandlers_RotationHandler__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        this.removeSelection();
      }
    } }, { key: "onMarkupEditEnd", value: function onMarkupEditEnd(

    event) {
      if (event.handler instanceof TextInputHandler) {
        return;
      }
      if (event.markup === this.markup && this.textboxWasActive && event.handler instanceof _EditHandlers_RotationHandler__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        this.textboxWasActive = false;
        this.startTextEditing();
      }
    } }]);return TextInputHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_4__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/EditHandlers/TranslationHandler.js":
/*!******************************************************************!*\
  !*** ./extensions/BimMarkups/EditHandlers/TranslationHandler.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TranslationHandler; });
/* harmony import */ var _EditHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditHandler */ "./extensions/BimMarkups/EditHandlers/EditHandler.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

TranslationHandler = /*#__PURE__*/function (_EditHandler) {_inherits(TranslationHandler, _EditHandler);var _super = _createSuper(TranslationHandler);
  function TranslationHandler(markupsExtension, markup) {var _this;var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};_classCallCheck(this, TranslationHandler);
    _this = _super.call(this, markupsExtension, markup, options);

    _this.keyTranslation = new THREE.Vector3();return _this;
  }_createClass(TranslationHandler, [{ key: "handleMouseMove", value: function handleMouseMove(

    point) {
      if (this.translating) {
        this.handleMouseTranslation(point);
      }

      return this.translating;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.translating) {
        this.translating = this.intersect(point);

        if (this.translating) {
          this.lastTranslationPoint = point;
          this.buttonDownPos = point;
          this.editStart();
        }

        return this.translating;
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.translating) {
        var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();

        this.markupsExtension.markupsManager.openActionGroup();
        var consumed;

        if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isEqualVectors"])(point, this.lastTranslationPoint, this.getMinChangeDistanceWorld())) {
          this.cancelTransformEditing();
          consumed = false;
        } else {
          // submit translation for all in-edit markups.
          inEditMarkups.forEach(function (markup, i) {
            if (markup.translationHandler) {
              markup.translationHandler.submitChanges(i < inEditMarkups.length - 1);
            }
          });

          this.editEnd();
          consumed = true;
        }

        this.markupsExtension.markupsManager.closeActionGroup();

        this.translating = false;
        this.lastTranslationPoint = null;

        return consumed;
      }

      return false;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.BACKSPACE:
        case Autodesk.Viewing.KeyCode.DELETE:
        case Autodesk.Viewing.KeyCode.ESCAPE:
          if (this.translating) {
            this.cancelTransformEditing();
            return true;
          }
          break;
        case Autodesk.Viewing.KeyCode.UP:
          this.handleKeyTranslation(this.markupsExtension.renderer.getCameraUpVector());
          return true;
        case Autodesk.Viewing.KeyCode.DOWN:
          this.handleKeyTranslation(this.markupsExtension.renderer.getCameraUpVector().negate());
          return true;
        case Autodesk.Viewing.KeyCode.RIGHT:
          this.handleKeyTranslation(this.markupsExtension.renderer.getCameraRightVector());
          return true;
        case Autodesk.Viewing.KeyCode.LEFT:
          this.handleKeyTranslation(this.markupsExtension.renderer.getCameraRightVector().negate());
          return true;
        default:
          break;}


      return false;
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.UP:
        case Autodesk.Viewing.KeyCode.DOWN:
        case Autodesk.Viewing.KeyCode.RIGHT:
        case Autodesk.Viewing.KeyCode.LEFT:
          this.keyTranslation.set(0, 0, 0);
          this.submitChanges(event.isDuringEdit);
          return true;
        default:
          break;}


      return false;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
      return this.translating;
    } }, { key: "getCursor", value: function getCursor()

    {
      return 'move';
    } }, { key: "cancelTransformEditing", value: function cancelTransformEditing()

    {
      var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();

      inEditMarkups.forEach(function (markup) {
        markup.syncEditState();
      });

      this.translating = false;
      this.lastTranslationPoint = null;
      this.editEnd();
    } }, { key: "handleMouseTranslation", value: function handleMouseTranslation(















    point) {var _this2 = this;
      if (this.markupsExtension.markupsTool.shiftDown) {
        point = point.clone();
        this.snapPointToAxis(point, this.buttonDownPos, 90);
      }

      var translation = point.clone().sub(this.lastTranslationPoint);

      // Apply translation for all in-edit markups.
      var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();

      // Find if we are translating only one group and nothing else    
      if (TranslationHandler.hasOneGroupInEdit(inEditMarkups)) {
        // When translating only one group, apply the translation only to the currently selected markup, and let the other markups move
        // according to the group's constraints
        this.handleTranslation(this.markup, translation);
      } else {
        inEditMarkups.forEach(function (markup) {
          _this2.handleTranslation(markup, translation);
        });
      }
    } }, { key: "handleKeyTranslation", value: function handleKeyTranslation(

    direction) {
      var translation = direction.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ARROW_MOVE_OFFSET"]));
      this.keyTranslation.add(translation);
      this.handleTranslation(this.markup, this.keyTranslation);
    } }, { key: "handleTranslation", value: function handleTranslation(

    markup, translation) {
      if (markup.translationHandler) {
        var translationAbs = translation.clone().add(markup.state.translation);
        markup.translationHandler.updateEditState({ translation: translationAbs });
      }
    } }, { key: "intersect", value: function intersect(

    point) {
      return this.markup.intersect(point);
    } }, { key: "isDragging", value: function isDragging()

    {
      return this.translating;
    } }], [{ key: "hasOneGroupInEdit", value: function hasOneGroupInEdit(inEditMarkups) {var numGroups = 0,numNonGroupMarkups = 0;inEditMarkups.forEach(function (markup) {if (markup.isGroupMarkup()) {numGroups++;} else if (!markup.belongsToGroup()) {numNonGroupMarkups++;}});return numGroups === 1 && numNonGroupMarkups === 0;} }]);return TranslationHandler;}(_EditHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/FilterManager.js":
/*!************************************************!*\
  !*** ./extensions/BimMarkups/FilterManager.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return FilterManager; });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/index.js");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(date_fns__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Utils_ModelUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils/ModelUtils */ "./extensions/BimMarkups/Utils/ModelUtils.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}



var

FilterManager = /*#__PURE__*/function () {
  function FilterManager(markupsExtension, options) {_classCallCheck(this, FilterManager);
    this.markupsExtension = markupsExtension;
    this.options = options;
    this.filters = this.markupsExtension.cache.filters || this.getInitialFilters();
  }_createClass(FilterManager, [{ key: "getInitialFilters", value: function getInitialFilters()

    {
      return {
        createdByFilter: [],
        createdAtStartFilter: null,
        createdAtEndFilter: null,
        showPrivateFilter: true,
        showPublishedFilter: true,
        showArchivedFilter: false,
        toggleMarkupViewFilter: true };

    } }, { key: "updateFilters", value: function updateFilters(

    filters) {
      this.markupsExtension.cache.filters = this.filters = Object.assign({}, this.filters, filters);
      this.markupsExtension.loadLayers();
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].FILTER_CHANGED, filters: this.filters });
    } }, { key: "filterLayers", value: function filterLayers(

    layerList, filterForPanel) {var _this = this;
      if (!filterForPanel && this.filters.hideAllMarkups) {
        return [];
      }

      return layerList.filter(function (layer) {
        return (
          _this.filterByVersion(layer) &&
          _this.filterBySheet(layer, filterForPanel && _this.filters.toggleMarkupViewFilter) &&
          _this.filterByDate(layer) &&
          _this.filterPrivate(layer) &&
          _this.filterPublished(layer) &&
          _this.filterArchived(layer) &&
          _this.filterCreator(layer) &&
          _this.filterDeleted(layer));

      });
    } }, { key: "isDateInRange", value: function isDateInRange(

    dateTime, fromData, toData) {
      // Parse the date with a format, in order to ignore the exact hour of the creation.
      var dateFormat = 'MM/DD/YYYY';
      var date = Object(date_fns__WEBPACK_IMPORTED_MODULE_0__["format"])(dateTime, dateFormat);
      var fromDate = Object(date_fns__WEBPACK_IMPORTED_MODULE_0__["format"])(fromData, dateFormat);
      var toDate = Object(date_fns__WEBPACK_IMPORTED_MODULE_0__["format"])(toData, dateFormat);

      return Object(date_fns__WEBPACK_IMPORTED_MODULE_0__["isWithinRange"])(date, fromDate, toDate);
    } }, { key: "filterByDate", value: function filterByDate(

    layer) {
      if (this.filters.createdAtStartFilter && this.filters.createdAtEndFilter) {
        return this.isDateInRange(layer.metadata.created_at, this.filters.createdAtStartFilter, this.filters.createdAtEndFilter);
      }

      return true;
    } }, { key: "filterBySheet", value: function filterBySheet(

    layer, allSheets) {
      if (allSheets || !this.options.hasMultiSheet) {
        return true;
      }

      var sheetName = layer.metadata.markup_metadata && layer.metadata.markup_metadata.sheetName;

      return this.options.sheetName && sheetName ? Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__["isSheetNameEqual"])(this.options.sheetName, sheetName) : true;
    } }, { key: "filterDeleted", value: function filterDeleted(

    layer) {
      return layer.status !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["MARKUP_STATUS_DELETE_SUCCEED"];
    } }, { key: "filterPrivate", value: function filterPrivate(

    layer) {
      return this.filters.showPrivateFilter || layer.metadata.status !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["MARKUP_STATUS_PRIVATE"];
    } }, { key: "filterPublished", value: function filterPublished(

    layer) {
      return this.filters.showPublishedFilter || layer.metadata.status !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["MARKUP_STATUS_PUBLISHED"];
    } }, { key: "filterArchived", value: function filterArchived(

    layer) {
      return this.filters.showArchivedFilter || layer.metadata.status !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["MARKUP_STATUS_ARCHIVED"];
    } }, { key: "filterCreator", value: function filterCreator(

    layer) {
      if (!this.filters.createdByFilter || this.filters.createdByFilter.length === 0) {
        return true;
      }

      return this.filters.createdByFilter.some(function (creator) {
        return layer.metadata.created_by === creator.value;
      });
    } }, { key: "filterByVersion", value: function filterByVersion(

    layer) {
      // Show only layers that were created on the current version or from previous versions.
      // If i'm now watching V1 of a document, I shouldn't see markups that were created on V2 of that document.
      var startVersion = layer.metadata.starting_version;
      return this.options.documentVersion >= startVersion;
    } }, { key: "destroy", value: function destroy()

    {
      this.filters = null;
      this.options = null;
    } }]);return FilterManager;}();

/***/ }),

/***/ "./extensions/BimMarkups/FrameRenderer.css":
/*!*************************************************!*\
  !*** ./extensions/BimMarkups/FrameRenderer.css ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../node_modules/css-loader!../../node_modules/sass-loader/dist/cjs.js!./FrameRenderer.css */ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/FrameRenderer.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./extensions/BimMarkups/FrameRenderer.js":
/*!************************************************!*\
  !*** ./extensions/BimMarkups/FrameRenderer.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return FrameRenderer; });
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _FrameRenderer_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./FrameRenderer.css */ "./extensions/BimMarkups/FrameRenderer.css");
/* harmony import */ var _FrameRenderer_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_FrameRenderer_css__WEBPACK_IMPORTED_MODULE_4__);
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}





var av = Autodesk.Viewing;var

FrameRenderer = /*#__PURE__*/function () {
  function FrameRenderer(markupsExtension) {_classCallCheck(this, FrameRenderer);
    this.markupsExtension = markupsExtension;
    this.setGlobalManager(markupsExtension.globalManager);
    this.viewer = this.markupsExtension.viewer;
    this.container = this.viewer.appendOrderedElementToViewer('markup-frames-container');
    this.container.className = 'markup-frames-container';

    this.markupFrames = {};
    this.layerFrames = {};
    this.anchors = {};
    this.segments = {};

    this.rotationAxis = new THREE.Vector3(0, 0, 1);

    this.registerEventListeners();
  }_createClass(FrameRenderer, [{ key: "registerEventListeners", value: function registerEventListeners()

    {
      this.onMarkupDirtyBinded = this.onMarkupDirty.bind(this);
      this.onLayerDirtyBinded = this.onLayerDirty.bind(this);
      this.onLayerDeletedBinded = this.onLayerDeleted.bind(this);
      this.onMarkupRemovedBinded = this.onMarkupRemoved.bind(this);
      this.renderAllBinded = this.renderAll.bind(this);
      this.onRectSelectorUpdatedBinded = this.onRectSelectorUpdated.bind(this);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DIRTY, this.onMarkupDirtyBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DIRTY, this.onLayerDirtyBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.onMarkupRemovedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DELETED, this.onLayerDeletedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.renderAllBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.renderAllBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].RECT_SELECTOR_UPDATED, this.onRectSelectorUpdatedBinded);
      this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllBinded);
    } }, { key: "unregisterEventListeners", value: function unregisterEventListeners()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DIRTY, this.onMarkupDirtyBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DIRTY, this.onLayerDirtyBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.onMarkupRemovedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DELETED, this.onLayerDeletedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.renderAllBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.renderAllBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].RECT_SELECTOR_UPDATED, this.onRectSelectorUpdatedBinded);
      this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllBinded);
    } }, { key: "renderAll", value: function renderAll()

    {
      var markups = this.markupsExtension.markupsManager.getAllMarkups();
      this.renderMarkups(markups);

      var layers = this.markupsExtension.markupsManager.getLayersAsList();
      this.renderLayers(layers);
    } }, { key: "onMarkupDirty", value: function onMarkupDirty(_ref)

    {var markup = _ref.markup;
      this.renderMarkups([markup]);
    } }, { key: "onLayerDirty", value: function onLayerDirty(_ref2)

    {var layer = _ref2.layer;
      this.renderLayerSelectionFrame(layer);
    } }, { key: "renderLayers", value: function renderLayers(

    layers) {var _this = this;
      layers.forEach(function (layer) {
        _this.renderLayerSelectionFrame(layer);
      });
    } }, { key: "renderMarkups", value: function renderMarkups(

    markups) {var _this2 = this;
      markups.forEach(function (markup) {
        if (!markup.belongsToGroup()) {
          _this2.renderMarkupSelectionFrame(markup);
        }
        _this2.renderTransformAnchors(markup);

        if (markup.layer) {
          _this2.renderLayerSelectionFrame(markup.layer);
        }
      });
    } }, { key: "renderFrame", value: function renderFrame(

    frame, entity, withFill) {
      var _document = this.getDocument();
      if (!frame) {
        frame = _document.createElement('div');
        frame.className = 'markup-selection-frame-container';
        this.container.appendChild(frame);

        var frameFill = _document.createElement('div');
        frameFill.className = 'markup-selection-frame fill';
        frameFill.style.width = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");
        frameFill.style.height = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");

        if (Autodesk.Viewing.isIOSDevice()) {
          frameFill.className += ' ios';
        }

        frame.appendChild(frameFill);
        frame.fillElement = frameFill;

        for (var i = 0; i < 4; i++) {
          var frameBorder = _document.createElement('div');
          frameBorder.className = 'markup-selection-frame border';
          frameBorder.style.width = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");
          frameBorder.style.height = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");

          if (Autodesk.Viewing.isIOSDevice()) {
            frameBorder.className += ' ios';
          }

          frame.appendChild(frameBorder);
          frame["border_".concat(i)] = frameBorder;
        }
      }

      if (!frame.classList.contains('visible')) {
        frame.classList.add('visible');
        frame.offsetHeight; // Force update DOM.
      }

      if (withFill && !frame.fillElement.classList.contains('visible')) {
        frame.fillElement.classList.add('visible');
        frame.fillElement.offsetHeight; // Force update DOM.
      } else if (!withFill && frame.fillElement.classList.contains('visible')) {
        frame.fillElement.classList.remove('visible');
        frame.fillElement.offsetHeight; // Force update DOM.
      }

      var boundingBox = entity.getClientBoundingBox(true);
      var center = boundingBox.center();
      center.x -= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"] / 2;
      center.y -= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"] / 2;
      var size = boundingBox.size();

      var rotate = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].radiansToDegrees(entity.getRotation() + this.markupsExtension.renderer.getCameraRotation()) || 0;

      if (withFill) {
        frame.fillElement.style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(rotate, "deg) scale(").concat(size.x / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(size.y / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");
      }

      frame['border_0'].style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(rotate, "deg) translate(0px, ").concat(size.y / 2, "px) scale(").concat(size.x / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(1 / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");
      frame['border_1'].style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(rotate, "deg) translate(0px, ").concat(-size.y / 2, "px) scale(").concat(size.x / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(1 / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");
      frame['border_2'].style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(rotate, "deg) translate(").concat(size.x / 2, "px, 0px) scale(").concat(1 / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(size.y / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");
      frame['border_3'].style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(rotate, "deg) translate(").concat(-size.x / 2, "px, 0px) scale(").concat(1 / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(size.y / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");

      return frame;
    } }, { key: "renderMarkupSelectionFrame", value: function renderMarkupSelectionFrame(

    markup) {
      var frame = this.markupFrames[markup.id];

      var hovered = markup.isHovered();
      var selected = markup.isSelected();

      if ((selected || hovered) && markup.layer) {
        this.markupFrames[markup.id] = this.renderFrame(frame, markup, selected);
      } else if (frame && frame.classList.contains('visible')) {
        frame.classList.remove('visible');
        frame.offsetHeight; // Force update DOM.
      }
    } }, { key: "renderLayerSelectionFrame", value: function renderLayerSelectionFrame(

    layer) {
      var frame = this.layerFrames[layer.id];

      var hovered = layer.isHovered();
      var selected = layer.isSelected();
      var visible = layer.isVisible();

      if ((selected || hovered) && visible && !this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
        this.layerFrames[layer.id] = this.renderFrame(frame, layer, false);
      } else if (frame && frame.classList.contains('visible')) {
        this.container.removeChild(frame);
        delete this.layerFrames[layer.id]; // Need to delete layer element because of Safari bug where it doesn't get updated.
      }
    } }, { key: "_renderScaleAnchors", value: function _renderScaleAnchors(

    markup) {var _this3 = this;
      if (!markup.scaleHandler) {
        return;
      }

      if (markup.isInEdit()) {
        var scaleAnchors = markup.scaleHandler.getScaleAnchors();
        var pivot = markup.getClientCenter();
        scaleAnchors.forEach(function (anchor, i) {
          var name = "".concat(markup.id, "_scale_").concat(i);

          var rotation = markup.getRotation() + _this3.markupsExtension.renderer.getCameraRotation();
          _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].applyRotation(anchor.pos, rotation, pivot, _this3.rotationAxis);
          var isActive = markup.scaleHandler.isDragging() && anchor.id === markup.scaleHandler.scaleAnchor.id;
          _this3.createAnchorElement(name, anchor.pos, isActive, rotation, 'rectangle');
        });
      } else {
        for (var i = 0; i < 8; i++) {
          var name = "".concat(markup.id, "_scale_").concat(i);

          if (this.anchors[name] && this.anchors[name].classList.contains('visible')) {
            this.anchors[name].classList.remove('visible');
          }
        }
      }
    } }, { key: "_renderRotationAnchor", value: function _renderRotationAnchor(

    markup) {
      if (!markup.rotationHandler) {
        return;
      }

      var name = "".concat(markup.id, "_rotation_anchor");

      if (markup.isInEdit()) {
        var rotationAnchorPos = markup.rotationHandler.getRotationAnchor();
        var isActive = markup.rotationHandler.isDragging();
        this.createAnchorElement(name, rotationAnchorPos, isActive);

        var boundingBox = markup.getClientBoundingBox(true);
        var p = boundingBox.center().add(new THREE.Vector3(0, boundingBox.size().y / 2, 0));
        var pivot = boundingBox.center();
        var rotation = markup.getRotation() + this.markupsExtension.renderer.getCameraRotation();

        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].applyRotation(p, rotation, pivot, this.rotationAxis);

        this.createSegment(name, p, rotationAnchorPos);
      } else if (this.anchors[name] && this.anchors[name].classList.contains('visible')) {
        this.anchors[name].classList.remove('visible');
        this.segments[name].classList.remove('visible');
      }
    } }, { key: "_renderAnchors", value: function _renderAnchors(

    markup) {var _this4 = this;
      if (!markup.anchorHandler) {
        return;
      }

      var getExistingAnchors = function getExistingAnchors(nameStart) {return Object.keys(_this4.anchors).filter(function (k) {return k.indexOf(nameStart) === 0;});};
      var getExistingSegments = function getExistingSegments(nameStart) {return Object.keys(_this4.segments).filter(function (k) {return k.indexOf(nameStart) === 0;});};

      var removeAnchorVisibility = function removeAnchorVisibility(name) {
        var anchor = _this4.anchors[name];
        if (anchor && anchor.classList.contains('visible')) {
          anchor.classList.remove('visible');
        }
      };

      var removeSegmentVisibility = function removeSegmentVisibility(name) {
        var segment = _this4.segments[name];
        if (segment && segment.classList.contains('visible')) {
          segment.classList.remove('visible');
        }

      };

      var baseName = "".concat(markup.id, "_anchor");
      var anchors = markup.anchorHandler.getAnchors();
      if (markup.isInEdit()) {
        var pivot = markup.getClientCenter();

        var applyTransform = function applyTransform(anchor) {
          markup.applyScaleAndTranslation(anchor);
          anchor = _this4.markupsExtension.renderer.worldToClient(anchor);
          _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].applyRotation(anchor, markup.getRotation(), pivot, _this4.rotationAxis);

          return anchor;
        };

        var prevAnchor = null,anchor = null;

        for (var i = 0; i < anchors.length; i++) {
          var name = "".concat(baseName, "_").concat(i);
          anchor = applyTransform(anchors[i].clone());
          var isActive = anchors[i] === markup.anchorHandler.activeAnchor;
          if (markup.isAnchorHandlingAllowed(anchors[i])) {
            this.createAnchorElement(name, anchor, isActive);
          }

          if (markup.showPath() && i > 0) {
            this.createSegment(name, prevAnchor, anchor);
          }

          prevAnchor = anchor;
        }

        if (markup.showPath() && markup.editState.closed) {// Add last segment
          var _name = "".concat(baseName, "_").concat(anchors.length);
          var firstAnchor = applyTransform(anchors[0].clone());
          this.createSegment(_name, anchor, firstAnchor);
        }

        // Remove anchors and segments no longer in use (can happen during undo)
        var existingAnchors = getExistingAnchors(baseName);
        var existingSegments = getExistingSegments(baseName);

        for (var _i = anchors.length; _i < existingAnchors.length; _i++) {
          removeAnchorVisibility("".concat(baseName, "_").concat(_i));
        }

        var end = markup.editState.closed ? existingSegments.length : existingSegments.length + 1;
        for (var _i2 = anchors.length; _i2 < end; _i2++) {
          removeSegmentVisibility("".concat(baseName, "_").concat(_i2));
        }
      } else {
        for (var _i3 = 0; _i3 <= anchors.length; _i3++) {// Include length to remove last segment when closed
          var _name2 = "".concat(baseName, "_").concat(_i3);
          removeAnchorVisibility(_name2);
          removeSegmentVisibility(_name2);
        }
      }
    } }, { key: "renderTransformAnchors", value: function renderTransformAnchors(

    markup) {
      if (!markup.isCompleted()) {
        return;
      }

      this._renderScaleAnchors(markup);

      this._renderRotationAnchor(markup);

      this._renderAnchors(markup);
    } }, { key: "createAnchorElement", value: function createAnchorElement(

    name, position, isActive) {var rotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;var className = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';
      var anchorElement = this.anchors[name];

      var _document = this.getDocument();
      if (!anchorElement) {
        anchorElement = _document.createElement('div');
        anchorElement.className = 'markup-anchor ' + className;
        var diameter = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ANCHOR_RADIUS"] * 2, "px");
        anchorElement.style.width = diameter;
        anchorElement.style.height = diameter;
        this.container.appendChild(anchorElement);
        this.anchors[name] = anchorElement;

        var anchorFill = _document.createElement('div');
        anchorFill.className = 'markup-anchor-fill ' + className;
        anchorElement.appendChild(anchorFill);
        anchorElement.anchorFill = anchorFill;
      }

      if (!anchorElement.classList.contains('visible')) {
        anchorElement.classList.add('visible');
      }

      if (isActive && !anchorElement.anchorFill.classList.contains('visible')) {
        anchorElement.anchorFill.classList.add('visible');
      } else if (!isActive && anchorElement.anchorFill.classList.contains('visible')) {
        anchorElement.anchorFill.classList.remove('visible');
      }

      var rotate = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].radiansToDegrees(rotation);

      anchorElement.style.transform = "translate(".concat(position.x - _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ANCHOR_RADIUS"], "px, ").concat(position.y - _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ANCHOR_RADIUS"], "px) rotate(").concat(rotate, "deg)");
    } }, { key: "createSegment", value: function createSegment(

    name, p1, p2) {
      var segmentElement = this.segments[name];

      var _document = this.getDocument();
      if (!segmentElement) {
        segmentElement = _document.createElement('div');
        segmentElement.className = 'markup-selection-frame segment border';
        segmentElement.style.width = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");
        segmentElement.style.height = "".concat(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], "px");
        this.container.appendChild(segmentElement);
        this.segments[name] = segmentElement;
      }

      if (!segmentElement.classList.contains('visible')) {
        segmentElement.classList.add('visible');
      }

      var center = p1.clone().add(p2).multiplyScalar(0.5);
      center.x -= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"] / 2;
      center.y -= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"] / 2;
      var length = p1.distanceTo(p2);

      var rotate = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].getSignedAngle(p2.clone().sub(p1), this.markupsExtension.renderer.getCameraUpVector(), this.markupsExtension.renderer.getCameraEyeVector());

      segmentElement.style.transform = "translate(".concat(center.x, "px, ").concat(center.y, "px) rotate(").concat(_Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_1__["default"].radiansToDegrees(rotate + this.markupsExtension.renderer.getCameraRotation()), "deg) scale(").concat(1 / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ", ").concat(length / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["FRAME_SIZE_SCALE"], ")");
    } }, { key: "onLayerDeleted", value: function onLayerDeleted(_ref3)

    {var layer = _ref3.layer;
      var name = layer.id;
      var layerElement = this.layerFrames[name];

      if (layerElement) {
        this.container.removeChild(layerElement);
      }

      delete this.layerFrames[name];
    } }, { key: "onMarkupRemoved", value: function onMarkupRemoved(_ref4)

    {var markup = _ref4.markup;
      var name = markup.id;
      var markupElement = this.markupFrames[name];

      if (markupElement) {
        this.container.removeChild(markupElement);
      }

      delete this.markupFrames[name];

      if (markup.layer && markup.layer.isEmpty()) {
        this.onLayerDeleted(markup);
      }
    } }, { key: "onRectSelectorUpdated", value: function onRectSelectorUpdated(_ref5)

    {var bounds = _ref5.bounds;
      var _document = this.getDocument();
      if (!this.rectSelectorFrame) {
        this.rectSelectorFrame = _document.createElement('div');
        this.rectSelectorFrame.className = 'rect-selector-frame';
        this.container.appendChild(this.rectSelectorFrame);
      }

      var visible = !bounds.empty();

      if (visible && !this.rectSelectorFrame.classList.contains('visible')) {
        this.rectSelectorFrame.classList.add('visible');
        this.rectSelectorFrame.offsetHeight; // Force update DOM.
      } else if (!visible && this.rectSelectorFrame.classList.contains('visible')) {
        this.rectSelectorFrame.classList.remove('visible');
        this.rectSelectorFrame.offsetHeight; // Force update DOM.
      }

      var boundsProjected = bounds.clone();

      boundsProjected.min = this.markupsExtension.renderer.worldToClient(boundsProjected.min);
      boundsProjected.max = this.markupsExtension.renderer.worldToClient(boundsProjected.max);
      var size = boundsProjected.size();

      this.rectSelectorFrame.style.width = "".concat(Math.abs(size.x), "px");
      this.rectSelectorFrame.style.height = "".concat(Math.abs(size.y), "px");

      this.rectSelectorFrame.style.transformOrigin = 'top left';
      this.rectSelectorFrame.style.transform = "translate(".concat(boundsProjected.min.x, "px, ").concat(boundsProjected.min.y, "px) scale(").concat(Math.sign(size.x), ", ").concat(Math.sign(size.y), ")");
    } }, { key: "destroy", value: function destroy()

    {var _this5 = this;
      this.unregisterEventListeners();

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__["forAll"])(this.markupFrames, function (frame) {
        _this5.container.removeChild(frame);
      });
      this.markupFrames = null;

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__["forAll"])(this.layerFrames, function (frame) {
        _this5.container.removeChild(frame);
      });
      this.layerFrames = null;

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__["forAll"])(this.anchors, function (anchor) {
        _this5.container.removeChild(anchor);
      });
      this.anchors = null;

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_3__["forAll"])(this.segments, function (segment) {
        _this5.container.removeChild(segment);
      });
      this.segments = null;

      this.markupsExtension = null;
      this.viewer = null;
    } }]);return FrameRenderer;}();


av.GlobalManagerMixin.call(FrameRenderer.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/Links/Link.js":
/*!*********************************************!*\
  !*** ./extensions/BimMarkups/Links/Link.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Link; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _LinkAnchorHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LinkAnchorHandler */ "./extensions/BimMarkups/Links/LinkAnchorHandler.js");
/* harmony import */ var _LinkSelectionHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LinkSelectionHandler */ "./extensions/BimMarkups/Links/LinkSelectionHandler.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}




var

Link = /*#__PURE__*/function () {
  function Link(markupsExtension, id, guid, layer, type, state) {_classCallCheck(this, Link);
    this.id = id;
    this.guid = guid;
    this.layer = layer;
    this.type = type;
    this.markupsExtension = markupsExtension;

    // Whether the link is visible.
    this.visible = true;

    // Whether the link is selected.
    this.selected = false;

    this.hover = false;

    // Whether the link has changed recently and needs to be re-rendered.
    this.dirty = false;

    if (state) {
      this.state = state;
    } else {
      this.state = this.getDefaultState();
      this.state.style = this.getDefaultStyle();
    }

    this.editState = {};

    this.registerSelectionHandler();
    this.registerAnchorHandler();
  }_createClass(Link, [{ key: "getDefaultState", value: function getDefaultState()

    {
      return {};
    } }, { key: "getDefaultStyle", value: function getDefaultStyle()

    {
      return {};
    } }, { key: "getState", value: function getState()

    {
      return this.state;
    } }, { key: "setState", value: function setState(

    state) {
      this.state = state;
    } }, { key: "getEditState", value: function getEditState()

    {
      return this.editState;
    } }, { key: "setEditState", value: function setEditState(

    editState) {
      this.editState = editState;
      this.setDirty(true);
    } }, { key: "syncEditState", value: function syncEditState()

    {
      this.setEditState(_Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.getState()));
    } }, { key: "setDirty", value: function setDirty(

    dirty) {
      this.dirty = dirty;

      if (dirty) {
        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].LINK_DIRTY, link: this });
      }
    } }, { key: "isDirty", value: function isDirty()

    {
      return this.dirty;
    } }, { key: "isVisible", value: function isVisible()

    {
      return this.layer.isVisible();
    } }, { key: "getLinkBasePosition", value: function getLinkBasePosition()

    {
      var layerBoundingBox = this.layer.getClientBoundingBox(true);
      var posProjected = layerBoundingBox.max.clone().setY(layerBoundingBox.min.y);
      var upVec = this.markupsExtension.renderer.getCameraUpVector();
      var rightVec = this.markupsExtension.renderer.getCameraRightVector();

      var linkBoundingBox = this.getClientBoundingBox();
      var linkSize = linkBoundingBox.size();
      var verticalOffset = upVec.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(linkSize.y / 2));
      var horizontalOffset = rightVec.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["LINK_POSITION_OFFSET"] + linkSize.x / 2));

      // Apply camera rotation.
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(posProjected, -cameraRotation, layerBoundingBox.center(), eyeDirection);

      var pos = this.markupsExtension.renderer.clientToWorld(posProjected).sub(verticalOffset).add(horizontalOffset);
      return pos;
    } }, { key: "getClientBoundingBox", value: function getClientBoundingBox()

    {
      return this.markupsExtension.renderer.linksRenderer.getLinkBoundingBox(this);
    } }, { key: "getPosition", value: function getPosition()

    {
      if (this.editState.position) {
        return this.editState.position;
      } else {
        return this.getLinkBasePosition();
      }
    } }, { key: "select", value: function select()

    {
      this.selected = true;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].LINK_SELECTED, link: this });
      this.setDirty(true);
    } }, { key: "deselect", value: function deselect()

    {
      this.selected = false;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].LINK_DESELECTED, link: this });
      this.setDirty(true);
    } }, { key: "isSelected", value: function isSelected()

    {
      return this.selected;
    } }, { key: "setHover", value: function setHover(

    hover) {
      if (this.hover !== hover) {
        this.hover = hover;
        this.setDirty(true);
      }
    } }, { key: "isHovered", value: function isHovered()

    {
      return this.hover;
    } }, { key: "isCompleted", value: function isCompleted()

    {
      return true;
    } }, { key: "registerSelectionHandler", value: function registerSelectionHandler()

    {
      this.selectionHandler = new _LinkSelectionHandler__WEBPACK_IMPORTED_MODULE_5__["default"](this.markupsExtension, this);
    } }, { key: "registerAnchorHandler", value: function registerAnchorHandler()

    {
      this.anchorHandler = new _LinkAnchorHandler__WEBPACK_IMPORTED_MODULE_4__["default"](this.markupsExtension, this);
    } }, { key: "destroy", value: function destroy()

    {
      if (this.translationHandler) {
        this.translationHandler.destroy();
        this.translationHandler = null;
      }

      this.markupsExtension = null;
      this.state = null;
      this.editState = null;
    } }]);return Link;}();

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinkAnchorHandler.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinkAnchorHandler.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AnchorHandler; });
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _LinkEditHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LinkEditHandler */ "./extensions/BimMarkups/Links/LinkEditHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

AnchorHandler = /*#__PURE__*/function (_LinkEditHandler) {_inherits(AnchorHandler, _LinkEditHandler);var _super = _createSuper(AnchorHandler);function AnchorHandler() {_classCallCheck(this, AnchorHandler);return _super.apply(this, arguments);}_createClass(AnchorHandler, [{ key: "handleMouseMove", value: function handleMouseMove(
    point) {
      var hovered = this.grabbing || this.intersect(point);
      this.link.setHover(hovered);

      if (this.grabbing) {
        this.updatePosition(point);

        return true;
      }

      return false;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    point, button) {
      if (!this.grabbing) {
        this.grabbing = this.intersect(point);

        if (this.grabbing) {
          this.originalPosition = point.clone();
          this.lastTranslationPoint = point;
        }

        return !!this.grabbing;
      }

      return true;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (this.grabbing) {
        this.updatePosition(point);

        if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__["isEqualVectors"])(point, this.originalPosition, this.getMinChangeDistanceWorld())) {
          this.cancelAnchorEditing();
          return false;
        } else {
          this.submitChanges();
        }

        this.grabbing = false;
        this.lastTranslationPoint = null;

        return true;
      }

      return false;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
      if (this.grabbing) {
        switch (keyCode) {
          case Autodesk.Viewing.KeyCode.BACKSPACE:
          case Autodesk.Viewing.KeyCode.DELETE:
          case Autodesk.Viewing.KeyCode.ESCAPE:
            this.cancelAnchorEditing();
            return true;
          default:
            break;}

      }

      return false;
    } }, { key: "updateEditStatePosition", value: function updateEditStatePosition()

    {
      this.updateEditState({ position: this.getEditState().position });
    } }, { key: "updatePosition", value: function updatePosition(

    point) {
      var translation = point.clone().sub(this.lastTranslationPoint);

      if (!this.link.editState.position) {
        this.link.editState.position = this.link.getLinkBasePosition();
      }

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__["applyTranslation"])(this.link.editState.position, translation);

      this.lastTranslationPoint = point;
      this.updateEditStatePosition();
    } }, { key: "cancelAnchorEditing", value: function cancelAnchorEditing()

    {
      this.grabbing = false;
      this.link.syncEditState();
      this.updateEditStatePosition();
    } }, { key: "isDragging", value: function isDragging()

    {
      return this.grabbing;
    } }, { key: "intersect", value: function intersect(

    point) {
      var p = this.markupsExtension.renderer.worldToClient(point);
      var boundingBox = this.link.getClientBoundingBox();

      return boundingBox.containsPoint(p);
    } }, { key: "getCursor", value: function getCursor()

    {
      if (this.grabbing) {
        return 'grabbing';
      } else {
        return 'grab';
      }
    } }]);return AnchorHandler;}(_LinkEditHandler__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinkAttachment.js":
/*!*******************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinkAttachment.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LinkAttachment; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Link */ "./extensions/BimMarkups/Links/Link.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

LinkAttachment = /*#__PURE__*/function (_Link) {_inherits(LinkAttachment, _Link);var _super = _createSuper(LinkAttachment);
  function LinkAttachment(markupsExtension, id, guid, layer, state) {_classCallCheck(this, LinkAttachment);return _super.call(this,
    markupsExtension, id, guid, layer, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["LINK_TYPE_DOCUMENT_ATTACHMENT"], state);
  }return LinkAttachment;}(_Link__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinkEditHandler.js":
/*!********************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinkEditHandler.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return EditHandler; });
/* harmony import */ var _Actions_UpdateMarkupAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Actions/UpdateMarkupAction */ "./extensions/BimMarkups/Actions/UpdateMarkupAction.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}
var

EditHandler = /*#__PURE__*/function () {
  function EditHandler(markupsExtension, link) {_classCallCheck(this, EditHandler);
    this.markupsExtension = markupsExtension;
    this.viewer = markupsExtension.viewer;
    this.link = link;

    this.link.syncEditState();
  }_createClass(EditHandler, [{ key: "getEditState", value: function getEditState()

    {
      return this.link.getEditState();
    } }, { key: "setEditState", value: function setEditState(

    editState) {
      this.link.setEditState(editState);
    }

    // Use updateEditState whenever there are changes you want to update in the markup's edit state.
  }, { key: "updateEditState", value: function updateEditState(changes) {
      this.setEditState(Object.assign({}, this.getEditState(), changes));
    }

    // Use submitChanges to update the markup with the recent changes of the edit handler.
    // Using this will change the history of the markups, and will add an undo / redo actions.
    // Use it only after you committed changes to the editState, using updateEditState.
  }, { key: "submitChanges", value: function submitChanges() {
      var action = new _Actions_UpdateMarkupAction__WEBPACK_IMPORTED_MODULE_0__["default"](this.markupsExtension.markupsManager, this.link, this.getEditState());
      action.execute();
    } }, { key: "isDragging", value: function isDragging()

    {
      return false;
    } }, { key: "getTouchRadiusWorld", value: function getTouchRadiusWorld()

    {
      return this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["TOUCH_RADIUS"]);
    } }, { key: "getMinChangeDistanceWorld", value: function getMinChangeDistanceWorld()

    {
      return this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MIN_CHANGE_DISTANCE"]);
    } }, { key: "didMouseMove", value: function didMouseMove()

    {
      return this.markupsExtension.markupsTool.mouseMoved;
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    event, button) {
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    event, button) {
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    event) {
    } }, { key: "handleGesture", value: function handleGesture(

    event) {
    } }, { key: "handleResize", value: function handleResize()

    {
    } }, { key: "destroy", value: function destroy()

    {
      this.markupsExtension = null;
      this.viewer = null;
      this.link = null;
    } }]);return EditHandler;}();

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinkSelectionHandler.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinkSelectionHandler.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectionHandler; });
/* harmony import */ var _LinkEditHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LinkEditHandler */ "./extensions/BimMarkups/Links/LinkEditHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

SelectionHandler = /*#__PURE__*/function (_LinkEditHandler) {_inherits(SelectionHandler, _LinkEditHandler);var _super = _createSuper(SelectionHandler);function SelectionHandler() {_classCallCheck(this, SelectionHandler);return _super.apply(this, arguments);}_createClass(SelectionHandler, [{ key: "intersect", value: function intersect(
    point) {
      var p = this.markupsExtension.renderer.worldToClient(point);
      var boundingBox = this.link.getClientBoundingBox();

      return boundingBox.containsPoint(p);
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    point) {
      if (this.markupsExtension.markupsTool.dragging || Autodesk.Viewing.isMobileDevice()) {
        return false;
      }

      var intersected = this.intersect(point);

      this.link.setHover(intersected);

      if (intersected) {
        this.link.layer.setHover(true);
      }

      return intersected;
    } }, { key: "getCursor", value: function getCursor()

    {
      return 'pointer';
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    point, button) {
      if (!this.didMouseMove() && this.intersect(point)) {
        this.markupsExtension.markupsManager.deselectAllLinks();
        this.markupsExtension.markupsManager.selectLink(this.link);

        return true;
      }

      return false;
    } }]);return SelectionHandler;}(_LinkEditHandler__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinkTypesDictionary.js":
/*!************************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinkTypesDictionary.js ***!
  \************************************************************/
/*! exports provided: linkTypesDictionary */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linkTypesDictionary", function() { return linkTypesDictionary; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _LinkAttachment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LinkAttachment */ "./extensions/BimMarkups/Links/LinkAttachment.js");
function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}


var linkTypesDictionary = _defineProperty({},
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["LINK_TYPE_DOCUMENT_ATTACHMENT"], _LinkAttachment__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinksRenderer.css":
/*!*******************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinksRenderer.css ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../node_modules/css-loader!../../../node_modules/sass-loader/dist/cjs.js!./LinksRenderer.css */ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/Links/LinksRenderer.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./extensions/BimMarkups/Links/LinksRenderer.js":
/*!******************************************************!*\
  !*** ./extensions/BimMarkups/Links/LinksRenderer.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LinksRenderer; });
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _LinksRenderer_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LinksRenderer.css */ "./extensions/BimMarkups/Links/LinksRenderer.css");
/* harmony import */ var _LinksRenderer_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_LinksRenderer_css__WEBPACK_IMPORTED_MODULE_2__);
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}



var av = Autodesk.Viewing;var

LinksRenderer = /*#__PURE__*/function () {
  function LinksRenderer(markupsExtension) {_classCallCheck(this, LinksRenderer);
    this.markupsExtension = markupsExtension;
    this.setGlobalManager(markupsExtension.globalManager);
    this.viewer = this.markupsExtension.viewer;
    this.container = this.viewer.appendOrderedElementToViewer('markup-links-container');
    this.container.className = 'markup-links-container';

    this.links = {};
    this.linksSizeCache = {};

    this.registerEventListeners();
  }_createClass(LinksRenderer, [{ key: "registerEventListeners", value: function registerEventListeners()

    {
      this.onLinkDirtyBinded = this.onLinkDirty.bind(this);
      this.onMarkupDirtyBinded = this.onMarkupDirty.bind(this);
      this.renderAllLinksBinded = this.renderAllLinks.bind(this);
      this.onLinkDeletedBinded = this.onLinkDeleted.bind(this);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_DIRTY, this.onLinkDirtyBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DIRTY, this.onMarkupDirtyBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_SYNCED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_REMOVED, this.onLinkDeletedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_SELECTED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_VIEW_EXITED, this.renderAllLinksBinded);

      this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllLinksBinded);
    } }, { key: "unregisterEventListeners", value: function unregisterEventListeners()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_DIRTY, this.onLinkDirtyBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DIRTY, this.onMarkupDirtyBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_SYNCED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_REMOVED, this.onLinkDeletedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_SELECTED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.renderAllLinksBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_VIEW_EXITED, this.renderAllLinksBinded);

      this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllLinksBinded);
    } }, { key: "onMarkupDirty", value: function onMarkupDirty(_ref)

    {var _this = this;var markup = _ref.markup;
      if (markup.layer) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["forAll"])(markup.layer.links, function (link) {
          _this.renderLink(link);
        });
      }
    } }, { key: "onLinkDirty", value: function onLinkDirty(_ref2)

    {var link = _ref2.link;
      this.renderLink(link);
    } }, { key: "renderLink", value: function renderLink(

    link) {
      if (link.layer.isEmpty()) {
        return;
      }

      var name = "".concat(link.layer.id, "_link_").concat(link.id);

      if (link.isVisible()) {
        var isSelected = link.isSelected();
        var isHovered = link.isHovered();
        var isActiveLayer = this.markupsExtension.markupsManager.getActiveLayer() === link.layer;
        var count = link.layer.layerData.attachments.length;
        var transparent = this.markupsExtension.markupsManager.isMarkupSessionOpen() && !isActiveLayer ||
        this.markupsExtension.markupsManager.getSelectedLayers().length > 0 && !link.layer.isSelected() ||
        !this.markupsExtension.isToolEnabled();
        this.createLinkElement(name, link, isSelected, isActiveLayer, isHovered, count, transparent);
      } else if (this.links[name]) {
        this.links[name].classList.remove('visible');
      }

      link.setDirty(false);
    } }, { key: "renderAllLinks", value: function renderAllLinks()

    {var _this2 = this;var
      layers = this.markupsExtension.markupsManager.layers;

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["forAll"])(layers, function (layer) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["forAll"])(layer.links, function (link) {
          _this2.renderLink(link);
        });
      });

      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LINK_RENDERED });
    } }, { key: "createLinkElement", value: function createLinkElement(

    name, link, isSelected, isActiveLayer, isHovered, count, transparent) {
      var anchorElement = this.links[name];

      var _document = this.getDocument();
      if (!anchorElement) {
        anchorElement = _document.createElement('div');
        anchorElement.className = 'link';

        var icon = _document.createElement('div');
        icon.className = 'link-document-attachment';
        anchorElement.appendChild(icon);

        this.container.appendChild(anchorElement);
        this.links[name] = anchorElement;
      }

      if (!anchorElement.classList.contains('visible')) {
        anchorElement.classList.add('visible');
      }

      if (transparent && !anchorElement.classList.contains('transparent')) {
        anchorElement.classList.add('transparent');
      } else if (!transparent && anchorElement.classList.contains('transparent')) {
        anchorElement.classList.remove('transparent');
      }

      if (isSelected && !anchorElement.classList.contains('selected')) {
        anchorElement.classList.add('selected');
      } else if (!isSelected && anchorElement.classList.contains('selected')) {
        anchorElement.classList.remove('selected');
      }

      if (isHovered && !anchorElement.classList.contains('hover')) {
        anchorElement.classList.add('hover');
      } else if (!isHovered && anchorElement.classList.contains('hover')) {
        anchorElement.classList.remove('hover');
      }

      if (isActiveLayer && !anchorElement.classList.contains('editable')) {
        anchorElement.classList.add('editable');
      } else if (!isActiveLayer && anchorElement.classList.contains('editable')) {
        anchorElement.classList.remove('editable');
      }

      var text = count > 99 ? '99+' : count;
      anchorElement.firstChild.innerText = text;

      if (!this.linksSizeCache[text]) {
        this.linksSizeCache[text] = anchorElement.firstChild.getBoundingClientRect();
      }

      // Calculate link's icon bounding box.
      // First we calculate the boundingBox just for the size, without the correct position. It's necessary for link.getPosition().
      var boundingBox = new THREE.Box3();
      var linkHalfSize = new THREE.Vector3(this.linksSizeCache[text].width / 2, this.linksSizeCache[text].height / 2, 0);
      boundingBox.expandByPoint(new THREE.Vector3());
      boundingBox.expandByVector(linkHalfSize);
      anchorElement.boundingBox = boundingBox;
      var pos = link.getPosition();

      var position = this.markupsExtension.renderer.worldToClient(pos);

      anchorElement.style.transform = "translate(".concat(Math.round(position.x - this.linksSizeCache[text].width / 2), "px, ").concat(Math.round(position.y - this.linksSizeCache[text].height / 2), "px)");

      // Now, after we got the right position, we can update the bounding box with the true position.
      boundingBox.makeEmpty();
      boundingBox.expandByPoint(position);
      boundingBox.expandByVector(linkHalfSize);
    } }, { key: "getLinkBoundingBox", value: function getLinkBoundingBox(

    link) {
      var name = "".concat(link.layer.id, "_link_").concat(link.id);
      var anchorElement = this.links[name];
      if (!anchorElement) {
        return new THREE.Box3();
      }

      return anchorElement.boundingBox;
    } }, { key: "onLinkDeleted", value: function onLinkDeleted(_ref3)

    {var link = _ref3.link;
      var name = "".concat(link.layer.id, "_link_").concat(link.id);
      var linkElement = this.links[name];

      if (linkElement) {
        this.container.removeChild(linkElement);
      }

      delete this.links[name];
    } }, { key: "destroy", value: function destroy()

    {var _this3 = this;
      this.unregisterEventListeners();

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["forAll"])(this.links, function (link) {
        _this3.container.removeChild(link);
      });
      this.links = null;

      this.markupsExtension = null;
      this.viewer = null;
    } }]);return LinksRenderer;}();


av.GlobalManagerMixin.call(LinksRenderer.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/Markup.js":
/*!*****************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/Markup.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Markup; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _EditHandlers_SelectionHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../EditHandlers/SelectionHandler */ "./extensions/BimMarkups/EditHandlers/SelectionHandler.js");
/* harmony import */ var _EditHandlers_TranslationHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../EditHandlers/TranslationHandler */ "./extensions/BimMarkups/EditHandlers/TranslationHandler.js");
/* harmony import */ var _EditHandlers_AnchorHandler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../EditHandlers/AnchorHandler */ "./extensions/BimMarkups/EditHandlers/AnchorHandler.js");
/* harmony import */ var _EditHandlers_RotationHandler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../EditHandlers/RotationHandler */ "./extensions/BimMarkups/EditHandlers/RotationHandler.js");
/* harmony import */ var _EditHandlers_ScaleHandler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../EditHandlers/ScaleHandler */ "./extensions/BimMarkups/EditHandlers/ScaleHandler.js");
/* harmony import */ var _EditHandlers_TextInputHandler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../EditHandlers/TextInputHandler */ "./extensions/BimMarkups/EditHandlers/TextInputHandler.js");
/* harmony import */ var _EditHandlers_DimensionEditHandler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../EditHandlers/DimensionEditHandler */ "./extensions/BimMarkups/EditHandlers/DimensionEditHandler.js");
/* harmony import */ var _EditHandlers_CreationHandlers_CreationHandlerFactory__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../EditHandlers/CreationHandlers/CreationHandlerFactory */ "./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFactory.js");
/* harmony import */ var _RendererHelpers_MarkupsGeometryManager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../RendererHelpers/MarkupsGeometryManager */ "./extensions/BimMarkups/RendererHelpers/MarkupsGeometryManager.js");
function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}













var av = Autodesk.Viewing;var

Markup = /*#__PURE__*/function () {
  function Markup(markupsExtension, id, type, state) {var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};_classCallCheck(this, Markup);
    this.setGlobalManager(markupsExtension.globalManager);
    this.id = id;
    this.type = type;
    this.options = options;
    this.markupsExtension = markupsExtension;
    this.materialManager = this.markupsExtension.renderer.materialManager;

    this.layer = null;

    this.meshContainer = null;
    this.strokeMaterial = null;
    this.fillMaterial = null;
    this.center = new THREE.Vector3();

    this.matrix = new THREE.Matrix4();
    this.invMatrix = new THREE.Matrix4();
    this.scaleMatrix = new THREE.Matrix4();
    this.invScaleMatrix = new THREE.Matrix4();

    // Whether the markup creation has been ended successfully.
    this.completed = false;

    // Whether the markup is selected.
    this.selected = false;

    // Whether the markup is in edit mode.
    this.inEdit = false;

    // Whether the markup is enabled for touch.
    this.enabled = true;

    // Whether the markup is transparent.
    this.transparent = false;

    // Whether the markup is visible.
    this.visible = false;

    // Whether the markup is being hovered or not.
    this.hover = false;

    // To prevent infinite recursion when changing group's edit state
    this.locked = false;

    this.state = this.getDefaultState();
    this.state.anchors = this.getDefaultAnchors();
    this.state.style = this.getDefaultStyle();

    if (state) {
      Object.assign(this.state, state);
    }

    this.state.translation = this.state.translation || new THREE.Vector3();
    this.state.rotation = this.state.rotation || 0;
    this.state.scale = this.state.scale || new THREE.Vector3(1.0, 1.0, 1.0);

    this.editState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.state);
    this.updateMatrix();

    this.registerSelectionHandler();

    this.creationHandler = _EditHandlers_CreationHandlers_CreationHandlerFactory__WEBPACK_IMPORTED_MODULE_11__["default"].getCreationHandler(this.type, this.markupsExtension, this, options);
  }_createClass(Markup, [{ key: "updateMatrix", value: function updateMatrix()

    {
      this.scaleMatrix.makeScale(this.editState.scale.x, this.editState.scale.y, this.editState.scale.z);

      this.matrix.copy(this.scaleMatrix);
      this.matrix.setPosition(this.editState.translation);
      this.invMatrix.getInverse(this.matrix);
      this.invScaleMatrix.getInverse(this.scaleMatrix);
      this.updateCenter();
    } }, { key: "updateCenter", value: function updateCenter()

    {
      if (this.editState.anchors.length === 0) {return;}

      var max = new THREE.Vector3().set(-Infinity, -Infinity, -Infinity);
      var min = new THREE.Vector3().set(Infinity, Infinity, Infinity);
      this.editState.anchors.forEach(function (anchor) {
        max = max.max(anchor);
        min = min.min(anchor);
      });

      this.center.x = (max.x + min.x) / 2;
      this.center.y = (max.y + min.y) / 2;
    } }, { key: "getDefaultState", value: function getDefaultState()

    {
      return {};
    } }, { key: "getDefaultAnchors", value: function getDefaultAnchors()

    {
      return [];
    } }, { key: "getDefaultStyle", value: function getDefaultStyle()

    {var _ref;
      return _ref = {}, _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].LAST_COLOR)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_WEIGHT, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_WEIGHT)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_FAMILY, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_FAMILY)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_STYLE, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_STYLE)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR)), _defineProperty(_ref,
      _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY, this.markupsExtension.getStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY)), _ref;

    } }, { key: "getState", value: function getState()

    {
      return this.state;
    } }, { key: "setState", value: function setState(

    state) {
      this.state = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(state);

      this.rotatedBoundingBox = null;
      this.boundingBox = null;
    } }, { key: "getEditState", value: function getEditState()

    {
      return this.editState;
    } }, { key: "setEditState", value: function setEditState(

    editState, changes, source) {
      var prevState = this.editState;

      if (changes) {
        this.editState = Object.assign({}, editState, changes);
      } else {
        this.editState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(editState);
      }

      this.updateMatrix();

      this.rotatedBoundingBox = null;
      this.boundingBox = null;

      if (this.visible && this.markupsExtension.renderer) {
        this.render(changes);
      }

      if (this.belongsToGroup() && !this.isLocked()) {
        this.syncGroup(prevState, this.editState, changes, source);
      }
    } }, { key: "isLocked", value: function isLocked()

    {
      return this.locked;
    } }, { key: "setLocked", value: function setLocked(

    isLocked) {
      this.locked = isLocked;
    } }, { key: "render", value: function render(

    state) {
      if (!this.meshContainer) {
        this.meshContainer = new THREE.Group();
        this.markupsExtension.renderer.addToScene(this);
      }
    } }, { key: "syncEditState", value: function syncEditState()

    {
      this.setEditState(this.getState());
    } }, { key: "syncState", value: function syncState()

    {
      this.setState(this.getEditState());
    } }, { key: "syncGroup", value: function syncGroup(

    prevState, newState, changes, source) {
      this.markupGroup.rotatedBoundingBox = null;
      this.markupGroup.boundingBox = null;
      if (changes) {
        this.markupGroup.syncGroupMarkups(this, prevState, newState, changes, source);
      }
    } }, { key: "select", value: function select()

    {
      if (this.layer && !this.markupsExtension.permissionManager.canEditMarkup(this.layer.layerData)) {
        return;
      }

      this.selected = true;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_SELECTED, markup: this });

      this.enableEdit();

      if (this.belongsToGroup() && !this.markupGroup.locked) {
        this.markupGroup.select(this);
      }
    } }, { key: "deselect", value: function deselect()

    {
      this.selected = false;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DESELECTED, markup: this });

      this.disableEdit();
    } }, { key: "setVisible", value: function setVisible(

    isVisible, forceSet) {
      if (this.visible !== isVisible || forceSet) {
        this.visible = isVisible;

        if (this.meshContainer) {
          this.meshContainer.visible = isVisible;
        }

        if (this.markupsExtension.renderer) {
          if (this.visible) {
            this.render();
          } else {
            this.markupsExtension.renderer.invalidate();
          }
        }

        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_VISIBILITY_CHANGED, markup: this, visible: isVisible });
      }
    } }, { key: "isVisible", value: function isVisible()

    {
      return this.visible;
    } }, { key: "isSelected", value: function isSelected()

    {
      return this.selected;
    } }, { key: "enableEdit", value: function enableEdit()

    {
      this.inEdit = true;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_ENABLE_EDIT, markup: this });
      this.setDirty();
    } }, { key: "disableEdit", value: function disableEdit()

    {
      this.inEdit = false;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DISABLE_EDIT, markup: this });
      this.setDirty();
    } }, { key: "enable", value: function enable()

    {
      this.enabled = true;

      this.changeTransparency(false);
    } }, { key: "disable", value: function disable()

    {
      this.enabled = false;

      this.changeTransparency(true);
    } }, { key: "isEnabled", value: function isEnabled()

    {
      return this.enabled;
    } }, { key: "changeTransparency", value: function changeTransparency(

    transparent) {
      if (this.transparent !== transparent) {
        this.transparent = transparent;

        if (this.visible && this.markupsExtension.renderer) {
          this.render({ style: {} });
        }

        this.setDirty();
      }
    } }, { key: "isTransparent", value: function isTransparent()

    {
      return this.transparent;
    } }, { key: "setHover", value: function setHover(

    hover) {
      if (this.hover !== hover) {
        this.hover = hover;

        if (this.belongsToGroup() && !this.markupGroup.locked) {
          this.markupGroup.setHover(hover, this);
        }
        this.setDirty();
      }
    } }, { key: "isHovered", value: function isHovered()

    {
      return this.hover;
    } }, { key: "isInEdit", value: function isInEdit()

    {
      return this.inEdit;
    } }, { key: "setDirty", value: function setDirty()

    {
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_DIRTY, markup: this });
    } }, { key: "isCompleted", value: function isCompleted()

    {
      return this.completed;
    } }, { key: "complete", value: function complete()

    {
      this.completed = true;

      if (this.selectWhenCompleted()) {
        this.select();
      } else {
        this.setDirty();
      }

      if (this.visible && this.markupsExtension.renderer) {
        this.render();
      }

      this.markupsExtension.markupsManager.selectLayer(this.layer, false, false);
    } }, { key: "selectWhenCompleted", value: function selectWhenCompleted()

    {
      return true;
    } }, { key: "registerAnchorHandler", value: function registerAnchorHandler(

    options) {
      this.anchorHandler = new _EditHandlers_AnchorHandler__WEBPACK_IMPORTED_MODULE_6__["default"](this.markupsExtension, this, options);
    } }, { key: "registerTranslationHandler", value: function registerTranslationHandler(

    options) {
      this.translationHandler = new _EditHandlers_TranslationHandler__WEBPACK_IMPORTED_MODULE_5__["default"](this.markupsExtension, this, options);
    } }, { key: "registerRotationHandler", value: function registerRotationHandler(

    options) {
      this.rotationHandler = new _EditHandlers_RotationHandler__WEBPACK_IMPORTED_MODULE_7__["default"](this.markupsExtension, this, options);
    } }, { key: "registerScaleHandler", value: function registerScaleHandler(

    options) {
      this.scaleHandler = new _EditHandlers_ScaleHandler__WEBPACK_IMPORTED_MODULE_8__["default"](this.markupsExtension, this, options);
    } }, { key: "registerSelectionHandler", value: function registerSelectionHandler(

    options) {
      this.selectionHandler = new _EditHandlers_SelectionHandler__WEBPACK_IMPORTED_MODULE_4__["default"](this.markupsExtension, this, options);
    } }, { key: "registerTextInputHandler", value: function registerTextInputHandler(

    options) {
      this.textInputHandler = new _EditHandlers_TextInputHandler__WEBPACK_IMPORTED_MODULE_9__["default"](this.markupsExtension, this, options);
    } }, { key: "registerDimensionEditHandler", value: function registerDimensionEditHandler(

    options) {
      this.dimensionEditHandler = new _EditHandlers_DimensionEditHandler__WEBPACK_IMPORTED_MODULE_10__["default"](this.markupsExtension, this, options);
    } }, { key: "applyCameraRotation", value: function applyCameraRotation(

    point) {
      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(point, cameraRotation, this.getWorldCenter(), eyeDirection);
    } }, { key: "applyInverseCameraRotation", value: function applyInverseCameraRotation(

    point) {
      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(point, -cameraRotation, this.getWorldCenter(), eyeDirection);
    } }, { key: "applyInverseRotation", value: function applyInverseRotation(

    point) {
      var rotation = this.getRotation();
      if (rotation === 0) {
        return;
      }

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(point, -rotation, this.getWorldCenter(), eyeDirection);
    } }, { key: "applyRotation", value: function applyRotation(

    point) {
      var rotation = this.getRotation();
      if (rotation === 0) {
        return;
      }

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(point, rotation, this.getWorldCenter(), eyeDirection);
    } }, { key: "applyRotationForAnchors", value: function applyRotationForAnchors(

    anchors) {
      var rotation = this.getRotation();
      if (rotation === 0) {
        return;
      }

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var center = this.getWorldCenter();
      anchors.forEach(function (anchor) {
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(anchor, rotation, center, eyeDirection);
      });
    } }, { key: "applyScaleAndTranslation", value: function applyScaleAndTranslation(

    point) {
      point.sub(this.center);
      point.applyMatrix4(this.matrix);
      point.add(this.center);
    } }, { key: "applyInverseScaleAndTranslation", value: function applyInverseScaleAndTranslation(

    point) {
      point.sub(this.center);
      point.applyMatrix4(this.invMatrix);
      point.add(this.center);
    } }, { key: "calculateWorldBoundingBox", value: function calculateWorldBoundingBox(

    rotate) {var _this = this;
      var boundingBox = new THREE.Box3();
      var anchors;
      if (this.meshLine && this.meshLine.boundingPoints) {
        anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.meshLine.boundingPoints);
      } else {
        anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.editState.anchors);
      }

      anchors.forEach(function (anchor) {
        _this.applyScaleAndTranslation(anchor);
      });

      if (rotate) {
        this.applyRotationForAnchors(anchors);
      }

      anchors.forEach(function (anchor) {
        boundingBox.expandByPoint(anchor);
      });

      var halfThickness = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] / 2;
      boundingBox.expandByVector(new THREE.Vector3(halfThickness, halfThickness, 0));

      return boundingBox;
    }

    // If you need to change the bounding box after getting it, make sure to clone it first!
  }, { key: "getWorldBoundingBox", value: function getWorldBoundingBox(rotate) {
      if (rotate) {
        if (!this.rotatedBoundingBox) {
          this.rotatedBoundingBox = this.calculateWorldBoundingBox(rotate);
        }
        return this.rotatedBoundingBox;
      } else {
        if (!this.boundingBox) {
          this.boundingBox = this.calculateWorldBoundingBox(rotate);
        }
        return this.boundingBox;
      }
    } }, { key: "getClientBoundingBox", value: function getClientBoundingBox(

    withMargin, rotate) {
      var boundingBox = this.getWorldBoundingBox(rotate).clone();

      boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);
      boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var center = boundingBox.center();

      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();

      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(boundingBox.min, cameraRotation, center, eyeDirection);
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(boundingBox.max, cameraRotation, center, eyeDirection);

      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(boundingBox);

      if (withMargin) {
        var margin = this.getMarginSize();
        boundingBox.expandByVector(new THREE.Vector3(margin, margin, 0));
      }

      boundingBox.min.z = 0;
      boundingBox.max.z = 0;

      return boundingBox;
    } }, { key: "getMarginSize", value: function getMarginSize()

    {
      return _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["BOUNDING_BOX_MARGIN"];
    }

    // Returns minimum size in client coordinates
  }, { key: "getMinimumSize", value: function getMinimumSize() {
      return Math.max(this.markupsExtension.renderer.sizeFromWorldToClient(this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS]), this.getMarginSize());
    } }, { key: "getCenter", value: function getCenter()

    {
      return this.center;
    } }, { key: "setPosition", value: function setPosition()

    {
      var translation = this.center.clone().add(this.editState.translation);
      this.meshContainer.position.copy(translation);
    } }, { key: "setRotation", value: function setRotation()

    {
      this.meshContainer.rotation.z = this.editState.rotation * this.markupsExtension.renderer.getCameraEyeVector().z;
    } }, { key: "getWorldCenter", value: function getWorldCenter()

    {
      return this.center.clone().add(this.editState.translation);
    } }, { key: "getClientCenter", value: function getClientCenter()

    {
      return this.markupsExtension.renderer.worldToClient(this.getWorldCenter());
    } }, { key: "getRotation", value: function getRotation()

    {
      return this.editState.rotation;
    } }, { key: "getScale", value: function getScale()

    {
      return this.editState.scale;
    } }, { key: "getAnchors", value: function getAnchors()

    {
      return this.editState.anchors;
    } }, { key: "isAnchorHandlingAllowed", value: function isAnchorHandlingAllowed(

    anchor) {
      return true;
    } }, { key: "getTail", value: function getTail()

    {
      return this.editState.anchors[this.editState.anchors.length - 1];
    } }, { key: "getHead", value: function getHead()

    {
      return this.editState.anchors[0];
    }

    // For group markups, returns a points suitable to place the next markup
  }, { key: "getStartPointForNextMarkup", value: function getStartPointForNextMarkup() {
      return new THREE.Vector3();
    } }, { key: "intersect", value: function intersect(

    _point) {
      var point = _point.clone();
      this.applyInverseRotation(point);
      var p = this.markupsExtension.renderer.worldToClient(point);

      var boundingBox = this.getClientBoundingBox(true);

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(p, cameraRotation, boundingBox.center(), eyeDirection);
      p.z = 0;

      var inBoundingBox = boundingBox.containsPoint(p);

      if (!inBoundingBox || this.isTextMarkup()) {
        return inBoundingBox;
      }

      if (this.hasFill() && this.fillMesh) {
        var intersects = this.markupsExtension.renderer.raycaster.intersectObject(this.fillMesh);
        if (intersects.length > 0) {
          return true;
        }
      }

      var halfWidth = this.strokeMaterial.uniforms.lineWidth.value / 2;

      halfWidth += this.markupsExtension.renderer.sizeFromClientToWorld(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["HIT_AREA_MARGIN"]);

      return this.meshLine.isPointNear(_point, halfWidth * halfWidth, this.meshContainer.matrixWorld);
    } }, { key: "isGroupMarkup", value: function isGroupMarkup()

    {
      return false;
    } }, { key: "belongsToGroup", value: function belongsToGroup()

    {
      return !!this.markupGroup;
    }

    // A text markup
  }, { key: "isTextMarkup", value: function isTextMarkup() {
      return false;
    }

    // A geometric shape with thickness
  }, { key: "isGeometricMarkup", value: function isGeometricMarkup() {
      return true;
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return false;
    } }, { key: "isPoint", value: function isPoint()

    {
      return this.editState.anchors.length < 2 || _RendererHelpers_MarkupsGeometryManager__WEBPACK_IMPORTED_MODULE_12__["default"].areAllAnchorsEqual(this.editState.anchors);
    } }, { key: "hasFill", value: function hasFill()

    {
      return this.isWithFillMarkup() && !this.options.fillNotAllowed &&
      this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY] > 0 &&
      this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR] !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["COLORS"].NO_COLOR;
    } }, { key: "needsMiter", value: function needsMiter()

    {
      return true;
    } }, { key: "showPath", value: function showPath()

    {
      return false;
    } }, { key: "hasThicknessChanged", value: function hasThicknessChanged()

    {
      return this.strokeMaterial && this.strokeMaterial.uniforms.lineWidth.value !== this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS];
    } }, { key: "removeFill", value: function removeFill()

    {
      if (this.fillMaterial) {
        this.materialManager.removeMaterial(this.fillMaterial);
        this.fillMaterial = null;
      }

      if (this.fillMesh) {
        this.meshContainer.remove(this.fillMesh);
        this.fillMesh = null;
      }
    } }, { key: "remove", value: function remove()

    {var doDispatchEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      if (!this.markupsExtension.renderer) {
        return;
      }

      if (this.strokeMaterial) {
        this.materialManager.removeMaterial(this.strokeMaterial);
        this.strokeMaterial = null;
      }

      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
        this.strokeMesh = null;
      }

      if (this.meshLine && !this.markupsExtension.renderer.geometryManager.isCachedGeometry(this.meshLine)) {
        this.meshLine.dispose();
        this.meshLine = null;
      }

      if (this.fillMaterial) {
        this.materialManager.removeMaterial(this.fillMaterial);
        this.fillMaterial = null;
      }

      if (this.fillMesh) {
        if (!this.markupsExtension.renderer.geometryManager.isCachedGeometry(this.fillMesh.geometry)) {
          this.fillMesh.traverse(function (child) {if (child.geometry) child.geometry.dispose();});
        }
        this.meshContainer.remove(this.fillMesh);
        this.fillMesh = null;
      }

      if (this.meshContainer) {
        this.markupsExtension.renderer.removeFromScene(this);
        this.meshContainer = null;
      }

      if (doDispatchEvent) {
        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_3__["MARKUPS_EVENTS"].MARKUP_REMOVED, markup: this });
      }
    } }, { key: "destroy", value: function destroy()

    {
      if (this.anchorHandler) {
        this.anchorHandler.destroy();
        this.anchorHandler = null;
      }

      if (this.translationHandler) {
        this.translationHandler.destroy();
        this.translationHandler = null;
      }

      if (this.rotationHandler) {
        this.rotationHandler.destroy();
        this.rotationHandler = null;
      }

      if (this.scaleHandler) {
        this.scaleHandler.destroy();
        this.scaleHandler = null;
      }

      if (this.selectionHandler) {
        this.selectionHandler.destroy();
        this.selectionHandler = null;
      }

      if (this.textInputHandler) {
        this.textInputHandler.destroy();
        this.textInputHandler = null;
      }

      this.markupsExtension = null;
      this.state = null;
      this.editState = null;
      this.layer = null;
    } }], [{ key: "createMesh", value: function createMesh(

    geometry, material) {
      var mesh = new THREE.Mesh(geometry, material);
      mesh.frustumCulled = false; // We do our own culling in MarkupsRenderer

      return mesh;
    } }]);return Markup;}();


av.GlobalManagerMixin.call(Markup.prototype);

Markup.singleClickMarkup = false;
Markup.withSnappingMarkup = false;
Markup.useTimerBeforeSelection = false;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupArrow.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupArrow.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupArrow; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupLines */ "./extensions/BimMarkups/MarkupTypes/MarkupLines.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupArrow = /*#__PURE__*/function (_MarkupLines) {_inherits(MarkupArrow, _MarkupLines);var _super = _createSuper(MarkupArrow);
  function MarkupArrow(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupArrow);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"], state, options);
  }_createClass(MarkupArrow, [{ key: "getTail", value: function getTail()

    {
      return this.editState.anchors[0];
    } }, { key: "getHead", value: function getHead()

    {
      return this.editState.anchors[1];
    } }, { key: "getStartPointForNextMarkup", value: function getStartPointForNextMarkup()

    {
      return this.getTail().clone();
    } }, { key: "isAnchorHandlingAllowed", value: function isAnchorHandlingAllowed(

    anchor) {
      if (this.options.headHandlingNotAllowed && anchor === this.getHead() ||
      this.options.tailHandlingNotAllowed && anchor === this.getTail()) {
        return false;
      }

      return true;
    } }]);return MarkupArrow;}(_MarkupLines__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupArrowCallout.js":
/*!*****************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupArrowCallout.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupArrowCallout; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupCallout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupCallout */ "./extensions/BimMarkups/MarkupTypes/MarkupCallout.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupArrowCallout = /*#__PURE__*/function (_MarkupCallout) {_inherits(MarkupArrowCallout, _MarkupCallout);var _super = _createSuper(MarkupArrowCallout);
  function MarkupArrowCallout(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupArrowCallout);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CALLOUT"], state, options);
  }_createClass(MarkupArrowCallout, [{ key: "getTextMarkup", value: function getTextMarkup()

    {
      return this.markups[1];
    } }, { key: "getArrowMarkup", value: function getArrowMarkup()

    {
      return this.markups[0];
    } }, { key: "applyArrowConstraints", value: function applyArrowConstraints(

    state) {
      this.applyArrowTextConstraint(state);
    } }, { key: "applyConstraints", value: function applyConstraints(

    sourceMarkup, prevState, newState) {var _this = this;
      this.markups.forEach(function (markup) {
        if (markup === sourceMarkup || !markup.isCompleted()) {
          return;
        }

        if (sourceMarkup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"] && sourceMarkup.anchorHandler.activeAnchor === sourceMarkup.getHead()) {
          sourceMarkup.setLocked(true);
          _this.applyArrowConstraints(newState);
          sourceMarkup.setLocked(false);
        }
      });
    } }]);return MarkupArrowCallout;}(_MarkupCallout__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupArrowCloudCallout.js":
/*!**********************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupArrowCloudCallout.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupArrowCloudCallout; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupCallout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupCallout */ "./extensions/BimMarkups/MarkupTypes/MarkupCallout.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupArrowCloudCallout = /*#__PURE__*/function (_MarkupCallout) {_inherits(MarkupArrowCloudCallout, _MarkupCallout);var _super = _createSuper(MarkupArrowCloudCallout);
  function MarkupArrowCloudCallout(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupArrowCloudCallout);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CLOUD_CALLOUT"], state, options);
  }_createClass(MarkupArrowCloudCallout, [{ key: "getTextMarkup", value: function getTextMarkup()

    {
      return this.markups[2];
    } }, { key: "getArrowMarkup", value: function getArrowMarkup()

    {
      return this.markups[1];
    } }, { key: "getShapeMarkup", value: function getShapeMarkup()

    {
      return this.markups[0];
    } }, { key: "applyArrowConstraints", value: function applyArrowConstraints(


    state) {
      this.applyArrowTextConstraint(state);
      this.applyShapeArrowConstraint(state);
    } }, { key: "applyConstraints", value: function applyConstraints(

    sourceMarkup, prevState, newState) {var _this = this;
      this.markups.forEach(function (markup) {
        if (markup === sourceMarkup || !markup.isCompleted()) {
          return;
        }

        if (sourceMarkup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"]) {
          sourceMarkup.setLocked(true);
          if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CLOUD"]) {
            _this.applyShapeArrowConstraint(newState);
          } else {
            _this.applyArrowTextConstraint(newState);
          }
          sourceMarkup.setLocked(false);
        }
      });
    } }]);return MarkupArrowCloudCallout;}(_MarkupCallout__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupCallout.js":
/*!************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupCallout.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupCallout; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupGroup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupGroup */ "./extensions/BimMarkups/MarkupTypes/MarkupGroup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupCallout = /*#__PURE__*/function (_MarkupGroup) {_inherits(MarkupCallout, _MarkupGroup);var _super = _createSuper(MarkupCallout);
  function MarkupCallout(markupsExtension, id, type, state) {var _this;var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};_classCallCheck(this, MarkupCallout);
    _this = _super.call(this, markupsExtension, id, type, state, options);

    var textMarkup = _this.getTextMarkup();
    textMarkup.textInputHandler.onEmptyTextMarkup = _this.onEmptyTextMarkup.bind(_assertThisInitialized(_this));return _this;
  }_createClass(MarkupCallout, [{ key: "getArrowMarkup", value: function getArrowMarkup()

    {
      throw new Error('getArrowMarkup should be implemented');
    } }, { key: "getTextMarkup", value: function getTextMarkup()

    {
      throw new Error('getTextMarkup should be implemented');
    } }, { key: "getShapeMarkup", value: function getShapeMarkup()

    {
      throw new Error('getShapeMarkup should be implemented');
    } }, { key: "getQuadrant", value: function getQuadrant(

    markup, angle) {
      var bbox = markup.getWorldBoundingBox(true);
      var limitAngle = Math.atan2(bbox.size().y, bbox.size().x);

      // Quadrant locations:
      //
      //       \   3   /
      //        \     /
      //         \   /
      //     4    \ /     2
      //          / \
      //         /   \
      //        /  1  \
      //       /       \
      if (angle >= -(Math.PI - limitAngle) && angle < -limitAngle) {
        return 1;
      } else if (angle >= -limitAngle && angle < limitAngle) {
        return 2;
      } else if (angle >= limitAngle && angle < Math.PI - limitAngle) {
        return 3;
      } else {
        return 4;
      }
    } }, { key: "getTextQuadrant", value: function getTextQuadrant(

    angle) {
      return this.getQuadrant(this.getTextMarkup(), angle);
    } }, { key: "getShapeQuadrant", value: function getShapeQuadrant(

    angle) {
      return this.getQuadrant(this.getShapeMarkup(), angle);
    }

    // Returns a vector from closest vertex to the passed point
  }, { key: "getVectorToClosestPointOnCloud", value: function getVectorToClosestPointOnCloud(point) {
      var text = this.getTextMarkup();
      var geo = text.frameMarkup.meshLine.sourceGeo;
      var closestDistance = Infinity;
      var closestVertex = null;

      // Find closest point on cloud (brute force approach)
      geo.forEach(function (vertex) {
        var distance = point.distanceToSquared(vertex);
        if (distance < closestDistance) {
          closestDistance = distance;
          closestVertex = vertex;
        }
      });

      return point.clone().sub(closestVertex);
    } }, { key: "applyArrowTextConstraint", value: function applyArrowTextConstraint(

    state) {
      var arrow = this.getArrowMarkup();
      var text = this.getTextMarkup();
      state = state || arrow.getEditState();
      if (!state.anchors[0] || !state.anchors[1]) {
        return;
      }

      var bbox = text.getWorldBoundingBox(true);
      var center = bbox.center();
      var halfThickness = text.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].THICKNESS] / 2;
      var halfHeight = bbox.size().y / 2 - halfThickness;
      var halfWidth = bbox.size().x / 2 - halfThickness;

      var origArrowTail = state.anchors[0];
      var arrowHead = state.anchors[1].clone();
      arrow.applyScaleAndTranslation(arrowHead);

      var angle = Math.atan2(arrowHead.y - center.y, arrowHead.x - center.x);

      switch (this.getTextQuadrant(angle)) {
        case 1:
          origArrowTail.set(center.x, center.y - halfHeight, 0);
          break;
        case 2:
          origArrowTail.set(center.x + halfWidth, center.y, 0);
          break;
        case 3:
          origArrowTail.set(center.x, center.y + halfHeight, 0);
          break;
        case 4:
          origArrowTail.set(center.x - halfWidth, center.y, 0);
          break;}


      if (text.editState.frameType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CLOUD"]) {
        var tailPoint = origArrowTail.clone().sub(center);
        var delta = this.getVectorToClosestPointOnCloud(tailPoint).negate();
        origArrowTail.add(delta);
      }
      arrow.applyInverseScaleAndTranslation(origArrowTail);
      arrow.creationHandler.updateEditStateAnchors();
    } }, { key: "applyShapeArrowConstraint", value: function applyShapeArrowConstraint(

    state) {
      var arrow = this.getArrowMarkup();
      var shape = this.getShapeMarkup();
      state = state || arrow.getEditState();
      if (!state.anchors[0] || !state.anchors[1]) {
        return;
      }

      var bbox = shape.getWorldBoundingBox(true);
      var center = bbox.center();
      var halfHeight = bbox.size().y / 2;
      var halfWidth = bbox.size().x / 2;

      var origArrowHead = state.anchors[1];
      var arrowTail = state.anchors[0].clone();
      arrow.applyScaleAndTranslation(arrowTail);

      var dx = arrowTail.x - center.x;
      var dy = arrowTail.y - center.y;
      var angle = Math.atan2(dy, dx);
      var delta;

      var sign = function sign(d) {return d > 0 ? 1 : -1;};

      switch (this.getShapeQuadrant(angle)) {
        case 1:
          delta = sign(dx) * halfWidth / 3;
          origArrowHead.set(center.x + delta, center.y - halfHeight, 0);
          break;
        case 2:
          delta = sign(dy) * halfHeight / 3;
          origArrowHead.set(center.x + halfWidth, center.y + delta, 0);
          break;
        case 3:
          delta = sign(dx) * halfWidth / 3;
          origArrowHead.set(center.x + delta, center.y + halfHeight, 0);
          break;
        case 4:
          delta = sign(dy) * halfHeight / 3;
          origArrowHead.set(center.x - halfWidth, center.y + delta, 0);
          break;}


      arrow.applyInverseScaleAndTranslation(origArrowHead);
      arrow.creationHandler.updateEditStateAnchors();
    } }, { key: "applyArrowConstraints", value: function applyArrowConstraints(

    state) {
      throw new Error('applyArrowTextConstraint must be implemented');
    } }, { key: "applyConstraints", value: function applyConstraints(

    sourceMarkup, prevState, newState) {
      throw new Error('applyConstraints must be implemented');
    } }, { key: "applyTranslation", value: function applyTranslation(

    sourceMarkup, prevState, newState) {var _this2 = this;
      this.markups.forEach(function (markup) {
        if (markup === sourceMarkup || !markup.isCompleted()) {
          return;
        }

        markup.setLocked(true);
        if (sourceMarkup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"]) {
          // For shape and text, apply the same translation
          var translation = newState.translation.clone().sub(prevState.translation);
          translation = markup.editState.translation.clone().add(translation);
          markup.creationHandler.updateEditState({ translation: translation });
        } else {// markup is arrow
          _this2.applyArrowConstraints();
        }
        markup.setLocked(false);
      });
    } }, { key: "applyStyle", value: function applyStyle(

    sourceMarkup, prevState, newState, changes) {var _this3 = this;
      this.markups.forEach(function (markup) {
        if (markup === sourceMarkup || !markup.isCompleted()) {
          return;
        }

        markup.setLocked(true);
        markup.creationHandler.updateEditState({ style: changes.style });
        _this3.applyArrowConstraints();
        markup.setLocked(false);
      });
    } }, { key: "applyScale", value: function applyScale(

    sourceMarkup, prevState, newState) {var _this4 = this;
      this.markups.forEach(function (markup) {
        if (markup === sourceMarkup || !markup.isCompleted()) {
          return;
        }

        if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"]) {
          markup.setLocked(true);
          _this4.applyArrowConstraints();
          markup.setLocked(false);
        }
      });
    } }, { key: "applyTextChange", value: function applyTextChange(

    sourceMarkup, prevState, newState) {
      this.applyArrowConstraints();
    } }, { key: "onEmptyTextMarkup", value: function onEmptyTextMarkup()

    {
      this.markupsExtension.markupsManager.actionManager.undo();

      var textMarkup = this.getTextMarkup();
      textMarkup.creationHandler.updateEditState({ text: textMarkup.getDefaultState().text });
      textMarkup.creationHandler.submitChanges();
    } }]);return MarkupCallout;}(_MarkupGroup__WEBPACK_IMPORTED_MODULE_1__["default"]);


MarkupCallout.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupCircle.js":
/*!***********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupCircle.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupCircle; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupScalableShape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupScalableShape */ "./extensions/BimMarkups/MarkupTypes/MarkupScalableShape.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupCircle = /*#__PURE__*/function (_MarkupScalableShape) {_inherits(MarkupCircle, _MarkupScalableShape);var _super = _createSuper(MarkupCircle);
  function MarkupCircle(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupCircle);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CIRCLE"], state, options);
  }_createClass(MarkupCircle, [{ key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }, { key: "needsMiter", value: function needsMiter()

    {
      return false;
    } }]);return MarkupCircle;}(_MarkupScalableShape__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupCloud.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupCloud.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupCloud; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupCloud = /*#__PURE__*/function (_Markup) {_inherits(MarkupCloud, _Markup);var _super = _createSuper(MarkupCloud);
  function MarkupCloud(markupsExtension, id, state) {var _this;var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupCloud);
    _this = _super.call(this, markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CLOUD"], state, options);

    _this.registerTranslationHandler();
    if (!options.rotationNotAllowed) {
      _this.registerRotationHandler();
    }
    _this.registerScaleHandler();return _this;
  }_createClass(MarkupCloud, [{ key: "createCloud", value: function createCloud()

    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }
      if (this.fillMesh) {
        this.meshContainer.remove(this.fillMesh);
        this.fillMesh = null;
      }

      // stroke mesh
      if (!this.strokeMaterial) {
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);
      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_1__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      // fill mesh
      if (this.hasFill() && !this.isPoint()) {
        this.createFillMesh();
      }

      this.meshContainer.add(this.strokeMesh);

      if (this.meshLine.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CIRCLE"]) {
        var width = this.editState.anchors[0].distanceTo(this.editState.anchors[1]);
        var height = this.editState.anchors[2].distanceTo(this.editState.anchors[1]);
        var minSize = this.markupsExtension.renderer.getNormaStrokeWidth();
        this.meshContainer.scale.x = Math.max(Math.abs(width * this.editState.scale.x), minSize) * Math.sign(this.editState.scale.x);
        this.meshContainer.scale.y = Math.max(Math.abs(height * this.editState.scale.y), minSize) * Math.sign(this.editState.scale.y);

        // Set the initial rotation to be according to camera rotation.
        if (this.isCompleted()) {
          this.setRotation();
        } else {
          this.meshContainer.rotation.z = -this.markupsExtension.renderer.getCameraRotation() * this.markupsExtension.renderer.getCameraEyeVector().z;
        }
      } else {
        this.meshContainer.scale.x = 1.0;
        this.meshContainer.scale.y = 1.0;
        this.setRotation();
      }

      this.setPosition();
    } }, { key: "createFillMesh", value: function createFillMesh()

    {var _this2 = this;
      var fill = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);
      if (!fill.innerGeometry) {
        return;
      }
      if (!this.fillMaterial) {
        this.fillMaterial = this.materialManager.addMaterial(this, true);
      }

      this.fillMesh = _Markup__WEBPACK_IMPORTED_MODULE_1__["default"].createMesh(fill.innerGeometry, this.fillMaterial);
      this.meshContainer.add(this.fillMesh);

      if (fill.arcGeometry) {
        this.meshLine.arcs.forEach(function (arc) {
          var mesh = _Markup__WEBPACK_IMPORTED_MODULE_1__["default"].createMesh(fill.arcGeometry, _this2.fillMaterial);
          _this2.fillMesh.add(mesh);
          mesh.position.x = arc.x;
          mesh.position.y = arc.y;
        });
      }
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupCloud.prototype), "render", this).call(this);

      var anchors = changes.anchors;
      if (anchors && anchors.length > 1 || this.editState.anchors.length > 1 && changes.scale) {// Scale recreates the mesh as well
        this.createCloud();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var recreateCloud = this.hasThicknessChanged();

        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
        }

        if (this.hasFill()) {
          if (this.fillMesh) {
            var newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);

            if (newFillMaterial) {
              this.fillMaterial = newFillMaterial;
              this.fillMesh.traverse(function (child) {return child.material = newFillMaterial;});
            }
          } else {
            recreateCloud = true;
          }
        } else {
          this.removeFill();
        }

        if (recreateCloud) {
          this.createCloud();
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      if (changes.rotation !== undefined) {
        this.setRotation();
      }

      this.markupsExtension.renderer.invalidate();
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }, { key: "needsMiter", value: function needsMiter()

    {
      return false;
    } }]);return MarkupCloud;}(_Markup__WEBPACK_IMPORTED_MODULE_1__["default"]);


MarkupCloud.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupDimension.js":
/*!**************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupDimension.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupDimension; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
/* harmony import */ var _MarkupText__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarkupText */ "./extensions/BimMarkups/MarkupTypes/MarkupText.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}



var

MarkupDimension = /*#__PURE__*/function (_Markup) {_inherits(MarkupDimension, _Markup);var _super = _createSuper(MarkupDimension);
  function MarkupDimension(markupsExtension, id, state) {var _this;var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupDimension);
    _this = _super.call(this, markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_DIMENSION"], state, options);

    if (_this.markupsExtension.viewer.impl.is2d) {
      _this.registerDimensionEditHandler();
    }

    _this.textMarkup = new _MarkupText__WEBPACK_IMPORTED_MODULE_4__["default"](markupsExtension, id);
    _this.textMarkup.editState.isFrameUsed = false;

    _this.registerTextInputHandler({ singleLine: true, onEmptyTextMarkup: _this.onEmptyTextMarkup.bind(_assertThisInitialized(_this)), submitChanges: _this.onSubmitChanges.bind(_assertThisInitialized(_this)) });

    _this.getTextStyle = _this.textMarkup.getTextStyle.bind(_this.textMarkup);

    var originalEditStart = _this.textInputHandler.editStart;
    _this.textInputHandler.editStart = function () {
      originalEditStart.bind(_this.textInputHandler)();
      _this.onTextMarkupEditStart();
    };

    var originalEditEnd = _this.textInputHandler.editEnd;
    _this.textInputHandler.editEnd = function () {
      originalEditEnd.bind(_this.textInputHandler)();
      _this.onTextMarkupEditEnd();
    };

    _this.textMarkup.textInputHandler = _this.textInputHandler;return _this;
  }_createClass(MarkupDimension, [{ key: "setVisible", value: function setVisible(

    isVisible, forceSet) {
      _get(_getPrototypeOf(MarkupDimension.prototype), "setVisible", this).call(this, isVisible, forceSet);

      this.textMarkup.setVisible(isVisible, forceSet);
    } }, { key: "setState", value: function setState(

    state) {
      _get(_getPrototypeOf(MarkupDimension.prototype), "setState", this).call(this, state);

      this.textMarkup.rotatedBoundingBox = null;
      this.textMarkup.boundingBox = null;
      this.textMarkup.resetFrameBoundingBox();
    } }, { key: "setEditState", value: function setEditState(

    editState, changes, source) {
      this.textMarkup.rotatedBoundingBox = null;
      this.textMarkup.boundingBox = null;
      this.textMarkup.resetFrameBoundingBox();

      _get(_getPrototypeOf(MarkupDimension.prototype), "setEditState", this).call(this, editState, changes, source);
    } }, { key: "createDimension", value: function createDimension()

    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }

      if (!this.strokeMaterial) {
        this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] *= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
        this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] /= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);

      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_3__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      this.meshContainer.add(this.strokeMesh);

      this.setPosition();
    } }, { key: "calculateWorldBoundingBox", value: function calculateWorldBoundingBox(

    rotate) {
      var boundingBox = _get(_getPrototypeOf(MarkupDimension.prototype), "calculateWorldBoundingBox", this).call(this, rotate);

      var textBoundingBox = this.textMarkup.calculateWorldBoundingBox(true);
      return boundingBox.union(textBoundingBox);
    } }, { key: "renderText", value: function renderText()

    {var _this$getEditState =
      this.getEditState(),anchors = _this$getEditState.anchors,text = _this$getEditState.text,style = _this$getEditState.style;
      var textStyle = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(style);
      textStyle[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE] *= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_FONT_SIZE_FACTOR"];
      this.textMarkup.enabled = this.enabled;
      this.textMarkup.transparent = this.isTransparent();
      this.textMarkup.editState.style = textStyle;
      this.textMarkup.editState.text = text;
      this.textMarkup.editState.isSingleLine = true;

      var pos = anchors[0].clone().add(anchors[1]).multiplyScalar(0.5);
      this.applyScaleAndTranslation(pos);
      this.textMarkup.creationHandler.calculateAnchorsByCenterPoint(pos);

      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();

      // Modify markup's anchors, so the rotation won't affect the final result, except of the bounding box.
      var textAnchors = this.textMarkup.editState.anchors;
      textAnchors.forEach(function (anchor) {
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(anchor, cameraRotation, pos, eyeDirection);
      });

      var angle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].getSignedAngle(this.markupsExtension.renderer.getCameraRightVector(), anchors[1].clone().sub(anchors[0]), this.markupsExtension.renderer.getCameraEyeVector());
      // Text should always be readable - flip it if it's upside down.
      if (Math.abs(angle) > Math.PI / 2) {
        angle += Math.PI;
      }

      this.textMarkup.editState.rotation = angle - cameraRotation;

      var p1 = textAnchors[1].clone();
      var p2 = textAnchors[2].clone();

      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation([p1, p2], this.textMarkup.editState.rotation, pos, eyeDirection);

      var thickness = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];
      var tipLength = thickness * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_TIP_LENGTH"];

      var dir = p2.clone().sub(p1);
      var textTranslation = dir.clone().normalize().multiplyScalar(tipLength).add(dir.multiplyScalar(0.5));

      textAnchors.forEach(function (anchor) {
        anchor.add(textTranslation);
      });

      this.textMarkup.render();
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupDimension.prototype), "render", this).call(this);var

      anchors = changes.anchors;

      if (anchors && anchors.length > 1) {
        this.createDimension();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] *= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];
        var recreateDimension = this.hasThicknessChanged();
        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);
        this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] /= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
          if (recreateDimension) {
            this.createDimension();
          }
        }
      }

      if (changes.translation) {
        this.createDimension(); // Due to change in translation, need to update dimension geometry too.
        this.setPosition();
      }

      this.renderText();

      this.markupsExtension.renderer.invalidate();
    } }, { key: "isTextMarkup", value: function isTextMarkup()

    {
      return true;
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }, { key: "onEmptyTextMarkup", value: function onEmptyTextMarkup()

    {
      this.markupsExtension.markupsManager.actionManager.undo();

      var text = this.creationHandler.getDistance();
      this.creationHandler.updateEditState({ text: text });
      this.creationHandler.submitChanges();
    } }, { key: "onSubmitChanges", value: function onSubmitChanges()

    {
      this.textInputHandler.submitChanges();
      this.hasChanges = true;
    } }, { key: "remove", value: function remove()

    {var doDispatchEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.textMarkup.remove(false);
      _get(_getPrototypeOf(MarkupDimension.prototype), "remove", this).call(this, doDispatchEvent);
    } }, { key: "onTextMarkupEditStart", value: function onTextMarkupEditStart()

    {var
      text = this.textMarkup.editState.text;

      if (text[0] === '(' && text[text.length - 1] === ')') {
        text = text.slice(1, text.length - 1);
      }

      this.hasChanges = false;

      this.creationHandler.updateEditState({ text: text });
    } }, { key: "onTextMarkupEditEnd", value: function onTextMarkupEditEnd()

    {var
      text = this.textMarkup.editState.text;

      if (text[0] === '(' && text[text.length - 1] === ')') {
        text = text.slice(1, text.length - 1);
      }
      if (text !== '') {
        if (this.hasChanges) {
          this.markupsExtension.markupsManager.actionManager.undo();

          this.creationHandler.updateEditState({ text: "(".concat(text, ")") });
          this.creationHandler.submitChanges();
        } else if (text !== this.creationHandler.getDistance()) {
          this.creationHandler.updateEditState({ text: "(".concat(text, ")") });
        }
      }
    } }]);return MarkupDimension;}(_Markup__WEBPACK_IMPORTED_MODULE_3__["default"]);


MarkupDimension.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupFreehand.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupFreehand.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupFreehand; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupPen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupPen */ "./extensions/BimMarkups/MarkupTypes/MarkupPen.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupFreehand = /*#__PURE__*/function (_MarkupPen) {_inherits(MarkupFreehand, _MarkupPen);var _super = _createSuper(MarkupFreehand);
  function MarkupFreehand(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupFreehand);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_FREEHAND"], state, options);
  }return MarkupFreehand;}(_MarkupPen__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupGroup.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupGroup.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupGroup; });
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _EditHandlers_TranslationHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../EditHandlers/TranslationHandler */ "./extensions/BimMarkups/EditHandlers/TranslationHandler.js");
/* harmony import */ var _EditHandlers_ScaleHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../EditHandlers/ScaleHandler */ "./extensions/BimMarkups/EditHandlers/ScaleHandler.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}


var

MarkupGroup = /*#__PURE__*/function (_Markup) {_inherits(MarkupGroup, _Markup);var _super = _createSuper(MarkupGroup);
  function MarkupGroup(markupsExtension, id, type, state, options) {_classCallCheck(this, MarkupGroup);return _super.call(this,
    markupsExtension, id, type, state, options);
  }_createClass(MarkupGroup, [{ key: "render", value: function render()

    {
      // Group is only a container markup - doesn't do any rendering itself
      var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;} }, { key: "intersect", value: function intersect(

    _point) {
      return false;
    } }, { key: "isGroupMarkup", value: function isGroupMarkup()

    {
      return true;
    } }, { key: "select", value: function select(

    selectedMarkup) {
      this.selected = true;
      this.enableEdit();

      if (selectedMarkup) {
        this.setLocked(true);
        this.markups.forEach(function (markup) {return markup !== selectedMarkup && !markup.isSelected() && markup.select();});
        this.setLocked(false);
      }

      this.setDirty();
    } }, { key: "setHover", value: function setHover(

    hover, hoveredMarkup) {
      if (this.hover === hover) return;

      this.hover = hover;

      if (hoveredMarkup) {
        this.setLocked(true);
        this.markups.forEach(function (markup) {return markup !== hoveredMarkup && markup.isHovered() !== hover && markup.setHover(hover);});
        this.setLocked(false);
      }

      this.setDirty();
    } }, { key: "calculateWorldBoundingBox", value: function calculateWorldBoundingBox()

    {
      var boundingBox = new THREE.Box3();

      this.markups.forEach(function (markup) {
        var bbox = markup.getWorldBoundingBox(true);
        boundingBox.union(bbox);
      });

      return boundingBox;
    } }, { key: "remove", value: function remove()

    {var doDispatchEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.markups.forEach(function (markup) {return markup.remove(doDispatchEvent);});

      _get(_getPrototypeOf(MarkupGroup.prototype), "remove", this).call(this, doDispatchEvent);
    } }, { key: "syncGroupMarkups", value: function syncGroupMarkups(

    sourceMarkup, prevState, newState, changes, source) {
      if (changes.anchors) {
        this.applyConstraints(sourceMarkup, prevState, newState);
      }

      // Translation constraints are only applied when it comes from a mouse movement in the translation handler
      // This allows creating specific interactions depending on which component of the group was moved
      if (changes.translation && source instanceof _EditHandlers_TranslationHandler__WEBPACK_IMPORTED_MODULE_2__["default"] && source.keyTranslation.length() === 0) {
        this.applyTranslation(sourceMarkup, prevState, newState);
      }

      if (changes.scale && source instanceof _EditHandlers_ScaleHandler__WEBPACK_IMPORTED_MODULE_3__["default"]) {
        this.applyScale(sourceMarkup, prevState, newState);
      }

      if (changes.style) {
        this.applyStyle(sourceMarkup, prevState, newState, changes);
      }

      if (changes.text) {
        this.applyTextChange(sourceMarkup, prevState, newState);
      }
    } }, { key: "applyConstraints", value: function applyConstraints(

    sourceMarkup, prevState, newState) {

    } }, { key: "applyTranslation", value: function applyTranslation(

    sourceMarkup, prevState, newState) {

    } }, { key: "applyStyle", value: function applyStyle(

    sourceMarkup, prevState, newState, changes) {

    } }, { key: "applyScale", value: function applyScale(

    sourceMarkup, prevState, newState) {

    } }, { key: "applyTextChange", value: function applyTextChange(

    sourceMarkup, prevState, newState) {

    } }]);return MarkupGroup;}(_Markup__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupHighlight.js":
/*!**************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupHighlight.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupHighlight; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupPen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupPen */ "./extensions/BimMarkups/MarkupTypes/MarkupPen.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupHighlight = /*#__PURE__*/function (_MarkupPen) {_inherits(MarkupHighlight, _MarkupPen);var _super = _createSuper(MarkupHighlight);
  function MarkupHighlight(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupHighlight);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_HIGHLIGHT"], state, options);
  }_createClass(MarkupHighlight, [{ key: "getDefaultStyle", value: function getDefaultStyle()

    {
      var style = _get(_getPrototypeOf(MarkupHighlight.prototype), "getDefaultStyle", this).call(this);
      style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].OPACITY] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_HIGHLIGHT_OPACITY"];

      return style;
    } }]);return MarkupHighlight;}(_MarkupPen__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupLine.js":
/*!*********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupLine.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupLine; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupLines */ "./extensions/BimMarkups/MarkupTypes/MarkupLines.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupLine = /*#__PURE__*/function (_MarkupLines) {_inherits(MarkupLine, _MarkupLines);var _super = _createSuper(MarkupLine);
  function MarkupLine(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupLine);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_LINE"], state, options);
  }return MarkupLine;}(_MarkupLines__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupLines.js":
/*!**********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupLines.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupLines; });
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

MarkupLines = /*#__PURE__*/function (_Markup) {_inherits(MarkupLines, _Markup);var _super = _createSuper(MarkupLines);
  function MarkupLines(markupsExtension, id, type, state) {var _this;var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};_classCallCheck(this, MarkupLines);
    _this = _super.call(this, markupsExtension, id, type, state, options);

    _this.registerTranslationHandler();
    _this.registerAnchorHandler();return _this;
  }_createClass(MarkupLines, [{ key: "createLine", value: function createLine()


    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }

      if (!this.strokeMaterial) {
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);

      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_0__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      this.setPosition();

      this.meshContainer.add(this.strokeMesh);
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupLines.prototype), "render", this).call(this);

      var anchors = changes.anchors;
      if (anchors && anchors.length > 1) {
        this.createLine();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var recreateLines = this.hasThicknessChanged();

        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
          if (recreateLines) {
            this.createLine();
          }
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      this.markupsExtension.renderer.invalidate();
    } }]);return MarkupLines;}(_Markup__WEBPACK_IMPORTED_MODULE_0__["default"]);


MarkupLines.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupPen.js":
/*!********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupPen.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupPen; });
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

MarkupPen = /*#__PURE__*/function (_Markup) {_inherits(MarkupPen, _Markup);var _super = _createSuper(MarkupPen);
  function MarkupPen(markupsExtension, id, type, state) {var _this;var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};_classCallCheck(this, MarkupPen);
    _this = _super.call(this, markupsExtension, id, type, state, options);

    _this.registerTranslationHandler();
    _this.registerRotationHandler();
    _this.registerScaleHandler();return _this;
  }_createClass(MarkupPen, [{ key: "selectWhenCompleted", value: function selectWhenCompleted()

    {
      return false;
    } }, { key: "needsMiter", value: function needsMiter()

    {
      return true;
    } }, { key: "createPen", value: function createPen()

    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }

      if (!this.strokeMaterial) {
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);

      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_0__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      this.meshContainer.add(this.strokeMesh);

      this.setPosition();
      this.setRotation();
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupPen.prototype), "render", this).call(this);

      var anchors = changes.anchors;
      if (anchors && anchors.length > 0 || this.editState.anchors.length > 0 && changes.scale) {// Scale recreates the mesh as well
        this.createPen();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      if (changes.rotation !== undefined) {
        this.setRotation();
      }

      this.markupsExtension.renderer.invalidate();
    } }]);return MarkupPen;}(_Markup__WEBPACK_IMPORTED_MODULE_0__["default"]);


MarkupPen.singleClickMarkup = true;
MarkupPen.useTimerBeforeSelection = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupPolycloud.js":
/*!**************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupPolycloud.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupPolycloud; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

MarkupPolycloud = /*#__PURE__*/function (_Markup) {_inherits(MarkupPolycloud, _Markup);var _super = _createSuper(MarkupPolycloud);
  function MarkupPolycloud(markupsExtension, id, state) {var _this;var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupPolycloud);
    _this = _super.call(this, markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYCLOUD"], state, options);

    _this.registerTranslationHandler();
    _this.registerAnchorHandler();
    _this.registerRotationHandler();
    _this.registerScaleHandler();return _this;
  }_createClass(MarkupPolycloud, [{ key: "getDefaultState", value: function getDefaultState()

    {
      return {
        closed: false };

    } }, { key: "needsMiter", value: function needsMiter()

    {
      return false;
    } }, { key: "createCloud", value: function createCloud()

    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }
      if (this.fillMesh) {
        this.meshContainer.remove(this.fillMesh);
        this.fillMesh = null;
      }

      // stroke mesh
      if (!this.strokeMaterial) {
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);
      if (this.meshLine.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CIRCLE"]) {
        var minSize = this.markupsExtension.renderer.getNormaStrokeWidth();
        this.meshContainer.scale.x = minSize;
        this.meshContainer.scale.y = minSize;
      } else {
        this.meshContainer.scale.x = 1.0;
        this.meshContainer.scale.y = 1.0;
      }

      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      if (this.hasFill() && !this.isPoint() && Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isPolygonSimple"])(this.editState.anchors)) {
        this.createFillMesh();
      }
      this.meshContainer.add(this.strokeMesh);

      this.setPosition();
      this.setRotation();
    } }, { key: "createFillMesh", value: function createFillMesh()

    {var _this2 = this;
      var fill = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);
      if (!fill.innerGeometry) {
        return;
      }

      if (!this.fillMaterial) {
        this.fillMaterial = this.materialManager.addMaterial(this, true);
      }

      this.fillMesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(fill.innerGeometry, this.fillMaterial);
      this.meshContainer.add(this.fillMesh);

      if (fill.arcGeometry) {
        this.meshLine.arcs.forEach(function (arc) {
          var mesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(fill.arcGeometry, _this2.fillMaterial);
          _this2.fillMesh.add(mesh);
          mesh.position.x = arc.x;
          mesh.position.y = arc.y;
        });
      }

      if (fill.fillGapGeometries) {
        fill.fillGapGeometries.forEach(function (shape) {
          var mesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(shape, _this2.fillMaterial);
          _this2.fillMesh.add(mesh);
        });
      }
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupPolycloud.prototype), "render", this).call(this);

      var anchors = changes.anchors;
      if (anchors && anchors.length > 0 || this.editState.anchors.length > 0 && changes.scale) {// Scale recreates the mesh as well
        this.createCloud();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var recreateCloud = this.hasThicknessChanged();

        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
        }

        if (this.hasFill()) {
          if (this.fillMesh) {
            var newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);

            if (newFillMaterial) {
              this.fillMaterial = newFillMaterial;
              this.fillMesh.traverse(function (child) {return child.material = newFillMaterial;});
            }
          } else {
            recreateCloud = true; // To trigger re-creation
          }
        } else {
          this.removeFill();
        }

        if (recreateCloud) {
          this.createCloud();
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      if (changes.rotation !== undefined) {
        this.setRotation();
      }

      this.markupsExtension.renderer.invalidate();
    } }, { key: "showPath", value: function showPath()

    {
      return true;
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return this.editState.closed;
    } }]);return MarkupPolycloud;}(_Markup__WEBPACK_IMPORTED_MODULE_2__["default"]);


MarkupPolycloud.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupPolyline.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupPolyline.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupPolyline; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

var

MarkupPolyline = /*#__PURE__*/function (_Markup) {_inherits(MarkupPolyline, _Markup);var _super = _createSuper(MarkupPolyline);
  function MarkupPolyline(markupsExtension, id, state) {var _this;var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupPolyline);
    _this = _super.call(this, markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYLINE"], state, options);

    _this.registerTranslationHandler();
    _this.registerAnchorHandler();
    _this.registerRotationHandler();
    _this.registerScaleHandler();return _this;
  }_createClass(MarkupPolyline, [{ key: "getDefaultState", value: function getDefaultState()

    {
      return {
        closed: false };

    } }, { key: "createPolyline", value: function createPolyline()

    {
      if (this.strokeMesh) {
        this.meshContainer.remove(this.strokeMesh);
      }
      if (this.fillMesh) {
        this.meshContainer.remove(this.fillMesh);
        this.fillMesh = null;
      }

      // stroke mesh
      if (!this.strokeMaterial) {
        this.strokeMaterial = this.materialManager.addMaterial(this, false);
      }

      this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);
      this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

      // fill mesh
      if (this.hasFill() && !this.isPoint() && Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["isPolygonSimple"])(this.editState.anchors)) {
        if (!this.fillMaterial) {
          this.fillMaterial = this.materialManager.addMaterial(this, true);
        }

        var fillGeometry = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);
        if (fillGeometry) {
          this.fillMesh = _Markup__WEBPACK_IMPORTED_MODULE_2__["default"].createMesh(fillGeometry, this.fillMaterial);
          this.meshContainer.add(this.fillMesh);
        }
      }

      this.meshContainer.add(this.strokeMesh);

      this.setPosition();
      this.setRotation();
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupPolyline.prototype), "render", this).call(this);


      var anchors = changes.anchors;
      if (anchors && anchors.length > 0 || this.editState.anchors.length > 0 && changes.scale) {// Scale recreates the mesh as well
        this.createPolyline();
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
        }

        var recreate = false;
        if (this.hasFill()) {
          if (this.fillMesh) {
            var newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);

            if (newFillMaterial) {
              this.fillMaterial = newFillMaterial;
              this.fillMesh.material = newFillMaterial;
            }
          } else {
            recreate = true; // To trigger re-creation
          }
        } else {
          this.removeFill();
        }

        if (recreate) {
          this.createPolyline();
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      if (changes.rotation !== undefined) {
        this.setRotation();
      }

      this.markupsExtension.renderer.invalidate();
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return this.editState.closed;
    } }, { key: "showPath", value: function showPath()

    {
      return true;
    } }]);return MarkupPolyline;}(_Markup__WEBPACK_IMPORTED_MODULE_2__["default"]);


MarkupPolyline.withSnappingMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupRectangle.js":
/*!**************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupRectangle.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupRectangle; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupScalableShape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupScalableShape */ "./extensions/BimMarkups/MarkupTypes/MarkupScalableShape.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupRectangle = /*#__PURE__*/function (_MarkupScalableShape) {_inherits(MarkupRectangle, _MarkupScalableShape);var _super = _createSuper(MarkupRectangle);
  function MarkupRectangle(markupsExtension, id, state) {var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupRectangle);return _super.call(this,
    markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_RECTANGLE"], state, options);
  }_createClass(MarkupRectangle, [{ key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }]);return MarkupRectangle;}(_MarkupScalableShape__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupScalableShape.js":
/*!******************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupScalableShape.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupScalableShape; });
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var

MarkupScalableShape = /*#__PURE__*/function (_Markup) {_inherits(MarkupScalableShape, _Markup);var _super = _createSuper(MarkupScalableShape);
  function MarkupScalableShape(markupsExtension, id, type, state) {var _this;var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};_classCallCheck(this, MarkupScalableShape);
    _this = _super.call(this, markupsExtension, id, type, state, options);

    _this.width = 0;
    _this.height = 0;

    _this.registerTranslationHandler();
    _this.registerRotationHandler();
    _this.registerScaleHandler();return _this;
  }_createClass(MarkupScalableShape, [{ key: "setSize", value: function setSize()

    {
      var minSize = this.markupsExtension.renderer.getNormaStrokeWidth();
      this.meshContainer.scale.x = Math.max(Math.abs(this.width * this.editState.scale.x), minSize) * Math.sign(this.editState.scale.x);
      this.meshContainer.scale.y = Math.max(Math.abs(this.height * this.editState.scale.y), minSize) * Math.sign(this.editState.scale.y);
    } }, { key: "createShape", value: function createShape(

    anchors) {
      if (!this.strokeMesh) {
        if (!this.strokeMaterial) {
          this.strokeMaterial = this.materialManager.addMaterial(this, false);
        }

        // stroke mesh
        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);
        this.strokeMesh = _Markup__WEBPACK_IMPORTED_MODULE_0__["default"].createMesh(this.meshLine.geometry, this.strokeMaterial);

        this.meshContainer.add(this.strokeMesh);

        // Set the initial rotation to be according to camera rotation.
        this.meshContainer.rotation.z = -this.markupsExtension.renderer.getCameraRotation() * this.markupsExtension.renderer.getCameraEyeVector().z;
      }

      if (!this.fillMesh && this.hasFill()) {
        this.createFill();
      }

      this.width = anchors[0].distanceTo(anchors[1]);
      this.height = anchors[2].distanceTo(anchors[1]);

      this.setPosition();
      this.setSize();
    } }, { key: "createFill", value: function createFill()

    {
      this.fillGeometry = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);

      if (this.fillGeometry) {
        if (!this.fillMaterial) {
          this.fillMaterial = this.materialManager.addMaterial(this, true);
        }

        this.fillMesh = _Markup__WEBPACK_IMPORTED_MODULE_0__["default"].createMesh(this.fillGeometry, this.fillMaterial);

        // Make sure fill is first in order
        this.meshContainer.add(this.fillMesh);
        this.meshContainer.add(this.strokeMesh);
      }
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      _get(_getPrototypeOf(MarkupScalableShape.prototype), "render", this).call(this);

      var anchors = changes.anchors;
      if (anchors && anchors.length > 1) {
        this.createShape(anchors);
      }

      if (!this.strokeMesh) {
        return;
      }

      if (changes.style) {
        var newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);

        if (newStrokeMaterial) {
          this.strokeMaterial = newStrokeMaterial;
          this.strokeMesh.material = newStrokeMaterial;
        }

        if (this.hasFill()) {
          if (this.fillMesh) {
            var newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);

            if (newFillMaterial) {
              this.fillMaterial = newFillMaterial;
              this.fillMesh.material = newFillMaterial;
            }
          } else {
            this.createFill();
          }
        } else {
          this.removeFill();
        }
      }

      if (changes.translation) {
        this.setPosition();
      }

      if (changes.rotation !== undefined) {
        this.setRotation();
      }

      if (changes.scale) {
        this.setSize();
      }

      this.markupsExtension.renderer.invalidate();
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }]);return MarkupScalableShape;}(_Markup__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupText.js":
/*!*********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupText.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupText; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _Markup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MarkupsTypesDictionary */ "./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== "undefined" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}




var

MarkupText = /*#__PURE__*/function (_Markup) {_inherits(MarkupText, _Markup);var _super = _createSuper(MarkupText);
  function MarkupText(markupsExtension, id, state) {var _this;var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};_classCallCheck(this, MarkupText);
    _this = _super.call(this, markupsExtension, id, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CALLOUT"], state, options);

    _this.registerTranslationHandler();
    _this.registerScaleHandler({ onlyHorizontal: true });
    _this.registerTextInputHandler();
    if (!options.rotationNotAllowed) {
      _this.registerRotationHandler();
    }return _this;
  }_createClass(MarkupText, [{ key: "getDefaultState", value: function getDefaultState()

    {
      return {
        text: 'Default Text',
        isFrameUsed: true,
        frameType: this.options.frameType ? this.options.frameType : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"] };

    } }, { key: "shouldRenderFrame", value: function shouldRenderFrame()

    {
      return this.editState.isFrameUsed || this.hasFill();
    } }, { key: "setVisible", value: function setVisible(

    isVisible, forceSet) {
      _get(_getPrototypeOf(MarkupText.prototype), "setVisible", this).call(this, isVisible, forceSet);

      if (this.frameMarkup) {
        this.frameMarkup.setVisible(isVisible, forceSet);
      } else if (this.shouldRenderFrame() && isVisible) {
        this.renderFrame();
      }
    } }, { key: "render", value: function render()

    {var changes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editState;
      this.markupsExtension.renderer.textRenderer.renderMarkup(this);
      if (this.shouldRenderFrame()) {
        this.renderFrame();
      } else {
        this.removeFrame();

        // Since there is no geometry changes in this case, we need to trigger the bounding box rendering using setDirty.
        this.setDirty();
      }
    } }, { key: "renderFrame", value: function renderFrame()

    {
      if (!this.frameMarkup) {
        this.frameMarkup = new _MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_5__["markupsTypesDictionary"][this.editState.frameType](this.markupsExtension, this.id);
        this.frameMarkup.layer = this.layer;
        this.frameMarkup.transparent = this.isTransparent();
        this.frameMarkup.editState.anchors = [new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3()];
      }

      var state = this.frameMarkup.editState;
      // Copy style
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS];
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY];
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR];
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY];

      if (!this.editState.isFrameUsed) {
        state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR];
        state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY];
      } else {
        state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR] = this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR];
        state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY] = 1.0;
      }


      // Set anchors
      var bbox = this.getWorldBoundingBox();
      var t = state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] / 2;
      this.frameMarkup.editState.anchors[0].set(bbox.min.x + t, bbox.min.y + t, 0);
      this.frameMarkup.editState.anchors[1].set(bbox.max.x - t, bbox.min.y + t, 0);
      this.frameMarkup.editState.anchors[2].set(bbox.max.x - t, bbox.max.y - t, 0);
      this.frameMarkup.editState.anchors[3].set(bbox.min.x + t, bbox.max.y - t, 0);

      // Copy rotation (translate and scale not needed since they are already included in the bounding box)
      state.rotation = this.editState.rotation;

      this.frameMarkup.updateMatrix();

      this.frameMarkup.render();
    } }, { key: "removeFrame", value: function removeFrame()

    {
      if (this.frameMarkup) {
        this.frameMarkup.remove(false);
        this.frameMarkup = null;
      }
    } }, { key: "remove", value: function remove()

    {var doDispatchEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.removeFrame();
      _get(_getPrototypeOf(MarkupText.prototype), "remove", this).call(this, doDispatchEvent);
    } }, { key: "changeTransparency", value: function changeTransparency(

    transparent) {
      if (this.frameMarkup) {
        this.frameMarkup.transparent = transparent;
      }
      _get(_getPrototypeOf(MarkupText.prototype), "changeTransparency", this).call(this, transparent);
    } }, { key: "resetFrameBoundingBox", value: function resetFrameBoundingBox()

    {
      if (this.frameMarkup) {
        this.frameMarkup.rotatedBoundingBox = null;
        this.frameMarkup.boundingBox = null;
      }
    } }, { key: "setState", value: function setState(

    state) {
      this.resetFrameBoundingBox();

      _get(_getPrototypeOf(MarkupText.prototype), "setState", this).call(this, state);
    } }, { key: "setEditState", value: function setEditState(

    editState, changes, source) {
      if (changes && changes.style) {
        var newState = Object.assign({}, editState, changes);
        // When changing font-size, we want it to grow down, instead of from the middle.
        var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion
        var _this$getTextWidthInF = this.getTextWidthInFontScale(),width = _this$getTextWidthInF.width;

        var oldStyle = this.getTextStyle(this.editState);
        var newStyle = this.getTextStyle(newState);
        oldStyle.width = "".concat(width, "px");
        newStyle.width = "".concat(width, "px");
        var oldSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getTextSize"])(this.editState.text, oldStyle);
        var newSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getTextSize"])(newState.text, newStyle);

        if (newSize.height !== oldSize.height) {
          var offsetWorld = (newSize.height - oldSize.height) * fontToWorldScale;
          var delta = this.getBoundingBoxVerticalTranslation(offsetWorld);

          if (this.shouldRenderFrame()) {
            var oldFrameSize = this.calculateFrameSize(this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE]);
            var newFrameSize = this.calculateFrameSize(newState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE]);
            var deltaFrameSize = newFrameSize - oldFrameSize;
            var deltaFrameVec = new THREE.Vector3(deltaFrameSize, -deltaFrameSize, 0);

            this._rotateTranslationVector(deltaFrameVec);
            delta.add(deltaFrameVec);
          }

          if (!changes.translation) {var _this$getEditState =
            this.getEditState(),translation = _this$getEditState.translation;
            translation.add(delta);
            changes.translation = translation;
          } else {
            changes.translation.add(delta);
          }
        }

        changes.isFrameUsed = newState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR] !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["COLORS"].NO_COLOR;
      }

      this.resetFrameBoundingBox();

      _get(_getPrototypeOf(MarkupText.prototype), "setEditState", this).call(this, editState, changes, source);
    } }, { key: "getTextWidthInFontScale", value: function getTextWidthInFontScale()

    {
      var isSafari = Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice();

      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion
      var preciseWidth = this.getWorldBoundingBoxTextOnly().size().x / fontToWorldScale;
      var width = isSafari ? preciseWidth : Math.ceil(preciseWidth) || 1; // Safari doesn't need rounded width

      return { preciseWidth: preciseWidth, width: width };
    } }, { key: "getBoundingBoxVerticalTranslation", value: function getBoundingBoxVerticalTranslation(

    offsetWorld) {
      var delta = new THREE.Vector3(0, -offsetWorld / 2, 0);

      this._rotateTranslationVector(delta);

      return delta;
    } }, { key: "_rotateTranslationVector", value: function _rotateTranslationVector(

    vec) {
      var rotation = this.getRotation();
      if (rotation !== 0) {
        var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(vec, rotation, new THREE.Vector3(), eyeDirection);
      }
    } }, { key: "_rotateBoundingBox", value: function _rotateBoundingBox(

    boundingBox) {
      var rotation = this.getRotation();
      if (rotation === 0) {
        return boundingBox;
      }

      var center = boundingBox.center();
      var size = boundingBox.size();
      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var rotatedBoundingBox = new THREE.Box3();
      var points = [boundingBox.min, boundingBox.min.clone().add(new THREE.Vector3(size.x, 0, 0)), boundingBox.max, boundingBox.min.clone().add(new THREE.Vector3(0, size.y, 0))];
      points.forEach(function (point) {
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(point, rotation, center, eyeDirection);
        rotatedBoundingBox.expandByPoint(point);
      });

      return rotatedBoundingBox;
    } }, { key: "_calculateWorldBoundingBoxText", value: function _calculateWorldBoundingBoxText()

    {var _this2 = this;
      var boundingBox = new THREE.Box3();
      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(this.editState.anchors);

      anchors.forEach(function (anchor) {
        _this2.applyScaleAndTranslation(anchor);
      });

      anchors.forEach(function (anchor) {
        boundingBox.expandByPoint(anchor);
      });

      // Now, make some text adjustments, so the bounding box will fit exactly to the text.
      var center = boundingBox.center();
      var style = this.getTextStyle();
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion

      // If the width of the bounding box is smaller than a single letter width, change the bounding box width to be in the size of a single letter.
      var textBounds = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getTextSize"])('A', style);
      if (boundingBox.size().x < textBounds.width * fontToWorldScale) {
        boundingBox.min.x = center.x;
        boundingBox.max.x = center.x;
        boundingBox.expandByVector(new THREE.Vector3(textBounds.width * fontToWorldScale / 2, 0, 0));
      }

      var unscaledWidth = Math.ceil(boundingBox.size().x / fontToWorldScale);
      style.width = "".concat(unscaledWidth, "px");

      // Set the height of the bounding box according to the text measurement.
      textBounds = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getTextSize"])(this.editState.text, style);
      boundingBox.min.y = center.y;
      boundingBox.max.y = center.y;
      boundingBox.expandByVector(new THREE.Vector3(0, textBounds.height * fontToWorldScale / 2, 0));

      return boundingBox;
    } }, { key: "calculateWorldBoundingBox", value: function calculateWorldBoundingBox(

    rotate) {
      var boundingBox = this._calculateWorldBoundingBoxText();

      if (this.shouldRenderFrame()) {
        var frameSize = this.getWorldFrameSize();
        boundingBox.expandByVector(new THREE.Vector3(frameSize, frameSize, 0));
      }

      if (rotate) {
        return this._rotateBoundingBox(boundingBox);
      }

      return boundingBox;
    } }, { key: "calculateFrameSize", value: function calculateFrameSize(

    fontSize) {var thickness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS];
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion
      var padding = fontSize * fontToWorldScale / 2;

      if (!this.editState.isFrameUsed) {
        thickness = 0;
      } else {
        if (this.editState.frameType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]) {
          thickness += this.markupsExtension.renderer.geometryManager.getCloudMinimumRadius(thickness) / 2;
        }
      }

      return padding + thickness;
    } }, { key: "getWorldFrameSize", value: function getWorldFrameSize()

    {
      return this.calculateFrameSize(this.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE]);
    } }, { key: "getClientFrameSize", value: function getClientFrameSize()

    {
      var frameSize = this.getWorldFrameSize();

      return this.markupsExtension.renderer.sizeFromWorldToClient(frameSize);
    } }, { key: "getWorldBoundingBoxTextOnly", value: function getWorldBoundingBoxTextOnly(

    rotate) {
      if (!this.shouldRenderFrame()) {
        return this.getWorldBoundingBox(rotate).clone();
      }

      var boundingBox = this.getWorldBoundingBox(false).clone();

      var frameSize = this.getWorldFrameSize();
      boundingBox.expandByVector(new THREE.Vector3(-frameSize, -frameSize, 0));

      if (rotate) {
        return this._rotateBoundingBox(boundingBox);
      }

      return boundingBox;
    } }, { key: "getClientBoundingBoxTextOnly", value: function getClientBoundingBoxTextOnly(

    rotate) {var normalizeY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var boundingBox = this.getWorldBoundingBoxTextOnly(rotate);

      boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);
      boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);

      if (normalizeY) {
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(boundingBox);
      }

      return boundingBox;
    } }, { key: "getTextStyle", value: function getTextStyle()

    {var editState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getEditState();var
      style = editState.style;

      var textStyle = {};
      textStyle.color = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR];
      textStyle.fontFamily = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_FAMILY];
      textStyle.opacity = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY] * (this.isTransparent() ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DISABLED_OPACITY"] : 1.0);
      textStyle.fontSize = "".concat(style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE], "px");
      textStyle.fontWeight = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_WEIGHT];
      textStyle.fontStyle = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_STYLE];
      textStyle.whiteSpace = editState.isSingleLine ? 'nowrap' : 'pre-wrap';
      textStyle.lineHeight = 1;
      textStyle.backgroundColor = null;

      return textStyle;
    }

    // Returns minimum size in client coordinates
  }, { key: "getMinimumSize", value: function getMinimumSize() {
      var minSize = _get(_getPrototypeOf(MarkupText.prototype), "getMinimumSize", this).call(this);

      var style = this.getTextStyle();
      // If the width of the bounding box is smaller than a single letter width, change the bounding box width to be in the size of a single letter.
      var textBounds = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getTextSize"])('A', style);
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion

      return Math.max(this.markupsExtension.renderer.sizeFromWorldToClient(textBounds.width * fontToWorldScale + 2 * this.getWorldFrameSize()), minSize);
    } }, { key: "isTextMarkup", value: function isTextMarkup()

    {
      return true;
    } }, { key: "isGeometricMarkup", value: function isGeometricMarkup()

    {
      return false;
    } }, { key: "isWithFillMarkup", value: function isWithFillMarkup()

    {
      return true;
    } }, { key: "getStartPointForNextMarkup", value: function getStartPointForNextMarkup()

    {
      return this.getWorldBoundingBox().center().clone();
    } }]);return MarkupText;}(_Markup__WEBPACK_IMPORTED_MODULE_3__["default"]);


MarkupText.singleClickMarkup = true;

/***/ }),

/***/ "./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js":
/*!*********************************************************************!*\
  !*** ./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js ***!
  \*********************************************************************/
/*! exports provided: markupsTypesDictionary */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "markupsTypesDictionary", function() { return markupsTypesDictionary; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupArrow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupArrow */ "./extensions/BimMarkups/MarkupTypes/MarkupArrow.js");
/* harmony import */ var _MarkupPolyline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupPolyline */ "./extensions/BimMarkups/MarkupTypes/MarkupPolyline.js");
/* harmony import */ var _MarkupPolycloud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupPolycloud */ "./extensions/BimMarkups/MarkupTypes/MarkupPolycloud.js");
/* harmony import */ var _MarkupRectangle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarkupRectangle */ "./extensions/BimMarkups/MarkupTypes/MarkupRectangle.js");
/* harmony import */ var _MarkupCircle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MarkupCircle */ "./extensions/BimMarkups/MarkupTypes/MarkupCircle.js");
/* harmony import */ var _MarkupCloud__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MarkupCloud */ "./extensions/BimMarkups/MarkupTypes/MarkupCloud.js");
/* harmony import */ var _MarkupFreehand__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MarkupFreehand */ "./extensions/BimMarkups/MarkupTypes/MarkupFreehand.js");
/* harmony import */ var _MarkupHighlight__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MarkupHighlight */ "./extensions/BimMarkups/MarkupTypes/MarkupHighlight.js");
/* harmony import */ var _MarkupText__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MarkupText */ "./extensions/BimMarkups/MarkupTypes/MarkupText.js");
/* harmony import */ var _MarkupDimension__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MarkupDimension */ "./extensions/BimMarkups/MarkupTypes/MarkupDimension.js");
/* harmony import */ var _MarkupLine__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MarkupLine */ "./extensions/BimMarkups/MarkupTypes/MarkupLine.js");
/* harmony import */ var _MarkupArrowCallout__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./MarkupArrowCallout */ "./extensions/BimMarkups/MarkupTypes/MarkupArrowCallout.js");
/* harmony import */ var _MarkupArrowCloudCallout__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MarkupArrowCloudCallout */ "./extensions/BimMarkups/MarkupTypes/MarkupArrowCloudCallout.js");
var _markupsTypesDictiona;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}














var markupsTypesDictionary = (_markupsTypesDictiona = {}, _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW"], _MarkupArrow__WEBPACK_IMPORTED_MODULE_1__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYLINE"], _MarkupPolyline__WEBPACK_IMPORTED_MODULE_2__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_POLYCLOUD"], _MarkupPolycloud__WEBPACK_IMPORTED_MODULE_3__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_RECTANGLE"], _MarkupRectangle__WEBPACK_IMPORTED_MODULE_4__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CIRCLE"], _MarkupCircle__WEBPACK_IMPORTED_MODULE_5__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CLOUD"], _MarkupCloud__WEBPACK_IMPORTED_MODULE_6__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_FREEHAND"], _MarkupFreehand__WEBPACK_IMPORTED_MODULE_7__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_HIGHLIGHT"], _MarkupHighlight__WEBPACK_IMPORTED_MODULE_8__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CALLOUT"], _MarkupArrowCallout__WEBPACK_IMPORTED_MODULE_12__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_ARROW_CLOUD_CALLOUT"], _MarkupArrowCloudCallout__WEBPACK_IMPORTED_MODULE_13__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_CALLOUT"], _MarkupText__WEBPACK_IMPORTED_MODULE_9__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_TEXT"], _MarkupText__WEBPACK_IMPORTED_MODULE_9__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_DIMENSION"], _MarkupDimension__WEBPACK_IMPORTED_MODULE_10__["default"]), _defineProperty(_markupsTypesDictiona,
_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_TYPE_LINE"], _MarkupLine__WEBPACK_IMPORTED_MODULE_11__["default"]), _markupsTypesDictiona);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsCommon.js":
/*!************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsCommon.js ***!
  \************************************************/
/*! exports provided: forAll, flatten, isEqualVectors, getObjectAsList, nearestPointInPointToLine, applyTranslation, convertHexToRGBA, getTextSize, createArc, createCloud, isClockwise, isTrueValue, getArcAngleSize, insertInSortedArray, checkLineIntersection, handleIntersection, markupsOverlayRenderer, getScreenShotOfMarkup, setCustomGestureValues, restoreGestureValues, simplify, isPolygonSimple, executeAfterTransitionEnded, isSheetNameEqual */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forAll", function() { return forAll; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEqualVectors", function() { return isEqualVectors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getObjectAsList", function() { return getObjectAsList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nearestPointInPointToLine", function() { return nearestPointInPointToLine; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyTranslation", function() { return applyTranslation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertHexToRGBA", function() { return convertHexToRGBA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTextSize", function() { return getTextSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createArc", function() { return createArc; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCloud", function() { return createCloud; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isClockwise", function() { return isClockwise; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTrueValue", function() { return isTrueValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getArcAngleSize", function() { return getArcAngleSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "insertInSortedArray", function() { return insertInSortedArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkLineIntersection", function() { return checkLineIntersection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleIntersection", function() { return handleIntersection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "markupsOverlayRenderer", function() { return markupsOverlayRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScreenShotOfMarkup", function() { return getScreenShotOfMarkup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setCustomGestureValues", function() { return setCustomGestureValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "restoreGestureValues", function() { return restoreGestureValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simplify", function() { return simplify; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPolygonSimple", function() { return isPolygonSimple; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "executeAfterTransitionEnded", function() { return executeAfterTransitionEnded; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSheetNameEqual", function() { return isSheetNameEqual; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");



var av = Autodesk.Viewing;

var forAll = function forAll(obj, func) {
  if (obj) {
    Object.keys(obj).forEach(function (key) {
      var m = obj[key];
      if (m) {
        func(m);
      }
    });
  }
};

// Converts a deep array to a flat array
var flatten = function flatten(list) {return list.reduce(function (a, b) {return a.concat(Array.isArray(b) ? flatten(b) : b);}, []);};

var isEqualVectors = function isEqualVectors(v1, v2, precision) {
  if (!v1 || !v2) {
    return false;
  }

  precision = precision || _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["EPSILON"];

  if (v1.distanceTo(v2) <= precision) {
    return true;
  }
  return false;
};

// Converts the object into a flat list, keeping the same pointers for all items (shallow copy).
var getObjectAsList = function getObjectAsList(object) {
  var list = [];

  forAll(object, function (item) {
    if (Array.isArray(item)) {
      item.forEach(function (i) {
        list.push(i);
      });
    } else {
      list.push(item);
    }
  });

  return list;
};

var nearestPointInPointToLine = function nearestPointInPointToLine(point, lineStart, lineEnd) {
  var X0 = new THREE.Vector3();
  var X1 = new THREE.Vector3();
  var nearestPoint;
  var param;

  X0.subVectors(lineStart, point);
  X1.subVectors(lineEnd, lineStart);
  param = X0.dot(X1);
  X0.subVectors(lineEnd, lineStart);
  param = -param / X0.dot(X0);

  X0.subVectors(lineEnd, lineStart);
  X0.multiplyScalar(param);
  nearestPoint = X0.add(lineStart);

  return nearestPoint;
};

var applyTranslation = function applyTranslation(points, translation) {
  if (!(points instanceof Array)) {
    points = [points];
  }

  points.forEach(function (point) {
    point.x += translation.x;
    point.y += translation.y;
    point.z += translation.z;
  });
};

var convertHexToRGBA = function convertHexToRGBA(hex, opacity) {
  if (!hex || hex === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["COLORS"].NO_COLOR || !opacity) {
    return null;
  }

  hex = hex.replace('#', '');
  var r = parseInt(hex.substring(0, 2), 16);
  var g = parseInt(hex.substring(2, 4), 16);
  var b = parseInt(hex.substring(4, 6), 16);
  return 'rgba(' + r + ',' + g + ',' + b + ',' + opacity + ')';
};

var getTextSize = function () {
  var _document = av.getGlobal().document;
  var measureDiv = _document.createElement('div');
  measureDiv.id = 'text-markup-measure-div';
  measureDiv.style.position = 'absolute';
  measureDiv.style.visibility = 'hidden';
  measureDiv.style.pointerEvents = 'none';
  measureDiv.style.textRendering = 'geometricPrecision';

  _document.body.appendChild(measureDiv);
  var cache = {};

  return function (text, style) {
    var hash = "".concat(text, "_").concat(style.fontWeight, "_").concat(style.fontSize, "_").concat(style.fontFamily, "_").concat(style.fontStyle, "_").concat(style.width);

    if (cache[hash]) {
      return cache[hash];
    }

    measureDiv.innerText = text;
    measureDiv.style.fontWeight = style.fontWeight;
    measureDiv.style.fontSize = style.fontSize;
    measureDiv.style.fontFamily = style.fontFamily;
    measureDiv.style.fontStyle = style.fontStyle;
    measureDiv.style.overflowWrap = style.overflowWrap || 'break-word';
    measureDiv.style.wordWrap = style.wordWrap || 'break-word'; //IE11 
    measureDiv.style.whiteSpace = style.whiteSpace || 'pre-wrap';
    measureDiv.style.width = style.width || (Autodesk.Viewing.isIE11 ? 'auto' : 'unset');
    measureDiv.style.lineHeight = style.lineHeight || 1;var _measureDiv$getBoundi =

    measureDiv.getBoundingClientRect(),width = _measureDiv$getBoundi.width,height = _measureDiv$getBoundi.height;

    cache[hash] = { width: width, height: height };

    return cache[hash];
  };
}();

var createArc = function createArc(x, y, radius, start, end, clockwise, steps, path) {var radiusInMM = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;var bbox = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;
  if (!path)
  path = [];

  x = x || 0;
  y = y || 0;
  radius = radius || 0;
  start = start || 0;
  end = end || 0;

  var dist = Math.abs(start - end);
  if (dist > 2 * Math.PI) dist -= 2 * Math.PI;
  if (!clockwise && start > end)
  dist = 2 * Math.PI - dist;else
  if (clockwise && end > start)
  dist = 2 * Math.PI - dist;

  //approximate the # of steps using the cube root of the radius
  if (typeof steps !== 'number') {
    radiusInMM = radiusInMM || radius;
    steps = Math.max(6, 2 * Math.floor(6 * Math.pow(radiusInMM, 1 / 3) * (dist / Math.PI)));
  }

  //ensure we have at least 3 steps
  steps = Math.max(steps, 3);

  var f = dist / steps,
  t = start;

  //modify direction
  f *= clockwise ? -1 : 1;

  for (var i = 0; i < steps + 1; i++) {
    var nx = x + Math.cos(t) * radius;
    var ny = y + Math.sin(t) * radius;

    path.push({ x: nx, y: ny, z: 0 });

    if (bbox) {
      bbox.min.x = Math.min(bbox.min.x, nx);
      bbox.min.y = Math.min(bbox.min.y, ny);
      bbox.max.x = Math.max(bbox.max.x, nx);
      bbox.max.y = Math.max(bbox.max.y, ny);
    }

    t += f;
  }

  return path;
};

var _addFillingCircle = function _addFillingCircle(circles, radius, begin, end) {
  var beginPoint = new THREE.Vector2(circles[begin].x + Math.cos(circles[begin].end) * radius, circles[begin].y + Math.sin(circles[begin].end) * radius);
  var endPoint = new THREE.Vector2(circles[end].x + Math.cos(circles[end].begin) * radius, circles[end].y + Math.sin(circles[end].begin) * radius);

  var difVec = beginPoint.clone().sub(endPoint);

  var vecLength = difVec.length();

  var mid = beginPoint.clone().add(endPoint).divideScalar(2);

  difVec.normalize();
  var perpenLength = Math.sqrt(Math.max(0, radius * radius - vecLength / 2 * (vecLength / 2)));
  var perpenVec = new THREE.Vector2(difVec.y, -difVec.x);
  perpenVec.multiplyScalar(perpenLength);

  var newPoint = mid.clone().add(perpenVec);

  var beginAng = Math.atan2(beginPoint.y - newPoint.y, beginPoint.x - newPoint.x);
  var endAng = Math.atan2(endPoint.y - newPoint.y, endPoint.x - newPoint.x);

  var newCircle = {
    x: newPoint.x,
    y: newPoint.y,
    begin: beginAng,
    end: endAng };


  circles.splice(begin + 1, 0, newCircle);

  return { newCircle: newCircle, beginPoint: beginPoint, endPoint: endPoint };
};

var _hideIntersectionCircles = function _hideIntersectionCircles(circles, radius, intersectionObjects) {
  for (var t = 0; t < intersectionObjects.length; t++) {
    var begin = null;
    var end = 0;
    for (var k = 0; k < circles.length; k++) {
      if (circles[k]['isCurrentIntersection' + t]) {
        for (var j = 0; j < circles.length; j++) {
          if (circles[j]['isNextIntersection' + t]) {
            var dist = Math.sqrt((circles[k].x - circles[j].x) * (circles[k].x - circles[j].x) + (circles[k].y - circles[j].y) * (circles[k].y - circles[j].y));
            if (dist < 2 * radius) {
              circles[k].hide = true;
              if (begin === null) begin = k - 1;
              circles[j].hide = true;
              if (end < j + 1) end = j + 1;
            }
          }
        }
      }
    }
    intersectionObjects[t].begin = begin;
    intersectionObjects[t].end = end;
  }
};

var createCloud = function createCloud(poly, radius) {var isClosed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;var intersectionObjects = arguments.length > 3 ? arguments[3] : undefined;var overlap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 4 / 5;var incise = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 20;var stretch = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;
  /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *      Global intersection angles of two circles of the same radius
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */
  function intersect(p, q, r) {
    var dx = q.x - p.x;
    var dy = q.y - p.y;

    var len = Math.sqrt(dx * dx + dy * dy);
    var a = 0.5 * len / r;

    if (a < -1) a = -1;
    if (a > 1) a = 1;

    var phi = Math.atan2(dy, dx);
    var gamma = Math.acos(a);

    return [phi - gamma, Math.PI + phi + gamma];
  }

  // Create a list of circles
  var circles = [];
  var delta = 2 * radius * overlap;
  var prev = isClosed ? poly[poly.length - 1] : poly[0];
  stretch = stretch || !isClosed;

  for (var i = isClosed ? 0 : 1; i < poly.length; i++) {
    var curr = poly[i];

    var dx = curr.x - prev.x;
    var dy = curr.y - prev.y;

    var len = Math.sqrt(dx * dx + dy * dy);

    dx /= len;
    dy /= len;

    var firstAngle = 0;
    var lastAngle = 0;
    if (!isClosed) {
      if (i === 1) {// Start point
        len -= radius;
        prev.x += dx * radius;
        prev.y += dy * radius;
        firstAngle = Math.atan2(dy, dx) + Math.PI;
      } else if (i === poly.length - 1) {// End point
        lastAngle = Math.atan2(dy, dx);
      }
    }

    var d = delta;

    if (stretch) {
      var n = len / delta + 0.5 | 0;

      if (n < 1) {
        n = 1;
      }

      d = len / n;
    }

    for (var a = 0; a + 0.1 * d < len; a += d) {
      circles.push({
        x: prev.x + a * dx,
        y: prev.y + a * dy,
        begin: firstAngle,
        end: lastAngle,
        isAnchor: a === 0 });


      for (var j = 0; j < intersectionObjects.length; j++) {
        circles[circles.length - 1]['isNextIntersection' + j] = curr['isNextIntersection' + j];
        circles[circles.length - 1]['isCurrentIntersection' + j] = curr['isCurrentIntersection' + j];
        if (curr['isNextIntersection' + j] && a === 0) {
          intersectionObjects[j].anchorPoint = circles[circles.length - 1];
        }
      }
    }

    prev = curr;
  }

  // Determine intersection angles of circles

  var inciseInRadians = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(incise);

  prev = circles[circles.length - 1];
  for (var _i = 0; _i < circles.length; _i++) {
    var _curr = circles[_i];
    var angle = intersect(prev, _curr, radius);

    if (isClosed || _i !== 0) {// For open clouds, first and last angles were calculated in previous loop
      prev.end = angle[0] + inciseInRadians;
      _curr.begin = angle[1];
    }

    prev = _curr;
  }

  // Hide all circles that appear between the intersection point and the intersection anchor.
  _hideIntersectionCircles(circles, radius, intersectionObjects);

  // In case there is an intersection and arcs are hidden, insert a new arc to fill the gap that was created
  for (var k = intersectionObjects.length - 1; k > -1; k--) {
    if (circles[intersectionObjects[k].begin] && circles[intersectionObjects[k].end]) {
      intersectionObjects[k].beginCircle = circles[intersectionObjects[k].begin];
      intersectionObjects[k].endCircle = circles[intersectionObjects[k].end];var _addFillingCircle2 =
      _addFillingCircle(circles, radius, intersectionObjects[k].begin, intersectionObjects[k].end),newCircle = _addFillingCircle2.newCircle,beginPoint = _addFillingCircle2.beginPoint,endPoint = _addFillingCircle2.endPoint;
      intersectionObjects[k].newCircle = newCircle;
      intersectionObjects[k].beginPoint = beginPoint;
      intersectionObjects[k].endPoint = endPoint;
    }
  }

  // Remove all hidden arcs
  circles = circles.filter(function (cir) {return !cir.hide;});

  return circles;
};

var isClockwise = function isClockwise(anchors, markup) {
  var sum = 0;
  for (var i = 0; i < anchors.length; i++) {
    var p1 = anchors[i];
    var p2 = anchors[(i + 1) % anchors.length];
    sum += (p2.x - p1.x) * (p2.y + p1.y);
  }
  return sum * markup.scaleMatrix.elements[0] * markup.scaleMatrix.elements[5] > 0;
};

var isTrueValue = function isTrueValue(value) {
  return value === 'true' || value === true || value === 1;
};

var locationInArray = function locationInArray(element, array, comparer) {
  if (array.length === 0) return -1;

  var start = 0;
  var end = array.length;
  var pivot = Math.floor(end / 2);

  while (end - start > 1) {
    var comp = comparer(array[pivot], element);
    if (comp === 0) return pivot;

    if (comp > 0) {
      end = pivot;
    } else {
      start = pivot;
    }

    pivot = Math.floor(start + (end - start) / 2);
  }

  return comparer(array[pivot], element) > 0 ? pivot - 1 : pivot;
};

var getArcAngleSize = function getArcAngleSize(arc, clockwise) {
  var dist = Math.abs(arc.begin - arc.end);
  if (dist > 2 * Math.PI) dist -= 2 * Math.PI;
  if (!clockwise && arc.begin > arc.end) {
    dist = 2 * Math.PI - dist;
  } else if (clockwise && arc.end > arc.begin) {
    dist = 2 * Math.PI - dist;
  }
  return dist;
};

var insertInSortedArray = function insertInSortedArray(element, array, comparer) {
  array.splice(locationInArray(element, array, comparer) + 1, 0, element);
  return array;
};

// if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point
var checkLineIntersection = function checkLineIntersection(line1Start, line1End, line2Start, line2End) {
  var result = {
    x: null,
    y: null,
    onLine1: false,
    onLine2: false,
    onBothLines: false };

  var denominator = (line2End.y - line2Start.y) * (line1End.x - line1Start.x) - (line2End.x - line2Start.x) * (line1End.y - line1Start.y);

  if (denominator === 0) {
    return result;
  }

  var a = line1Start.y - line2Start.y;
  var b = line1Start.x - line2Start.x;
  var numerator1 = (line2End.x - line2Start.x) * a - (line2End.y - line2Start.y) * b;
  var numerator2 = (line1End.x - line1Start.x) * a - (line1End.y - line1Start.y) * b;
  a = numerator1 / denominator;
  b = numerator2 / denominator;

  // if we cast these lines infinitely in both directions, they intersect here:
  result.x = line1Start.x + a * (line1End.x - line1Start.x);
  result.y = line1Start.y + a * (line1End.y - line1Start.y);

  // if line1 is a segment and line2 is infinite, they intersect if:
  if (a > 0 && a < 1) {
    result.onLine1 = true;
  }
  // if line2 is a segment and line1 is infinite, they intersect if:
  if (b > 0 && b < 1) {
    result.onLine2 = true;
  }

  result.onBothLines = result.onLine1 && result.onLine2;

  // if line1 and line2 are segments, they intersect if both of the above are true
  return result;
};

var handleIntersection = function handleIntersection(anchors, radius, markup) {
  var leng = anchors.length;
  var intersects = [];
  for (var i = 0; i < leng; i++) {
    var ind = i === 0 ? leng - 1 : i - 1;
    var prevAnchor = anchors[ind];
    var currentAnchor = anchors[i];
    var nextAnchor = anchors[(i + 1) % leng];

    if (!currentAnchor || !nextAnchor) {
      break;
    }

    var angA = Math.atan2(currentAnchor.y - prevAnchor.y, currentAnchor.x - prevAnchor.x);

    var tangentA2 = {};
    tangentA2.p1 = new THREE.Vector3(prevAnchor.x + Math.cos(angA - Math.PI / 2) * radius, prevAnchor.y + Math.sin(angA - Math.PI / 2) * radius, 1);
    tangentA2.p2 = new THREE.Vector3(currentAnchor.x + Math.cos(angA - Math.PI / 2) * radius, currentAnchor.y + Math.sin(angA - Math.PI / 2) * radius, 1);

    var angB = Math.atan2(nextAnchor.y - currentAnchor.y, nextAnchor.x - currentAnchor.x);

    var tangentB2 = {};
    tangentB2.p1 = new THREE.Vector3(currentAnchor.x + Math.cos(angB - Math.PI / 2) * radius, currentAnchor.y + Math.sin(angB - Math.PI / 2) * radius, 1);
    tangentB2.p2 = new THREE.Vector3(nextAnchor.x + Math.cos(angB - Math.PI / 2) * radius, nextAnchor.y + Math.sin(angB - Math.PI / 2) * radius, 1);

    var intersect = checkLineIntersection(tangentA2.p1, tangentA2.p2, tangentB2.p1, tangentB2.p2);

    // if there is an intersection point on the lines
    if (intersect.onBothLines) {
      var vec1 = new THREE.Vector3(currentAnchor.x - prevAnchor.x, currentAnchor.y - prevAnchor.y, 0);
      var vec2 = new THREE.Vector3(nextAnchor.x - currentAnchor.x, nextAnchor.y - currentAnchor.y, 0);
      vec1.normalize();
      vec2.normalize();
      vec1.multiplyScalar(-1);

      var cross = new THREE.Vector3().crossVectors(vec1, vec2);

      var asin = Math.asin(cross.z);

      var acos = vec1.dot(vec2);

      var diff = Math.atan2(asin, acos);

      if (diff < Math.PI / 2) {
        currentAnchor['isCurrentIntersection' + intersects.length] = true;
        nextAnchor['isNextIntersection' + intersects.length] = true;

        currentAnchor.intersects = intersects;
        nextAnchor.intersects = intersects;

        intersects.push(intersect);
      }
    }
  }
  return intersects;
};

var markupsOverlayRenderer = function markupsOverlayRenderer(viewer, options) {var overlayRendererExtraOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};var
  width = options.width,height = options.height,ctx = options.ctx,target = options.target,screenshotCamera = options.screenshotCamera,onRenderDone = options.onRenderDone;var
  markupLayer = overlayRendererExtraOptions.markupLayer;

  var markupsExtension = viewer.getExtension('Autodesk.BIM360.Markups');

  if (!markupsExtension) {
    onRenderDone(ctx.targetToCanvas(target).canvas);
    return;
  }

  var canvasBounds = viewer.impl.getCanvasBoundingClientRect();
  var originalWidth = canvasBounds.width;
  var originalHeight = canvasBounds.height;

  var webglRenderer = viewer.impl.glrenderer();
  webglRenderer.pushViewport();
  webglRenderer.setPixelRatio(1.0);
  webglRenderer.setViewport(0, 0, width, height);
  markupsExtension.renderer.onResize({ width: width, height: height });

  var cam = viewer.impl.is2d ? screenshotCamera : markupsExtension.renderer.markupsCamera;
  var visibleLayers = markupsExtension.markupsManager.getVisibleLayers();

  if (markupLayer) {
    visibleLayers.forEach(function (layer) {return layer !== markupLayer && layer.setVisible(false);});
  }

  var wasVisible;
  var wasTransparent;

  // Make sure the current layer is fully visible before rendering.
  var beforeRender = function beforeRender() {
    if (markupLayer) {
      wasVisible = markupLayer.isVisible();
      wasTransparent = markupLayer.isTransparent();

      markupLayer.setVisible(true);
      markupLayer.changeTransparency(false);
    }
  };

  var afterRender = function afterRender() {
    if (markupLayer) {
      markupLayer.setVisible(wasVisible);
      markupLayer.changeTransparency(!wasTransparent);
    }
  };

  beforeRender();

  markupsExtension.renderer.render(target, cam);

  afterRender();

  // Restore previous state
  webglRenderer.popViewport();
  webglRenderer.setPixelRatio();
  markupsExtension.renderer.onResize({ width: originalWidth, height: originalHeight });var _ctx$targetToCanvas =

  ctx.targetToCanvas(target),canvas = _ctx$targetToCanvas.canvas;
  var scaleRatio = width / originalWidth;

  markupsExtension.renderer.textRenderer.renderTextToCanvas(canvas, cam, scaleRatio, beforeRender, afterRender, onRenderDone);

  if (markupLayer) {
    visibleLayers.forEach(function (layer) {return layer !== markupLayer && layer.setVisible(true);});
  }
};

var getScreenShotOfMarkup = function getScreenShotOfMarkup(viewer, callback, markupLayer) {
  var markupsExtension = viewer.getExtension('Autodesk.BIM360.Markups');
  var bounds;

  if (markupLayer && viewer.impl.is2d) {
    bounds = markupLayer.getWorldBoundingBox();
    Autodesk.Viewing.ScreenShot.makeBoundsSquare(bounds);
  }

  var getCropBounds = function getCropBounds(viewer, camera) {
    bounds = markupLayer.getWorldBoundingBox();
    Autodesk.Viewing.ScreenShot.makeBoundsSquare(bounds);

    var markupsCameraBackup = markupsExtension.renderer.markupsCamera;

    if (viewer.impl.is2d) {
      markupsExtension.renderer.markupsCamera = camera;
    }

    var min = markupsExtension.renderer.worldToClient(bounds.min);
    var max = markupsExtension.renderer.worldToClient(bounds.max);

    markupsExtension.renderer.markupsCamera = markupsCameraBackup;

    var clientBounds = new THREE.Box3().setFromPoints([min, max]);
    Autodesk.Viewing.ScreenShot.makeBoundsSquare(clientBounds, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MINIMUM_THUMBNAIL_SIZE"]);

    var size = clientBounds.size().x;
    clientBounds.expandByVector(new THREE.Vector3(size * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["SELECTION_ZOOM_MARGIN"], size * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["SELECTION_ZOOM_MARGIN"], 0));

    return clientBounds;
  };

  var options = {
    bounds: bounds,
    margin: markupLayer ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["SELECTION_ZOOM_MARGIN"] : 0,
    overlayRenderer: markupsOverlayRenderer,
    overlayRendererExtraOptions: { markupLayer: markupLayer },
    getCropBounds: markupLayer && getCropBounds };


  Autodesk.Viewing.ScreenShot.getScreenShotAtScreenSize(viewer, callback, options);
};

var setCustomGestureValues = function setCustomGestureValues(viewer) {
  var gestureHandler = viewer.toolController.getTool('gestures');
  if (gestureHandler) {
    gestureHandler.setGestureParameter('singletap', 'time', 250);
    gestureHandler.setGestureParameter('drag', 'threshold', 0);
  }
};

var restoreGestureValues = function restoreGestureValues(viewer) {
  var gestureHandler = viewer.toolController.getTool('gestures');
  if (gestureHandler) {
    gestureHandler.restoreGestureParameterDefault('singletap', 'time');
    gestureHandler.restoreGestureParameterDefault('drag', 'threshold');
  }
};
/*
    * Taken from Simplify.js, a high-performance JS polyline simplification library
    * (c) 2013, Vladimir Agafonkin
    * mourner.github.io/simplify-js
    */
var simplify = function simplify(points, tolerance, highestQuality) {

  if (points.length <= 2) return points;

  // square distance between 2 points
  function getSqDist(p1, p2) {
    var dx = p1.x - p2.x,
    dy = p1.y - p2.y;

    return dx * dx + dy * dy;
  }

  // square distance from a point to a segment
  function getSqSegDist(p, p1, p2) {
    var x = p1.x,
    y = p1.y,
    dx = p2.x - x,
    dy = p2.y - y;

    if (dx !== 0 || dy !== 0) {
      var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);

      if (t > 1) {
        x = p2.x;
        y = p2.y;

      } else if (t > 0) {
        x += dx * t;
        y += dy * t;
      }
    }

    dx = p.x - x;
    dy = p.y - y;

    return dx * dx + dy * dy;
  }

  // basic distance-based simplification
  function simplifyRadialDist(points, sqTolerance) {

    var prevPoint = points[0],
    newPoints = [prevPoint],
    point;

    for (var i = 1, len = points.length; i < len; i++) {
      point = points[i];

      if (getSqDist(point, prevPoint) > sqTolerance) {
        newPoints.push(point);
        prevPoint = point;
      }
    }

    if (prevPoint !== point) newPoints.push(point);

    return newPoints;
  }

  function simplifyDPStep(points, first, last, sqTolerance, simplified) {
    var maxSqDist = sqTolerance,
    index;

    for (var i = first + 1; i < last; i++) {
      var sqDist = getSqSegDist(points[i], points[first], points[last]);

      if (sqDist > maxSqDist) {
        index = i;
        maxSqDist = sqDist;
      }
    }

    if (maxSqDist > sqTolerance) {
      if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);
      simplified.push(points[index]);
      if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);
    }
  }

  // simplification using Ramer-Douglas-Peucker algorithm
  function simplifyDouglasPeucker(points, sqTolerance) {
    var last = points.length - 1;

    var simplified = [points[0]];
    simplifyDPStep(points, 0, last, sqTolerance, simplified);
    simplified.push(points[last]);

    return simplified;
  }

  // both algorithms combined for awesome performance
  var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;

  points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);
  points = simplifyDouglasPeucker(points, sqTolerance);

  return points;
};

// A polygon is a simple polygon if there are no intersection between its edges.	
function isPolygonSimple(points) {
  var n = points.length;

  if (n === 3) {
    return true;
  }

  for (var i = 0; i < n; i++) {

    var p1 = points[i];
    var p2 = points[(i + 1) % n];

    for (var j = i + 2; j < n; j++) {

      var q1 = points[j % n];
      var q2 = points[(j + 1) % n];

      if (q2 === p1) {
        break;
      }

      var intersect = checkLineIntersection(p1, p2, q1, q2);

      // if there is an intersection point on the lines
      if (intersect.onBothLines) {
        return false;
      }
    }
  }

  return true;
}

var executeAfterTransitionEnded = function executeAfterTransitionEnded(viewer, callback) {
  if (!viewer.navigation.getRequestTransition() && !viewer.navigation.getTransitionActive()) {
    callback();
  } else {
    // Try again in case there is a requestTransition, but CAMERA_TRANSITION_COMPLETED won't get fired.
    // It can happen in case there is a requestTransition to the same camera position exactly.
    setTimeout(function () {
      if (!viewer.navigation.getRequestTransition() && !viewer.navigation.getTransitionActive()) {
        callback();
      } else {
        viewer.addEventListener(Autodesk.Viewing.CAMERA_TRANSITION_COMPLETED, function () {
          callback();
        }, { once: true });
      }
    }, 1);
  }
};

var isSheetNameEqual = function isSheetNameEqual(nameA, nameB) {
  if (nameA === nameB) {
    return true;
  }

  // Same length but not equal - nothing more to check...
  if (!nameA || !nameB || nameA.length === nameB.length) {
    return false;
  }

  // In some cases, PDF sheets are being exported with/without parentheses.
  if (nameA.startsWith('(')) {
    return nameA === "(".concat(nameB, ")");
  } else {
    return nameB === "(".concat(nameA, ")");
  }
};

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsConstants.js":
/*!***************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsConstants.js ***!
  \***************************************************/
/*! exports provided: COLORS, DEFAULT_COLORS, DEFAULT_FILL_COLORS, STYLE_PROPERTIES, FONT_SIZES, MESHLINE_PATH_START, MESHLINE_PATH_END, MESHLINE_PATH_DEFAULT, MESHLINE_PATH_ROUND_CAP, MESHLINE_PATH_FLAT_CAP, MARKUP_TYPE_ARROW, MARKUP_TYPE_RECTANGLE, MARKUP_TYPE_CIRCLE, MARKUP_TYPE_CLOUD, MARKUP_TYPE_FREEHAND, MARKUP_TYPE_HIGHLIGHT, MARKUP_TYPE_POLYLINE, MARKUP_TYPE_POLYCLOUD, MARKUP_TYPE_TEXT, MARKUP_TYPE_CALLOUT, MARKUP_TYPE_ARROW_CALLOUT, MARKUP_TYPE_ARROW_CLOUD_CALLOUT, MARKUP_TYPE_DIMENSION, MARKUP_TYPE_LINE, RECT_SELECTOR, MARKUP_STATUS_SAVE_FAILED, MARKUP_STATUS_SAVE_SUCCEED, MARKUP_STATUS_SAVING, MARKUP_STATUS_DELETING, MARKUP_STATUS_DELETE_SUCCEED, MARKUP_STATUS_DELETE_FAILED, MARKUP_STATUS_CREATED, MARKUP_STATUS_OPEN, MARKUP_STATUS_PRIVATE, MARKUP_STATUS_PUBLISHED, MARKUP_STATUS_PUBLISHING, MARKUP_STATUS_CLOSED, MARKUP_STATUS_ARCHIVED, MARKUP_STATUS_ARCHIVING, MARKUP_ATTACHMENT_LOADING, MARKUP_ATTACHMENT_SAVING, MARKUP_ATTACHMENT_SAVE_SUCCEED, MARKUP_ATTACHMENT_SAVE_FAILED, MARKUP_ATTACHMENT_RENAMING, MARKUP_ATTACHMENT_DELETEING, ATTACHMENT_DATA_TYPE_BINARY, ATTACHMENT_DATA_TYPE_TEXT, MARKUP_RESOURCE_TYPE_SVG, MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE, DEFAULT_STATUSES_TO_LOAD, LINK_TYPE_ATTACHMENTS, LINK_TYPE_DOCUMENT_ATTACHMENT, DEFAULT_MARKUP, DEFAULT_COLOR, DEFAULT_FONT_COLOR, DEFAULT_FILL_COLOR, DEFAULT_THICKNESS, DEFAULT_OPACITY, DEFAULT_HIGHLIGHT_OPACITY, DEFAULT_FILL_OPACITY, DEFAULT_STROKE_IN_MM, DEFAULT_FONT_SIZE_IN_PIXELS, DEFAULT_FONT_SIZE_IN_MM, DEFAULT_FONT_WEIGHT, DEFAULT_FONT_FAMILY, DEFAULT_FONT_STYLE, SUB_MENU_VISIBLE_CLASS, ARROW_TIP_LENGTH, EPSILON, TOUCH_RADIUS, ANCHOR_RADIUS, MIN_CHANGE_DISTANCE, SNAP_DISTANCE, MIN_FREEHAND_POINT_DISTANCE, MIN_ANGLE_CHANGE, ROTATION_ANCHOR_DISTANCE, ROTATION_SNAP_DEGREES, PASTE_OFFSET, ARROW_MOVE_OFFSET, CONTEXTUAL_MENU_OFFSET, LINK_POSITION_OFFSET, LINK_ICON_SIZE, SELECTION_ZOOM_MARGIN, MAX_THICKNESS, PERSPECTIVE_MODE_SCALE, FRAME_SIZE_SCALE, BOUNDING_BOX_MARGIN, HIT_AREA_MARGIN, TEXT_DEBOUNCE, DIMENSION_TIP_LENGTH, DIMENSION_THICKNESS_FACTOR, DIMENSION_FONT_SIZE_FACTOR, DISABLED_OPACITY, MOBILE_GESTURES_MIN_THRESHOLD_TIME, SCREEN_MARGIN, TEXT_LENGTH_LIMIT, MINIMUM_THUMBNAIL_SIZE, WORLD_3D_SIZE, MAX_NORMA_PERCENTAGE, MAX_NORMA_TEXT_PERCENTAGE, NORMA_3D, NORMA_TEXT_3D, POINT_SIZE_IN_MM, TIMEOUT_TO_SELECT_AFTER_DRAWEND, MARKUP_CREATION_CURSORS, MARKUP_ERRORS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLORS", function() { return COLORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_COLORS", function() { return DEFAULT_COLORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FILL_COLORS", function() { return DEFAULT_FILL_COLORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STYLE_PROPERTIES", function() { return STYLE_PROPERTIES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FONT_SIZES", function() { return FONT_SIZES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MESHLINE_PATH_START", function() { return MESHLINE_PATH_START; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MESHLINE_PATH_END", function() { return MESHLINE_PATH_END; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MESHLINE_PATH_DEFAULT", function() { return MESHLINE_PATH_DEFAULT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MESHLINE_PATH_ROUND_CAP", function() { return MESHLINE_PATH_ROUND_CAP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MESHLINE_PATH_FLAT_CAP", function() { return MESHLINE_PATH_FLAT_CAP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_ARROW", function() { return MARKUP_TYPE_ARROW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_RECTANGLE", function() { return MARKUP_TYPE_RECTANGLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_CIRCLE", function() { return MARKUP_TYPE_CIRCLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_CLOUD", function() { return MARKUP_TYPE_CLOUD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_FREEHAND", function() { return MARKUP_TYPE_FREEHAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_HIGHLIGHT", function() { return MARKUP_TYPE_HIGHLIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_POLYLINE", function() { return MARKUP_TYPE_POLYLINE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_POLYCLOUD", function() { return MARKUP_TYPE_POLYCLOUD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_TEXT", function() { return MARKUP_TYPE_TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_CALLOUT", function() { return MARKUP_TYPE_CALLOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_ARROW_CALLOUT", function() { return MARKUP_TYPE_ARROW_CALLOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_ARROW_CLOUD_CALLOUT", function() { return MARKUP_TYPE_ARROW_CLOUD_CALLOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_DIMENSION", function() { return MARKUP_TYPE_DIMENSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_TYPE_LINE", function() { return MARKUP_TYPE_LINE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RECT_SELECTOR", function() { return RECT_SELECTOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_SAVE_FAILED", function() { return MARKUP_STATUS_SAVE_FAILED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_SAVE_SUCCEED", function() { return MARKUP_STATUS_SAVE_SUCCEED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_SAVING", function() { return MARKUP_STATUS_SAVING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_DELETING", function() { return MARKUP_STATUS_DELETING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_DELETE_SUCCEED", function() { return MARKUP_STATUS_DELETE_SUCCEED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_DELETE_FAILED", function() { return MARKUP_STATUS_DELETE_FAILED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_CREATED", function() { return MARKUP_STATUS_CREATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_OPEN", function() { return MARKUP_STATUS_OPEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_PRIVATE", function() { return MARKUP_STATUS_PRIVATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_PUBLISHED", function() { return MARKUP_STATUS_PUBLISHED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_PUBLISHING", function() { return MARKUP_STATUS_PUBLISHING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_CLOSED", function() { return MARKUP_STATUS_CLOSED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_ARCHIVED", function() { return MARKUP_STATUS_ARCHIVED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_STATUS_ARCHIVING", function() { return MARKUP_STATUS_ARCHIVING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_LOADING", function() { return MARKUP_ATTACHMENT_LOADING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_SAVING", function() { return MARKUP_ATTACHMENT_SAVING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_SAVE_SUCCEED", function() { return MARKUP_ATTACHMENT_SAVE_SUCCEED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_SAVE_FAILED", function() { return MARKUP_ATTACHMENT_SAVE_FAILED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_RENAMING", function() { return MARKUP_ATTACHMENT_RENAMING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ATTACHMENT_DELETEING", function() { return MARKUP_ATTACHMENT_DELETEING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ATTACHMENT_DATA_TYPE_BINARY", function() { return ATTACHMENT_DATA_TYPE_BINARY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ATTACHMENT_DATA_TYPE_TEXT", function() { return ATTACHMENT_DATA_TYPE_TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_RESOURCE_TYPE_SVG", function() { return MARKUP_RESOURCE_TYPE_SVG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE", function() { return MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_STATUSES_TO_LOAD", function() { return DEFAULT_STATUSES_TO_LOAD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_TYPE_ATTACHMENTS", function() { return LINK_TYPE_ATTACHMENTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_TYPE_DOCUMENT_ATTACHMENT", function() { return LINK_TYPE_DOCUMENT_ATTACHMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_MARKUP", function() { return DEFAULT_MARKUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_COLOR", function() { return DEFAULT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_COLOR", function() { return DEFAULT_FONT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FILL_COLOR", function() { return DEFAULT_FILL_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_THICKNESS", function() { return DEFAULT_THICKNESS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_OPACITY", function() { return DEFAULT_OPACITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_HIGHLIGHT_OPACITY", function() { return DEFAULT_HIGHLIGHT_OPACITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FILL_OPACITY", function() { return DEFAULT_FILL_OPACITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_STROKE_IN_MM", function() { return DEFAULT_STROKE_IN_MM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_SIZE_IN_PIXELS", function() { return DEFAULT_FONT_SIZE_IN_PIXELS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_SIZE_IN_MM", function() { return DEFAULT_FONT_SIZE_IN_MM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_WEIGHT", function() { return DEFAULT_FONT_WEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_FAMILY", function() { return DEFAULT_FONT_FAMILY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_STYLE", function() { return DEFAULT_FONT_STYLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUB_MENU_VISIBLE_CLASS", function() { return SUB_MENU_VISIBLE_CLASS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_TIP_LENGTH", function() { return ARROW_TIP_LENGTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EPSILON", function() { return EPSILON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOUCH_RADIUS", function() { return TOUCH_RADIUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ANCHOR_RADIUS", function() { return ANCHOR_RADIUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_CHANGE_DISTANCE", function() { return MIN_CHANGE_DISTANCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SNAP_DISTANCE", function() { return SNAP_DISTANCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_FREEHAND_POINT_DISTANCE", function() { return MIN_FREEHAND_POINT_DISTANCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_ANGLE_CHANGE", function() { return MIN_ANGLE_CHANGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROTATION_ANCHOR_DISTANCE", function() { return ROTATION_ANCHOR_DISTANCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROTATION_SNAP_DEGREES", function() { return ROTATION_SNAP_DEGREES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PASTE_OFFSET", function() { return PASTE_OFFSET; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_MOVE_OFFSET", function() { return ARROW_MOVE_OFFSET; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONTEXTUAL_MENU_OFFSET", function() { return CONTEXTUAL_MENU_OFFSET; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_POSITION_OFFSET", function() { return LINK_POSITION_OFFSET; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_ICON_SIZE", function() { return LINK_ICON_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_ZOOM_MARGIN", function() { return SELECTION_ZOOM_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_THICKNESS", function() { return MAX_THICKNESS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PERSPECTIVE_MODE_SCALE", function() { return PERSPECTIVE_MODE_SCALE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FRAME_SIZE_SCALE", function() { return FRAME_SIZE_SCALE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOUNDING_BOX_MARGIN", function() { return BOUNDING_BOX_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HIT_AREA_MARGIN", function() { return HIT_AREA_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_DEBOUNCE", function() { return TEXT_DEBOUNCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSION_TIP_LENGTH", function() { return DIMENSION_TIP_LENGTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSION_THICKNESS_FACTOR", function() { return DIMENSION_THICKNESS_FACTOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSION_FONT_SIZE_FACTOR", function() { return DIMENSION_FONT_SIZE_FACTOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISABLED_OPACITY", function() { return DISABLED_OPACITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOBILE_GESTURES_MIN_THRESHOLD_TIME", function() { return MOBILE_GESTURES_MIN_THRESHOLD_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCREEN_MARGIN", function() { return SCREEN_MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_LENGTH_LIMIT", function() { return TEXT_LENGTH_LIMIT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MINIMUM_THUMBNAIL_SIZE", function() { return MINIMUM_THUMBNAIL_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WORLD_3D_SIZE", function() { return WORLD_3D_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_NORMA_PERCENTAGE", function() { return MAX_NORMA_PERCENTAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_NORMA_TEXT_PERCENTAGE", function() { return MAX_NORMA_TEXT_PERCENTAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NORMA_3D", function() { return NORMA_3D; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NORMA_TEXT_3D", function() { return NORMA_TEXT_3D; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POINT_SIZE_IN_MM", function() { return POINT_SIZE_IN_MM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TIMEOUT_TO_SELECT_AFTER_DRAWEND", function() { return TIMEOUT_TO_SELECT_AFTER_DRAWEND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_CREATION_CURSORS", function() { return MARKUP_CREATION_CURSORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUP_ERRORS", function() { return MARKUP_ERRORS; });
var _MARKUP_CREATION_CURS;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var COLORS = {
  RED: '#FF0000',
  GREEN: '#00F72C',
  BLUE: '#103FFB',
  ORANGE: '#FF9224',
  YELLOW: '#FEF935',
  CYAN: '#03FCFE',
  WHITE: '#FFFFFF',
  BLACK: '#000000',
  PINK: '#FF4CFC',
  PURPLE: '#922890',
  NO_COLOR: '-1' };


var DEFAULT_COLORS = [
{
  color: COLORS.RED,
  label: 'Red' },

{
  color: COLORS.BLUE,
  label: 'Blue' },

{
  color: COLORS.PURPLE,
  label: 'Purple' },

{
  color: COLORS.YELLOW,
  label: 'Yellow' },

{
  color: COLORS.ORANGE,
  label: 'Orange' },

{
  color: COLORS.CYAN,
  label: 'Cyan' },

{
  color: COLORS.PINK,
  label: 'Pink' },

{
  color: COLORS.GREEN,
  label: 'Green' },

{
  color: COLORS.BLACK,
  label: 'Black' },

{
  color: COLORS.WHITE,
  label: 'White' }];



var DEFAULT_FILL_COLORS = [
{
  color: COLORS.RED,
  label: 'Red' },

{
  color: COLORS.BLUE,
  label: 'Blue' },

{
  color: COLORS.PURPLE,
  label: 'Purple' },

{
  color: COLORS.YELLOW,
  label: 'Yellow' },

{
  color: COLORS.ORANGE,
  label: 'Orange' },

{
  color: COLORS.CYAN,
  label: 'Cyan' },

{
  color: COLORS.PINK,
  label: 'Pink' },

{
  color: COLORS.GREEN,
  label: 'Green' },

{
  color: COLORS.NO_COLOR,
  label: 'No Fill' },

{
  color: COLORS.BLACK,
  label: 'Black' },

{
  color: COLORS.WHITE,
  label: 'White' }];



var STYLE_PROPERTIES = {
  COLOR: 'stroke-color',
  FILL_COLOR: 'fill-color',
  THICKNESS: 'stroke-width',
  OPACITY: 'stroke-opacity',
  FILL_OPACITY: 'fill-opacity',
  FONT_SIZE: 'font-size',
  FONT_WEIGHT: 'font-weight',
  FONT_FAMILY: 'font-family',
  FONT_STYLE: 'font-style',
  FONT_COLOR: 'font-color',
  STROKE_LINEJOIN: 'stroke-linejoin' };


var FONT_SIZES = [10, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40, 44, 48, 52, 58, 64, 70, 76, 82, 88, 94, 100];

var MESHLINE_PATH_START = 1;
var MESHLINE_PATH_END = 2;

var MESHLINE_PATH_DEFAULT = 1;
var MESHLINE_PATH_ROUND_CAP = 2;
var MESHLINE_PATH_FLAT_CAP = 3;

// Markup types
var MARKUP_TYPE_ARROW = 'arrow';
var MARKUP_TYPE_RECTANGLE = 'rectangle';
var MARKUP_TYPE_CIRCLE = 'ellipse';
var MARKUP_TYPE_CLOUD = 'cloud';
var MARKUP_TYPE_FREEHAND = 'freehand';
var MARKUP_TYPE_HIGHLIGHT = 'highlight';
var MARKUP_TYPE_POLYLINE = 'polyline';
var MARKUP_TYPE_POLYCLOUD = 'polycloud';
var MARKUP_TYPE_TEXT = 'label';
var MARKUP_TYPE_CALLOUT = 'callout';
var MARKUP_TYPE_ARROW_CALLOUT = 'simple-arrow-callout';
var MARKUP_TYPE_ARROW_CLOUD_CALLOUT = 'arrow-cloud-callout';
var MARKUP_TYPE_DIMENSION = 'dimension';
var MARKUP_TYPE_LINE = 'line';

var RECT_SELECTOR = 'selector';

// Statuses
var MARKUP_STATUS_SAVE_FAILED = 'save_failed';
var MARKUP_STATUS_SAVE_SUCCEED = 'save_success';
var MARKUP_STATUS_SAVING = 'markup_saving';
var MARKUP_STATUS_DELETING = 'deleting';
var MARKUP_STATUS_DELETE_SUCCEED = 'delete_success';
var MARKUP_STATUS_DELETE_FAILED = 'delete_failed';
var MARKUP_STATUS_CREATED = 'created';
var MARKUP_STATUS_OPEN = 'open';
var MARKUP_STATUS_PRIVATE = 'private';
var MARKUP_STATUS_PUBLISHED = 'published';
var MARKUP_STATUS_PUBLISHING = 'publishing';
var MARKUP_STATUS_CLOSED = 'closed';
var MARKUP_STATUS_ARCHIVED = 'archived';
var MARKUP_STATUS_ARCHIVING = 'archiving';
var MARKUP_ATTACHMENT_LOADING = 'attachment_loading';
var MARKUP_ATTACHMENT_SAVING = 'attachment_saving';
var MARKUP_ATTACHMENT_SAVE_SUCCEED = 'attachment_save_success';
var MARKUP_ATTACHMENT_SAVE_FAILED = 'attachment_save_failed';
var MARKUP_ATTACHMENT_RENAMING = 'attachment_renaming';
var MARKUP_ATTACHMENT_DELETEING = 'attachment_deleting';

// Metadata
var ATTACHMENT_DATA_TYPE_BINARY = 'binary';
var ATTACHMENT_DATA_TYPE_TEXT = 'text';
var MARKUP_RESOURCE_TYPE_SVG = 'svg';
var MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE = 'screencapture';
var DEFAULT_STATUSES_TO_LOAD = [MARKUP_STATUS_PRIVATE, MARKUP_STATUS_PUBLISHED, MARKUP_STATUS_ARCHIVED].join(',');

// Link types
var LINK_TYPE_ATTACHMENTS = 'attachments';
var LINK_TYPE_DOCUMENT_ATTACHMENT = 'document';

// Default Properties values
var DEFAULT_MARKUP = MARKUP_TYPE_FREEHAND;
var DEFAULT_COLOR = COLORS.RED;
var DEFAULT_FONT_COLOR = COLORS.RED;
var DEFAULT_FILL_COLOR = COLORS.NO_COLOR;
var DEFAULT_THICKNESS = 10.0;
var DEFAULT_OPACITY = 1.0;
var DEFAULT_HIGHLIGHT_OPACITY = 0.5;
var DEFAULT_FILL_OPACITY = 0.5;
var DEFAULT_STROKE_IN_MM = 0.1;
var DEFAULT_FONT_SIZE_IN_PIXELS = 36.0;
var DEFAULT_FONT_SIZE_IN_MM = 10.0;
var DEFAULT_FONT_WEIGHT = 'normal';
var DEFAULT_FONT_FAMILY = 'Artifakt Element, Arial';
var DEFAULT_FONT_STYLE = 'normal';

var SUB_MENU_VISIBLE_CLASS = 'subMenuVisible';


var isTouchDevice = typeof window !== 'undefined' && ('ontouchstart' in window || navigator.maxTouchPoints > 0);

// Other constants
var ARROW_TIP_LENGTH = 5;
var EPSILON = 0.0001;
var TOUCH_RADIUS = isTouchDevice ? 34 : 4;
var ANCHOR_RADIUS = 4;
var MIN_CHANGE_DISTANCE = 5;
var SNAP_DISTANCE = 20;
var MIN_FREEHAND_POINT_DISTANCE = 1;
var MIN_ANGLE_CHANGE = 0.05;
var ROTATION_ANCHOR_DISTANCE = isTouchDevice ? 30 : 20;
var ROTATION_SNAP_DEGREES = 45;
var PASTE_OFFSET = 20;
var ARROW_MOVE_OFFSET = 20;
var CONTEXTUAL_MENU_OFFSET = 60;
var LINK_POSITION_OFFSET = 10;
var LINK_ICON_SIZE = 20;
var SELECTION_ZOOM_MARGIN = 0.05;
var MAX_THICKNESS = 100;
var PERSPECTIVE_MODE_SCALE = 1000; // Legacy constant - Don't change!
var FRAME_SIZE_SCALE = 20; // Used in order to prevent render errors when changing browser's zoom.
var BOUNDING_BOX_MARGIN = window.devicePixelRatio * 4 + 10;
var HIT_AREA_MARGIN = TOUCH_RADIUS + 10;
var TEXT_DEBOUNCE = 200;
var DIMENSION_TIP_LENGTH = 8;
var DIMENSION_THICKNESS_FACTOR = 2 / 5;
var DIMENSION_FONT_SIZE_FACTOR = 3 / 5;
var DISABLED_OPACITY = 0.3;
var MOBILE_GESTURES_MIN_THRESHOLD_TIME = 100;
var SCREEN_MARGIN = 10;
var TEXT_LENGTH_LIMIT = 3000;
var MINIMUM_THUMBNAIL_SIZE = 92; // According to the markup's panel.

var WORLD_3D_SIZE = 1000; // This needs to be constant so that markups appear consistently in the same place

var MAX_NORMA_PERCENTAGE = 0.05 / 100; // Percentage of document diagonal. A boundary for the norma
var MAX_NORMA_TEXT_PERCENTAGE = 20 * MAX_NORMA_PERCENTAGE;
var NORMA_3D = 1; // We chose a 3D world size (WORLD_3D_SIZE) such that 1 is the norma size there
var NORMA_TEXT_3D = 20 * NORMA_3D;

var POINT_SIZE_IN_MM = 0.005; // A point is created by drawing a minimal meshline with round caps. This is the distance between the points.
var TIMEOUT_TO_SELECT_AFTER_DRAWEND = 700;

var MARKUP_CREATION_CURSORS = (_MARKUP_CREATION_CURS = {}, _defineProperty(_MARKUP_CREATION_CURS,
RECT_SELECTOR, 'cell'), _defineProperty(_MARKUP_CREATION_CURS,
MARKUP_TYPE_TEXT, 'text'), _defineProperty(_MARKUP_CREATION_CURS,
MARKUP_TYPE_CALLOUT, 'text'), _MARKUP_CREATION_CURS);


var MARKUP_ERRORS = {
  MARKUP_SAVE_FAILED: 'MARKUP_SAVE_FAILED',
  MARKUP_DELETE_FAILED: 'MARKUP_DELETE_FAILED',
  MARKUP_PUBLISH_FAILED: 'MARKUP_PUBLISH_FAILED',
  MARKUP_ARCHIVE_FAILED: 'MARKUP_ARCHIVE_FAILED',
  MARKUP_ATTACHMENT_CREATE_FAILED: 'MARKUP_ATTACHMENT_CREATE_FAILED',
  MARKUP_ATTACHMENT_DELETE_FAILED: 'MARKUP_ATTACHMENT_DELETE_FAILED',
  MARKUP_ATTACHMENT_RENAME_FAILED: 'MARKUP_ATTACHMENT_RENAME_FAILED',
  MARKUP_ATTACHMENT_UPDATE_FAILED: 'MARKUP_ATTACHMENT_UPDATE_FAILED' };

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsDeserializer.js":
/*!******************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsDeserializer.js ***!
  \******************************************************/
/*! exports provided: stringToSvgNode, parseMetadata, getLayerDataModelVersion, parseMarkupLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringToSvgNode", function() { return stringToSvgNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseMetadata", function() { return parseMetadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayerDataModelVersion", function() { return getLayerDataModelVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseMarkupLayer", function() { return parseMarkupLayer; });
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsSceneState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsSceneState */ "./extensions/BimMarkups/MarkupsSceneState.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");




var stringToSvgNode = function stringToSvgNode(markupString) {
  var node;

  try {
    var domParser = new DOMParser();
    var doc = domParser.parseFromString(markupString, 'text/xml');
    node = doc.firstChild;
  } catch (err) {
    console.warn('stringToSvgNode failed to generate an HTMLElement from its string representation.');
  }

  return node;
};

// Converts a point from legacy markups coordinates to current ones. Relevant for 3D and PDF files
var markupsToWorld = function markupsToWorld(point, viewer, renderer, layerData) {
  var isPdf = viewer.model.isPdf(true);

  if (viewer.model.isLeaflet() || isPdf) {
    var loadOptions;
    var bounds;

    if (isPdf) {
      loadOptions = Autodesk.Viewing.PDFUtils.getLeafletLoadOptions(viewer);
      bounds = Autodesk.Viewing.PDFUtils.getLeafletBoundingBox(viewer);
    } else {
      var modelData = viewer.model.getData();
      loadOptions = modelData.loadOptions.loadOptions;
      bounds = modelData.bbox;
    }var _loadOptions =

    loadOptions,texWidth = _loadOptions.texWidth,texHeight = _loadOptions.texHeight;

    // https://jira.autodesk.com/browse/BLMV-2853
    // In case that the DPI of the current document is different than the DPI of the document where the markup has originally created (or edited)
    // We need to scale the ratio back in order that the markup will appear in the same place.
    var originalDocumentWidth = layerData.metadata.markup_metadata &&
    layerData.metadata.markup_metadata.originalDocumentResolution &&
    layerData.metadata.markup_metadata.originalDocumentResolution[0] || texWidth;
    var dpiCorrection = texWidth / originalDocumentWidth;

    var wx = point.x / (texWidth / dpiCorrection) * bounds.size().x;
    var wy = point.y / (texHeight / dpiCorrection) * bounds.size().y;

    var worldPos = new THREE.Vector3(wx, wy, 0);
    var worldTopLeft = new THREE.Vector3(bounds.min.x, bounds.max.y, 0);
    worldPos.add(worldTopLeft);

    if (isPdf) {
      Autodesk.Viewing.PDFUtils.leafletToPdfWorld(viewer, worldPos);
    }

    return worldPos;
  }

  // 3D document
  if (renderer.documentCamera.isPerspective) {
    var bb = viewer.impl.getCanvasBoundingClientRect();

    // Factor by PERSPECTIVE_MODE_SCALE because Firefox on Windows machines have problems dealing with very small paths (SVG legacy factor)
    point.x = point.x / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["PERSPECTIVE_MODE_SCALE"] * (bb.height * 0.5) + bb.width * 0.5;
    point.y = -point.y / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["PERSPECTIVE_MODE_SCALE"] * (bb.height * 0.5) + bb.height * 0.5;

    point = renderer.clientToWorld(point);
  } else {// Orthographic
    point.applyMatrix4(renderer.documentCamera.matrixWorld);
    point.sub(renderer.documentCamera.position);

    // In LMV model is offset by a global offset, we correct this offset when transforming to markups space, so
    // exported markups don't have the offset.
    var globalOffset = viewer.model && viewer.model.getData().globalOffset;
    if (globalOffset) {
      point.sub(globalOffset);
    }

    point = renderer.documentCameraToMarkupsCamera(point);
  }

  return point;
};

var sizeFromMarkupsToWorld = function sizeFromMarkupsToWorld(size, viewer, renderer, layerData) {
  var a = markupsToWorld(new THREE.Vector3(), viewer, renderer, layerData);
  var b = markupsToWorld(new THREE.Vector3(size, 0, 0), viewer, renderer, layerData);

  return a.distanceTo(b);
};

var parseMetadata = function parseMetadata(svgNode, layerData, viewer, renderer, dataModelVersion) {
  var meta = svgNode.childNodes[0].childNodes[0];

  var getMetaAttribute = function getMetaAttribute(attribute) {
    return meta.getAttribute(attribute) || meta.getAttribute(attribute.toLowerCase());
  };

  var type = getMetaAttribute('type') || '';

  var isLegacyMarkup = dataModelVersion < 5;
  var isLeaflet = viewer.model.isLeaflet();
  var isPdf = viewer.model.isPdf(true);

  var state = {
    style: {},
    anchors: [] };


  var output = {
    type: type,
    state: state };


  var getStyle = function getStyle(styleObj) {
    var source = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__["getObjectAsList"])(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"]);
    var style = {};

    for (var i = 0; i < source.length; i++) {
      var value = styleObj.getAttribute(source[i]);

      if (value) {
        switch (source[i]) {
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS:
            style[source[i]] = parseFloat(value);
            break;
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].OPACITY:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY:
            style[source[i]] = parseFloat(value);
            break;
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].STROKE_LINEJOIN:
            break;
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_FAMILY:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_STYLE:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_WEIGHT:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR:
          case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR:
            style[source[i]] = value;
            break;
          default:
            break;}

      }
    }

    if (!style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR]) {
      style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_COLOR] = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].COLOR];
    }

    if (!style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR]) {
      style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["COLORS"].NO_COLOR;
    }

    // Support legacy markup extension - BLMV-3054.
    if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_COLOR] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["COLORS"].NO_COLOR) {
      style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_FILL_OPACITY"];
    }

    return style;
  };

  var isClosed = function isClosed() {
    var path = svgNode.childNodes[1] || '';
    var closed = false;

    if (typeof path !== 'string') {
      var d = path.getAttribute('d').split(' ');
      if (d[d.length - 1].toLowerCase() === 'z') {
        closed = true;
      }
    }
    return closed;
  };

  var getLocations = function getLocations() {
    var locations = [];
    var attribute = getMetaAttribute('locations');
    var locStr = attribute && attribute.split(' ') || '';

    for (var i = 0; i < locStr.length; i += 2) {
      var point = new THREE.Vector3(parseFloat(locStr[i]), parseFloat(locStr[i + 1]), 0);
      locations.push(point);
    }

    return locations;
  };

  var getAttributeVector = function getAttributeVector(attribute) {
    var posVec = new THREE.Vector3();
    var value = getMetaAttribute(attribute);

    if (value) {
      var strPos = value.split(' ');

      posVec.x = strPos[0] && parseFloat(strPos[0]) || 0;
      posVec.y = strPos[1] && parseFloat(strPos[1]) || 0;
      posVec.z = strPos[2] && parseFloat(strPos[2]) || 0;
    }

    return posVec;
  };

  var getPosition = function getPosition() {
    return getAttributeVector('position');
  };

  var getSize = function getSize() {
    return getAttributeVector('size');
  };

  var getRotation = function getRotation() {
    var strRot = getMetaAttribute('rotation');
    return strRot && parseFloat(strRot) || 0;
  };

  var getText = function getText() {
    return getMetaAttribute('text') || '';
  };

  var getIsFrameUsed = function getIsFrameUsed() {
    return !!parseInt(getMetaAttribute('isFrameUsed'), 10);
  };

  var fixScalableShapeAnchors = function fixScalableShapeAnchors() {
    var halfThickness = state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] / 2;
    state.anchors[0].add(new THREE.Vector3(halfThickness, halfThickness, 0));
    state.anchors[1].add(new THREE.Vector3(-halfThickness, halfThickness, 0));
    state.anchors[2].add(new THREE.Vector3(-halfThickness, -halfThickness, 0));
    state.anchors[3].add(new THREE.Vector3(halfThickness, -halfThickness, 0));
  };

  var fixLegacyFontSize = function fixLegacyFontSize() {
    if (state.style.hasOwnProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE)) {
      // Fix font size for older markups by converting from world to font
      var scale = renderer.getFontToWorldScale();
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE] /= scale;
    }
  };

  var fixLegacyFill = function fixLegacyFill() {
    if (!state.isFrameUsed) {
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FILL_OPACITY] = 0;
    }
  };

  // Check if belongs to group
  var groupId = getMetaAttribute('groupId');
  if (groupId) {
    state.groupId = groupId;
    state.groupOrder = parseFloat(getMetaAttribute('groupOrder'));
  }
  // Check if it's a group
  var uuid = getMetaAttribute('uuid');
  if (uuid) {
    state.uuid = uuid;
  }

  state.style = getStyle(meta);
  state.position = getPosition();
  state.rotation = getRotation();
  state.size = getSize();

  if (!viewer.impl.is2d) {
    Object(_MarkupsSceneState__WEBPACK_IMPORTED_MODULE_1__["restoreMarkupViewState"])(viewer, layerData, true);
  }

  var offset;

  switch (type) {
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]:
      state.anchors[0] = new THREE.Vector3(-state.size.x / 2, -state.size.y / 2, 0);
      state.anchors[1] = new THREE.Vector3(state.size.x / 2, -state.size.y / 2, 0);
      state.anchors[2] = new THREE.Vector3(state.size.x / 2, state.size.y / 2, 0);
      state.anchors[3] = new THREE.Vector3(-state.size.x / 2, state.size.y / 2, 0);
      if (isLegacyMarkup && type !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]) {
        fixScalableShapeAnchors(); // Legacy circle/rectangle markups grow inwards
      }
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_ARROW"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_LINE"]:
      state.anchors[0] = getAttributeVector('tail');
      state.anchors[1] = getAttributeVector('head');
      if (isLegacyMarkup) {
        state.rotation = 0;
      }
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_TEXT"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CALLOUT"]:
      state.text = getText();
      state.isFrameUsed = getIsFrameUsed();
      state.frameType = getMetaAttribute('frameType') || _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"];

      if (isLegacyMarkup) {
        fixLegacyFill();
      }

      state.anchors[0] = new THREE.Vector3(-state.size.x / 2, -state.size.y / 2, 0);
      state.anchors[1] = new THREE.Vector3(state.size.x / 2, -state.size.y / 2, 0);
      state.anchors[2] = new THREE.Vector3(state.size.x / 2, state.size.y / 2, 0);
      state.anchors[3] = new THREE.Vector3(-state.size.x / 2, state.size.y / 2, 0);
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_ARROW_CALLOUT"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_ARROW_CLOUD_CALLOUT"]:
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_HIGHLIGHT"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_FREEHAND"]:
      state.anchors = getLocations();
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYCLOUD"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYLINE"]:
      state.anchors = getLocations();
      state.closed = isClosed();
      break;

    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_DIMENSION"]:
      state.anchors[0] = getAttributeVector('firstAnchor');
      state.anchors[1] = getAttributeVector('secondAnchor');

      offset = getAttributeVector('offset');
      state.position.sub(offset);
      state.translation = markupsToWorld(offset, viewer, renderer, layerData).sub(markupsToWorld(new THREE.Vector3(), viewer, renderer, layerData));

      state.text = getText();

      if (isLegacyMarkup) {
        // Legacy dimension used half the thickness
        state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] /= 2;
      }

      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE] /= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_FONT_SIZE_FACTOR"];
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] /= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];
      break;

    default:
      break;}


  if (isLegacyMarkup || isLeaflet || isPdf) {// For Leaflet we do it for new markups as well
    fixLegacyFontSize();
  }

  // Translate to position.
  Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_0__["applyTranslation"])(state.anchors, state.position);

  // Conversion for legacy markups
  // For Leaflet we do it for new markups as well, to support exporting to PDF with markups included
  // Also, for Leaflet we have to make sure we support different DPIs from old versions.
  if (isLegacyMarkup && viewer.model.is3d() || isLeaflet || isPdf) {
    // Get the world position from the legacy markups coordinate system.
    state.anchors.forEach(function (anchor) {
      anchor.copy(markupsToWorld(anchor, viewer, renderer, layerData));
    });

    // Convert font and thickness sizes
    state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] = sizeFromMarkupsToWorld(state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS], viewer, renderer, layerData);
    state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE] = sizeFromMarkupsToWorld(state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].FONT_SIZE], viewer, renderer, layerData);
  }

  return output;
};

var getLayerDataModelVersion = function getLayerDataModelVersion(layerMetadata) {
  var versionAttr = layerMetadata.getAttribute('data-model-version');
  return typeof versionAttr === 'string' ? parseFloat(versionAttr) : 0;
};

var parseMarkupLayer = function parseMarkupLayer(svgString, layerData, viewer, renderer) {
  try {
    // data-model-version 6 and up saved as JSON.
    var metadata = JSON.parse(svgString);
    return metadata;
  } catch (e) {
    // data-model-version 5 and lower saved as SVG.
    var parentSvgNode = stringToSvgNode(svgString);
    var children = parentSvgNode.childNodes;

    var markups = [];

    var layerMetadata = children[0].childNodes[0];
    var dataModelVersion = getLayerDataModelVersion(layerMetadata);

    var viewerStateBackup = !viewer.impl.is2d ? viewer.getState() : null;

    for (var i = 0; i < children.length; i++) {
      var child = children[i];
      var _metadata = child.childNodes[0].childNodes[0];
      if (_metadata) {
        var markup = parseMetadata(child, layerData, viewer, renderer, dataModelVersion);
        markups.push(markup);
      }
    }

    if (viewerStateBackup) {
      viewer.restoreState(viewerStateBackup, null, true);
    }

    return markups;
  }
};

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsEvents.js":
/*!************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsEvents.js ***!
  \************************************************/
/*! exports provided: MARKUPS_EVENTS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARKUPS_EVENTS", function() { return MARKUPS_EVENTS; });
var MARKUPS_EVENTS = {
  MARKUP_SESSION_START: 'markup.session.start', // Triggered when a markup session starts. Can be creation or edition of existing markup.
  MARKUP_SESSION_END: 'markup.session.end', // Triggered when a markup session ends. Can be creation or edition of existing markup.
  MARKUP_TOOL_ENABLED_CHANGED: 'markup.tool.enabled.changed', // Triggered when tool enabled / disabled. When disabled, all user interactions disabled.
  MARKUP_REMOVED: 'markup.removed', // Triggered when markup has been removed from the canvas.
  MARKUP_DRAWING_START: 'markup.drawing.start', // Triggered when markup drawing starts - The drawing itself.
  MARKUP_DRAWING_END: 'markup.drawing.end', // Triggered when markup drawing ends - When the user stops drawing.
  MARKUP_DRAWING_CANCEL: 'markup.drawing.cancel', // Triggered when markup drawing has been canceled.
  MARKUP_EDIT_START: 'markup.edit.start', // Triggered when a markup edit has started.
  MARKUP_EDIT_END: 'markup.edit.end', // Triggered when a markup edit has ended.
  MARKUP_SELECTED: 'markup.selected', // Triggered when a markup has been selected.
  MARKUP_DESELECTED: 'markup.deselected', // Triggered when a markup has been deselected.
  MARKUP_ENABLE_EDIT: 'markup.enable.edit', // Triggered when a markup edit is enabled. Used for user interactions.
  MARKUP_DISABLE_EDIT: 'markup.disable.edit', // Triggered when a markup edit is disabled.
  MARKUP_DIRTY: 'markup.dirty', // Triggered when a markup is dirty. Used for rendering.
  MARKUP_VISIBILITY_CHANGED: 'markup.visibility.changed', // Triggered when markup visibility changed. Invisible markups won't be rendered.
  MARKUP_VIEW_ENTERED: 'markup.view.entered', // Triggered when entering markup view (3D only). locks camera & navigation.
  MARKUP_VIEW_EXITED: 'markup.view.exited', // Triggered when exiting markup view (3D only). makes visible layers invisible, and unlock camera & navigation.
  TEXT_EDITING_STARTED: 'text.editing.started', // Triggered when text editing has been enabled. Used to notify when mobile keyboard turns on.
  TEXT_EDITING_ENDED: 'text.editing.ended', // Triggered when text editing has been disabled. Used to notify when mobile keyboard turns off.

  LAYER_DIRTY: 'layer.dirty', // Triggered when a layer is dirty. Used for rendering.
  LAYER_SELECTED: 'layer.selected', // Triggered when a layer has been selected.
  LAYER_DESELECTED: 'layer.deselected', // Triggered when a layer has been deselected.
  LAYER_SELECTED_FROM_DIFFERENT_SHEET: 'layer.selected.from.different.sheet', // Triggered when a layer has been selected, but it's not from the current sheet. Used to let the viewer observer to switch sheet and then select the layer.
  LAYER_EDITED_FROM_DIFFERENT_SHEET: 'layer.edited.from.different.sheet', // Triggered when a layer has been selected for editing, but it's not from the current sheet. Used to let the viewer observer to switch sheet and then edit the layer.
  LAYER_DELETE: 'layer.delete', // Triggered in order to signal the service operator to start deleting a layer.
  LAYER_DELETED: 'layer.deleted', // Triggered when a layer has been deleted from the backend.
  LAYER_PUBLISH: 'layer.publish', // Triggered in order to signal the service operator to start publishing a layer.
  LAYER_ARCHIVE: 'layer.archive', // Triggered in order to signal the service operator to start archiving a layer.
  LAYER_SYNCING: 'layer.syncing', // Triggered when a layer syncing with the backend has been started. Could be saving, editing, deleting or updating status.
  LAYER_SYNCED: 'layer.synced', // Triggered when a layer sync with the backend has been completed.
  LAYER_READY_TO_SAVE: 'layer.ready.to.save', // Triggered when a layer is ready for being saved. Used to enable / disable save button.
  LAYER_CREATED: 'layer.created', // Triggered when a layer is created.

  DOCUMENT_ATTACHMENT_CREATION_START: 'document.attachment.creation.start', // Triggered in order to signal the service operator to start create a new document attachment.
  DOCUMENT_ATTACHMENT_RENAME: 'document.attachment.rename', // Triggered in order to signal the service operator to start renaming a document attachment.
  DOCUMENT_ATTACHMENT_DELETE: 'document.attachment.delete', // Triggered in order to signal the service operator to start deleting a document attachment.

  LAYER_FETCHED: 'layer.fetched', // Triggered when a layer has been downloaded from the backend.
  LAYER_RESOURCE_FETCHED: 'layer.resource.fetched', // Triggered when a layer's resource has been downloaded from the backend.
  LAYER_THUMBNAIL_FETCHED: 'layer.thumbnail.fetched', // Triggered when a layer's thumbnail has been downloaded from the backend.
  LAYER_METADATA_FETCHED: 'layer.metadata.fetched', // Triggered when a layer's metadata has been downloaded from the backend.
  ATTACHMENT_THUMBNAIL_LOADED: 'attachment.thumbnail.loaded', // Triggered when an attachment thumbnail has been downloaded from the backend.
  ALL_MARKUPS_LOADED: 'all.markups.loaded', // Triggered when all markups have been loaded from the backend.
  PROJECT_USERS_FETCHED: 'project.users.fetched', // Triggered when the users' array has been fetched from the backend.

  LINK_DIRTY: 'link.dirty', // Triggered when a link icon is dirty. Used for rendering.
  LINK_SELECTED: 'link.selected', // Triggered when a link has been selected.
  LINK_DESELECTED: 'link.deselected', // Triggered when a link has been deselected.
  LINK_SYNCED: 'link.synced', // Triggered when a link sync with the backend has been completed.
  LINK_SYNCING: 'link.syncing', // Triggered when a link syncing with the backend has been started. Could be saving, editing, deleting or updating status.
  LINK_REMOVED: 'link.removed', // Triggered when link has been removed from the canvas.
  LINK_RENDERED: 'link.rendered', // Triggered after a link icon has been rendered.

  FILTER_CHANGED: 'filter.changed', // Triggered when a filter has been changed.
  BUTTON_DOWN: 'button.down', // Triggered when the user clicked somewhere on the canvas. Used to notify menus to close submenus.
  MARKUP_CREATION_TYPE_CHANGED: 'markup.creation.type.changed', // Triggered when the selected markup tool has changed. (i.e. polyline, arrow).
  MARKUP_STYLE_PROPERTY_CHANGED: 'markup.style.property.changed', // Triggered when style property has been changed. Affect the toolbar and contextual menu style buttons.

  LAYER_DISCARD_PRESSED: 'layer.discard.pressed', // Triggered when 'discard markup' has been selected by the user.
  LAYER_PUBLISH_PRESSED: 'layer.publish.pressed', // Triggered when 'publish markup' has been selected by the user.
  LAYER_ARCHIVE_PRESSED: 'layer.archive.pressed', // Triggered when 'archive markup' has been selected by the user.
  LAYER_DELETE_PRESSED: 'layer.delete.pressed', // Triggered when 'delete markup' has been selected by the user.
  LAYER_DELETE_EMPTY_PRESSED: 'layer.delete.empty.pressed', // Triggered when 'save markup' has been selected by the user, while the layer is empty.
  EXIT_VIEWER_PRESSED: 'exit.viewer.pressed', // Triggered when exiting the viewer, while the layer is still in saving process.

  RECT_SELECTOR_UPDATED: 'rect.selector.updated', // Triggered when a rect selector frame changed.
  CALIBRATION_REQUIRED: 'calibration.required' // Triggered when trying to create a measure markup, and the document requires calibration first
};

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsLayer.js":
/*!***********************************************!*\
  !*** ./extensions/BimMarkups/MarkupsLayer.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsLayer; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupTypes/Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsLayerData */ "./extensions/BimMarkups/MarkupsLayerData.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _Links_Link__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Links/Link */ "./extensions/BimMarkups/Links/Link.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}





var

MarkupsLayer = /*#__PURE__*/function () {
  function MarkupsLayer(markupsExtension, id, layerData) {_classCallCheck(this, MarkupsLayer);
    this.markupsExtension = markupsExtension;
    this.id = id;
    this.layerData = !layerData || layerData instanceof _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_3__["default"] ? layerData : new _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_3__["default"](layerData.guid, layerData.resources, layerData.attachments, layerData.status, layerData.metadata);

    this.markups = {};
    this.links = {};

    this.selected = false;
    this.visible = false;
    this.transparent = false;
    this.hover = false;
  }_createClass(MarkupsLayer, [{ key: "addMarkup", value: function addMarkup(

    markup) {
      this.markups[markup.id] = markup;
      markup.layer = this;

      markup.setVisible(this.visible, true);
    } }, { key: "deleteMarkup", value: function deleteMarkup(

    markup) {
      var markupId = markup instanceof _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_1__["default"] ? markup.id : markup;

      if (this.markups[markupId]) {
        markup.deselect();

        delete this.markups[markupId];
        markup.remove();
        markup.layer = null;

        this.setDirty();
      } else {
        console.warn('deleteMarkup - markup does not exist');
      }
    } }, { key: "deleteAllMarkups", value: function deleteAllMarkups()

    {var _this = this;
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["forAll"])(this.markups, function (markup) {
        _this.deleteMarkup(markup);
      });
    } }, { key: "getMarkupById", value: function getMarkupById(

    markupId) {
      return this.markups[markupId];
    } }, { key: "isEmpty", value: function isEmpty()

    {
      return Object.keys(this.markups).length === 0;
    } }, { key: "addLink", value: function addLink(

    link) {
      this.links[link.id] = link;
    } }, { key: "deleteLink", value: function deleteLink(

    link) {
      var linkId = link instanceof _Links_Link__WEBPACK_IMPORTED_MODULE_6__["default"] ? link.id : link;

      if (this.links[linkId]) {
        this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_4__["MARKUPS_EVENTS"].LINK_REMOVED, link: link });
        delete this.links[linkId];
      } else {
        console.warn('deleteLink - markup does not exist');
      }
    } }, { key: "deleteAllLinks", value: function deleteAllLinks()

    {var _this2 = this;
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["forAll"])(this.links, function (link) {
        _this2.deleteLink(link);
      });
    } }, { key: "getLinkById", value: function getLinkById(

    linkId) {
      return this.links[linkId];
    } }, { key: "getClientBoundingBox", value: function getClientBoundingBox(

    withMargin) {
      var boundingBox = this.getWorldBoundingBox();

      boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);
      boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);

      var eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();
      var center = boundingBox.center();

      var cameraRotation = this.markupsExtension.renderer.getCameraRotation();

      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(boundingBox.min, cameraRotation, center, eyeDirection);
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(boundingBox.max, cameraRotation, center, eyeDirection);

      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].swapBoundingBoxY(boundingBox);

      if (withMargin) {
        var margin = this.getMarginSize();
        boundingBox.expandByVector(new THREE.Vector3(margin, margin, 0));
      }

      boundingBox.min.z = 0;
      boundingBox.max.z = 0;

      return boundingBox;
    } }, { key: "getMarginSize", value: function getMarginSize()

    {
      return _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["BOUNDING_BOX_MARGIN"];
    } }, { key: "getWorldBoundingBox", value: function getWorldBoundingBox()

    {
      var boundingBox = new THREE.Box3();

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["forAll"])(this.markups, function (markup) {
        var bbox = markup.getWorldBoundingBox(true);
        boundingBox.union(bbox);
      });

      return boundingBox;
    } }, { key: "getRotation", value: function getRotation()

    {
      return 0;
    } }, { key: "getAllMarkups", value: function getAllMarkups()

    {
      return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["getObjectAsList"])(this.markups);
    } }, { key: "getAllLinks", value: function getAllLinks()

    {
      return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["getObjectAsList"])(this.links);
    } }, { key: "hasSingleMarkup", value: function hasSingleMarkup()

    {
      return this.getAllMarkups().length === 1;
    } }, { key: "select", value: function select()

    {
      this.selected = true;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_4__["MARKUPS_EVENTS"].LAYER_SELECTED, layer: this });
      this.setDirty();
    } }, { key: "deselect", value: function deselect()

    {
      this.selected = false;
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_4__["MARKUPS_EVENTS"].LAYER_DESELECTED, layer: this });
      this.setDirty();
    } }, { key: "isSelected", value: function isSelected()

    {
      return this.selected;
    } }, { key: "setHover", value: function setHover(

    hover) {
      if (this.hover !== hover) {
        this.hover = hover;

        this.getAllLinks().forEach(function (link) {
          link.setHover(hover);
        });

        this.setDirty();
      }
    } }, { key: "isHovered", value: function isHovered()

    {
      return this.hover;
    } }, { key: "unhoverAllMarkups", value: function unhoverAllMarkups()

    {
      var markups = this.getAllMarkups();
      markups.forEach(function (markup) {
        markup.setHover(false);
      });
    } }, { key: "setVisible", value: function setVisible(

    isVisible) {
      this.visible = isVisible;
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_5__["forAll"])(this.markups, function (markup) {
        markup.setVisible(isVisible);
      });
      this.setDirty();
    } }, { key: "isVisible", value: function isVisible()

    {
      return this.visible;
    } }, { key: "setDirty", value: function setDirty()

    {
      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_4__["MARKUPS_EVENTS"].LAYER_DIRTY, layer: this });
    } }, { key: "getGuid", value: function getGuid()

    {
      return this.layerData && this.layerData.guid;
    } }, { key: "selectAllMarkups", value: function selectAllMarkups()

    {
      this.getAllMarkups().forEach(function (markup) {
        markup.select();
      });
    } }, { key: "changeTransparency", value: function changeTransparency(

    transparent) {
      this.transparent = transparent;

      this.getAllMarkups().forEach(function (markup) {
        markup.changeTransparency(transparent);
      });
    } }, { key: "isTransparent", value: function isTransparent()

    {
      return this.transparent;
    } }, { key: "enable", value: function enable()

    {
      this.getAllMarkups().forEach(function (markup) {
        markup.enable();
      });
    } }, { key: "disable", value: function disable()

    {
      this.getAllMarkups().forEach(function (markup) {
        markup.disable();
      });
    } }]);return MarkupsLayer;}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsLayerData.js":
/*!***************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsLayerData.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsLayerData; });
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var MarkupsLayerData = /*#__PURE__*/function () {
  function MarkupsLayerData(guid, resources, attachments, status, metadata) {_classCallCheck(this, MarkupsLayerData);
    this.guid = guid;
    this.resources = resources || [];
    this.attachments = attachments || [];
    this.status = status;
    this.metadata = metadata || {};
  }_createClass(MarkupsLayerData, [{ key: "getSvgResource", value: function getSvgResource()

    {
      return this.resources[0] && this.resources[0].data;
    } }, { key: "getScreenCaptureResource", value: function getScreenCaptureResource()

    {
      return this.resources[1] && this.resources[1].data;
    } }, { key: "getLinksMetadata", value: function getLinksMetadata()

    {
      return this.metadata && this.metadata.markup_metadata && this.metadata.markup_metadata.links;
    } }, { key: "getMetadata", value: function getMetadata()

    {
      return this.metadata;
    } }]);return MarkupsLayerData;}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsManager.js":
/*!*************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsManager.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsManager; });
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils/ActionManager/ActionManager */ "./extensions/BimMarkups/Utils/ActionManager/ActionManager.js");
/* harmony import */ var _MarkupsLayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsLayer */ "./extensions/BimMarkups/MarkupsLayer.js");
/* harmony import */ var _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupTypes/Markup */ "./extensions/BimMarkups/MarkupTypes/Markup.js");
/* harmony import */ var _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarkupTypes/MarkupsTypesDictionary */ "./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js");
/* harmony import */ var _Links_LinkTypesDictionary__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Links/LinkTypesDictionary */ "./extensions/BimMarkups/Links/LinkTypesDictionary.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsDeserializer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MarkupsDeserializer */ "./extensions/BimMarkups/MarkupsDeserializer.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _Actions_AddMarkupAction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Actions/AddMarkupAction */ "./extensions/BimMarkups/Actions/AddMarkupAction.js");
/* harmony import */ var _MarkupsSceneState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MarkupsSceneState */ "./extensions/BimMarkups/MarkupsSceneState.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _toConsumableArray(arr) {return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();}function _nonIterableSpread() {throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _iterableToArray(iter) {if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);}function _arrayWithoutHoles(arr) {if (Array.isArray(arr)) return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}










var

MarkupsManager = /*#__PURE__*/function (_Autodesk$Viewing$Eve) {_inherits(MarkupsManager, _Autodesk$Viewing$Eve);var _super = _createSuper(MarkupsManager);
  function MarkupsManager(markupsExtension) {var _this;_classCallCheck(this, MarkupsManager);
    _this = _super.call(this);

    _this.markupsExtension = markupsExtension;
    _this.actionManager = new _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"]();

    _this.registerEvents();
    _this.reset();return _this;
  }_createClass(MarkupsManager, [{ key: "registerEvents", value: function registerEvents()

    {
      this.onHistoryChangedBinded = this.onHistoryChanged.bind(this);
      this.actionManager.addEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);

      this.onAllMarkupsLoadedBinded = this.onAllMarkupsLoaded.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].ALL_MARKUPS_LOADED, this.onAllMarkupsLoadedBinded);

      this.onMarkupLayerFetchedBinded = this.onMarkupLayerFetched.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_FETCHED, this.onMarkupLayerFetchedBinded);

      this.onMarkupResourceFetchedBinded = this.onMarkupResourceFetched.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_RESOURCE_FETCHED, this.onMarkupResourceFetchedBinded);

      this.onMarkupLinkSyncedBinded = this.onMarkupLinkSynced.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LINK_SYNCED, this.onMarkupLinkSyncedBinded);

      this.onLayerSyncedBinded = this.onLayerSynced.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SYNCED, this.onLayerSyncedBinded);

      this.onLayerSyncingBinded = this.onLayerSyncing.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SYNCING, this.onLayerSyncingBinded);

      this.onLayerSelectedBinded = this.onLayerSelected.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SELECTED, this.onLayerSelectedBinded);

      this.onLayerDeselectedBinded = this.onLayerDeselected.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.onLayerDeselectedBinded);

      this.onCalibrationEndedBinded = this.onCalibrationEnded.bind(this);
      this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT, this.onCalibrationEndedBinded);

      this.onDrawingStartBinded = this.onDrawingStart.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_START, this.onDrawingStartBinded);

      this.onDrawingEndBinded = this.onDrawingEnd.bind(this);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onDrawingEndBinded);
      this.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.onDrawingEndBinded);
    } }, { key: "unregisterEvents", value: function unregisterEvents()

    {
      this.actionManager.removeEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].ALL_MARKUPS_LOADED, this.onAllMarkupsLoadedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_FETCHED, this.onMarkupLayerFetchedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_RESOURCE_FETCHED, this.onMarkupResourceFetchedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LINK_SYNCED, this.onMarkupLinkSyncedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SYNCED, this.onLayerSyncedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SYNCING, this.onLayerSyncingBinded);
      this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT, this.onCalibrationEndedBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_START, this.onDrawingStartBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onDrawingEndBinded);
      this.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.onDrawingEndBinded);
    } }, { key: "createLayer", value: function createLayer(

    layerJson) {
      var layer = new _MarkupsLayer__WEBPACK_IMPORTED_MODULE_2__["default"](this.markupsExtension, this.nextLayerId, layerJson);
      this.layers[layer.id] = layer;

      this.nextLayerId += 1;

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_CREATED });
      return layer;
    } }, { key: "loadLayers", value: function loadLayers(

    layersJson, ignoreFilters, removeExistingLayers) {var _this2 = this;
      if (removeExistingLayers) {
        this.removeAllLayers([this.getActiveLayer()]);

        if (this.markupsExtension.markupsCache) {
          this.markupsExtension.markupsCache.cleanCache();
        }
      }

      layersJson = layersJson instanceof Array ? layersJson : [layersJson];

      layersJson.forEach(function (layerJson) {
        // Add layer to cache if it's not there
        if (_this2.markupsExtension.markupsCache && layerJson.guid && !_this2.markupsExtension.markupsCache.get(layerJson.guid)) {
          _this2.markupsExtension.markupsCache.add(layerJson.guid, layerJson);
        }
      });

      var layersFiltered = ignoreFilters ? layersJson : this.markupsExtension.filterManager.filterLayers(layersJson);

      // Remove filtered out layers that currently on canvas.
      this.getLayersAsList().forEach(function (layer) {
        if (layer !== _this2.getActiveLayer() && layersFiltered.findIndex(function (l) {return l.guid === layer.getGuid();}) === -1) {
          _this2.removeLayer(layer);
        }
      });

      // Add new layers that was added to canvas.
      layersFiltered.forEach(function (layerJson) {
        if (!_this2.getLayerByGuid(layerJson.guid)) {
          var layer = _this2.createLayer(layerJson);

          if (_this2.markupsExtension.viewer.impl.is2d) {
            layer.setVisible(true);
            _this2.loadMarkupsToLayer(layer);
          }

          _this2.loadLinksToLayer(layer);
        }
      });
    } }, { key: "removeLayer", value: function removeLayer(

    layer) {
      var layerId = layer.id;
      var layerToDelete = this.layers[layerId];

      if (layerToDelete) {
        if (this.isMarkupSessionOpen() && layerToDelete === this.getActiveLayer()) {
          this.endMarkupSession(false);
        } else if (this.markupsExtension.viewer.model && this.markupsExtension.viewer.model.is3d() && this.isInMarkupView() && this.getVisibleLayers()[0] === layerToDelete) {
          this.exitMarkupView();
        }

        this.deselectLayer(layer);
        layer.deleteAllMarkups();
        layer.deleteAllLinks();
        layer.setVisible(false);

        this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_DELETED, layer: layer });
        delete this.layers[layerId];
      } else {
        console.warn('deleteLayer - layer does not exist');
      }
    } }, { key: "removeAllLayers", value: function removeAllLayers(

    exclude) {var _this3 = this;
      this.getLayersAsList().forEach(function (layer) {
        if (!exclude || exclude.indexOf(layer) === -1) {
          _this3.removeLayer(layer);
        }
      });
    } }, { key: "deleteLayer", value: function deleteLayer(

    layer) {
      // Delete the layer from backend.
      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_DELETE, layerData: layer.layerData });
    } }, { key: "getLayerById", value: function getLayerById(

    layerId) {
      return this.layers[layerId];
    } }, { key: "getLayerByGuid", value: function getLayerByGuid(

    layerGuid) {
      if (layerGuid === null || layerGuid === undefined) {
        return null;
      }

      return this.getLayersAsList().find(function (layer) {return layer.getGuid() === layerGuid;});
    } }, { key: "addMarkupToLayer", value: function addMarkupToLayer(

    markup, layer) {
      if (!this.getLayerById(layer.id)) {
        this.layers[layer.id] = layer;
      }

      // If other layer is selected, make new markup transparent.
      if (this.getSelectedLayers().length > 0 && !layer.isSelected()) {
        markup.changeTransparency(true);
      }

      // If other layer is under edit session, make new markup transparent.
      if (this.isMarkupSessionOpen() && layer !== this.getActiveLayer() || !this.isToolEnabled()) {
        markup.disable();
      }

      layer.addMarkup(markup);
      return true;
    } }, { key: "addLinkToLayer", value: function addLinkToLayer(

    link, layer) {
      if (!this.getLayerById(layer.id)) {
        this.layers[layer.id] = layer;
      }

      layer.addLink(link);
      return true;
    } }, { key: "createMarkup", value: function createMarkup(

    type, optionalState, options) {
      var MarkupClass = _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_4__["markupsTypesDictionary"][type];

      if (MarkupClass) {
        return new MarkupClass(this.markupsExtension, this.nextMarkupId++, optionalState, options);
      }

      return null;
    } }, { key: "createLink", value: function createLink(

    layer, linkMetadata) {
      var position = linkMetadata.position ? new THREE.Vector3().copy(linkMetadata.position) : null;

      if (position && this.markupsExtension.viewer.model.isPdf(true)) {
        Autodesk.Viewing.PDFUtils.leafletToPdfWorld(this.markupsExtension.viewer, position);
      }

      var link = new _Links_LinkTypesDictionary__WEBPACK_IMPORTED_MODULE_5__["linkTypesDictionary"][linkMetadata.type](this.markupsExtension, this.nextLinkId, linkMetadata.id, layer, { position: position });
      this.nextLinkId += 1;
      return link;
    } }, { key: "onAllMarkupsLoaded", value: function onAllMarkupsLoaded(_ref)

    {var amount = _ref.amount;
      console.log('All markups have been loaded. Amount: ' + amount);
    } }, { key: "onMarkupLayerFetched", value: function onMarkupLayerFetched(_ref2)

    {var _this4 = this;var layerData = _ref2.layerData;
      this.markupsExtension.filterManager.filterLayers([layerData]).forEach(function (data) {
        var layer = _this4.createLayer(data);

        if (_this4.markupsExtension.viewer.impl.is2d) {
          layer.setVisible(true);
        }
      });
    } }, { key: "onMarkupResourceFetched", value: function onMarkupResourceFetched(_ref3)

    {var layerData = _ref3.layerData;
      if (this.markupsExtension.viewer.impl.is2d) {
        var layer = this.getLayerByGuid(layerData.guid);

        if (layer) {
          this.loadMarkupsToLayer(layer);
        }
      }
    } }, { key: "onMarkupLinkSynced", value: function onMarkupLinkSynced(_ref4)

    {var documentAttachment = _ref4.documentAttachment,layerData = _ref4.layerData;
      var layer = this.getLayerByGuid(layerData.guid);

      if (layer) {
        if (documentAttachment && documentAttachment.status === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["MARKUP_ATTACHMENT_DELETEING"] &&
        layerData.attachments.length === 0) {
          layer.deleteAllLinks();
        }
        this.loadLinksToLayer(layer);
      }
    } }, { key: "onDrawingStart", value: function onDrawingStart()

    {
      var duringCreationMarkup = this.getDuringCreationMarkup(false);
      this.polySaveDisabled = duringCreationMarkup && duringCreationMarkup.inEdit && (
      duringCreationMarkup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["MARKUP_TYPE_POLYLINE"] ||
      duringCreationMarkup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["MARKUP_TYPE_POLYCLOUD"]);

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });
    } }, { key: "onDrawingEnd", value: function onDrawingEnd()

    {
      this.polySaveDisabled = false;

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });
    } }, { key: "getReadyToSave", value: function getReadyToSave()

    {
      var activeLayer = this.getActiveLayer();
      var isEmpty;
      var hasEmptyText;

      if (activeLayer) {
        isEmpty = activeLayer.isEmpty();

        if (!isEmpty) {
          // Don't allow saving empty text.
          hasEmptyText = activeLayer.getAllMarkups().some(function (markup) {
            return markup.isTextMarkup() && markup.textInputHandler.isEmpty();
          });
        }
      }

      // For mobile, disable save button if the layer is empty.
      // For web, enable the save button in case of an empty layer, what will trigger a deletion of the layer (in case the user has permissions)
      var emptynessCondition = this.markupsExtension.options.isMobileApp ?
      !isEmpty :
      !isEmpty || isEmpty && this.markupsExtension.permissionManager.canDeleteMarkup(activeLayer.layerData);
      var ready = activeLayer && emptynessCondition && !this.polySaveDisabled && !hasEmptyText;

      return !!ready;
    } }, { key: "removeMarkupFromLayer", value: function removeMarkupFromLayer(

    markup) {
      var layer = markup.layer;

      if (layer) {
        this.duringCreationMarkup = null;

        markup.deselect();
        markup.disableEdit();
        layer.deleteMarkup(markup);

        return true;
      } else {
        console.warn('removeMarkupFromLayer - markup does not exist');
        return false;
      }
    } }, { key: "getMarkupById", value: function getMarkupById(

    markupId) {
      var markup = null;

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(this.layers, function (l) {
        var m = l.getMarkupById(markupId);

        if (m) {
          markup = m;
        }
      });

      return markup;
    } }, { key: "getSelectedMarkups", value: function getSelectedMarkups()

    {
      return this.getMarkupsByProperty('selected', true);
    } }, { key: "getUnselectedMarkups", value: function getUnselectedMarkups()

    {
      return this.getMarkupsByProperty('selected', false);
    } }, { key: "getSelectedLayers", value: function getSelectedLayers()

    {
      return this.getLayersByProperty('selected', true);
    } }, { key: "getUnselectedLayers", value: function getUnselectedLayers()

    {
      return this.getLayersByProperty('selected', false);
    } }, { key: "getSelectedLayer", value: function getSelectedLayer()

    {
      return this.getSelectedLayers()[0];
    } }, { key: "getVisibleLayers", value: function getVisibleLayers()

    {
      return this.getLayersByProperty('visible', true);
    } }, { key: "getVisibleMarkups", value: function getVisibleMarkups()

    {
      return this.getMarkupsByProperty('visible', true);
    } }, { key: "getEnabledMarkups", value: function getEnabledMarkups()

    {
      return this.getMarkupsByProperty('enabled', true).filter(function (markup) {return !markup.layer || markup.layer.isVisible();});
    } }, { key: "getDisabledMarkups", value: function getDisabledMarkups()

    {
      return this.getMarkupsByProperty('enabled', false);
    } }, { key: "getVisibleLinks", value: function getVisibleLinks()

    {
      var visibleLayers = this.getVisibleLayers();
      var res = [];
      visibleLayers.forEach(function (layer) {
        var links = layer.getAllLinks();
        links.forEach(function (link) {
          res.push(link);
        });
      });

      return res;
    } }, { key: "getDirtyLinks", value: function getDirtyLinks()

    {
      return this.getLinksByProperty('dirty', true);
    } }, { key: "getSelectedLinks", value: function getSelectedLinks()

    {
      return this.getLinksByProperty('selected', true);
    } }, { key: "getInEditMarkups", value: function getInEditMarkups()

    {
      var inEditMarkups = this.getMarkupsByProperty('inEdit', true);

      if (this.duringCreationMarkup && inEditMarkups.indexOf(this.duringCreationMarkup) === -1) {
        inEditMarkups.push(this.duringCreationMarkup);
      }

      return inEditMarkups;
    } }, { key: "getMarkupsByProperty", value: function getMarkupsByProperty(

    key, value) {
      var markups = [];

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(this.layers, function (l) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(l.markups, function (m) {
          if (m[key] === value) {
            markups.push(m);
          }
        });
      });

      return markups;
    } }, { key: "getLayersByProperty", value: function getLayersByProperty(

    key, value) {
      var layers = [];

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(this.layers, function (l) {
        if (l[key] === value) {
          layers.push(l);
        }
      });

      return layers;
    } }, { key: "getLinksByProperty", value: function getLinksByProperty(

    key, value) {
      var links = [];

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(this.layers, function (l) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(l.links, function (m) {
          if (m[key] === value) {
            links.push(m);
          }
        });
      });

      return links;
    } }, { key: "selectMarkup", value: function selectMarkup(

    markup) {
      markup = markup instanceof _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_3__["default"] ? markup : this.getMarkupById(markup);

      if (markup) {
        markup.select();
      } else {
        console.warn('selectMarkup - markup does not exist');
      }
    } }, { key: "deselectMarkup", value: function deselectMarkup(

    markup) {
      markup = markup instanceof _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_3__["default"] ? markup : this.getMarkupById(markup);

      if (markup) {
        markup.deselect();
      } else {
        console.warn('selectMarkup - markup does not exist');
      }
    } }, { key: "deselectAllMarkups", value: function deselectAllMarkups(

    exclude) {
      var selectedMarkups = this.getSelectedMarkups();
      selectedMarkups.forEach(function (markup) {
        if ((!exclude || exclude.indexOf(markup) === -1) && markup.isSelected()) {
          markup.deselect();
        }
      });
    } }, { key: "unhoverAllLayers", value: function unhoverAllLayers()

    {
      var layers = this.getLayersAsList();
      layers.forEach(function (layer) {
        layer.setHover(false);
      });
    } }, { key: "unhoverAllMarkups", value: function unhoverAllMarkups()

    {
      var markups = this.getAllMarkups();
      markups.forEach(function (markup) {
        markup.setHover(false);
      });
    } }, { key: "enableAllMarkups", value: function enableAllMarkups()

    {
      this.getAllMarkups().forEach(function (markup) {
        markup.enable();
      });
    } }, { key: "disableAllMarkups", value: function disableAllMarkups()

    {
      this.getAllMarkups().forEach(function (markup) {
        markup.disable();
      });
    } }, { key: "lockNavigation", value: function lockNavigation()

    {
      if (!this.lockSettings) {
        this.lockSettings = this.markupsExtension.viewer.getNavigationLockSettings();
        this.markupsExtension.viewer.setNavigationLockSettings({
          orbit: false, pan: false, zoom: false, roll: false, fov: false, gotoview: false, walk: false });

        this.markupsExtension.viewer.navigation.setIsLocked(true);
      }

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_VIEW_ENTERED });
    } }, { key: "unlockNavigation", value: function unlockNavigation()

    {
      if (this.lockSettings) {
        this.markupsExtension.viewer.setNavigationLockSettings(this.lockSettings);
        this.markupsExtension.viewer.setNavigationLock(false);
        this.markupsExtension.viewer.toolController.setIsLocked(false);
        this.lockSettings = null;
      }
    } }, { key: "loadLayerIfHidden", value: function loadLayerIfHidden(

    layerGuid) {
      var layer = layerGuid instanceof _MarkupsLayer__WEBPACK_IMPORTED_MODULE_2__["default"] ? layerGuid : this.getLayerByGuid(layerGuid);

      // In case the layer is hidden because of a filter, load it and then select it.
      if (!layer && this.markupsExtension.markupsCache) {
        var layerData = this.markupsExtension.markupsCache.get(layerGuid);

        if (layerData) {
          var sheetNameInMarkup = layerData.metadata.markup_metadata.sheetName;

          // Different sheet - don't load layer here.
          if (!Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["isSheetNameEqual"])(this.markupsExtension.options.sheetName, sheetNameInMarkup)) {
            layerData = null;
          }
        }

        if (layerData) {
          this.loadLayers([layerData], true);
          layer = this.getLayerByGuid(layerGuid);
        }
      }

      return layer;
    } }, { key: "selectLayer", value: function selectLayer(

    layerGuid, focus, immediate) {var _this5 = this;var cb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};
      var layer = this.loadLayerIfHidden(layerGuid);
      var onSelectionDone = cb.bind(this);

      if (layer) {
        var wasSelected = layer.isSelected();
        this.deselectAllLayers([layer]);
        this.exitMarkupView([layer]);

        if (this.markupsExtension.viewer.impl.is2d) {
          layer.select();

          if (focus) {
            var marginBackup = {
              horizontal: this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN,
              vertical: this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN };


            // Change global bounds margins.
            this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["SELECTION_ZOOM_MARGIN"];
            this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["SELECTION_ZOOM_MARGIN"];

            var boundingBox = layer.getWorldBoundingBox();
            this.markupsExtension.viewer.navigation.fitBounds(immediate, boundingBox);

            // Restore global bounds margins.
            this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = marginBackup.horizontal;
            this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = marginBackup.vertical;
          }

          onSelectionDone();
        } else {
          this.loadMarkupsToLayer(layer);
          layer.select();
          this.navigationToolBackup = this.markupsExtension.viewer.getActiveNavigationTool();
          this.markupsExtension.viewer.setActiveNavigationTool(this.markupsExtension.markupsTool.getName());

          Object(_MarkupsSceneState__WEBPACK_IMPORTED_MODULE_10__["restoreMarkupViewState"])(this.markupsExtension.viewer, layer.layerData, immediate || wasSelected, function () {
            if (layer.isSelected()) {
              layer.setVisible(true);
              _this5.lockNavigation();
            }

            onSelectionDone();
          });
        }
      } else {
        this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_SELECTED_FROM_DIFFERENT_SHEET, layerGuid: layerGuid });
        var cache = this.markupsExtension.cache; // Must get the cache because when loading sheet, extension will be gone
        cache.layerToSelect = this.loadRelevantSheet(layerGuid);
      }
    } }, { key: "deselectLayer", value: function deselectLayer(

    layer) {
      layer = layer instanceof _MarkupsLayer__WEBPACK_IMPORTED_MODULE_2__["default"] ? layer : this.getLayerByGuid(layer);

      if (layer) {
        if (layer.isSelected()) {
          layer.deselect();

          if (layer.layerData) {
            // In case layer was hidden before selection, hide it.
            if (this.markupsExtension.filterManager.filterLayers([layer.layerData]).length === 0) {
              this.removeLayer(layer);
            }
          }
        }
      } else {
        console.warn('deselectLayer - layer does not exist');
      }
    } }, { key: "deselectAllLayers", value: function deselectAllLayers(

    exclude) {var _this6 = this;
      var selectedLayers = this.getSelectedLayers();
      selectedLayers.forEach(function (layer) {
        if ((!exclude || exclude.indexOf(layer) === -1) && layer.isSelected()) {
          _this6.deselectLayer(layer);
        }
      });
    } }, { key: "loadRelevantSheet", value: function loadRelevantSheet(

    layerGuid) {var _this7 = this;
      var doLoadSheet = function doLoadSheet(key, value) {
        for (var i = 0; i < _this7.markupsExtension.sheetList.length; i++) {
          var s = _this7.markupsExtension.sheetList[i];
          var sheet = s.search(_defineProperty({}, key, value))[0];

          if (sheet) {
            if (_this7.markupsExtension.options.loadDocumentCallback) {
              _this7.markupsExtension.options.loadDocumentCallback(sheet);
            } else {
              _this7.markupsExtension.viewer.loadDocumentNode(_this7.markupsExtension.viewer.model.getDocumentNode().getDocument(),
              sheet,
              { loadAsHidden: false, applyRefPoint: false, keepCurrentModels: false });
            }

            return layerGuid;
          }
        }

        console.warn("loadRelevantSheet - Sheet not found (by ".concat(key, ")"));
        return null;
      };

      var doLoadSheetByName = function doLoadSheetByName() {
        var sheetNameInMarkup = layer.metadata.markup_metadata.sheetName;

        // Same sheet.
        if (!sheetNameInMarkup || Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["isSheetNameEqual"])(_this7.sheetName, sheetNameInMarkup)) {
          return;
        }

        // Different name - switch sheet.
        return doLoadSheet('name', sheetNameInMarkup);
      };

      var layer = this.markupsExtension.markupsCache.get(layerGuid);

      if (!layer) {
        console.warn('loadRelevantSheet - Cant find selected layer.');
        return null;
      }

      if (!this.markupsExtension.options.hasMultiSheet) {
        console.warn('loadRelevantSheet - Something weird just happened. This method shouldnt be called on Plans folder.');
        return;
      }

      return doLoadSheetByName();
    } }, { key: "isInMarkupView", value: function isInMarkupView()

    {
      var visibleLayers = this.getVisibleLayers();
      return !this.isMarkupSessionOpen() && visibleLayers.length > 0;
    } }, { key: "exitMarkupView", value: function exitMarkupView(

    exclude) {var _this8 = this;
      if (this.markupsExtension.viewer.impl.is2d || !this.isInMarkupView()) {
        return;
      }

      var visibleLayers = this.getVisibleLayers();
      if (exclude) {
        visibleLayers = visibleLayers.filter(function (layer) {return exclude.indexOf(layer) === -1;});
      }

      if (visibleLayers.length === 0) {
        return;
      }

      visibleLayers.forEach(function (layer) {
        _this8.deselectLayer(layer);
        layer.setVisible(false);
      });

      this.unlockNavigation();
      this.markupsExtension.viewer.setActiveNavigationTool(this.navigationToolBackup);

      var sectionExt = this.markupsExtension.viewer.getExtension('Autodesk.Section');

      if (sectionExt && sectionExt.getSectionPlanes().length === 1) {
        sectionExt.setSectionFromPlane(null);
      } else {
        this.markupsExtension.viewer.impl.setCutPlaneSet('__set_view', undefined);
      }

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_VIEW_EXITED });
    } }, { key: "changeAllLayersTransparency", value: function changeAllLayersTransparency(

    isTransparent, exclude) {
      if (this.markupsExtension.isToolEnabled()) {
        var layers = this.getLayersAsList();
        layers.forEach(function (layer) {
          if (!exclude || exclude.indexOf(layer) === -1) {
            layer.changeTransparency(isTransparent);
          }
        });
      }
    } }, { key: "onLayerSynced", value: function onLayerSynced(_ref5)

    {var layerData = _ref5.layerData,layer = _ref5.layer;
      layer = layer || this.getLayerByGuid(layerData.guid);

      if (layer) {
        // Verify there is no markup session active currently, before enabling the layer.
        if (!this.isMarkupSessionOpen()) {
          layer.enable();

          var selectedLayer = this.getSelectedLayer();

          if (selectedLayer && selectedLayer !== layer || !this.markupsExtension.isToolEnabled()) {
            layer.changeTransparency(true);
          }
        }

        if (this.markupsExtension.filterManager.filterLayers([layerData]).length === 0) {
          this.removeLayer(layer);
        }
      }

      if (this.markupsExtension.options.onMarkupsSyncCallback) {
        this.markupsExtension.options.onMarkupsSyncCallback({ count: this.markupsExtension.markupsCache.length() });
      }
    } }, { key: "onLayerSyncing", value: function onLayerSyncing(_ref6)

    {var layerData = _ref6.layerData,layer = _ref6.layer;
      layer = layer || this.getLayerByGuid(layerData.guid);

      if (layer) {
        if (this.markupsExtension.viewer.impl.is2d) {
          layer.deselect();
        }

        layer.disable();
      }
    } }, { key: "selectLink", value: function selectLink(

    link) {
      if (link) {
        link.select();
      } else {
        console.warn('selectLink - link does not exist');
      }
    } }, { key: "deselectLink", value: function deselectLink(

    link) {
      if (link) {
        link.deselect();
      } else {
        console.warn('deselectLink - link does not exist');
      }
    } }, { key: "deselectAllLinks", value: function deselectAllLinks()

    {var _this9 = this;
      var selectedLinks = this.getSelectedLinks();
      selectedLinks.forEach(function (link) {
        _this9.deselectLink(link);
      });
    } }, { key: "getDuringCreationMarkup", value: function getDuringCreationMarkup(

    create) {
      if (!this.duringCreationMarkup && create) {
        var type = this.getMarkupCreationType();
        var markup = this.createMarkup(type);

        if (markup) {
          markup.setVisible(true);
          markup.enableEdit();
          this.duringCreationMarkup = markup;
        }
      }

      return this.duringCreationMarkup;
    } }, { key: "getActiveLayer", value: function getActiveLayer()

    {
      return this.activeLayer;
    } }, { key: "setActiveLayer", value: function setActiveLayer(

    layer) {
      layer = layer instanceof _MarkupsLayer__WEBPACK_IMPORTED_MODULE_2__["default"] ? layer : this.getLayerById(layer);
      this.activeLayer = layer;
    } }, { key: "isMarkupSessionOpen", value: function isMarkupSessionOpen()

    {
      return this.sessionOpen;
    } }, { key: "changeMarkupCreationType", value: function changeMarkupCreationType()

    {var _this10 = this;var creationType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_MARKUP"];
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["executeAfterTransitionEnded"])(this.markupsExtension.viewer, function () {
        var duringCreationMarkup = _this10.getDuringCreationMarkup(false);

        if (duringCreationMarkup) {
          duringCreationMarkup.creationHandler.onEscape();
        }

        _this10.markupCreationType = creationType;
        _this10.markupsExtension.viewer.setActiveNavigationTool(creationType ? _this10.markupsExtension.markupsTool.getName() : _this10.navigationToolBackup);

        _this10.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_CREATION_TYPE_CHANGED, creationType: creationType });

        if (creationType && !_this10.isMarkupSessionOpen() && creationType !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["RECT_SELECTOR"]) {
          _this10.startMarkupSession();
        }
      });
    } }, { key: "getMarkupCreationType", value: function getMarkupCreationType()

    {
      return this.markupCreationType;
    } }, { key: "setToolEnabled", value: function setToolEnabled(

    enable) {var _this11 = this;
      this.toolEnabled = enable;

      if (!enable) {
        this.deselectAllLayers();
        this.deselectAllLinks();
        this.disableAllMarkups();
      } else {
        this.enableAllMarkups();
      }

      // Solving a bug that happens in Safari and Edge. 
      // In those browsers, Rendering the MarkupsToolbar just after creating a new issue
      // Causing the markups toolbar to render without it's buttons:
      // https://jira.autodesk.com/browse/BLMV-3152
      // Another render of the toolbar solves the problem.
      if (Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIE11) {
        setTimeout(function () {
          if (_this11.markupsExtension.markupsUI) {
            _this11.markupsExtension.markupsUI.toolbar.renderToolbar();
          }
        }, 1);
      }

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_TOOL_ENABLED_CHANGED, enable: enable });
    } }, { key: "isToolEnabled", value: function isToolEnabled()

    {
      return this.toolEnabled;
    } }, { key: "startMarkupSession", value: function startMarkupSession(

    creationType, layer) {
      if (!this.isToolEnabled()) {
        return false;
      }

      this.deselectAllLayers(layer && [layer]);
      this.exitMarkupView([layer]);
      this.deselectAllLinks();

      this.sessionOpen = true;

      this.markupsExtension.markupsTool.updateToolPriority();

      layer = layer || this.createLayer();
      layer.setVisible(true);
      this.setActiveLayer(layer);

      this.navigationToolBackup = this.markupsExtension.viewer.getActiveNavigationTool();
      this.markupsExtension.viewer.setActiveNavigationTool(this.markupsExtension.markupsTool.getName());

      if (!this.markupsExtension.viewer.impl.is2d) {
        this.lockNavigation();
      }

      if (creationType || !this.getMarkupCreationType()) {
        this.changeMarkupCreationType(creationType);
      }

      this.getAllMarkups().forEach(function (markup) {
        if (markup.layer !== layer) {
          markup.disable();
        }
      });

      this.creationStatusType = this.markupsExtension.options.defaultMarkupStatus || _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["MARKUP_STATUS_PRIVATE"];

      this.contextMenu = this.markupsExtension.viewer.contextMenu;
      this.markupsExtension.viewer.setContextMenu(null);

      this.markupsExtension.viewer.impl.pauseHighlight(true);
      this.markupsExtension.viewer.impl.disableSelection(true);

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["setCustomGestureValues"])(this.markupsExtension.viewer);

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_SESSION_START, layer: layer });

      return true;
    } }, { key: "endMarkupSession", value: function endMarkupSession(

    save) {var _this12 = this;
      if (!this.isMarkupSessionOpen()) {
        return;
      }

      var layer = this.getActiveLayer();
      var deleteLayer = false;

      if (save && layer.isEmpty()) {
        if (layer.layerData) {
          // In case the layer already saved in the backend, trying to save it when it's empty is prohibited.
          // So the options are to delete it, or undo the changes.
          this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_DELETE_EMPTY_PRESSED, onConfirmCB: function onConfirmCB() {return _this12.deleteLayer(layer);} });
          return;
        } else {
          deleteLayer = true;
        }

        // Don't allow saving an empty layer.
        save = false;
      }

      this.sessionOpen = false;

      if (!save) {
        this.exitMarkupView();
      }

      if (this.markupsExtension.markupsTool) this.markupsExtension.markupsTool.updateToolPriority();
      this.changeMarkupCreationType(null);
      this.setActiveLayer(null);

      if (this.duringCreationMarkup) {
        this.duringCreationMarkup.creationHandler.creationCancel();
      }

      this.deselectAllMarkups();

      this.enableAllMarkups();
      this.unhoverAllMarkups();

      if (!save) {
        while (!this.actionManager.isUndoStackEmpty()) {
          this.undo();
        }
      }

      this.actionManager.clear();

      // If the layer is empty - remove it.
      // If the layer is new, and the user wants to discard it - just remove the layer.
      var removeLayer = layer.isEmpty() || !save && !layer.getGuid();

      if (deleteLayer) {
        this.deleteLayer(layer);
      } else if (removeLayer) {
        this.removeLayer(layer);
      }

      layer.deselect();

      this.markupsExtension.viewer.setContextMenu(this.contextMenu);

      this.markupsExtension.viewer.impl.pauseHighlight(false);
      this.markupsExtension.viewer.impl.disableSelection(false);

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["restoreGestureValues"])(this.markupsExtension.viewer);

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_SESSION_END, layer: layer, save: save });
    } }, { key: "editLayer", value: function editLayer(

    layerGuid, focus, selectAllMarkups, immediate) {var _this13 = this;
      if (!this.isToolEnabled()) {
        return;
      }

      var layer = this.loadLayerIfHidden(layerGuid);

      if (layer) {
        if (this.markupsExtension.permissionManager.canEditMarkup(layer.layerData)) {
          this.selectLayer(layer, focus, immediate, function () {
            _this13.startMarkupSession(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_MARKUP"], layer);
            if (selectAllMarkups) {
              // Currently, mobile devices don't support multi selection of markups.
              if (!Autodesk.Viewing.isMobileDevice()) {
                layer.selectAllMarkups();
              }
            }
          });
        } else {
          console.warn('editLayer - Cant edit layer, permissions not valid.');
        }
      } else {
        this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_EDITED_FROM_DIFFERENT_SHEET, layerGuid: layerGuid });
        var cache = this.markupsExtension.cache; // Must get the cache because when loading sheet, extension will be gone
        cache.layerToEdit = this.loadRelevantSheet(layerGuid);
      }
    } }, { key: "onLayerSelected", value: function onLayerSelected(_ref7)

    {var layer = _ref7.layer;
      this.changeAllLayersTransparency(true, [layer]);
    } }, { key: "onLayerDeselected", value: function onLayerDeselected()

    {
      if (!this.getSelectedLayer()) {
        this.changeAllLayersTransparency(false);
      }
    } }, { key: "deleteMarkup", value: function deleteMarkup(

    markup) {
      markup = markup instanceof _MarkupTypes_Markup__WEBPACK_IMPORTED_MODULE_3__["default"] ? markup : this.getMarkupById(markup);

      if (markup) {
        markup.creationHandler.deleteMarkup();
      } else {
        console.warn('deleteMarkup - markup does not exist');
      }
    } }, { key: "deleteInEditMarkups", value: function deleteInEditMarkups()

    {var _this14 = this;
      this.markupsToDelete = this.getInEditMarkups();

      this.openActionGroup();

      this.markupsToDelete.forEach(function (markup) {
        _this14.deleteMarkup(markup);
      });

      this.closeActionGroup();
    } }, { key: "undo", value: function undo()

    {
      if (this.duringCreationMarkup) {
        this.duringCreationMarkup.creationHandler.onEscape(false);
      } else {
        this.actionManager.undo();
      }
    } }, { key: "redo", value: function redo()

    {
      this.actionManager.redo();
    } }, { key: "isActionGroupOpen", value: function isActionGroupOpen()

    {
      return this.actionManager.isGroupOpen;
    } }, { key: "openActionGroup", value: function openActionGroup()

    {
      this.actionManager.openActionGroup();
    } }, { key: "closeActionGroup", value: function closeActionGroup()

    {
      this.actionManager.closeActionGroup();
    } }, { key: "copy", value: function copy()

    {
      this.markupsToCopy = this.getSelectedMarkups();
      this.pasteOffset = 1;
    } }, { key: "paste", value: function paste()

    {var _this15 = this;
      this.deselectAllMarkups();

      this.openActionGroup();

      this.markupsToCopy.forEach(function (markup) {
        _this15.duplicateMarkup(markup);
      });

      this.closeActionGroup();

      this.pasteOffset += 1;
    } }, { key: "cut", value: function cut()

    {
      this.copy();
      this.deleteInEditMarkups();
    } }, { key: "duplicateMarkup", value: function duplicateMarkup(

    markup) {var _this16 = this;
      var getTranslationVector = function getTranslationVector() {
        var rightVec = _this16.markupsExtension.renderer.getCameraRightVector();
        var upVec = _this16.markupsExtension.renderer.getCameraUpVector();
        var translationSize = _this16.markupsExtension.renderer.multiplyByNormaStrokeWidth(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["PASTE_OFFSET"] * _this16.pasteOffset);
        return rightVec.sub(upVec).normalize().multiplyScalar(translationSize);
      };

      var addToLayer = function addToLayer(markup) {
        markup.completed = true;
        var layer = _this16.activeLayer ? _this16.activeLayer : _this16.createLayer();
        var action = new _Actions_AddMarkupAction__WEBPACK_IMPORTED_MODULE_9__["default"](_this16, markup, layer);
        action.execute();
      };

      // Markups without translationHandler can't be duplicated. aka dimension markup.
      // Also, group components will be added by the group parent.
      if (markup.translationHandler && !markup.belongsToGroup()) {
        var newState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(markup.getState());
        // Translate
        var translationVec = getTranslationVector();
        newState.translation.add(translationVec);

        var newMarkup = this.createMarkup(markup.type, newState);

        addToLayer(newMarkup);
        newMarkup.select();
      } else if (markup.isGroupMarkup()) {
        var _newState = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(markup.getState());
        // Translate
        var _translationVec = getTranslationVector();

        _newState.uuid = THREE.Math.generateUUID(); // Can't use same id for different group
        _newState.componentsState = markup.markups.map(function (component) {
          var state = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(component.getState());
          state.translation.add(_translationVec);
          return state;
        });

        var _newMarkup = this.createMarkup(markup.type, _newState);

        addToLayer(_newMarkup);
        _newMarkup.markups.forEach(function (markup) {return addToLayer(markup);});
        _newMarkup.select();
      }
    } }, { key: "loadMarkupsToLayer", value: function loadMarkupsToLayer(

    layer) {var _this17 = this;
      var svgString = layer.layerData && layer.layerData.getSvgResource();

      if (!svgString || !layer.isEmpty()) {
        return;
      }

      var addToLayer = function addToLayer(markup) {
        markup.completed = true;
        _this17.addMarkupToLayer(markup, layer);
        markup.setDirty();
      };

      var svgMetadata = Object(_MarkupsDeserializer__WEBPACK_IMPORTED_MODULE_7__["parseMarkupLayer"])(svgString, layer.layerData, this.markupsExtension.viewer, this.markupsExtension.renderer);

      svgMetadata.forEach(function (markupMetadata) {
        if (markupMetadata.state.groupId) {
          return; // Group components will be added by the group parent
        }
        if (markupMetadata.state.uuid) {
          // It's a group, find its corresponding components
          markupMetadata.state.componentsState = svgMetadata.filter(function (metadata) {return markupMetadata.state.uuid === metadata.state.groupId;}).map(function (metadata) {return metadata.state;});
        }

        var newMarkup = _this17.createMarkup(markupMetadata.type, markupMetadata.state);

        if (newMarkup) {
          addToLayer(newMarkup);

          if (newMarkup.isGroupMarkup()) {
            newMarkup.markups.forEach(function (markup) {return addToLayer(markup);});
          }
        }
      });
    } }, { key: "createLinkMetadata", value: function createLinkMetadata(

    layerData) {var
      metadata = layerData.metadata;
      metadata.markup_metadata = metadata.markup_metadata || {};
      metadata.markup_metadata.links = metadata.markup_metadata.links || [];

      layerData.attachments.forEach(function (docAttachment) {
        // Only one link per attachment type.
        if (!metadata.markup_metadata.links.some(function (link) {return link.id === docAttachment.attributes.issue_id && link.type === docAttachment.attributes.attachment_type;})) {
          metadata.markup_metadata.links.push({
            id: docAttachment.attributes.issue_id,
            type: docAttachment.attributes.attachment_type,
            position: null });

        }
      });
    } }, { key: "loadLinksToLayer", value: function loadLinksToLayer(

    layer) {var _this18 = this;
      this.createLinkMetadata(layer.layerData);
      var links = layer.layerData.getLinksMetadata();

      if (!links) {
        return;
      }

      links.forEach(function (linkMetadata) {
        // Checks if a link is already loaded to the layer, Will not recreate it in this case.
        if (layer.getAllLinks().find(function (link) {return link.guid === linkMetadata.id;})) {
          return;
        }

        if (layer.layerData.attachments.some(function (attachment) {return attachment.attributes.issue_id === linkMetadata.id;})) {
          var newLink = _this18.createLink(layer, linkMetadata);
          _this18.addLinkToLayer(newLink, layer);
          newLink.setDirty(true);
        }
      });
    } }, { key: "changeStyleProperty", value: function changeStyleProperty(

    key, value, dontSubmit) {
      // Transform color to its true value if needed.
      if (typeof value === 'string') {
        value = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["COLORS"][value.toUpperCase()] || value;
      }

      if (key === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].THICKNESS) {
        value *= this.markupsExtension.renderer.getNormaStrokeWidth(); // The input thickness is just a factor, so multiply by the norma.
      }

      this.creationStyleProperties[key] = value;

      if (key === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].COLOR && value !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["COLORS"].NO_COLOR) {
        this.creationStyleProperties[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].LAST_COLOR] = value;
      }

      if (this.isMarkupSessionOpen()) {
        this.openActionGroup();

        this.getSelectedMarkups().forEach(function (markup) {
          markup.creationHandler.changeStyleProperty(key, value, dontSubmit);
        });

        this.closeActionGroup();
      }

      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].MARKUP_STYLE_PROPERTY_CHANGED, styleProperty: key, value: value });
    } }, { key: "getStyleProperty", value: function getStyleProperty(

    key) {
      return this.creationStyleProperties[key];
    } }, { key: "onCalibrationEnded", value: function onCalibrationEnded()

    {
      this.markupsExtension.setToolEnabled(true);
      this.startMarkupSession(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["MARKUP_TYPE_DIMENSION"]);
    } }, { key: "onHistoryChanged", value: function onHistoryChanged(

    event) {var
      actionGroup = event.actionGroup;

      actionGroup.forEach(function (a) {
        a.markup.setDirty();
      });

      // In order to centralize all the events in one place, the events from actionManager will pass threw markupsManager's event dispatcher.
      this.dispatchEvent(event);
      this.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_8__["MARKUPS_EVENTS"].LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });
    } }, { key: "getLayersAsList", value: function getLayersAsList()

    {
      return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getObjectAsList"])(this.layers);
    } }, { key: "getAllMarkups", value: function getAllMarkups()

    {
      var markups = [];

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["forAll"])(this.layers, function (layer) {
        markups.push.apply(markups, _toConsumableArray(Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getObjectAsList"])(layer.markups)));
      });

      return markups;
    } }, { key: "generateScreenCapture", value: function generateScreenCapture(

    layer) {var _this19 = this;
      return new Promise(function (resolve) {
        setTimeout(function () {
          Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_6__["getScreenShotOfMarkup"])(_this19.markupsExtension.viewer, function (img) {
            resolve(img);
          }, layer);
        }, 100);
      });
    } }, { key: "changeCreationStatusType", value: function changeCreationStatusType(

    status) {
      this.creationStatusType = status;
    } }, { key: "getCreationStatusType", value: function getCreationStatusType()

    {
      return this.creationStatusType;
    } }, { key: "setDefaultCreationStyleProperties", value: function setDefaultCreationStyleProperties()

    {
      this.creationStyleProperties = {};
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].LAST_COLOR, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_COLOR"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].COLOR, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_COLOR"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FILL_COLOR, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FILL_COLOR"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].THICKNESS, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_THICKNESS"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].OPACITY, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_OPACITY"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FILL_OPACITY, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FILL_OPACITY"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FONT_SIZE, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FONT_SIZE_IN_PIXELS"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FONT_WEIGHT, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FONT_WEIGHT"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FONT_FAMILY, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FONT_FAMILY"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FONT_STYLE, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FONT_STYLE"]);
      this.changeStyleProperty(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["STYLE_PROPERTIES"].FONT_COLOR, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_11__["DEFAULT_FONT_COLOR"]);
    } }, { key: "reset", value: function reset()

    {
      this.nextMarkupId = 0;
      this.nextLinkId = 0;
      this.nextLayerId = 0;
      this.sessionOpen = false;
      this.layers = {};
      this.selectedLayers = [];
      this.duringCreationMarkup = null;
      this.activeLayer = null;
      this.markupCreationType = null;
      this.markupsToCopy = [];
      this.pasteOffset = 1;
      this.toolEnabled = true;
      this.contextMenu = null;
      this.actionManager.clear();
      this.creationStyleProperties = {};
    } }, { key: "destroy", value: function destroy()

    {
      this.removeAllLayers();
      this.unlockNavigation();
      this.unregisterEvents();
      this.reset();
      this.clearListeners();
      this.markupsExtension = null;
      this.actionManager = null;
    } }]);return MarkupsManager;}(Autodesk.Viewing.EventDispatcher);

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsMobileCallbacks.js":
/*!*********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsMobileCallbacks.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupMobileCallbacks; });
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils/ActionManager/ActionManager */ "./extensions/BimMarkups/Utils/ActionManager/ActionManager.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}




var av = Autodesk.Viewing;
var _window = av.getGlobal();var

MarkupMobileCallbacks = /*#__PURE__*/function () {
  function MarkupMobileCallbacks(markupsExtension) {_classCallCheck(this, MarkupMobileCallbacks);
    this.markupsExtension = markupsExtension;
    this.registerEventListeners();
  }_createClass(MarkupMobileCallbacks, [{ key: "registerEventListeners", value: function registerEventListeners()








































    {
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.onLayerDeselected);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DESELECTED, this.onMarkupDeselected);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SELECTED_FROM_DIFFERENT_SHEET, this.onLayerSelectedDifferentSheet);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_EDITED_FROM_DIFFERENT_SHEET, this.onLayerEditDifferentSheet);

      this.markupsExtension.markupsManager.addEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChanged);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.onMarkupSessionStart);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.onMarkupSessionEnd);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_START, this.onMarkupDrawingStart);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onMarkupDrawingEnd);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.onMarkupDrawingCancel);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LINK_SELECTED, this.onLinkSelected);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LINK_DESELECTED, this.onLinkDeselected);

      this.onLayerReadyToSaveChangedBinded = this.onLayerReadyToSaveChanged.bind(this);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_READY_TO_SAVE, this.onLayerReadyToSaveChangedBinded);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_VIEW_ENTERED, this.onMarkupViewEntered);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_VIEW_EXITED, this.onMarkupViewExited);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].TEXT_EDITING_STARTED, this.onTextEditingStarted);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].TEXT_EDITING_ENDED, this.onTextEditingEnded);

      // Contextual menu
      this.updateContextualMenuBinded = this.updateContextualMenu.bind(this);
      this.hideContextualMenuBinded = this.hideContextualMenu.bind(this);

      this.updateContextualMenuDebouncedShort = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].debounce(this.updateContextualMenuBinded, 10);
      this.updateContextualMenuDebouncedLong = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].debounce(this.updateContextualMenuBinded, 200);

      this.markupsExtension.markupsManager.addEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DIRTY, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SYNCED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_TOOL_ENABLED_CHANGED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DESELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.hideContextualMenuBinded);

      this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.updateContextualMenuDebouncedLong);
    } }, { key: "unregisterEventListeners", value: function unregisterEventListeners()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.onLayerDeselected);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DESELECTED, this.onMarkupDeselected);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SELECTED_FROM_DIFFERENT_SHEET, this.onLayerSelectedDifferentSheet);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_EDITED_FROM_DIFFERENT_SHEET, this.onLayerEditDifferentSheet);

      this.markupsExtension.markupsManager.removeEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.onHistoryChanged);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.onMarkupSessionStart);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.onMarkupSessionEnd);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_START, this.onMarkupDrawingStart);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onMarkupDrawingEnd);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.onMarkupDrawingCancel);

      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LINK_SELECTED, this.onLinkSelected);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LINK_DESELECTED, this.onLinkDeselected);

      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_READY_TO_SAVE, this.onLayerReadyToSaveChangedBinded);

      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_VIEW_ENTERED, this.onMarkupViewEntered);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_VIEW_EXITED, this.onMarkupViewExited);

      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].TEXT_EDITING_STARTED, this.onTextEditingStarted);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].TEXT_EDITING_ENDED, this.onTextEditingEnded);

      this.markupsExtension.markupsManager.removeEventListener(_Utils_ActionManager_ActionManager__WEBPACK_IMPORTED_MODULE_1__["default"].HISTORY_CHANGED_EVENT, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_SELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DIRTY, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SYNCED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_SELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_TOOL_ENABLED_CHANGED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DESELECTED, this.updateContextualMenuDebouncedShort);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.hideContextualMenuBinded);

      this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.updateContextualMenuDebouncedLong);

      this.updateContextualMenuDebouncedShort.cancel();
      this.updateContextualMenuDebouncedLong.cancel();
    }

    // Callbacks //
  }, { key: "markupToolLoaded", value: function markupToolLoaded()
    {
      MarkupMobileCallbacks.send('onMarkupToolLoaded');
    } }, { key: "onMarkupSessionStart", value: function onMarkupSessionStart()

    {
      MarkupMobileCallbacks.send('onMarkupSessionStart');
    } }, { key: "onMarkupSessionEnd", value: function onMarkupSessionEnd()

    {
      MarkupMobileCallbacks.send('onMarkupSessionEnd');
    } }, { key: "onMarkupDrawingStart", value: function onMarkupDrawingStart(_ref)

    {var markup = _ref.markup;
      MarkupMobileCallbacks.send('onMarkupDrawingStart', markup.type);
    } }, { key: "onMarkupDrawingEnd", value: function onMarkupDrawingEnd(_ref2)

    {var markup = _ref2.markup;
      MarkupMobileCallbacks.send('onMarkupDrawingEnd', markup.type);
    } }, { key: "onMarkupDrawingCancel", value: function onMarkupDrawingCancel(_ref3)

    {var markup = _ref3.markup;
      MarkupMobileCallbacks.send('onMarkupDrawingCancel', markup.type);
    } }, { key: "onLayerSelectedDifferentSheet", value: function onLayerSelectedDifferentSheet(_ref4)

    {var layerGuid = _ref4.layerGuid;
      MarkupMobileCallbacks.send('onLayerSelectedDifferentSheet', layerGuid);
    } }, { key: "onLayerEditDifferentSheet", value: function onLayerEditDifferentSheet(_ref5)

    {var layerGuid = _ref5.layerGuid;
      MarkupMobileCallbacks.send('onLayerEditDifferentSheet', layerGuid);
    } }, { key: "onLayerSelected", value: function onLayerSelected(_ref6)

    {var layer = _ref6.layer;
      var guid = layer.getGuid();

      if (guid) {
        var dataObj = {
          guid: guid,
          boundingBox: MarkupMobileCallbacks.correctPixelRatio(layer.getClientBoundingBox(true)) };


        MarkupMobileCallbacks.send('onLayerSelected', dataObj);
      }
    } }, { key: "onLayerDeselected", value: function onLayerDeselected(_ref7)

    {var layer = _ref7.layer;
      var guid = layer.getGuid();

      if (guid) {
        MarkupMobileCallbacks.send('onLayerDeselected', guid);
      }
    } }, { key: "onMarkupSelected", value: function onMarkupSelected(_ref8)

    {var markup = _ref8.markup;
      var dataObj = {
        id: markup.id,
        layerGuid: markup.layer && markup.layer.getGuid() || '', // Needed for Android ugly fix.
        type: markup.type,
        style: markup.editState.style,
        boundingBox: MarkupMobileCallbacks.correctPixelRatio(markup.getClientBoundingBox(true, true)) };


      MarkupMobileCallbacks.send('onMarkupSelected', dataObj);
    } }, { key: "onMarkupDeselected", value: function onMarkupDeselected(_ref9)

    {var markup = _ref9.markup;
      MarkupMobileCallbacks.send('onMarkupDeselected', markup.id);
    } }, { key: "onHistoryChanged", value: function onHistoryChanged(_ref10)

    {var hasUndo = _ref10.hasUndo,hasRedo = _ref10.hasRedo;
      var dataObj = {
        enableUndo: hasUndo,
        enableRedo: hasRedo };


      MarkupMobileCallbacks.send('onMarkupHistoryChanged', dataObj);
    } }, { key: "onLayerReadyToSaveChanged", value: function onLayerReadyToSaveChanged(_ref11)

    {var readyToSave = _ref11.readyToSave;
      MarkupMobileCallbacks.send('onLayerReadyToSaveChanged', readyToSave);
    } }, { key: "postLayer", value: function postLayer(

    metadata, resources, requestId) {var _resources;
      var dataObj = {
        metadata: metadata,
        resources: (_resources = {}, _defineProperty(_resources,
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SVG"], resources[0]), _defineProperty(_resources,
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE"], resources[1]), _resources),

        requestId: requestId };


      MarkupMobileCallbacks.send('onPostLayer', dataObj);
    } }, { key: "updateLayer", value: function updateLayer(

    originalGuid, metadata, resources, requestId) {var _resources2;
      var dataObj = {
        originalGuid: originalGuid,
        metadata: metadata,
        resources: (_resources2 = {}, _defineProperty(_resources2,
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SVG"], resources[0]), _defineProperty(_resources2,
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE"], resources[1]), _resources2),

        requestId: requestId };


      MarkupMobileCallbacks.send('onUpdateLayer', dataObj);
    } }, { key: "deleteLayer", value: function deleteLayer(

    guid, requestId) {
      var dataObj = {
        guid: guid,
        requestId: requestId };


      MarkupMobileCallbacks.send('onDeleteLayer', dataObj);
    } }, { key: "publishLayer", value: function publishLayer(

    guid, requestId) {
      var dataObj = {
        guid: guid,
        requestId: requestId };


      MarkupMobileCallbacks.send('onPublishLayer', dataObj);
    } }, { key: "archiveLayer", value: function archiveLayer(

    guid, closeVersion, requestId) {
      var dataObj = {
        guid: guid,
        closeVersion: closeVersion,
        requestId: requestId };


      MarkupMobileCallbacks.send('onArchiveLayer', dataObj);
    } }, { key: "onLinkSelected", value: function onLinkSelected(_ref12)

    {var link = _ref12.link;
      var dataObj = {
        type: link.type,
        layerGuid: link.layer.layerData.guid,
        boundingBox: link.getClientBoundingBox() };


      MarkupMobileCallbacks.send('onLinkSelected', dataObj);
    } }, { key: "onLinkDeselected", value: function onLinkDeselected(_ref13)

    {var link = _ref13.link;
      var dataObj = {
        type: link.type,
        layerGuid: link.layer.layerData.guid };


      MarkupMobileCallbacks.send('onLinkDeselected', dataObj);
    }

    // Used to update contextual menu position.
  }, { key: "updateContextualMenu", value: function updateContextualMenu() {
      var duringCreation = this.markupsExtension.markupsManager.getDuringCreationMarkup();

      if (!duringCreation) {
        var markup = this.markupsExtension.markupsManager.getSelectedMarkups()[0];

        if (markup) {
          this.onMarkupSelected({ markup: markup });
          return;
        } else if (!this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
          var layer = this.markupsExtension.markupsManager.getSelectedLayer();

          if (layer) {
            this.onLayerSelected({ layer: layer });
            return;
          }
        }
      }

      this.hideContextualMenu();
    } }, { key: "hideContextualMenu", value: function hideContextualMenu()

    {
      MarkupMobileCallbacks.send('onHideContextualMenu');
    } }, { key: "onMarkupViewExited", value: function onMarkupViewExited()

    {
      MarkupMobileCallbacks.send('onMarkupViewExited');
    } }, { key: "onMarkupViewEntered", value: function onMarkupViewEntered()

    {
      MarkupMobileCallbacks.send('onMarkupViewEntered');
    } }, { key: "onTextEditingStarted", value: function onTextEditingStarted()

    {
      MarkupMobileCallbacks.send('onTextEditingStarted');
    } }, { key: "onTextEditingEnded", value: function onTextEditingEnded()

    {
      MarkupMobileCallbacks.send('onTextEditingEnded');
    } }, { key: "destroy", value: function destroy()

    {
      this.unregisterEventListeners();

      this.iosSend = null;
      this.androidSend = null;
      this.send = null;
    } }], [{ key: "send", value: function send(callbackName, dataObj) {var iosBridge = _window.webkit && _window.webkit.messageHandlers.callbackHandler;var iosSend = iosBridge ? function (messageName, data) {iosBridge.postMessage({ command: messageName, data: data });} : null;var androidSend = _window.JSINTERFACE;var dataAsString = _typeof(dataObj) === 'object' ? JSON.stringify(dataObj) : dataObj;if (iosSend) {if (dataAsString !== undefined) {iosSend(callbackName, dataAsString);} else {iosSend(callbackName);}} else if (androidSend) {if (androidSend[callbackName]) {if (dataAsString !== undefined) {androidSend[callbackName](dataAsString);} else {androidSend[callbackName]();}}}} }, { key: "correctPixelRatio", value: function correctPixelRatio(boundingBox) {// iOS gets their coordinates in points, while Android in pixels.
      // Android need to fix the result according to devicePixelRatio.
      if (Autodesk.Viewing.isAndroidDevice()) {boundingBox.min.multiplyScalar(window.devicePixelRatio);boundingBox.max.multiplyScalar(window.devicePixelRatio);}return boundingBox;} }]);return MarkupMobileCallbacks;}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsPermissionManager.js":
/*!***********************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsPermissionManager.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsPermissionManager; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var

MarkupsPermissionManager = /*#__PURE__*/function () {
  function MarkupsPermissionManager() {var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};_classCallCheck(this, MarkupsPermissionManager);
    this.options = options;
  }_createClass(MarkupsPermissionManager, [{ key: "canPublishMarkup", value: function canPublishMarkup(

    layerData) {
      // Layer hasn't been saved yet.
      if (!layerData || !layerData.guid) {
        return false;
      }

      // Already published.
      if (!layerData.metadata.status === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PUBLISHED"]) {
        return false;
      }

      return !(!this.options.userId ||
      !layerData.metadata.permitted_statuses ||
      layerData.metadata.permitted_statuses.indexOf(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PUBLISHED"]) === -1);
    } }, { key: "canArchiveMarkup", value: function canArchiveMarkup(

    layerData) {
      // Layer hasn't been saved yet.
      if (!layerData || !layerData.guid) {
        return false;
      }

      // Already published.
      if (!layerData.metadata.status === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_ARCHIVED"]) {
        return false;
      }

      return !(!this.options.userId ||
      !layerData.metadata.permitted_statuses ||
      layerData.metadata.permitted_statuses.indexOf(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_ARCHIVED"]) === -1);
    } }, { key: "canEditMarkup", value: function canEditMarkup(

    layerData) {
      // During initial creation - allow editing.
      if (!layerData) {
        return true;
      }

      // Layer hasn't been saved yet.
      if (!layerData.guid) {
        return false;
      }

      var editableStatuses = [_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PRIVATE"], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PUBLISHED"]];

      if (!this.options.userId || editableStatuses.indexOf(layerData.metadata.status) === -1) {
        return false;
      }

      // Can't edit markup when viewing a previous document version
      if (this.options.documentVersion < this.options.currentRawDocumentVersion) {
        return false;
      }

      // Admin or creator can delete any markups
      return this.options.isAdmin || this.options.userId === layerData.metadata.created_by;
    } }, { key: "canDeleteMarkup", value: function canDeleteMarkup(

    layerData) {
      // Layer hasn't been saved yet.
      if (!layerData || !layerData.guid) {
        return false;
      }

      var deletableStatuses = [_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_OPEN"], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PRIVATE"]];

      if (!this.options.userId || deletableStatuses.indexOf(layerData.metadata.status) === -1) {
        return false;
      }

      // Admin or creator can delete any markups
      return this.options.isAdmin || this.options.userId === layerData.metadata.created_by;
    } }, { key: "canEditMarkupAttachment", value: function canEditMarkupAttachment(

    layerData, docAttachment) {
      // Layer hasn't been saved yet.
      if (!layerData || !layerData.guid) {
        return false;
      }

      // Cannot edit any attachments of closed markup.
      if (layerData.metadata.status === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_CLOSED"] || layerData.metadata.status === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_ARCHIVED"]) {
        return false;
      }

      if (this.options.documentVersion !== this.options.currentRawDocumentVersion) {
        return false;
      }

      if (!this.options.userId) {
        // No userId, won't allow to edit a markup at all.
        return false;
      }

      // Rule number 1, admin can edit any attachments.
      if (this.options.isAdmin) {
        return true;
      }

      // Rule number 2, only attachment author can edit the attachment.
      return !docAttachment || docAttachment && this.options.userId === docAttachment.attributes.created_by;
    } }, { key: "canCreateMarkup", value: function canCreateMarkup()

    {
      if (this.options.documentVersion !== this.options.currentRawDocumentVersion) {
        return false;
      }

      return true;
    } }, { key: "destroy", value: function destroy()

    {
      this.options = null;
    } }]);return MarkupsPermissionManager;}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsRenderer.js":
/*!**************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsRenderer.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsRenderer; });
/* harmony import */ var _FrameRenderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FrameRenderer */ "./extensions/BimMarkups/FrameRenderer.js");
/* harmony import */ var _Links_LinksRenderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Links/LinksRenderer */ "./extensions/BimMarkups/Links/LinksRenderer.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _RendererHelpers_MarkupsMaterialManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RendererHelpers/MarkupsMaterialManager */ "./extensions/BimMarkups/RendererHelpers/MarkupsMaterialManager.js");
/* harmony import */ var _RendererHelpers_MarkupsGeometryManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RendererHelpers/MarkupsGeometryManager */ "./extensions/BimMarkups/RendererHelpers/MarkupsGeometryManager.js");
/* harmony import */ var _RendererHelpers_TextRenderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RendererHelpers/TextRenderer */ "./extensions/BimMarkups/RendererHelpers/TextRenderer.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _Utils_CameraUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Utils/CameraUtils */ "./extensions/BimMarkups/Utils/CameraUtils.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}










var avp = Autodesk.Viewing.Private;
var ShaderPass = avp.ShaderPass;
var CopyShader = avp.CopyShader;var

MarkupsRenderer = /*#__PURE__*/function () {
  function MarkupsRenderer(markupsExtension) {_classCallCheck(this, MarkupsRenderer);
    this.markupsExtension = markupsExtension;
    this.viewer = this.markupsExtension.viewer;
    this.viewer.impl.updateCameraMatrices();

    this.viewer.navigation.updateCamera();
    this.documentCamera = this.viewer.navigation.getCamera();
    this.documentCamera.updateMatrixWorld();
    this.documentCamera.matrixWorldInverse.getInverse(this.documentCamera.matrixWorld);

    this.textRenderer = new _RendererHelpers_TextRenderer__WEBPACK_IMPORTED_MODULE_6__["default"](this.markupsExtension);
    this.frameRenderer = new _FrameRenderer__WEBPACK_IMPORTED_MODULE_0__["default"](this.markupsExtension);
    this.linksRenderer = new _Links_LinksRenderer__WEBPACK_IMPORTED_MODULE_1__["default"](this.markupsExtension);
    this.materialManager = new _RendererHelpers_MarkupsMaterialManager__WEBPACK_IMPORTED_MODULE_4__["default"](this.markupsExtension);
    this.geometryManager = new _RendererHelpers_MarkupsGeometryManager__WEBPACK_IMPORTED_MODULE_5__["default"](this.markupsExtension);

    this.is3d = this.viewer.model.is3d();

    this.raycaster = new THREE.Raycaster();

    this.size = {
      width: this.viewer.canvas.clientWidth,
      height: this.viewer.canvas.clientHeight };


    if (this.is3d) {
      this.viewSize = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["WORLD_3D_SIZE"];
      this.markupsCamera = new THREE.OrthographicCamera(0, this.viewSize, this.viewSize, 0, 0, 1);
      this.markupsCamera.position.set(0, 0, 1);
      this.markupsCamera.target = new THREE.Vector3(0, 0, 0);
    } else {
      this.markupsCamera = this.viewer.navigation.getCamera();
    }

    this.markups = [];

    this.renderer = this.viewer.impl.renderer();
    this.glrenderer = this.viewer.impl.glrenderer();
    this.copyPass = new ShaderPass(CopyShader);
    this.copyPass.material.depthWrite = false;
    this.copyPass.material.depthTest = false;
    this.copyPass.material.transparent = true;

    this._tmpScene = new THREE.Scene();
    this._black = new THREE.Color(0, 0, 0);

    this.absoluteRightVec = new THREE.Vector3(1, 0, 0);
    this.absoluteUpVec = new THREE.Vector3(0, 1, 0);
    this.absoluteEyeVec = new THREE.Vector3(0, 0, 1);

    this.tmpMatrix = new THREE.Matrix4();
    this.frustum = new THREE.Frustum();

    this.setMMtoUnitConversion();
    this.setNormaStrokeWidth();
    this.setNormaTextSize();

    this.registerEventListeners();
    this.updateCameraAndMaterialParameters();
  }_createClass(MarkupsRenderer, [{ key: "registerEventListeners", value: function registerEventListeners()

    {
      this.onRenderBinded = this.onRender.bind(this);
      this.onResizeBinded = this.onResize.bind(this);
      this.invalidateBinded = this.invalidate.bind(this);
      this.onCameraChangedBinded = this.onCameraChanged.bind(this);
      this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.onRenderBinded);
      this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);
      this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.invalidateBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.invalidateBinded);
    } }, { key: "removeEventListeners", value: function removeEventListeners()

    {
      this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.onRenderBinded);
      this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);
      this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.invalidateBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_2__["MARKUPS_EVENTS"].MARKUP_DRAWING_CANCEL, this.invalidateBinded);
    } }, { key: "onCameraChanged", value: function onCameraChanged()

    {
      this.eyeVector = null;
      this.upVector = null;
      this.rightVector = null;
    } }, { key: "getResolution", value: function getResolution()

    {
      var pixelRatio = this.glrenderer.getPixelRatio();

      return {
        width: this.size.width * pixelRatio,
        height: this.size.height * pixelRatio };

    } }, { key: "supportsInt32Index", value: function supportsInt32Index()

    {
      return !!this.glrenderer.supportsElementIndexUint();
    } }, { key: "disposeTmpTarget", value: function disposeTmpTarget()

    {
      if (this._tmpTarget) {
        this._tmpTarget.dispose();
        this._tmpTarget = null;
      }
    } }, { key: "createTempRenderTarget", value: function createTempRenderTarget()

    {var resolution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getResolution();
      this.disposeTmpTarget();

      if (resolution.width === 0 || resolution.height === 0) {
        return false;
      }

      this._tmpTarget = new THREE.WebGLRenderTarget(resolution.width, resolution.height,
      {
        minFilter: THREE.LinearFilter,
        magFilter: THREE.LinearFilter,
        format: THREE.RGBAFormat,
        stencilBuffer: false,
        depthBuffer: false });

      this._tmpTarget.generateMipmaps = false;

      return true;
    } }, { key: "onRender", value: function onRender()

    {
      this.render();
    } }, { key: "onResize", value: function onResize(

    e) {
      this.size.width = e.width;
      this.size.height = e.height;

      this.updateCameraAndMaterialParameters();
    } }, { key: "updateCameraAndMaterialParameters", value: function updateCameraAndMaterialParameters()

    {
      if (this.is3d) {
        var aspect = this.size.width / (this.size.height || 1); // In case height is 0.
        var newRight = this.viewSize * aspect;
        var delta = this.markupsCamera.right - newRight;

        this.markupsCamera.position.x += delta / 2;
        this.markupsCamera.target.x += delta / 2;
        this.markupsCamera.right = newRight;

        this.markupsCamera.updateProjectionMatrix();
        this.markupsCamera.updateMatrixWorld();
        this.markupsCamera.matrixWorldInverse.getInverse(this.markupsCamera.matrixWorld);
      }

      var resolution = this.getResolution();

      if (this._tmpTarget) {// Resize only if it already exists
        this.createTempRenderTarget(resolution);
      }

      this.materialManager.updateScreenSize(resolution);
    }

    // A null target means render to screen
  }, { key: "render", value: function render() {var _this = this;var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.renderer.getFinalTarget();var camera = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.markupsCamera;
      //
      // Markups can have a combination of fill and stroke, each one with a different opacity. To avoid the overlapping parts
      // of a transparent markup having darker areas (because of the alpha values being blended) we render them to a 
      // temporary target first, with blending off. Afterwards the result is blended with the final image.
      // In order to render correctly we must take into account the following:
      // 
      //          Fill            Stroke          How to render
      //      ----------------------------------------------------
      //         Opaque          Opaque           Normally
      //         Transparent     Opaque           Fill with temp target, stroke normally
      //         Transparent     Transparent      Both with temp target
      //         None            Opaque           Normally
      //         None            Transparent      With temp target
      //

      // TODO: Improve performance by simplifying the check in isInsideCamera.
      this.tmpMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);
      this.frustum.setFromMatrix(this.tmpMatrix);

      var isInsideCamera = function isInsideCamera(box) {
        var topRight = box.max;
        var topLeft = box.max.clone().setX(box.min.x);
        var bottomLeft = box.min;
        var bottomRight = box.min.clone().setX(box.max.x);
        return _this.frustum.containsPoint(topRight) || _this.frustum.containsPoint(topLeft) || _this.frustum.containsPoint(bottomLeft) || _this.frustum.containsPoint(bottomRight) || _this.frustum.intersectsBox(box);
      };

      var is2DBoxIntersection = function is2DBoxIntersection(box1, box2) {
        return !(box2.max.x < box1.min.x || box2.min.x > box1.max.x ||
        box2.max.y < box1.min.y || box2.min.y > box1.max.y);
      };

      var normalMeshes = [];
      var transparentMeshes = [],transparentProperties = [];

      var flushNormalMeshes = function flushNormalMeshes() {var _this$_tmpScene;
        if (normalMeshes.length === 0) return;

        (_this$_tmpScene = _this._tmpScene).add.apply(_this$_tmpScene, normalMeshes);

        _this.glrenderer.render(_this._tmpScene, camera, target);

        _this._tmpScene.children.length = 0;
        normalMeshes.length = 0;
      };

      var flushTransparentMeshes = function flushTransparentMeshes() {var _this$_tmpScene2;
        if (transparentMeshes.length === 0) return;

        (_this$_tmpScene2 = _this._tmpScene).add.apply(_this$_tmpScene2, transparentMeshes);

        _this.glrenderer.setClearColor(_this._black, 0.0);
        _this.glrenderer.clearTarget(_this._tmpTarget, true, false, false);

        _this.glrenderer.render(_this._tmpScene, camera, _this._tmpTarget);
        _this.copyPass.render(_this.glrenderer, target, _this._tmpTarget);

        _this._tmpScene.children.length = 0;
        transparentMeshes.length = 0;
        transparentProperties.length = 0;
      };

      this.markups.forEach(function (markup) {
        var meshContainer = markup.meshContainer;
        if (!meshContainer.visible || meshContainer.children.length === 0) {
          return;
        }

        if (!_this.is3d) {// No point in checking in 3D since the camera is fixed
          var bbox = markup.getWorldBoundingBox(true);
          if (!isInsideCamera(bbox)) {
            return;
          }
        }

        var fillMesh = markup.fillMesh;
        var strokeMesh = markup.strokeMesh;
        var hasTransparentFill = fillMesh && fillMesh.material.opacity < 1;
        var hasTransparentStroke = strokeMesh.material.uniforms.opacity.value < 1;

        var normalRender = !hasTransparentFill && !hasTransparentStroke;
        if (normalRender) {
          flushTransparentMeshes();
          normalMeshes.push(meshContainer);
        } else {
          if (!_this._tmpTarget) {// Create only if needed
            if (!_this.createTempRenderTarget()) {
              return;
            }
          }

          flushNormalMeshes();

          if ((hasTransparentFill || !fillMesh) && hasTransparentStroke) {
            var currentBBox = markup.getWorldBoundingBox(true);
            if (transparentProperties.some(function (prop) {
              if (markup.isTransparent() && prop.isTransparent) {
                return false;
              }

              return is2DBoxIntersection(currentBBox, prop.bbox);
            })) {
              flushTransparentMeshes();
            }

            transparentMeshes.push(meshContainer);
            transparentProperties.push({
              bbox: currentBBox,
              isTransparent: markup.isTransparent() });

          } else {
            flushTransparentMeshes();

            _this._tmpScene.add(meshContainer);

            // Fill to tmpTarget                   
            meshContainer.remove(strokeMesh);

            _this.glrenderer.setClearColor(_this._black, 0.0);
            _this.glrenderer.clearTarget(_this._tmpTarget, true, false, false);

            _this.glrenderer.render(_this._tmpScene, camera, _this._tmpTarget);
            _this.copyPass.render(_this.glrenderer, target, _this._tmpTarget);

            // Stroke as normal
            meshContainer.remove(fillMesh);
            meshContainer.add(strokeMesh);

            _this.glrenderer.render(_this._tmpScene, camera, target);

            // Restore mesh container (adding back in the correct order)
            meshContainer.add(fillMesh);
            meshContainer.add(strokeMesh);

            _this._tmpScene.remove(meshContainer);
          }
        }
      });

      flushNormalMeshes();
      flushTransparentMeshes();
    } }, { key: "getCameraEyeVector", value: function getCameraEyeVector()

    {
      if (!this.eyeVector) {
        this.eyeVector = _Utils_CameraUtils__WEBPACK_IMPORTED_MODULE_9__["default"].getCameraEyeVector(this.markupsCamera);
      }

      return this.eyeVector.clone();
    } }, { key: "getCameraRightVector", value: function getCameraRightVector()

    {
      if (!this.rightVector) {
        this.rightVector = _Utils_CameraUtils__WEBPACK_IMPORTED_MODULE_9__["default"].getCameraRightVector(this.markupsCamera);
      }

      return this.rightVector.clone();
    } }, { key: "getCameraUpVector", value: function getCameraUpVector()

    {
      if (!this.upVector) {
        this.upVector = _Utils_CameraUtils__WEBPACK_IMPORTED_MODULE_9__["default"].getCameraUpVector(this.markupsCamera);
      }

      return this.upVector.clone();
    } }, { key: "getCameraRotation", value: function getCameraRotation()

    {
      return _Utils_CameraUtils__WEBPACK_IMPORTED_MODULE_9__["default"].getCameraRotation(this.markupsCamera);
    } }, { key: "worldToClient", value: function worldToClient(

    point) {var camera = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.markupsCamera;
      var containerBounds = this.viewer.navigation.getScreenViewport();
      var p = point.clone().project(camera);

      return new THREE.Vector3((p.x + 1) / 2 * containerBounds.width, (-p.y + 1) / 2 * containerBounds.height, 0);
    } }, { key: "clientToWorld", value: function clientToWorld(

    point) {var camera = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.markupsCamera;
      var containerBounds = this.viewer.navigation.getScreenViewport();
      var p = new THREE.Vector3();

      p.x = point.x / containerBounds.width * 2 - 1;
      p.y = -(point.y / containerBounds.height * 2 - 1);

      var result = p.unproject(camera);
      result.z = 0;
      return result;
    } }, { key: "sizeFromWorldToClient", value: function sizeFromWorldToClient(

    size) {
      var a = this.worldToClient(new THREE.Vector3());
      var b = this.worldToClient(new THREE.Vector3(size, 0, 0));

      return a.distanceTo(b);
    } }, { key: "sizeFromClientToWorld", value: function sizeFromClientToWorld(

    size) {
      var a = this.clientToWorld(new THREE.Vector3());
      var b = this.clientToWorld(new THREE.Vector3(size, 0, 0));

      return a.distanceTo(b);
    } }, { key: "multiplyByNormaStrokeWidth", value: function multiplyByNormaStrokeWidth(

    size) {
      return this.normaStrokeWidth * size;
    } }, { key: "documentCameraToMarkupsCamera", value: function documentCameraToMarkupsCamera(

    point) {
      if (!this.is3d) {
        point.z = 0;
        return point; // in 2D, both cameras are the same.
      }

      var p = this.worldToClient(point, this.documentCamera);
      return this.clientToWorld(p);
    } }, { key: "_fromMMtoWorldUnits", value: function _fromMMtoWorldUnits(

    value) {
      if (this.is3d) {
        return 1;
      }

      var model = this.viewer.model;

      // Prefer page units (model might be in meters while the page units are in inches or mm). If not available take model units
      // If that is also not available (i.e. raster image) use a default of mm for a 1 to 1 conversion
      var units = model.getMetadata('page_dimensions', 'page_units', null) || model.getMetadata('page_dimensions', 'model_units', 'mm');

      var worldUnits = Autodesk.Viewing.Private.convertUnits('mm', units, 1, value);

      if (model.isLeaflet()) {
        var bounds = this.viewer.impl.getFitBounds(true);
        var worldWidth = bounds.size().x;
        var pageWidth = model.getMetadata('page_dimensions', 'page_width');
        worldUnits *= worldWidth / pageWidth;
      }

      return worldUnits;
    } }, { key: "_calcNormaSize", value: function _calcNormaSize(

    defaultValue, maxSizePercentange) {
      var norma = this.mmToWorldUnitFactor * defaultValue;

      var bounds = this.viewer.impl.getFitBounds(true);
      var worldWidth = bounds.size().x;
      var worldHeight = bounds.size().y;

      var diagonal = Math.sqrt(worldWidth * worldWidth + worldHeight * worldHeight);
      norma = Math.min(norma, diagonal * maxSizePercentange);

      return norma;
    } }, { key: "setMMtoUnitConversion", value: function setMMtoUnitConversion()

    {
      this.mmToWorldUnitFactor = this._fromMMtoWorldUnits(1);
    } }, { key: "setNormaStrokeWidth", value: function setNormaStrokeWidth()

    {
      if (this.is3d) {
        this.normaStrokeWidth = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["NORMA_3D"];
      } else {
        this.normaStrokeWidth = this._calcNormaSize(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_STROKE_IN_MM"], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MAX_NORMA_PERCENTAGE"]);
      }
    } }, { key: "setNormaTextSize", value: function setNormaTextSize()

    {
      if (this.is3d) {
        this.normaTextSize = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["NORMA_TEXT_3D"];
      } else {
        this.normaTextSize = this._calcNormaSize(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_FONT_SIZE_IN_MM"], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MAX_NORMA_TEXT_PERCENTAGE"]);
      }
    } }, { key: "getNormaStrokeWidth", value: function getNormaStrokeWidth()

    {
      return this.normaStrokeWidth;
    }

    // We defined the baseline font size in px, and what it's value should be in mm, so that we can perform this
    // conversion, and have a consistent experience among documents with different scales
  }, { key: "getFontToWorldScale", value: function getFontToWorldScale() {
      return this.normaTextSize / _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_FONT_SIZE_IN_PIXELS"];
    } }, { key: "addToScene", value: function addToScene(

    markup) {
      var hasCreationDate = function hasCreationDate(m) {return m.layer && m.layer.layerData && m.layer.layerData.metadata && m.layer.layerData.metadata.created_at;};

      var comparer = function comparer(a, b) {
        if (!hasCreationDate(a)) return 1; // It's a markup we just added by pushing to the array and should be left untouched at the end 

        var dateA = Date.parse(a.layer.layerData.metadata.created_at); // The array element
        var dateB = Date.parse(b.layer.layerData.metadata.created_at); // The element being inserted

        // First priority - oldest first
        if (dateA > dateB) return 1;
        if (dateA < dateB) return -1;

        // Second priority - id
        if (a.id > b.id) return 1;
        if (a.id < b.id) return -1;

        return 0;
      };

      if (hasCreationDate(markup)) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_8__["insertInSortedArray"])(markup, this.markups, comparer);
      } else {// Newly created markups don't have a layer yet
        this.markups.push(markup);
      }
    } }, { key: "removeFromScene", value: function removeFromScene(

    markup) {
      _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_7__["default"].remove(this.markups, function (m) {return m === markup;});
    } }, { key: "invalidate", value: function invalidate()

    {
      this.markupsExtension.viewer.impl.invalidate(false, false, true);
    } }, { key: "updateRaycaster", value: function updateRaycaster(

    mouse) {
      var containerBounds = this.viewer.navigation.getScreenViewport();
      var x = mouse.x / containerBounds.width * 2 - 1;
      var y = -(mouse.y / containerBounds.height) * 2 + 1;

      this.raycaster.ray.origin.set(x, y, (this.markupsCamera.near + this.markupsCamera.far) / (this.markupsCamera.near - this.markupsCamera.far)).unproject(this.markupsCamera);
      this.raycaster.ray.direction.set(0, 0, -1);
    } }, { key: "destroy", value: function destroy()

    {
      this.removeEventListeners();

      if (this.frameRenderer) {
        this.frameRenderer.destroy();
        this.frameRenderer = null;
      }

      if (this.linksRenderer) {
        this.linksRenderer.destroy();
        this.linksRenderer = null;
      }

      if (this.textRenderer) {
        this.textRenderer.destroy();
        this.textRenderer = null;
      }

      if (this.materialManager) {
        this.materialManager.destroy();
        this.materialManager = null;
      }

      if (this.geometryManager) {
        this.geometryManager.destroy();
        this.geometryManager = null;
      }

      this.disposeTmpTarget();

      this.invalidate();

      this.markupsExtension = null;
      this.viewer = null;
    } }]);return MarkupsRenderer;}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsSceneState.js":
/*!****************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsSceneState.js ***!
  \****************************************************/
/*! exports provided: generateSceneMetadata, getViewportData, restoreMarkupViewState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateSceneMetadata", function() { return generateSceneMetadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getViewportData", function() { return getViewportData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "restoreMarkupViewState", function() { return restoreMarkupViewState; });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}var applyOffsetToCamera = function applyOffsetToCamera(viewport, offset) {
  if (!viewport || !offset) {
    return;
  }

  if ('eye' in viewport) {
    viewport.eye[0] = (Number(viewport.eye[0]) + offset.x).toString();
    viewport.eye[1] = (Number(viewport.eye[1]) + offset.y).toString();
    viewport.eye[2] = (Number(viewport.eye[2]) + offset.z).toString();
  }

  if ('target' in viewport) {
    viewport.target[0] = (Number(viewport.target[0]) + offset.x).toString();
    viewport.target[1] = (Number(viewport.target[1]) + offset.y).toString();
    viewport.target[2] = (Number(viewport.target[2]) + offset.z).toString();
  }

  if ('pivotPoint' in viewport) {
    viewport.pivotPoint[0] = (Number(viewport.pivotPoint[0]) + offset.x).toString();
    viewport.pivotPoint[1] = (Number(viewport.pivotPoint[1]) + offset.y).toString();
    viewport.pivotPoint[2] = (Number(viewport.pivotPoint[2]) + offset.z).toString();
  }
};

var generateSceneMetadata = function generateSceneMetadata(viewerState, globalOffset, options) {
  var state = JSON.parse(JSON.stringify(viewerState));

  if (globalOffset) {
    applyOffsetToCamera(state.viewport, globalOffset);
  }

  state.sheetGUID = options.sheetGUID;
  state.sheetName = options.sheetName;
  return state;
};

var getViewportData = function getViewportData(viewer, layerData) {var
  model = viewer.model;
  var globalOffset = model ? model.getData().globalOffset : null;

  var metadata = layerData.metadata.markup_metadata;

  if (globalOffset) {
    var clonedMarkupData = JSON.parse(JSON.stringify(metadata));var

    viewport = clonedMarkupData.viewport;

    var invGlobalOffset = { x: -globalOffset.x, y: -globalOffset.y, z: -globalOffset.z };
    applyOffsetToCamera(viewport, invGlobalOffset);

    return clonedMarkupData;
  }

  return metadata;
};

var restoreMarkupViewState = /*#__PURE__*/function () {var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(viewer, layerData, immediate) {var cb,amendedData,doTransition,_args2 = arguments;return regeneratorRuntime.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:cb = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : function () {};if (
            layerData) {_context2.next = 4;break;}
            cb(false);return _context2.abrupt("return");case 4:



            amendedData = getViewportData(viewer, layerData);

            viewer.restoreState(amendedData, null, immediate);

            doTransition = /*#__PURE__*/function () {var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {var camera;return regeneratorRuntime.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:if (
                        immediate) {_context.next = 3;break;}_context.next = 3;return (
                          Autodesk.Viewing.EventUtils.waitUntilTransitionEnded(viewer));case 3:


                        // Fix ALEX-6333
                        // RestoreState will async to update camera's all data. Here force update camera before load markup.
                        camera = viewer.navigation.getCamera();
                        viewer.navigation.updateCamera();
                        camera.updateMatrixWorld();
                        camera.matrixWorldInverse.getInverse(camera.matrixWorld);
                        viewer.impl.sceneUpdated(true);

                        cb(true);case 9:case "end":return _context.stop();}}}, _callee);}));return function doTransition() {return _ref2.apply(this, arguments);};}();


            doTransition();_context2.next = 10;return (

              Autodesk.Viewing.EventUtils.waitUntilGeometryLoaded(viewer));case 10:
            viewer.impl.sceneUpdated(true);case 11:case "end":return _context2.stop();}}}, _callee2);}));return function restoreMarkupViewState(_x, _x2, _x3) {return _ref.apply(this, arguments);};}();

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsSerializer.js":
/*!****************************************************!*\
  !*** ./extensions/BimMarkups/MarkupsSerializer.js ***!
  \****************************************************/
/*! exports provided: leafletWorldToMarkups, generateSVGData, generateJsonData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "leafletWorldToMarkups", function() { return leafletWorldToMarkups; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateSVGData", function() { return generateSVGData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateJsonData", function() { return generateJsonData; });
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsSceneState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsSceneState */ "./extensions/BimMarkups/MarkupsSceneState.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}




var removeUnnecessaryProperties = function removeUnnecessaryProperties(state, isGroup) {
  delete state.scale;
  delete state.translation;

  if (isGroup) {
    delete state.style;
    delete state.position;
    delete state.size;
    delete state.rotation;
  }
};

var leafletWorldToMarkups = function leafletWorldToMarkups(point, viewer) {
  var loadOptions;
  var bounds;

  if (viewer.model.isPdf(true)) {
    Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(viewer, point);
    loadOptions = Autodesk.Viewing.PDFUtils.getLeafletLoadOptions(viewer);
    bounds = Autodesk.Viewing.PDFUtils.getLeafletBoundingBox(viewer);
  } else {
    var modelData = viewer.model.getData();
    loadOptions = modelData.loadOptions.loadOptions;
    bounds = modelData.bbox;
  }var _loadOptions =

  loadOptions,texWidth = _loadOptions.texWidth,texHeight = _loadOptions.texHeight;

  var worldPos = point;
  var worldTopLeft = new THREE.Vector3(bounds.min.x, bounds.max.y, 0);

  worldPos.sub(worldTopLeft);
  point.x = worldPos.x * texWidth / bounds.size().x;
  point.y = worldPos.y * texHeight / bounds.size().y;

  return point;
};

var leafletSizeFromWorldToMarkups = function leafletSizeFromWorldToMarkups(size, viewer) {
  var a = leafletWorldToMarkups(new THREE.Vector3(), viewer);
  var b = leafletWorldToMarkups(new THREE.Vector3(size, 0, 0), viewer);

  return a.distanceTo(b);
};

var convertAnchorsToMarkupSpecificNodeNames = function convertAnchorsToMarkupSpecificNodeNames(state) {
  var anchors = {};

  switch (state.type) {
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_RECTANGLE"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_CLOUD"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_CIRCLE"]:
      break;
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_ARROW"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_LINE"]:
      anchors.tail = state.anchors[0];
      anchors.head = state.anchors[1];
      break;
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_DIMENSION"]:
      anchors.firstAnchor = state.anchors[0];
      anchors.secondAnchor = state.anchors[1];
      break;
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_HIGHLIGHT"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_FREEHAND"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_POLYCLOUD"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_POLYLINE"]:
      anchors.locations = state.anchors;
      break;
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_ARROW_CALLOUT"]:
      //TODO
      break;
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_TEXT"]:
    case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_CALLOUT"]:
      //TODO
      break;}


  state.anchors = anchors;
};

var createSvgElement = function createSvgElement(type, _document) {
  return _document.createElementNS('http://www.w3.org/2000/svg', type);
};

var addSvgMetadata = function addSvgMetadata(svg, metadata, _document) {
  var metadataNode = _document.createElementNS('http://www.w3.org/2000/svg', 'metadata');
  var dataVersionNode = _document.createElement('markup_document');

  metadataNode.appendChild(dataVersionNode);

  // NOTE: We could iterate over the properties, but we don't because these are the only ones supported
  dataVersionNode.setAttribute('data-model-version', metadata['data-model-version']); // Version. For example: "1"

  svg.insertBefore(metadataNode, svg.firstChild);
  return metadataNode;
};

var createMarkupPathSvg = function createMarkupPathSvg(closed, _document) {
  var svg = createSvgElement('g', _document);
  svg.setAttribute('cursor', 'inherit');
  svg.setAttribute('pointer-events', 'none');

  var path = createSvgElement('path', _document);
  path.setAttribute('id', 'markup');

  if (closed) {
    path.setAttribute('d', 'M 0 0 z');
  } else {
    path.setAttribute('d', 'M 0 0');
  }

  svg.appendChild(path);

  return svg;
};

var addMarkupMetadata = function addMarkupMetadata(shape, metadata, _document) {
  var metadataNode = _document.createElementNS('http://www.w3.org/2000/svg', 'metadata');
  var dataVersionNode = _document.createElement('markup_element');

  metadataNode.appendChild(dataVersionNode);

  Object.keys(metadata).forEach(function (key) {
    dataVersionNode.setAttribute(key, metadata[key]);
  });

  shape.insertBefore(metadataNode, shape.firstChild);
  return metadataNode;
};

var svgNodeToString = function svgNodeToString(domNode) {
  var result = '';
  try {
    var xmlSerializer = new XMLSerializer();
    result = xmlSerializer.serializeToString(domNode);
  } catch (err) {
    console.error('svgNodeToString failed to generate string representation of domNode.');
  }

  return result;
};

var flattenObject = function flattenObject(obj) {
  var flattenObj = {};

  Object.keys(obj).forEach(function (key) {
    if (_typeof(obj[key]) === 'object' && !Array.isArray(obj[key])) {
      Object.keys(obj[key]).forEach(function (k) {
        flattenObj[k] = obj[key][k];
      });
    } else {
      flattenObj[key] = obj[key];
    }
  });

  return flattenObj;
};

var convertCoordinatesToStrings = function convertCoordinatesToStrings(state) {
  Object.keys(state).forEach(function (key) {
    if (Array.isArray(state[key])) {
      var arr = state[key];
      var coordinates = [];

      arr.forEach(function (item) {
        coordinates.push(item.x);
        coordinates.push(item.y);
      });

      state[key] = coordinates.join(' ');
    } else if (_typeof(state[key]) === 'object') {
      var obj = state[key];
      var _coordinates = [];

      _coordinates.push(obj.x);
      _coordinates.push(obj.y);

      state[key] = _coordinates.join(' ');
    }
  });
};

var generateSVGData = function generateSVGData(layer, viewer, renderer) {
  var _document = viewer.getDocument();
  var svg = createSvgElement('svg', _document);
  addSvgMetadata(svg, { 'data-model-version': '5' }, _document);

  var markups = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["getObjectAsList"])(layer.markups);

  var viewerStateBackup = !viewer.impl.is2d ? viewer.getState() : null;

  var isLeaflet = viewer.model.isLeaflet();
  var isPdf = viewer.model.isPdf(true);

  markups.forEach(function (markup) {
    var state = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(markup.getState());

    if (!viewer.impl.is2d) {
      Object(_MarkupsSceneState__WEBPACK_IMPORTED_MODULE_2__["restoreMarkupViewState"])(viewer, layer.layerData, true);
    }

    state.anchors.forEach(function (anchor) {
      markup.applyScaleAndTranslation(anchor);
      if (isLeaflet || isPdf)
      anchor.copy(leafletWorldToMarkups(anchor, viewer));
    });

    // Store size and position, then reverse translate the anchors
    if (markup.type !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_ARROW"] &&
    markup.type !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_DIMENSION"] &&
    !markup.isGroupMarkup()) {
      var boundingBox;

      if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_CALLOUT"]) {
        // To conform with old style
        state.isFrameUsed = state.isFrameUsed ? 1 : 0;
        // Store size without frame size
        boundingBox = markup.getWorldBoundingBoxTextOnly();
      } else {
        boundingBox = markup.getWorldBoundingBox();
      }

      var size = boundingBox.size();

      var center = boundingBox.center();

      if (isLeaflet || isPdf) {
        center.copy(leafletWorldToMarkups(center, viewer));
        size.x = leafletSizeFromWorldToMarkups(size.x, viewer);
        size.y = leafletSizeFromWorldToMarkups(size.y, viewer);
      }

      state.size = "".concat(size.x, " ").concat(size.y);
      state.position = "".concat(center.x, " ").concat(center.y);

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["applyTranslation"])(state.anchors, center.clone().negate());
    }

    if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_DIMENSION"]) {
      if (isLeaflet || isPdf) {
        state.translation.copy(leafletWorldToMarkups(state.translation, viewer).sub(leafletWorldToMarkups(new THREE.Vector3(), viewer)));
      }
      state.offset = "".concat(state.translation.x, " ").concat(state.translation.y, " ").concat(state.translation.z);
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FONT_SIZE] *= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DIMENSION_FONT_SIZE_FACTOR"];
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].THICKNESS] *= _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DIMENSION_THICKNESS_FACTOR"];
    }

    if (isLeaflet || isPdf) {
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].THICKNESS] = leafletSizeFromWorldToMarkups(state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].THICKNESS], viewer);
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FONT_SIZE] = leafletSizeFromWorldToMarkups(state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FONT_SIZE], viewer);
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FONT_SIZE] *= renderer.getFontToWorldScale();
    }

    state.type = markup.type;

    // Support legacy markup extension - BLMV-3054.
    // Also support export of cloud callout without fill - BLMV-3523.
    if (state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FILL_COLOR] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["COLORS"].NO_COLOR || markup.options.fillNotAllowed) {
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FILL_OPACITY] = 0;
      state.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["STYLE_PROPERTIES"].FILL_COLOR] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["COLORS"].NO_COLOR;
    }

    removeUnnecessaryProperties(state, markup.isGroupMarkup());

    convertAnchorsToMarkupSpecificNodeNames(state);

    var flatState = flattenObject(state);

    convertCoordinatesToStrings(flatState);

    var layerSVG = createMarkupPathSvg(flatState.closed, _document);
    addMarkupMetadata(layerSVG, flatState, _document);
    svg.appendChild(layerSVG);
  });

  if (viewerStateBackup) {
    viewer.restoreState(viewerStateBackup, null, true);
  }

  var output = svgNodeToString(svg);

  return output;
};

// Not in use for now.
var generateJsonData = function generateJsonData(layer) {
  var data = [];
  var markups = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_1__["getObjectAsList"])(layer.markups);

  markups.forEach(function (markup) {
    var state = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(markup.getState());

    removeUnnecessaryProperties(state, markup.isGroupMarkup());

    data.push({
      type: markup.type,
      state: state,
      dataModelVersion: 6 });

  });

  return JSON.stringify(data);
};

/***/ }),

/***/ "./extensions/BimMarkups/MarkupsTool.js":
/*!**********************************************!*\
  !*** ./extensions/BimMarkups/MarkupsTool.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsTool; });
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _EditHandlers_RectSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EditHandlers/RectSelector */ "./extensions/BimMarkups/EditHandlers/RectSelector.js");
/* harmony import */ var _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarkupTypes/MarkupsTypesDictionary */ "./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}




var av = Autodesk.Viewing;var

MarkupsTool = /*#__PURE__*/function () {
  function MarkupsTool(markupsExtension) {_classCallCheck(this, MarkupsTool);
    this.markupsExtension = markupsExtension;
    this.setGlobalManager(markupsExtension.globalManager);
    this.viewer = markupsExtension.viewer;

    this.names = ['markups'];

    this.isActive = false;

    this.onCameraChangedBinded = this.onCameraChanged.bind(this);
    this.onEditStartBinded = this.onEditStart.bind(this);
    this.onEditEndBinded = this.onEditEnd.bind(this);
    this.onDrawEndBinded = this.onDrawEnd.bind(this);
    this.onCreationTypeChangedBinded = this.onCreationTypeChanged.bind(this);
    this.onSelectionChangedBinded = this.onSelectionChanged.bind(this);

    this.rectSelector = new _EditHandlers_RectSelector__WEBPACK_IMPORTED_MODULE_2__["default"](this.markupsExtension);

    this.lastDrawEndTime = -Infinity;
  }_createClass(MarkupsTool, [{ key: "getNames", value: function getNames()

    {
      return this.names;
    } }, { key: "getName", value: function getName()

    {
      return this.names[0];
    } }, { key: "getPriority", value: function getPriority()

    {
      return this.markupsExtension.markupsManager.isMarkupSessionOpen() ? 200 : 60;
    } }, { key: "updateToolPriority", value: function updateToolPriority()

    {
      this.markupsExtension.viewer.toolController.rearrangeByPriorities();
    } }, { key: "intersectHandler", value: function intersectHandler(

    markups, handlerName) {
      if (this.lastMousePos) {
        for (var i = markups.length - 1; i >= 0; i--) {
          var markup = markups[i];

          if (markup.isCompleted()) {
            var handler = markup[handlerName];

            if (handler) {
              var mousePos = this.lastMousePos.clone();
              var intersected = handler.intersect(mousePos);

              if (intersected || handler.isDragging()) {
                return handler.getCursor();
              }
            }
          }
        }
      }

      return null;
    } }, { key: "getCursor", value: function getCursor()

    {
      var duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);
      var selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups();
      var activeLayer = this.markupsExtension.markupsManager.getActiveLayer();
      var hasSelection = this.hasSelection();

      var cursor = null;

      if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
        var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();
        var editableLinks = activeLayer.getAllLinks();

        cursor = duringCreationMarkup && duringCreationMarkup.creationHandler.getCursor(); // Get cursor of during creation markups.

        cursor = cursor || this.intersectHandler(editableLinks, 'anchorHandler');

        cursor = cursor || this.intersectHandler(inEditMarkups, 'anchorHandler');
        cursor = cursor || this.intersectHandler(inEditMarkups, 'scaleHandler');
        cursor = cursor || this.intersectHandler(inEditMarkups, 'rotationHandler');
        cursor = cursor || this.intersectHandler(inEditMarkups, 'translationHandler');
        cursor = cursor || this.intersectHandler(inEditMarkups, 'dimensionEditHandler');
      }

      cursor = cursor || this.intersectHandler(selectableMarkups, 'selectionHandler');

      if (!this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
        var visibleLinks = this.markupsExtension.markupsManager.getVisibleLinks();
        cursor = cursor || this.intersectHandler(visibleLinks, 'selectionHandler');
      }

      var creationType = this.markupsExtension.markupsManager.getMarkupCreationType();

      if (!cursor && creationType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["RECT_SELECTOR"] && !this.isRectSelectorActive()) {
        cursor = 'auto';
      }

      cursor = cursor || creationType && (hasSelection && !this.isRectSelectorActive() ? 'auto' : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_CREATION_CURSORS"][creationType] || 'crosshair');

      return cursor;
    } }, { key: "register", value: function register()

    {
      this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(this.viewer, { markupMode: true });
      this.viewer.toolController.registerTool(this.snapper);
    } }, { key: "deregister", value: function deregister()

    {
      if (this.snapper) {
        this.viewer.toolController.deregisterTool(this.snapper);
        this.snapper = null;
      }
    } }, { key: "activate", value: function activate(

    name) {
      if (name === this.getName() && !this.isActive) {
        this.isActive = true;
        this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
        this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.onEditStartBinded);
        this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.onEditEndBinded);
        this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onDrawEndBinded);
        this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_CREATION_TYPE_CHANGED, this.onCreationTypeChangedBinded);
        this.addDocumentEventListener('selectionchange', this.onSelectionChangedBinded);
      }
    } }, { key: "deactivate", value: function deactivate(

    name) {
      if (name === this.getName() && this.isActive) {
        this.isActive = false;
        this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
        this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_EDIT_START, this.onEditStartBinded);
        this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_EDIT_END, this.onEditEndBinded);
        this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_DRAWING_END, this.onDrawEndBinded);
        this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_CREATION_TYPE_CHANGED, this.onCreationTypeChangedBinded);
        this.removeDocumentEventListener('selectionchange', this.onSelectionChangedBinded);
        this.onCreationTypeChanged();
      }
    } }, { key: "onSelectionChanged", value: function onSelectionChanged()

    {
      var markups = this.markupsExtension.markupsManager.getSelectedMarkups();
      markups.forEach(function (markup) {
        if (markup.isTextMarkup() && markup.isInEdit()) {
          markup.textInputHandler.updateCaretPosition();
        }
      });
    } }, { key: "eventToWorld", value: function eventToWorld(

    event) {
      var pointScreen = { x: event.canvasX, y: event.canvasY };
      var point = this.markupsExtension.renderer.clientToWorld(pointScreen);

      return point;
    } }, { key: "getSnappedPosition", value: function getSnappedPosition()

    {
      if (!this.lastSnapPoint) {
        if (!this.viewer.impl.is2d && !this.isSnappingAllowed()) {
          this.lastSnapPoint = this.lastMousePos;
        } else {
          var pointScreen = { x: this.originalEvent.canvasX, y: this.originalEvent.canvasY };
          this.snapper.onMouseMove(pointScreen);

          if (!this.viewer.model.isLeaflet()) {
            this.snapper.indicator.render();
          }

          if (this.snapper.isSnapped()) {
            var point = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);
            this.lastSnapPoint = this.markupsExtension.renderer.documentCameraToMarkupsCamera(point);
          } else {
            this.lastSnapPoint = this.lastMousePos;
          }
        }
      }

      return this.lastSnapPoint.clone();
    } }, { key: "applyHandler", value: function applyHandler(

    items, handlerName, eventName, button) {
      for (var i = items.length - 1; i >= 0; i--) {
        var item = items[i];

        if (item.isCompleted()) {
          var handler = item[handlerName];
          if (handler) {
            var consume = handler[eventName](this.lastMousePos, button);

            if (consume) {
              return true;
            }
          }
        }
      }

      return false;
    } }, { key: "isNavigationToolActive", value: function isNavigationToolActive()

    {
      return this.viewer.getActiveNavigationTool() !== this.getName();
    } }, { key: "isSnappingAllowed", value: function isSnappingAllowed()

    {
      var markupCreationType = this.markupsExtension.markupsManager.getMarkupCreationType();
      return markupCreationType && _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_3__["markupsTypesDictionary"][markupCreationType].withSnappingMarkup && (
      markupCreationType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MARKUP_TYPE_DIMENSION"] || !this.viewer.model.isLeaflet());
    }

    // Currently allow rect selecting only when session is open.
  }, { key: "isRectSelectorActive", value: function isRectSelectorActive() {
      return this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markupsExtension.markupsManager.getMarkupCreationType() === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["RECT_SELECTOR"];
    } }, { key: "hasSelection", value: function hasSelection()

    {
      var isSessionOpen = this.markupsExtension.markupsManager.isMarkupSessionOpen();

      return this.markupsExtension.markupsManager.getSelectedMarkups().length > 0 ||
      !isSessionOpen && (
      this.markupsExtension.markupsManager.getSelectedLayers().length > 0 ||
      this.markupsExtension.markupsManager.getSelectedLinks().length > 0);
    }

    /**
       * Input handling
       */ }, { key: "handleMouseEvent", value: function handleMouseEvent(
    event, button, eventName, clickStart) {
      if (!this.markupsExtension.isToolEnabled()) {
        return false;
      }

      this.lastMousePos = this.eventToWorld(event);
      this.originalEvent = event;

      this.markupsExtension.renderer.updateRaycaster({ x: event.canvasX, y: event.canvasY });

      var markupCreationType = this.markupsExtension.markupsManager.getMarkupCreationType();
      var isSessionOpen = this.markupsExtension.markupsManager.isMarkupSessionOpen();

      var consumeEvent;
      var markup;

      if (!this.markupInEdit) {
        if (!markupCreationType ||
        !_MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_3__["markupsTypesDictionary"][markupCreationType].useTimerBeforeSelection ||
        _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_3__["markupsTypesDictionary"][markupCreationType].useTimerBeforeSelection && performance.now() - this.lastDrawEndTime > _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["TIMEOUT_TO_SELECT_AFTER_DRAWEND"]) {
          // Select & hover markups.
          var selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(function (m) {return !m.isSelected();});
          consumeEvent = consumeEvent || this.applyHandler(selectableMarkups, 'selectionHandler', eventName, button);
        }
      }

      var activeLayer = this.markupsExtension.markupsManager.getActiveLayer();

      // Continue creating existing markup.
      if (markupCreationType) {
        markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);

        if (markup) {
          if (!markup.isCompleted()) {
            if (consumeEvent) {
              // If another markup has been selected, cancel creation.
              markup.creationHandler.creationCancel();
            } else {
              var mousePos = markup.creationHandler.getSnappedPosition();

              // mousemove event shouldn't be triggered in creation handlers, unless the mouse moved the minimum threshold.
              if (eventName === 'handleMouseMove' && !(this.mouseMoved || markup.creationHandler.creationStarted)) {
                // Necessary in order to prevent unwanted navigation during creation.
                consumeEvent = true;
              } else {
                consumeEvent = markup.creationHandler[eventName](mousePos, button);
              }
            }
          }
        }
      }

      // Edit existing markups & link icons, using handlers.
      if (isSessionOpen) {
        // Links
        var editableLinks = activeLayer.getAllLinks();
        consumeEvent = consumeEvent || this.applyHandler(editableLinks, 'anchorHandler', eventName, button);

        // Markups
        var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();

        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'scaleHandler', eventName, button);
        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'anchorHandler', eventName, button);
        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'rotationHandler', eventName, button);
        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'translationHandler', eventName, button);
        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'dimensionEditHandler', eventName, button);
        consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'textInputHandler', eventName, button);
      }

      // For Dimension markup only, the snapper indicator should be visible even before the creation has started.
      if (!consumeEvent && eventName === 'handleMouseMove' && this.isSnappingAllowed()) {
        this.getSnappedPosition();
      }

      // Selection rect. Currently allow rect selecting only when session is open.
      if (this.isRectSelectorActive()) {
        consumeEvent = consumeEvent || this.rectSelector[eventName](this.lastMousePos);
      }

      // Link icon click & hover.
      if (!isSessionOpen) {
        var visibleLinks = this.markupsExtension.markupsManager.getVisibleLinks();
        consumeEvent = consumeEvent || this.applyHandler(visibleLinks, 'selectionHandler', eventName, button);
      }

      // Click outside to deselect.
      if (!consumeEvent && (eventName === 'handleButtonUp' || eventName === 'handleButtonDown' && markupCreationType && _MarkupTypes_MarkupsTypesDictionary__WEBPACK_IMPORTED_MODULE_3__["markupsTypesDictionary"][markupCreationType].singleClickMarkup)) {
        if (this.hasSelection() && !this.shiftDown && !this.mouseMoved && !this.isRectSelectorActive()) {
          this.markupsExtension.markupsManager.deselectAllMarkups();
          this.markupsExtension.markupsManager.deselectAllLinks();

          if (!isSessionOpen) {
            this.markupsExtension.markupsManager.deselectAllLayers(null);
          }

          consumeEvent = true;
        }
      }

      // Create new markup.
      if (!consumeEvent && clickStart && markupCreationType && !this.isNavigationToolActive()) {
        markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(true);

        if (markup) {
          var _mousePos = markup.creationHandler.getSnappedPosition();
          consumeEvent = markup.creationHandler[eventName](_mousePos, button);

          if (!consumeEvent) {
            markup.creationHandler.creationCancel();
          }
        }
      }

      this.lastSnapPoint = null;

      return consumeEvent;
    } }, { key: "handleButtonDown", value: function handleButtonDown(

    event, button) {
      this.dragging = true;
      this.buttonDownPos = new THREE.Vector2(event.canvasX, event.canvasY, 0);
      this.mouseMoved = false;
      this.buttonDownConsumed = false;
      this.selectedOnDown = false;

      this.panning = !Autodesk.Viewing.isMobileDevice() && (this.isRightClick(event) || this.isMiddleClick(event));

      if (this.panning) {
        return false;
      }

      this.markupsExtension.markupsManager.dispatchEvent({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].BUTTON_DOWN });

      this.buttonDownConsumed = this.handleMouseEvent(event, button, 'handleButtonDown', true);

      var selectedMarkups = this.markupsExtension.markupsManager.getSelectedMarkups();

      this.selectedOnDown = selectedMarkups.length > 0;

      return this.buttonDownConsumed;
    } }, { key: "handleButtonUp", value: function handleButtonUp(

    event, button) {
      this.dragging = false;
      this.buttonDownPos = null;
      this.buttonUpConsumed = false;
      this.buttonUpCalled = true;

      if (this.panning || this.mouseMoved && !this.buttonDownConsumed) {
        this.panning = false;
        this.mouseMoved = false;
        return false;
      }

      var consumed = this.handleMouseEvent(event, button, 'handleButtonUp', false);


      var selectedMarkups = this.markupsExtension.markupsManager.getSelectedMarkups();

      // In case there is a selected markup, single click should only deselect it, and not start creating a new markup.
      if (!this.mouseMoved && this.selectedOnDown && !selectedMarkups[0]) {
        var markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);
        if (markup) {
          markup.creationHandler.creationCancel();
        }
        this.markupsExtension.markupsManager.deselectAllMarkups();
      }

      this.buttonUpConsumed = consumed;
      var wasMouseMoved = this.mouseMoved;
      this.mouseMoved = false;

      return consumed && wasMouseMoved || this.isRectSelectorActive();
    } }, { key: "handleDoubleClick", value: function handleDoubleClick(

    event, button) {
      var consumed = this.handleMouseEvent(event, button, 'handleDoubleClick', false);
      var creationToolSelected = this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markupsExtension.markupsManager.getMarkupCreationType();
      return consumed || creationToolSelected;
    } }, { key: "handleMouseMove", value: function handleMouseMove(

    event) {
      if (this.panning) {
        return false;
      }

      if (this.buttonDownPos && !this.mouseMoved) {
        this.mouseMoved = new THREE.Vector2(event.canvasX, event.canvasY, 0).distanceTo(this.buttonDownPos) > _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MIN_CHANGE_DISTANCE"];
      }

      this.markupsExtension.markupsManager.unhoverAllLayers();
      this.markupsExtension.markupsManager.unhoverAllMarkups();

      var consumed = this.handleMouseEvent(event, null, 'handleMouseMove', false);

      return this.dragging && consumed;
    } }, { key: "handleKeyDown", value: function handleKeyDown(

    event, keyCode) {var _this = this;
      var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();

      var consumeEvent = false;

      var duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);

      if (duringCreationMarkup) {
        consumeEvent = duringCreationMarkup.creationHandler.handleKeyDown(event, keyCode);
      } else {
        this.markupsExtension.markupsManager.openActionGroup();
        var consumed;

        for (var i = inEditMarkups.length - 1; i >= 0; i--) {
          var markup = inEditMarkups[i];

          if (markup) {
            if (markup.isCompleted()) {
              consumed = markup.anchorHandler && markup.anchorHandler.handleKeyDown(event, keyCode);

              if (!consumed) {
                consumed = markup.textInputHandler && markup.textInputHandler.handleKeyDown(event, keyCode);
              }

              if (!consumed) {
                consumed = markup.scaleHandler && markup.scaleHandler.handleKeyDown(event, keyCode);
              }

              if (!consumed) {
                consumed = markup.rotationHandler && markup.rotationHandler.handleKeyDown(event, keyCode);
              }

              if (!consumed) {
                consumed = markup.translationHandler && markup.translationHandler.handleKeyDown(event, keyCode);
              }

              if (!consumed) {
                consumed = markup.dimensionEditHandler && markup.dimensionEditHandler.handleKeyDown(event, keyCode);
              }

              if (!consumed) {
                consumed = markup.selectionHandler && markup.selectionHandler.handleKeyDown(event, keyCode);
              }
            }
          }

          consumeEvent = consumeEvent || consumed;
        }

        this.markupsExtension.markupsManager.closeActionGroup();
      }

      var links = this.markupsExtension.markupsManager.getVisibleLinks();

      for (var _i = links.length - 1; _i >= 0; _i--) {
        var link = links[_i];

        consumeEvent = consumeEvent || link.anchorHandler && link.anchorHandler.handleKeyDown(event, keyCode);
        consumeEvent = consumeEvent || link.selectionHandler && link.selectionHandler.handleKeyDown(event, keyCode);
      }

      if (!consumeEvent) {
        switch (keyCode) {
          case Autodesk.Viewing.KeyCode.CONTROL:
            this.ctrlDown = true;
            break;
          case Autodesk.Viewing.KeyCode.SHIFT:
            this.shiftDown = true;
            consumeEvent = true;
            break;
          case Autodesk.Viewing.KeyCode.a:
            if (this.ctrlDown) {
              if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
                var layer = this.markupsExtension.markupsManager.getActiveLayer();
                layer.selectAllMarkups();
                consumeEvent = true;
              }
            }
            break;
          case Autodesk.Viewing.KeyCode.x:
            if (this.ctrlDown) {
              this.markupsExtension.cut();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.c:
            if (this.ctrlDown) {
              this.markupsExtension.copy();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.v:
            if (this.ctrlDown) {
              this.markupsExtension.paste();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.d: // Duplicate
            if (this.ctrlDown) {
              this.markupsExtension.copy();
              this.markupsExtension.paste();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.z:
            if (this.ctrlDown && !this.shiftDown) {
              this.markupsExtension.undo();
              consumeEvent = true;
            } else if (this.ctrlDown && this.shiftDown) {
              this.markupsExtension.redo();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.y:
            if (this.ctrlDown) {
              this.markupsExtension.redo();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.ESCAPE:
            if (this.markupsExtension.markupsManager.getSelectedMarkups().length > 0) {
              this.markupsExtension.markupsManager.deselectAllMarkups();
              consumeEvent = true;
            } else if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {
              var _layer = this.markupsExtension.markupsManager.getActiveLayer();

              if (_layer.isEmpty()) {
                this.markupsExtension.endMarkupSession(false);
              } else {
                this.markupsExtension.markupsManager.dispatchEvent({
                  type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DISCARD_PRESSED,
                  onConfirmCB: function onConfirmCB() {
                    _this.markupsExtension.endMarkupSession(false);
                  } });

              }
              consumeEvent = true;
            } else if (this.markupsExtension.markupsManager.getSelectedLayers().length > 0) {
              this.markupsExtension.markupsManager.deselectAllLayers();
              consumeEvent = true;
            }
            break;
          case Autodesk.Viewing.KeyCode.BACKSPACE:
          case Autodesk.Viewing.KeyCode.DELETE:
            this.markupsExtension.markupsManager.deleteInEditMarkups();
            break;
          default:
            break;}

      }

      return consumeEvent;
    } }, { key: "handleSingleClick", value: function handleSingleClick(

    event, button) {
      return this.buttonUpConsumed;
    } }, { key: "handleKeyUp", value: function handleKeyUp(

    event, keyCode) {
      var inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();
      var duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);

      if (duringCreationMarkup) {
        duringCreationMarkup.creationHandler.handleKeyUp(event, keyCode);
      } else {
        this.markupsExtension.markupsManager.openActionGroup();

        for (var i = inEditMarkups.length - 1; i >= 0; i--) {
          var consumed = void 0;
          var markup = inEditMarkups[i];

          if (markup) {
            if (markup.isCompleted()) {
              event.isDuringEdit = i < inEditMarkups.length - 1;
              consumed = markup.anchorHandler && markup.anchorHandler.handleKeyUp(event, keyCode);

              if (!consumed) {
                consumed = markup.translationHandler && markup.translationHandler.handleKeyUp(event, keyCode);
              }
            }
          }
        }

        this.markupsExtension.markupsManager.closeActionGroup();
      }

      switch (keyCode) {
        case Autodesk.Viewing.KeyCode.CONTROL:
          this.ctrlDown = false;
          break;
        case Autodesk.Viewing.KeyCode.SHIFT:
          this.shiftDown = false;
          break;
        default:
          break;}


      return false;
    } }, { key: "onCameraChanged", value: function onCameraChanged()

    {
      if (this.isSnappingAllowed() && !this.viewer.model.isLeaflet()) {
        this.snapper.indicator.render();
      }
    } }, { key: "onCreationTypeChanged", value: function onCreationTypeChanged()

    {
      this.snapper.indicator.clearOverlays();
    } }, { key: "onEditStart", value: function onEditStart()

    {
      this.markupInEdit = true;
      this.snapper.indicator.clearOverlays();
    } }, { key: "onEditEnd", value: function onEditEnd()

    {
      this.markupInEdit = false;
      this.snapper.indicator.clearOverlays();
    } }, { key: "onDrawEnd", value: function onDrawEnd()

    {
      this.lastDrawEndTime = performance.now();
    } }, { key: "isMiddleClick", value: function isMiddleClick(

    event) {
      return Autodesk.Viewing.Private.isMiddleClick(event);
    } }, { key: "isRightClick", value: function isRightClick(

    event) {
      return Autodesk.Viewing.Private.isRightClick(event, this.viewer.navigation);
    } }, { key: "handleBlur", value: function handleBlur()

    {
      this.ctrlDown = false;
      this.shiftDown = false;
    }

    // Mobile events
  }, { key: "handleSingleTap", value: function handleSingleTap(
    event) {
      var consumed = this.buttonUpConsumed;

      if (!this.buttonUpCalled) {
        this.handleButtonDown(event, 0);
        consumed = this.handleButtonUp(event, 0) || this.buttonUpConsumed;
      }

      // buttonUpCalled used to fix a bug where LMV sends sometimes both handleButtonUp and handleSingleTap on after the other.
      this.buttonUpCalled = false;

      return consumed;
    } }, { key: "handleDoubleTap", value: function handleDoubleTap(

    event) {
      return this.handleDoubleClick(event, 0);
    } }, { key: "isNavigationJustEnded", value: function isNavigationJustEnded()

    {
      return this.navigationEndTime && Date.now() - this.navigationEndTime < _MarkupsConstants__WEBPACK_IMPORTED_MODULE_1__["MOBILE_GESTURES_MIN_THRESHOLD_TIME"];
    } }, { key: "handleGesture", value: function handleGesture(

    event) {
      var consumed;

      switch (event.type) {
        case 'dragstart':
          if (this.isNavigationJustEnded()) {
            return false;
          }

          return this.handleButtonDown(event, 0);
        case 'dragmove':
          if (this.isNavigationJustEnded()) {
            return false;
          }
          return this.handleMouseMove(event);
        case 'dragend':
          if (this.isNavigationJustEnded()) {
            return false;
          }
          consumed = this.handleButtonUp(event, 0);
          this.buttonUpCalled = false;
          return consumed;
        case 'pinchend':
          this.navigationEndTime = Date.now();
          break;
        case 'panend':
          this.navigationEndTime = Date.now();
          break;

        default:
          break;}


      return false;
    } }]);return MarkupsTool;}();


av.GlobalManagerMixin.call(MarkupsTool.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/MarkupsGeometryManager.js":
/*!*************************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/MarkupsGeometryManager.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsGeometryManager; });
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MeshLine__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MeshLine */ "./extensions/BimMarkups/RendererHelpers/MeshLine.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _PenSmoothing__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PenSmoothing */ "./extensions/BimMarkups/RendererHelpers/PenSmoothing.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}




var

MarkupsGeometryManager = /*#__PURE__*/function () {
  function MarkupsGeometryManager(markupsExtension) {_classCallCheck(this, MarkupsGeometryManager);
    this.markupsExtension = markupsExtension;

    this.geoCache = {};
  }_createClass(MarkupsGeometryManager, [{ key: "getStrokeGeometry", value: function getStrokeGeometry(

    markup) {
      if (this._isCacheSupported(markup.type)) {
        return this._getCachedStrokeGeometry(markup.type);
      } else {
        if (MarkupsGeometryManager.areAllAnchorsEqual(markup.editState.anchors)) {
          return this._createPointGeometry(markup);
        }
        return this._createStrokeGeometry(markup);
      }
    } }, { key: "getFillGeometry", value: function getFillGeometry(

    markup) {
      switch (markup.type) {
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYCLOUD"]:
          var fill = { innerGeometry: this._getFillInnerGeometryFromAnchors(markup) };
          if (markup.meshLine.type !== _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]) {
            fill.arcGeometry = this._getFillCircleGeometry(markup.meshLine.radius);
            fill.fillGapGeometries = this._getFillingGapsGeometry(markup);
          }
          return fill;
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYLINE"]:
          return this._getFillInnerGeometryFromAnchors(markup);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]:
          return this._getFillCircleGeometry(0.5, 72);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"]:
          return this._getFillRectangleGeometry();
        default:
          return null;}

    } }, { key: "_getFillingGapsGeometry", value: function _getFillingGapsGeometry(

    markup) {
      var fillGapGeometries = [];
      for (var i = 0; i < markup.meshLine.intersectionObjects.length; i++) {var _markup$meshLine$inte =
        markup.meshLine.intersectionObjects[i],beginPoint = _markup$meshLine$inte.beginPoint,endPoint = _markup$meshLine$inte.endPoint,newCircle = _markup$meshLine$inte.newCircle,anchorPoint = _markup$meshLine$inte.anchorPoint,beginCircle = _markup$meshLine$inte.beginCircle,endCircle = _markup$meshLine$inte.endCircle;

        if (!beginPoint || !endPoint || !anchorPoint || !beginCircle || !endCircle || !newCircle) {
          return null;
        }

        var vertices = [];
        vertices.push(new THREE.Vector3(anchorPoint.x, anchorPoint.y, 0));
        vertices.push(new THREE.Vector3(beginCircle.x, beginCircle.y, 0));
        vertices.push(new THREE.Vector3(beginPoint.x, beginPoint.y, 0));
        vertices.push(new THREE.Vector3(newCircle.x, newCircle.y, 0));
        vertices.push(new THREE.Vector3(endPoint.x, endPoint.y, 0));
        vertices.push(new THREE.Vector3(endCircle.x, endCircle.y, 0));

        fillGapGeometries.push(new THREE.ShapeGeometry(new THREE.Shape(vertices)));
      }
      return fillGapGeometries;
    } }, { key: "_getFillCircleGeometry", value: function _getFillCircleGeometry(

    radius) {var segments = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 12;
      var hashName = 'circle-fill|r:' + radius + '|s:' + segments;
      if (!this.geoCache[hashName]) {
        this.geoCache[hashName] = new THREE.CircleGeometry(radius, segments);
      }
      return this.geoCache[hashName];
    } }, { key: "_getFillRectangleGeometry", value: function _getFillRectangleGeometry()

    {
      var hashName = 'rectangle-fill';
      if (!this.geoCache[hashName]) {
        this.geoCache[hashName] = new THREE.PlaneBufferGeometry(1, 1, 1, 1);
      }
      return this.geoCache[hashName];
    } }, { key: "_getFillInnerGeometryFromAnchors", value: function _getFillInnerGeometryFromAnchors(

    markup) {
      if (markup.meshLine.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]) {
        return this._getFillCircleGeometry(0.5, 10);
      }
      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(markup.getAnchors());
      this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);
      if (markup.meshLine.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]) {
        this._shiftAnchorsInsideBox(markup, anchors, markup.meshLine.radius);
      }
      return anchors.length > 2 ? new THREE.ShapeGeometry(new THREE.Shape(anchors)) : null;
    } }, { key: "_getCachedStrokeGeometry", value: function _getCachedStrokeGeometry(

    type) {
      var hashName = type;
      if (!this.geoCache[hashName]) {
        this.geoCache[hashName] = this._createCachedStrokeGeometry(type);
      }

      return this.geoCache[hashName];
    } }, { key: "_isCacheSupported", value: function _isCacheSupported(

    type) {
      var supportedTypes = [_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"], _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]];
      return supportedTypes.includes(type);
    } }, { key: "isCachedGeometry", value: function isCachedGeometry(

    meshLine) {
      for (var key in this.geoCache) {
        if (meshLine === this.geoCache[key]) {
          return true;
        }
      }

      return false;
    } }, { key: "_createCachedStrokeGeometry", value: function _createCachedStrokeGeometry(

    type) {
      switch (type) {
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"]:
          return this._createRectangleStrokeGeometry();
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]:
          return this._createCircleStrokeGeometry();
        default:
          return null;}

    } }, { key: "_createStrokeGeometry", value: function _createStrokeGeometry(

    markup) {
      switch (markup.type) {
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYCLOUD"]:
          var geo = this._createCloudGeometry(markup);
          if (!geo) {
            geo = this._getCachedStrokeGeometry(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"]);
          }
          return geo;
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYLINE"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_LINE"]:
          return this._createLineGeometry(markup, 179);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_FREEHAND"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_HIGHLIGHT"]:
          return this._createLineGeometry(markup, 120);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_ARROW"]:
          return this._createArrowGeometry(markup);
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_DIMENSION"]:
          return this._createDimensionGeometry(markup);
        default:
          return null;}

    } }, { key: "_createPointGeometry", value: function _createPointGeometry(

    markup) {
      var capType, width;

      switch (markup.type) {
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_POLYCLOUD"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_FREEHAND"]:
        case _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_HIGHLIGHT"]:
          capType = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"];
          width = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["POINT_SIZE_IN_MM"] * this.markupsExtension.renderer.mmToWorldUnitFactor;
          break;
        default:
          capType = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_FLAT_CAP"];
          width = this.markupsExtension.renderer.getNormaStrokeWidth();
          break;}


      var geometry = [
      { x: 0.0, y: 0.0, z: 0.0 },
      { x: width, y: 0.0, z: 0.0 }];


      return this._createMeshLine(geometry, markup.type, markup, null, { capType: capType });
    } }, { key: "_createMeshLine", value: function _createMeshLine(

    geometry, type, markup, connectivity) {var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};var widthCB = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;
      var meshLine;
      if (markup) {
        meshLine = markup.meshLine;
        options.useExactSize = markup.completed;
      } else {
        options.useExactSize = true; // For a cached geometry
      }

      if (!meshLine || meshLine.type !== type) {
        meshLine = new _MeshLine__WEBPACK_IMPORTED_MODULE_3__["MeshLine"](this.markupsExtension.renderer.supportsInt32Index());
      }

      meshLine.type = type;
      meshLine.setGeometry(geometry, widthCB, connectivity, options);

      return meshLine;
    } }, { key: "_createRectangleStrokeGeometry", value: function _createRectangleStrokeGeometry()

    {
      var geometry = [
      { x: -0.5, y: -0.5, z: 0 },
      { x: 0.5, y: -0.5, z: 0 },
      { x: 0.5, y: 0.5, z: 0 },
      { x: -0.5, y: 0.5, z: 0 },
      { x: -0.5, y: -0.5, z: 0 }];


      return this._createMeshLine(geometry, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_RECTANGLE"], null, null, { isClosed: true });
    } }, { key: "_createCircleStrokeGeometry", value: function _createCircleStrokeGeometry()

    {
      var geometry = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["createArc"])(0, 0, 0.5, 0, 2 * Math.PI, false, 72);
      return this._createMeshLine(geometry, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CIRCLE"], null, null, { isClosed: true });
    } }, { key: "_centerAndScaleLocations", value: function _centerAndScaleLocations(

    locations, center, scale) {
      locations.forEach(function (location) {
        location.sub(center);
        location.applyMatrix4(scale);
      });
    } }, { key: "_createLineGeometry", value: function _createLineGeometry(

    markup) {var limitDegrees = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 29;
      var isPen = markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_FREEHAND"] || markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_HIGHLIGHT"];
      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(markup.getEditState().anchors);

      this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);

      var connectivity = [],widths = null;
      if (markup.editState.closed) {
        anchors.push(anchors[0]);
      }

      if (isPen) {
        var segmentSize = 0.5 * markup.markupsExtension.renderer.mmToWorldUnitFactor;
        var useVariableWidth = false; //markup.type === MarkupsConstants.MARKUP_TYPE_FREEHAND && anchors[0] && anchors[0].width !== undefined; // TODO define width location in state
        var smoothie = Object(_PenSmoothing__WEBPACK_IMPORTED_MODULE_5__["default"])(anchors, segmentSize, useVariableWidth);
        anchors = smoothie.anchors;
        widths = smoothie.widths;
      }

      // Use a joinType if miter will be too long. Default limit taken from:
      // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-miterlimit
      var prev = new THREE.Vector3();
      var next = new THREE.Vector3();
      var limit = Math.cos(limitDegrees * Math.PI / 180);

      for (var i = 1; i < anchors.length - 1; i++) {
        prev.copy(anchors[i - 1]).sub(anchors[i]).normalize();
        next.copy(anchors[i + 1]).sub(anchors[i]).normalize();
        if (next.dot(prev) > limit) {
          anchors.splice(i, 0, anchors[i]); // Adding a repeated point for the join
          widths && widths.splice(i, 0, widths[i]);
          connectivity[i] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"];
          i++;
        }
      }

      if (markup.editState.closed) {
        prev.copy(anchors[anchors.length - 2]).sub(anchors[anchors.length - 1]).normalize();
        next.copy(anchors[1]).sub(anchors[0]).normalize();
        if (next.dot(prev) > limit) {
          anchors.push(anchors[0]);
          widths && widths.push(widths[0]);
        }
      }

      return this._createMeshLine(anchors, markup.type, markup, connectivity, {
        capType: isPen ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"] : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_FLAT_CAP"],
        joinType: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"],
        isClosed: markup.editState.closed }, widths);
    } }, { key: "_createArrowGeometry", value: function _createArrowGeometry(

    markup) {// Can probably be cached
      var t = markup.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS];

      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(markup.getEditState().anchors);
      // Actual anchors
      anchors[0].sub(markup.center); // Tail
      anchors[1].sub(markup.center); // Head

      var line = anchors[1].clone().sub(anchors[0]);

      var eyeVec = this.markupsExtension.renderer.getCameraEyeVector();
      var tipLength = Math.min(t * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["ARROW_TIP_LENGTH"], line.length() / 2); // If the line length is short, then reduce tip length.

      var connectivity = [];

      // If the tip length is smaller than the thickness, don't render it at all.
      var withTip = tipLength > t;
      if (withTip) {
        var lineDirection = line.clone().normalize();
        var p = anchors[1].clone().sub(lineDirection.multiplyScalar(tipLength));
        var angle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(30);

        anchors[2] = p.clone();
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(anchors[2], angle, anchors[1], eyeVec);

        anchors[3] = anchors[1].clone();

        anchors[4] = p.clone();
        _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation(anchors[4], -angle, anchors[1], eyeVec);

        connectivity[1] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"];
        connectivity[2] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"];
      }

      var meshLine = this._createMeshLine(anchors, markup.type, markup, connectivity);

      // Find bounding points (for accurate bounding box). Needs to take into the account the arrow head
      if (withTip) {
        anchors[0].add(markup.center);
        anchors[1].add(markup.center);
        anchors[2].add(markup.center);
        anchors[4].add(markup.center);

        meshLine.boundingPoints = [anchors[0], anchors[2], anchors[1], anchors[4]];
      }

      return meshLine;
    } }, { key: "_createDimensionGeometry", value: function _createDimensionGeometry(

    markup) {
      var thickness = markup.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS] * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_THICKNESS_FACTOR"];

      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(markup.getEditState().anchors);

      var points = [];
      var connectivity = [];

      function addSingleSegment(p1, p2) {
        points = points.concat([p1, p2]);
        connectivity = connectivity.concat([
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"],
        _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]]);

      }

      // Actual anchors
      anchors[0].sub(markup.center); // firstAnchor
      anchors[1].sub(markup.center); // secondAnchor

      addSingleSegment(anchors[0], anchors[1]);

      var lineDirection = anchors[0].clone().sub(anchors[1]);
      var eyeVec = this.markupsExtension.renderer.getCameraEyeVector();
      var normal = lineDirection.clone().cross(eyeVec).normalize();
      var tipLength = thickness * _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["DIMENSION_TIP_LENGTH"];
      var halfTip = normal.clone().multiplyScalar(tipLength);
      var angle = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].degreesToRadians(45);

      // diagonal tip
      anchors[2] = anchors[0].clone().add(halfTip);
      anchors[3] = anchors[0].clone().sub(halfTip);
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation([anchors[2], anchors[3]], angle, anchors[0], eyeVec);
      addSingleSegment(anchors[2], anchors[3]);

      // diagonal tip
      anchors[4] = anchors[1].clone().add(halfTip);
      anchors[5] = anchors[1].clone().sub(halfTip);
      _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].applyRotation([anchors[4], anchors[5]], angle, anchors[1], eyeVec);
      addSingleSegment(anchors[4], anchors[5]);

      // Dashed line
      anchors[6] = anchors[0].clone();
      markup.applyInverseScaleAndTranslation(anchors[6]); // Dashed line start
      if (!Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["isEqualVectors"])(anchors[6], anchors[0])) {
        anchors[7] = anchors[0].clone().sub(anchors[0].clone().sub(anchors[6]).normalize().multiplyScalar(tipLength)); // Dashed line end
        addSingleSegment(anchors[6], anchors[7]);
      }

      // Dashed line
      anchors[8] = anchors[1].clone();
      markup.applyInverseScaleAndTranslation(anchors[8]); // Dashed line start
      if (!Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["isEqualVectors"])(anchors[8], anchors[1])) {
        anchors[9] = anchors[1].clone().sub(anchors[1].clone().sub(anchors[8]).normalize().multiplyScalar(tipLength)); // Dashed line end
        addSingleSegment(anchors[8], anchors[9]);
      }

      // straight tip
      anchors[10] = anchors[0].clone().add(halfTip);
      anchors[11] = anchors[0].clone().sub(halfTip);
      addSingleSegment(anchors[10], anchors[11]);

      // straight tip
      anchors[12] = anchors[1].clone().add(halfTip);
      anchors[13] = anchors[1].clone().sub(halfTip);
      addSingleSegment(anchors[12], anchors[13]);

      return this._createMeshLine(points, markup.type, markup, connectivity);
    } }, { key: "_createCloudGeometry", value: function _createCloudGeometry(

    markup) {
      var anchors = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_1__["default"].cloneDeep(markup.getEditState().anchors);

      if (Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["isClockwise"])(anchors, markup)) {
        anchors.reverse();
      }

      var radius = this.getCloudMinimumRadius(markup.editState.style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["STYLE_PROPERTIES"].THICKNESS]);
      var radiusInMM = radius / this.markupsExtension.renderer.mmToWorldUnitFactor;

      this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);

      var isClosed = markup.editState.closed;
      var boundingBox;
      if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MARKUP_TYPE_CLOUD"]) {
        isClosed = true;
        var isShift = this._shiftAnchorsInsideBox(markup, anchors, radius);
        if (!isShift) {
          return null;
        }
      } else {// Polycloud
        boundingBox = new THREE.Box3();
        boundingBox.min.z = boundingBox.max.z = 0;
      }

      var intersectionObjects = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["handleIntersection"])(anchors, radius, markup);

      var arcs = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["createCloud"])(anchors, radius, isClosed, intersectionObjects);

      if (arcs.length === 0) {
        return null;
      }

      var path = [];
      var connectivity = [];
      var prevPathLength = 0;

      for (var i = 0; i < arcs.length; i++) {
        var curr = arcs[i];
        // Hide circle if an anchor's circle is larger that 342 degrees
        if (curr.isAnchor) {
          var angleSize = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getArcAngleSize"])(curr);
          if (angleSize > Math.PI * 1.9) {
            curr.begin = curr.end;
          }
        }
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["createArc"])(curr.x, curr.y, radius, curr.begin, curr.end, false, null, path, radiusInMM, boundingBox);
        var length = path.length - prevPathLength;
        connectivity[prevPathLength] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"];
        connectivity[prevPathLength + length - 1] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"];
        prevPathLength += length;
      }

      var meshLine = this._createMeshLine(path, markup.type, markup, connectivity, {
        capType: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"],
        joinType: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"] });

      meshLine.arcs = arcs;
      meshLine.radius = radius;
      meshLine.intersectionObjects = intersectionObjects;

      if (boundingBox) {// Polycloud
        boundingBox.applyMatrix4(markup.invScaleMatrix);
        boundingBox.translate(markup.center);
        // Store the 4 corners of the bounding box, so if it's rotated later on we get the proper bounds
        meshLine.boundingPoints = [boundingBox.min.clone(), boundingBox.max.clone(), boundingBox.max.clone(), boundingBox.min.clone()];
        meshLine.boundingPoints[1].y = boundingBox.min.y;
        meshLine.boundingPoints[3].y = boundingBox.max.y;
      }

      return meshLine;
    } }, { key: "_shiftAnchorsInsideBox", value: function _shiftAnchorsInsideBox(

    markup, anchors, radius) {
      var rightVec = anchors[0].clone().sub(anchors[1]).normalize();
      var upVec = anchors[2].clone().sub(anchors[1]).normalize();

      var width = anchors[0].distanceTo(anchors[1]) / 2;
      var height = anchors[2].distanceTo(anchors[1]) / 2;

      if (height < radius || width < radius) {
        return false;
      }

      for (var i = 0; i < anchors.length; i++) {
        // Shift anchors inside bounding box
        var anchor = anchors[i];

        var dist = radius * Math.sign(anchor.dot(upVec));
        anchor.sub(upVec.clone().multiplyScalar(dist));

        dist = radius * Math.sign(anchor.dot(rightVec));
        anchor.sub(rightVec.clone().multiplyScalar(dist));
      }

      return true;
    } }, { key: "getCloudMinimumRadius", value: function getCloudMinimumRadius(

    thickness) {
      var minRadius = this.markupsExtension.renderer.mmToWorldUnitFactor * (this.markupsExtension.viewer.impl.is2d ? 1 : 10);
      return Math.max(thickness * 3, minRadius);
    } }, { key: "destroy", value: function destroy()













    {
      for (var key in this.geoCache) {
        this.geoCache[key].dispose();
      }
      this.geoCache = null;
    } }], [{ key: "areAllAnchorsEqual", value: function areAllAnchorsEqual(anchors) {var first = anchors[0];for (var i = 1; i < anchors.length; i++) {if (!anchors[i].equals(first)) {return false;}}return true;} }]);return MarkupsGeometryManager;}();

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/MarkupsMaterialManager.js":
/*!*************************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/MarkupsMaterialManager.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsMaterialManager; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MeshLine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MeshLine */ "./extensions/BimMarkups/RendererHelpers/MeshLine.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}
var

MarkupsMaterialManager = /*#__PURE__*/function () {
  function MarkupsMaterialManager(markupsExtension) {_classCallCheck(this, MarkupsMaterialManager);
    this.markupsExtension = markupsExtension;
    this.viewer = markupsExtension.viewer;
    this.materials = {};
  }_createClass(MarkupsMaterialManager, [{ key: "_getHashName", value: function _getHashName(

    type, style, isFill, isTransparent) {
      var name = type;

      if (isFill) {
        name += '|f';
        if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_COLOR]) {
          name += '|c' + style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_COLOR];
        }
        if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_OPACITY] !== undefined) {
          name += '|o' + style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0);
        }
      } else {
        if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].THICKNESS]) {
          name += '|t' + style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].THICKNESS];
        }
        if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].COLOR]) {
          name += '|c' + style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].COLOR];
        }
        if (style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].OPACITY] !== undefined) {
          name += '|o' + style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0);
        }
      }
      return name;
    } }, { key: "_setResolution", value: function _setResolution(

    material, resolution) {
      if (material.uniforms && material.uniforms.resolution) {
        material.uniforms.resolution.value.set(resolution.width, resolution.height);
      }
    } }, { key: "getMaterial", value: function getMaterial(

    type, style, isFill) {
      var name = this._getHashName(type, style, isFill);

      if (this.materials[name]) {
        return this.materials[name];
      }

      return null;
    } }, { key: "_setFillBlending", value: function _setFillBlending(

    material) {
      material.blending = material.opacity < 1 ? THREE.NoBlending : THREE.NormalBlending;
    } }, { key: "_setStrokeBlending", value: function _setStrokeBlending(

    material) {
      if (material.uniforms.opacity.value < 1) {
        material.blending = THREE.CustomBlending;
        // Take color from source (the markup being shaded). This is akin to NoBlending for the RGB component.
        material.blendDst = THREE.ZeroFactor;
        material.blendSrc = THREE.OneFactor;
        material.blendEquation = THREE.AddEquation;
        if (!Autodesk.Viewing.isIE11) {
          // Note: IE11 doesn't support MaxEquation, so use just Add, but don't use AA to avoid
          // rendering artifacts
          //
          // Take the max alpha between source and destination,
          // so that AA areas that overlap the markup are shaded with the markup opacity
          // If the fill opacity is larger than the stroke opacity, the fill part that overlaps the stroke will
          // affect the alpha in those areas, though. So this is a limitation of the current approach.
          material.blendEquationAlpha = THREE.MaxEquation;
        }
      } else {
        material.blending = THREE.NormalBlending;
      }
    } }, { key: "_createStrokeMaterial", value: function _createStrokeMaterial(

    style, needsMiter, isTransparent) {
      var resolution = this.markupsExtension.renderer.getResolution();

      var matOpt = {
        color: new THREE.Color(style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].COLOR]),
        opacity: style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0),
        resolution: new THREE.Vector2(resolution.width, resolution.height),
        lineWidth: style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].THICKNESS],
        side: THREE.FrontSide,
        miter: needsMiter };


      var material = new _MeshLine__WEBPACK_IMPORTED_MODULE_1__["MeshLineMaterial"](matOpt);
      this._setStrokeBlending(material);

      return material;
    } }, { key: "_createFillMaterial", value: function _createFillMaterial(

    style, isTransparent) {
      var matOpt = {
        color: new THREE.Color(style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_COLOR]),
        transparent: true,
        opacity: style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0),
        side: THREE.DoubleSide,
        wireframe: false };


      var material = new THREE.MeshBasicMaterial(matOpt);
      this._setFillBlending(material);

      return material;
    } }, { key: "_editStrokeMaterial", value: function _editStrokeMaterial(

    material, style, isTransparent) {
      material.uniforms.color.value.setStyle(style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].COLOR]);
      material.uniforms.lineWidth.value = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].THICKNESS];
      material.uniforms.opacity.value = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0);
      this._setStrokeBlending(material);
    } }, { key: "_editFillMaterial", value: function _editFillMaterial(

    material, style, isTransparent) {
      material.color.setStyle(style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_COLOR]);
      material.opacity = style[_MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["STYLE_PROPERTIES"].FILL_OPACITY] * (isTransparent ? _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["DISABLED_OPACITY"] : 1.0);
      material.needsUpdate = true;
      this._setFillBlending(material);
    } }, { key: "hasThicknessChanged", value: function hasThicknessChanged(

    material, newMaterial) {
      return material && newMaterial &&
      material.uniforms && newMaterial.uniforms &&
      material.uniforms.lineWidth.value !== newMaterial.uniforms.lineWidth.value;
    } }, { key: "addMaterial", value: function addMaterial(

    markup, isFill) {
      var type = markup.type;
      var style = markup.editState.style;
      var isTransparent = markup.isTransparent();

      var name = this._getHashName(type, style, isFill, isTransparent);

      if (!this.materials[name]) {
        var material = isFill ? this._createFillMaterial(style, isTransparent) : this._createStrokeMaterial(style, markup.needsMiter(), isTransparent);
        material.depthWrite = false;
        material.depthTest = false;
        material.transparent = true;
        material.refCount = 1;
        material.name = name;
        this.materials[name] = material;
      } else {
        this.materials[name].refCount++;
      }

      return this.materials[name];
    } }, { key: "removeMaterial", value: function removeMaterial(

    material) {
      if (!this.materials[material.name]) {
        console.error('Trying to remove a non-existing material');
        return;
      }

      material.refCount--;
      if (material.refCount === 0) {
        material.dispose();
        material.needsUpdate = true;
        delete this.materials[material.name];
      }
    } }, { key: "editMaterial", value: function editMaterial(

    material, markup, isFill) {
      if (!this.materials[material.name]) {
        console.error('Trying to edit a non-existing material');
        return;
      }

      var type = markup.type;
      var style = markup.editState.style;
      var isTransparent = markup.isTransparent();

      var newName = this._getHashName(type, style, isFill, isTransparent);
      if (newName === material.name) {
        return; // No change being done
      }

      // Cases:
      // 1. Material is used only by one mesh and new style doesn't exist already: can edit in place
      // 2. Material with new style already exists: use new material instead of current one
      // 3. This material is in use in more than one place: create a new material so changes don't affect the other usages        

      if (material.refCount === 1 && !this.materials[newName]) {// Can edit in place
        if (isFill) {
          this._editFillMaterial(material, style, isTransparent);
        } else {
          this._editStrokeMaterial(material, style, isTransparent);
        }

        delete this.materials[material.name];
        material.name = newName;
        this.materials[newName] = material;
        material.needsUpdate = true;

        return material;
      }

      this.removeMaterial(material);

      return this.addMaterial(markup, isFill);
    } }, { key: "destroy", value: function destroy()

    {
      for (var key in this.materials) {
        this.materials[key].dispose();
        this.materials[key].needsUpdate = true;
      }

      this.materials = {};
    } }, { key: "updateScreenSize", value: function updateScreenSize(

    resolution) {
      for (var key in this.materials) {
        this._setResolution(this.materials[key], resolution);
      }
    } }]);return MarkupsMaterialManager;}();

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/MeshLine.js":
/*!***********************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/MeshLine.js ***!
  \***********************************************************/
/*! exports provided: MeshLine, MeshLineMaterial */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeshLine", function() { return MeshLine; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeshLineMaterial", function() { return MeshLineMaterial; });
/* harmony import */ var _Shaders_MeshLineVert_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Shaders/MeshLineVert.glsl */ "./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineVert.glsl");
/* harmony import */ var _Shaders_MeshLineVert_glsl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Shaders_MeshLineVert_glsl__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Shaders_MeshLineFrag_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Shaders/MeshLineFrag.glsl */ "./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineFrag.glsl");
/* harmony import */ var _Shaders_MeshLineFrag_glsl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Shaders_MeshLineFrag_glsl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");




function MeshLine(supportsInt32Index) {
  this.supportsInt32Index = supportsInt32Index;
}

MeshLine.prototype.create = function () {
  this.geometry = new THREE.BufferGeometry();
};

MeshLine.prototype.dispose = function () {
  if (this.geometry) {
    this.geometry.dispose();
    this.geometry = null;
  }

  if (this.attributes) {
    for (var key in this.attributes) {
      delete this.attributes[key].array;
    }
    this.attributes = null;
  }

  this.positions = null;
  this.previous = null;
  this.next = null;
  this.side = null;
  this.width = null;
  this.counters = null;
  this.indices_array = null;
};

MeshLine.prototype.setGeometry = function (sourceGeo, widthCB, connectivity, options) {var _this = this;
  this.sourceGeo = sourceGeo;

  if (Array.isArray(widthCB)) {
    this.widthArray = widthCB;
    this.widthCallback = function (i) {return _this.widthArray[i];};
  } else {
    this.widthCallback = widthCB;
  }

  this.sourceConnectivity = connectivity || [];
  this.connectivity = {};

  this.options = Object.assign({}, {
    capType: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_FLAT_CAP"],
    joinType: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_FLAT_CAP"],
    useExactSize: false },
  options);

  this.isClosed = !!this.options.isClosed;

  this.process();
};

MeshLine.prototype.isPointNear = function () {
  var a = new THREE.Vector3();
  var b = new THREE.Vector3();

  // get squared distance from a point to a segment
  function getSegmentDistSq(p) {
    var x = a.x;
    var y = a.y;
    var dx = b.x - x;
    var dy = b.y - y;

    if (dx !== 0 || dy !== 0) {

      var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);

      if (t > 1) {
        x = b.x;
        y = b.y;

      } else if (t > 0) {
        x += dx * t;
        y += dy * t;
      }
    }

    dx = p.x - x;
    dy = p.y - y;

    return dx * dx + dy * dy;
  }

  return function (point, thresholdSq, matrixWorld) {
    for (var i = 0, l = this.numPoints - 1; i < l; i++) {
      if (this.connectivity[i] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]) {
        continue;
      }

      a.fromArray(this.positions, 6 * i).applyMatrix4(matrixWorld);
      b.fromArray(this.positions, 6 * (i + 1)).applyMatrix4(matrixWorld);

      if (getSegmentDistSq(point) < thresholdSq) {
        return true;
      }
    }

    return false;
  };
}();

MeshLine.prototype.getPositionV3 = function (a) {
  var aa = a * 6;

  return [this.positions[aa], this.positions[aa + 1], this.positions[aa + 2]];
};

MeshLine.prototype.initArrays = function (numPoints) {
  // Factors explanation:
  // For position 6 because: (x, y, z) times 2 vertices per position
  // For prev and next 4 because: (x, y) times 2 vertices per position
  // It'd be preferable to use only x,y for position as well, but since this an attribute that threejs access to do things like
  // calculate bounding sphere, it could break some things (we could get away by calculating the bounding sphere ourselves,
  // but would need to check first that other things can't break as well. Probably not worth the effort)
  var useExactSize = this.options.useExactSize;
  if (!this.capacity || this.capacity < numPoints || useExactSize && this.capacity !== numPoints) {
    this.dispose();
    var capacity = useExactSize ? numPoints : Math.ceil(1.5 * numPoints);
    this.positions = new Float32Array(6 * capacity);
    this.previous = new Float32Array(4 * capacity);
    this.next = new Float32Array(4 * capacity);

    this.side = new Float32Array(2 * capacity); // Side joined with pointType
    this.width = new Float32Array(2 * capacity);
    this.counters = new Float32Array(2 * capacity);

    // 6 because 2 triangles times 3 vertices per 2 points. So if capacity is 2 --> 6*(2-1) = 6 indices for 2 triangles
    var indexSize = 6 * (capacity - 1);
    this.indices_array = this.supportsInt32Index && indexSize > 65535 ? new Uint32Array(indexSize) : new Uint16Array(indexSize);

    this.capacity = capacity;
  }

  this.numPoints = numPoints;
};

MeshLine.prototype.getWidth = function (idx, ratio) {
  if (this.widthCallback) {
    return this.widthCallback(idx, ratio);
  }

  return 1;
};

MeshLine.prototype.process = function () {var _this2 = this;
  var srcLength = this.sourceGeo.length;
  var maxCount = Math.max(1, srcLength - 1);

  var addPosition = function addPosition(from, to, count, type) {
    var v = _this2.sourceGeo[from];
    _this2.positions.set([v.x, v.y, v.z, v.x, v.y, v.z], to * 6);

    _this2.counters.set([count, count], to * 2);

    _this2.side.set([type, -type], to * 2);

    var w = _this2.getWidth(from, from / maxCount);
    _this2.width.set([w, w], to * 2);
  };

  var addPrevious = function addPrevious() {
    var v;
    if (_this2.isClosed) {
      v = _this2.getPositionV3(l - 2);
    } else {
      v = _this2.getPositionV3(0);
    }
    _this2.previous.set([v[0], v[1], v[0], v[1]], 0);

    for (var _j = 1; _j < l; _j++) {
      if (_this2.connectivity[_j] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"]) {
        v = _this2.getPositionV3(_j);
      } else if (_this2.connectivity[_j] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]) {
        v = _this2.getPositionV3(_j - 2);
      } else {
        v = _this2.getPositionV3(_j - 1);
      }
      _this2.previous.set([v[0], v[1], v[0], v[1]], _j * 4);
    }
  };

  var addNext = function addNext() {
    var v;
    for (var _j2 = 0; _j2 < l - 1; _j2++) {
      if (_this2.connectivity[_j2] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]) {
        v = _this2.getPositionV3(_j2);
      } else if (_this2.connectivity[_j2] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"]) {
        v = _this2.getPositionV3(_j2 + 2);
      } else {
        v = _this2.getPositionV3(_j2 + 1);
      }
      _this2.next.set([v[0], v[1], v[0], v[1]], _j2 * 4);
    }

    if (_this2.isClosed) {
      v = _this2.getPositionV3(1);
    } else {
      v = _this2.getPositionV3(l - 1);
    }
    _this2.next.set([v[0], v[1], v[0], v[1]], (l - 1) * 4);
  };

  var usedIndices = 0;
  var addIndices = function addIndices() {
    for (var _j3 = 0; _j3 < l - 1; _j3++) {
      if (_this2.connectivity[_j3] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]) {
        continue; // Do not add the rect between a path end and a path start
      }
      var n = _j3 * 2;
      _this2.indices_array.set(
      [n, n + 1, n + 2,
      n + 2, n + 1, n + 3], usedIndices);

      usedIndices += 6;
    }
  };

  var setAttributes = function setAttributes() {
    if (!_this2.attributes) {
      _this2.create();
      _this2.attributes = {
        position: new THREE.BufferAttribute(_this2.positions, 3),
        previous: new THREE.BufferAttribute(_this2.previous, 2),
        next: new THREE.BufferAttribute(_this2.next, 2),
        side: new THREE.BufferAttribute(_this2.side, 1),
        width: new THREE.BufferAttribute(_this2.width, 1),
        index: new THREE.BufferAttribute(_this2.indices_array, 1),
        counters: new THREE.BufferAttribute(_this2.counters, 1) };


      _this2.geometry.addAttribute('position', _this2.attributes.position);
      _this2.geometry.addAttribute('previous', _this2.attributes.previous);
      _this2.geometry.addAttribute('next', _this2.attributes.next);
      _this2.geometry.addAttribute('side', _this2.attributes.side);
      _this2.geometry.addAttribute('width', _this2.attributes.width);
      _this2.geometry.addAttribute('index', _this2.attributes.index);
      _this2.geometry.addAttribute('counters', _this2.attributes.counters);
    } else {
      _this2.attributes.position.array = _this2.positions;
      _this2.attributes.position.needsUpdate = true;
      _this2.attributes.previous.array = _this2.previous;
      _this2.attributes.previous.needsUpdate = true;
      _this2.attributes.next.array = _this2.next;
      _this2.attributes.next.needsUpdate = true;
      _this2.attributes.side.array = _this2.side;
      _this2.attributes.side.needsUpdate = true;
      _this2.attributes.width.array = _this2.width;
      _this2.attributes.width.needsUpdate = true;
      _this2.attributes.index.array = _this2.indices_array;
      _this2.attributes.index.needsUpdate = true;
      _this2.attributes.counters.array = _this2.counters;
      _this2.attributes.counters.needsUpdate = true;
    }
  };

  if (srcLength === 0) {
    setAttributes();
    return;
  }

  // If open (or joinType === MarkupsConstants.MESHLINE_PATH_ROUND_CAP, like polyline, because there are no endcaps when closed),
  // need to add 1 vertex for each endcap.
  if (!this.isClosed || this.options.joinType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_ROUND_CAP"]) {
    this.sourceConnectivity[0] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"];
    this.sourceConnectivity[srcLength - 1] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"];
  }

  // Calculate number of vertices needed
  // For each start / end in the middle, add another position
  var l = srcLength + this.sourceConnectivity.reduce(function (x) {return x + 1;}, 0);

  // Now init array beforehand.
  // If array already exists, check if it's big enough, and if not, use heuristic to increase size
  this.initArrays(l);

  // Iterate through geoSource. Add multiple points when connectivity calls for it
  // In the end, add prev, next, indices.
  var j = 0;
  for (var i = 0; i < srcLength; i++) {
    if (this.sourceConnectivity[i] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"]) {
      var endType = i === 0 && !this.isClosed ? this.options.capType : this.options.joinType;
      this.connectivity[j] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_START"];
      addPosition(i, j++, -1, endType);
      addPosition(i, j++, 0, endType);
    } else if (this.sourceConnectivity[i] === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"]) {
      var _endType = i === srcLength - 1 && !this.isClosed ? this.options.capType : this.options.joinType;
      addPosition(i, j++, 1, _endType);
      this.connectivity[j] = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_END"];
      addPosition(i, j++, 2, _endType);
    } else {
      addPosition(i, j++, i / maxCount, _MarkupsConstants__WEBPACK_IMPORTED_MODULE_2__["MESHLINE_PATH_DEFAULT"]);
    }
  }

  addPrevious();
  addNext();
  addIndices();
  setAttributes();

  this.geometry.offsets[0] = {
    index: 0,
    start: 0,
    count: usedIndices };

};

function MeshLineMaterial(parameters) {

  function check(v, d) {
    if (v === undefined) return d;
    return v;
  }

  THREE.Material.call(this);

  parameters = parameters || {};

  this.lineWidth = check(parameters.lineWidth, 1);
  this.miter = check(parameters.miter, true);
  this.color = check(parameters.color, new THREE.Color(0xffffff));
  this.opacity = check(parameters.opacity, 1);
  this.resolution = check(parameters.resolution, new THREE.Vector2(1, 1));

  var material = new THREE.RawShaderMaterial({
    uniforms: {
      lineWidth: { type: 'f', value: this.lineWidth },
      color: { type: 'c', value: this.color },
      opacity: { type: 'f', value: this.opacity },
      resolution: { type: 'v2', value: this.resolution } },

    vertexShader: _Shaders_MeshLineVert_glsl__WEBPACK_IMPORTED_MODULE_0___default.a,
    fragmentShader: _Shaders_MeshLineFrag_glsl__WEBPACK_IMPORTED_MODULE_1___default.a,
    attributes: {
      previous: { type: 'v2', value: new THREE.Vector2() },
      next: { type: 'v2', value: new THREE.Vector2() },
      side: { type: 'f', value: 0 },
      width: { type: 'f', value: 0 },
      counters: { type: 'f', value: 0 } } });



  material.type = 'MeshLineMaterial';
  if (Autodesk.Viewing.isIE11) {
    material.defines.IS_IE_11 = 1;
  }
  if (this.miter) {
    material.defines.MITER = 1;
  }

  delete parameters.lineWidth;
  delete parameters.color;
  delete parameters.opacity;
  delete parameters.resolution;
  delete parameters.miter;

  material.setValues(parameters);

  return material;
}

MeshLineMaterial.prototype = Object.create(THREE.Material.prototype);
MeshLineMaterial.prototype.constructor = MeshLineMaterial;

MeshLineMaterial.prototype.copy = function (source) {

  THREE.Material.prototype.copy.call(this, source);

  this.lineWidth = source.lineWidth;
  this.color.copy(source.color);
  this.opacity = source.opacity;
  this.resolution.copy(source.resolution);
  this.miter = source.miter;

  return this;
};

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/PenSmoothing.js":
/*!***************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/PenSmoothing.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return penSmoothing; });
// Reference: http://scaledinnovation.com/analytics/splines/aboutSplines.html
function getControlPoints(x0, y0, x1, y1, x2, y2) {var tension = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0.333;
  //  x0,y0,x1,y1 are the coordinates of the end (knot) pts of this segment
  //  x2,y2 is the next knot -- not connected here but needed to calculate p2
  //  p1 is the control point calculated here, from x1 back toward x0.
  //  p2 is the next control point, calculated here and returned to become the 
  //  next segment's p1.
  //  t is the 'tension' which controls how far the control points spread.

  //  Scaling factors: distances from this knot to the previous and following knots.
  var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));
  var d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));

  var fa = tension * d01 / (d01 + d12);
  var fb = tension - fa;

  var p1x = x1 + fa * (x0 - x2);
  var p1y = y1 + fa * (y0 - y2);

  var p2x = x1 - fb * (x0 - x2);
  var p2y = y1 - fb * (y0 - y2);

  return [{ x: p1x, y: p1y }, { x: p2x, y: p2y }];
}

function calcQuadBezier(p0, p1, p2, t) {
  var tt = t * t;
  var u = 1 - t;
  var uu = u * u;

  var x = uu * p0.x;
  x += 2 * u * t * p1.x;
  x += tt * p2.x;
  var y = uu * p0.y;
  y += 2 * u * t * p1.y;
  y += tt * p2.y;

  return { x: x, y: y, z: 0 };
}

function calcCubicBezier(p0, p1, p2, p3, t) {
  var tt = t * t;
  var ttt = tt * t;
  var u = 1 - t;
  var uu = u * u;
  var uuu = uu * u;

  var x = uuu * p0.x;
  x += 3 * uu * t * p1.x;
  x += 3 * u * tt * p2.x;
  x += ttt * p3.x;
  var y = uuu * p0.y;
  y += 3 * uu * t * p1.y;
  y += 3 * u * tt * p2.y;
  y += ttt * p3.y;

  return { x: x, y: y, z: 0 };
}

var calcPolygonLength = function () {
  var calcDistance = function calcDistance(p1, p2) {
    var dx = p1.x - p2.x;
    var dy = p1.y - p2.y;
    return Math.sqrt(dx * dx + dy * dy);
  };

  return function (points) {
    var length = 0;

    for (var i = 1; i < points.length; i++) {
      length += calcDistance(points[i], points[i - 1]);
    }

    return length;
  };
}();

function addQuadBezier(startPoint, control, endPoint, segmentSize, points, widths) {
  var segments = Math.max(Math.round(calcPolygonLength([startPoint, control, endPoint]) / segmentSize), 4);
  for (var i = 0; i < segments; i++) {
    // Calculate the Bezier (x, y) coordinate for this step.
    var t = i / segments;
    var point = calcQuadBezier(startPoint, control, endPoint, t);
    points.push(point);
    widths && widths.push(startPoint.width + t * t * (endPoint.width - startPoint.width));
  }
}

function addCubicBezier(startPoint, control1, control2, endPoint, segmentSize, points, widths) {
  var segments = Math.max(Math.round(calcPolygonLength([startPoint, control1, control2, endPoint]) / segmentSize), 4);
  for (var i = 0; i < segments; i++) {
    // Calculate the Bezier (x, y) coordinate for this step.
    var t = i / segments;
    var point = calcCubicBezier(startPoint, control1, control2, endPoint, t);
    points.push(point);
    widths && widths.push(startPoint.width + t * t * t * (endPoint.width - startPoint.width));
  }
}

function penSmoothing(anchors, segmentSize, useVariableWidth) {
  if (anchors.length < 3) {
    return { anchors: anchors };
  }

  var cp = [];
  var finalAnchors = [];
  var widths = useVariableWidth ? [] : null;
  var n = anchors.length;
  // Low pass filter to smooth uneven input - doesn't seem necessary when using simplify. Leaving it just in case.
  // const alpha = 0.9;
  // for (let i = 1; i < n - 1; i++){
  //     anchors[i].x = anchors[i].x * alpha + (1 - alpha) * anchors[i - 1].x;
  //     anchors[i].y = anchors[i].y * alpha + (1 - alpha) * anchors[i - 1].y;
  // }

  // Calculate control points for bezier curves
  for (var i = 0; i < n - 2; i++) {
    cp = cp.concat(getControlPoints(anchors[i].x, anchors[i].y, anchors[i + 1].x, anchors[i + 1].y, anchors[i + 2].x, anchors[i + 2].y));
  }

  // First 2 points get a quadratic bezier (because need at least 3 points for a cubic one)
  addQuadBezier(anchors[0], cp[0], anchors[1], segmentSize, finalAnchors, widths);

  // Middle points get cubic beziers
  for (var _i = 1; _i < n - 3; _i++) {
    addCubicBezier(anchors[_i], cp[2 * _i - 1], cp[2 * _i], anchors[_i + 1], segmentSize, finalAnchors, widths);
  }

  // Last 2 points get a quadratic bezier again
  addQuadBezier(anchors[n - 2], cp[2 * n - 5], anchors[n - 1], segmentSize, finalAnchors, widths);

  // Since it's continuous, the quad and cubic functions don't add the last point
  // (to avoid duplicating with the first point of the next curve), so need to add the very last point here.
  finalAnchors.push(anchors[n - 1]);
  widths && widths.push(anchors[n - 1].width);

  return { anchors: finalAnchors, widths: widths };
}

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineFrag.glsl":
/*!*************************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineFrag.glsl ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "#define MESHLINE_PATH_FLAT_CAP      3.0\nuniform vec3 color;\nuniform float opacity;\nvarying float vCounters;\nvarying float vDistance;\nvarying float aaRange;\nvarying float totalWidth;\nvarying vec2 center;\nvarying vec2 finalPos;\nvarying float vPointType;\nfloat when_eq(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\nfloat getSmoothStep(float t, float d) {\n    return smoothstep(t - aaRange, t + aaRange, abs(d));\n}\nvoid main() {\n    float t = totalWidth / 2.0;\n    float d = vDistance;\n    float aa = 1.0;\n    if (vCounters < 0.0 || vCounters > 1.0) {\n        d = length(finalPos - center);\n        if (vPointType == MESHLINE_PATH_FLAT_CAP) {\n            t = aaRange;\n        }\n        if (d > t + aaRange) {\n            discard;\n        }\n        aa = 1.0 - getSmoothStep(t, d);       \n    }\n        \n#ifdef IS_IE_11\n    aa = (1.0 - when_eq(opacity, 1.0) * getSmoothStep(totalWidth / 2.0, vDistance)) * aa;\n#else\n    aa = (1.0 - getSmoothStep(totalWidth / 2.0, vDistance)) * aa;\n#endif\n    gl_FragColor = vec4(color, opacity * aa);\n}\n";

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineVert.glsl":
/*!*************************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineVert.glsl ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n#define MESHLINE_PATH_ROUND_CAP     2.\n#define MESHLINE_PATH_FLAT_CAP      3.\nattribute vec3 position;\nattribute vec2 previous;\nattribute vec2 next;\nattribute float side;\nattribute float width;\nattribute float counters;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec2 resolution;\nuniform float lineWidth;\nuniform float opacity;\nvarying float vCounters;\nvarying float vPointType;\nvarying float vDistance;\nvarying float aaRange;\nvarying float totalWidth;\nvarying vec2 center;\nvarying vec2 finalPos;\nfloat when_eq(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\nfloat when_neq(float x, float y) {\n  return abs(sign(x - y));\n}\nvoid main() {\n    float pixelsPerUnit = 0.5 * resolution.x * projectionMatrix[0][0];\n    vCounters = counters;\n    vPointType = abs(side);\n    float sideSgn = sign(side);\n    vec4 curPosition = modelViewMatrix * vec4(position.xy, 0.0, 1.0);\n    vec2 prevPos = (modelViewMatrix * vec4(previous, 0.0, 1.0)).xy;\n    vec2 nextPos = (modelViewMatrix * vec4(next, 0.0, 1.0)).xy;\n#ifdef IS_IE_11\n    aaRange = when_neq(width, 0.0) * when_eq(opacity, 1.0) * 1.0 / pixelsPerUnit;\n#else\n    aaRange = when_neq(width, 0.0) * 1.0 / pixelsPerUnit;\n#endif\n    \n    float minSize = when_neq(width, 0.0) * 0.5 / pixelsPerUnit;    \n   \n    totalWidth = lineWidth * width;\n    \n    float w = max(.5 * totalWidth, minSize) + aaRange;\n    \n    vDistance = w * sideSgn;\n    vec2 dir;\n    if (nextPos == curPosition.xy) {\n        dir = normalize(curPosition.xy - prevPos);\n    } else if (prevPos == curPosition.xy) {\n        dir = normalize(nextPos - curPosition.xy);\n    } else {\n#ifdef MITER\n        vec2 dir1 = normalize(curPosition.xy - prevPos);\n        vec2 dir2 = normalize(nextPos - curPosition.xy);\n        dir = normalize(dir1 + dir2);\n        vec2 perp = vec2(-dir1.y, dir1.x);\n        vec2 miter = vec2(-dir.y, dir.x);\n        w = clamp(w / dot(miter, perp), minSize + aaRange, 20. * w);\n#else\n        dir = normalize(curPosition.xy - prevPos);\n#endif\n    }\n    vec2 normal = vec2(-dir.y, dir.x);\n    normal *= w * sideSgn;\n    \n    if (vPointType == MESHLINE_PATH_ROUND_CAP) {\n        center = curPosition.xy;\n        curPosition.xy += normal;\n    } else  {\n        curPosition.xy += normal;\n        center = curPosition.xy;\n    }\n    \n    if (vCounters < 0.0 || vCounters > 1.0) {\n        normal = vec2(dir.x, dir.y);\n        normal *= sign(vCounters) * w;\n        curPosition.xy += normal;\n    }\n  \n    finalPos = curPosition.xy;\n    gl_Position = projectionMatrix * curPosition;\n}\n";

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/TextRenderer.css":
/*!****************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/TextRenderer.css ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../node_modules/css-loader!../../../node_modules/sass-loader/dist/cjs.js!./TextRenderer.css */ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/RendererHelpers/TextRenderer.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./extensions/BimMarkups/RendererHelpers/TextRenderer.js":
/*!***************************************************************!*\
  !*** ./extensions/BimMarkups/RendererHelpers/TextRenderer.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TextRenderer; });
/* harmony import */ var _ThirdParty_html2canvas_html2canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ThirdParty/html2canvas/html2canvas */ "./extensions/BimMarkups/ThirdParty/html2canvas/html2canvas.js");
/* harmony import */ var _ThirdParty_html2canvas_html2canvas__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ThirdParty_html2canvas_html2canvas__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Utils/GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _TextRenderer_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TextRenderer.css */ "./extensions/BimMarkups/RendererHelpers/TextRenderer.css");
/* harmony import */ var _TextRenderer_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_TextRenderer_css__WEBPACK_IMPORTED_MODULE_5__);
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}






var av = Autodesk.Viewing;var

TextRenderer = /*#__PURE__*/function () {
  function TextRenderer(markupsExtension) {_classCallCheck(this, TextRenderer);
    this.markupsExtension = markupsExtension;
    this.setGlobalManager(markupsExtension.globalManager);
    this.viewer = this.markupsExtension.viewer;
    this.container = this.viewer.appendOrderedElementToViewer('markup-text-container');
    this.container.className = 'markup-text-container';

    this.labels = {};
    this.textMarkups = {};
    this.textSizeCache = {};

    this.registerEventListeners();
  }_createClass(TextRenderer, [{ key: "registerEventListeners", value: function registerEventListeners()

    {
      this.onMarkupRemovedBinded = this.onMarkupRemoved.bind(this);
      this.onCameraChangedBinded = this.onCameraChanged.bind(this);
      this.onMarkupVisibilityChangedBinded = this.onMarkupVisibilityChanged.bind(this);
      this.onResizeBinded = this.onResize.bind(this);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__["MARKUPS_EVENTS"].MARKUP_VISIBILITY_CHANGED, this.onMarkupVisibilityChangedBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.onMarkupRemovedBinded);
      this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
      this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);
    } }, { key: "unregisterEventListeners", value: function unregisterEventListeners()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__["MARKUPS_EVENTS"].MARKUP_VISIBILITY_CHANGED, this.onMarkupVisibilityChangedBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_1__["MARKUPS_EVENTS"].MARKUP_REMOVED, this.onMarkupRemovedBinded);
      this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);
      this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);
    } }, { key: "onCameraChanged", value: function onCameraChanged()

    {
      this.renderTextMarkups();
    } }, { key: "onResize", value: function onResize()

    {var _this = this;
      this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, function () {
        _this.onCameraChanged();
      }, { once: true });
    } }, { key: "renderTextMarkups", value: function renderTextMarkups()

    {var _this2 = this;
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__["forAll"])(this.textMarkups, function (markup) {
        _this2.renderMarkup(markup);
      });
    } }, { key: "updateLabelPositionAndSize", value: function updateLabelPositionAndSize(

    label, markup) {
      // If a style property didn't change, we don't want to reassign it.
      // Unnecessary style assignments cause layout thrashing and slows down the render.
      function assignStyleProperty(key, value) {
        if (label.styleCache[key] !== value) {
          label.style[key] = value;
          label.styleCache[key] = value;
        }
      }var _markup$getEditState =

      markup.getEditState(),text = _markup$getEditState.text;
      var textStyle = markup.getTextStyle();
      var fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale();
      var fontToClient = this.markupsExtension.renderer.sizeFromWorldToClient(fontToWorldScale);
      var clientBoundingBox = markup.getClientBoundingBoxTextOnly();

      var clientCenter = clientBoundingBox.center();
      var clientSize = clientBoundingBox.size();
      var rotate = _Utils_GeometryUtils__WEBPACK_IMPORTED_MODULE_3__["default"].radiansToDegrees(markup.getRotation() + this.markupsExtension.renderer.getCameraRotation());

      // Browsers tend to round the values of font-size and line-height.
      // Every browser has its own logic to round the values, so each one has its own result.
      // The problem is, that because of this clamping, we get unwanted jumps for tall text labels,
      // while zooming in and out.
      // To solve it, we trim the font size by our own (floor function),
      // and in order to add the rest of the trimmed font size, we scale the label with what's left.
      // For browsers other than Safari it's easier, because we can just scale the text without changing the font-size at all.
      // in Safari, font scaling result in really low res result.
      if (Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice()) {
        var preciseSize = parseFloat(textStyle.fontSize) * fontToClient;
        var roundedSize = Math.floor(preciseSize) || 1;
        var scale = preciseSize / roundedSize;

        var width = clientSize.x / scale;
        textStyle.width = "".concat(width, "px");
        textStyle.fontSize = "".concat(roundedSize, "px");

        Object.keys(textStyle).forEach(function (key) {
          assignStyleProperty(key, textStyle[key]);
        });

        label.style.transform = "translate(".concat(clientCenter.x, "px, ").concat(clientCenter.y, "px)\n                                    translate(-50%, -50%)\n                                    rotate(").concat(

        rotate, "deg)\n                                    scale(").concat(
        scale, ")");
      } else {var _markup$getTextWidthI =
        markup.getTextWidthInFontScale(),preciseWidth = _markup$getTextWidthI.preciseWidth,_width = _markup$getTextWidthI.width;
        textStyle.width = "".concat(_width, "px"); // In font scale

        Object.keys(textStyle).forEach(function (key) {
          assignStyleProperty(key, textStyle[key]);
        });

        var widthDiff = (preciseWidth - _width) * fontToClient; // Compensation due to rounding (in client scale)

        label.style.transform = "translate(".concat(clientCenter.x - widthDiff / 2, "px, ").concat(clientCenter.y, "px)\n                                    translate(-50%, -50%)\n                                    rotate(").concat(

        rotate, "deg)\n                                    scale(").concat(
        fontToClient, ")");
      }

      if (!markup.textInputHandler.textboxActive) {
        label.innerText = text ? text : '';
      }
    } }, { key: "renderMarkup", value: function renderMarkup(

    markup) {
      if (!markup.editState.anchors[0]) {
        return;
      }

      var label = this.labels[markup.id];

      var _document = this.getDocument();
      if (!label) {
        label = _document.createElement('div');
        label.className = 'markup-text';
        label.id = markup.id;var _markup$getEditState2 =
        markup.getEditState(),text = _markup$getEditState2.text;
        label.innerText = text ? text : '';
        label.styleCache = {};
        this.container.appendChild(label);
        this.labels[markup.id] = label;
        this.textMarkups[markup.id] = markup;
      }

      if (markup.isVisible() && !label.classList.contains('visible')) {
        label.classList.add('visible');
      } else if (!markup.isVisible() && label.classList.contains('visible')) {
        label.classList.remove('visible');
      }

      if (markup.editState.isSingleLine && !label.classList.contains('single-line')) {
        label.classList.add('single-line');
      }

      if (markup.isVisible()) {
        this.updateLabelPositionAndSize(label, markup);
      }
    } }, { key: "getLabel", value: function getLabel(

    markup) {
      return this.labels[markup.id];
    } }, { key: "onMarkupVisibilityChanged", value: function onMarkupVisibilityChanged(_ref)

    {var markup = _ref.markup,visible = _ref.visible;
      if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_4__["MARKUP_TYPE_CALLOUT"]) {
        this.renderMarkup(markup);
      }
    } }, { key: "onMarkupRemoved", value: function onMarkupRemoved(_ref2)

    {var markup = _ref2.markup;
      var name = markup.id;
      var markupElement = this.labels[name];

      if (markupElement) {
        this.container.removeChild(markupElement);
      }

      delete this.labels[name];
      delete this.textMarkups[name];
    } }, { key: "isEmpty", value: function isEmpty()

    {
      return Object.keys(this.labels).length === 0;
    } }, { key: "renderTextToCanvas", value: function renderTextToCanvas(

    canvas, camera, scale, afterCloneBeforeRender, afterCloneAfterRender, cb) {var _this3 = this;
      // In case there are not text markups on canvas, just return the original canvas.
      if (this.isEmpty()) {
        cb(canvas);
        return;
      }

      var visibleTextMarkupsIds = {};

      // Because this operation is async, we need to make sure that we render all the text markups that were visible at this point.
      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__["getObjectAsList"])(this.textMarkups).forEach(function (markup) {
        if (markup.isVisible()) {
          visibleTextMarkupsIds[markup.id] = true;
        }
      });

      var options = {
        backgroundColor: null,
        logging: false,
        scale: scale,
        onclone: function onclone(doc) {
          afterCloneBeforeRender();

          var documentCameraBackup = _this3.markupsExtension.renderer.documentCamera;
          var markupsCameraBackup = _this3.markupsExtension.renderer.markupsCamera;
          _this3.markupsExtension.renderer.documentCamera = camera;
          _this3.markupsExtension.renderer.markupsCamera = camera;

          var container = doc.getElementsByClassName('markup-text-container')[0];
          var labels = container.children;

          // All the labels here are clones of the original labels.
          // The changes made here are relevant only for the canvas rendering.
          for (var i = 0; i < labels.length; i++) {
            var label = labels[i];

            if (visibleTextMarkupsIds[label.id]) {
              var markup = _this3.textMarkups[label.id];
              if (!label.classList.contains('visible')) {
                label.classList.add('visible');
              }

              label.styleCache = {};
              _this3.updateLabelPositionAndSize(label, markup);
            } else if (label.classList.contains('visible')) {
              label.classList.remove('visible');
            }
          }

          _this3.markupsExtension.renderer.documentCamera = documentCameraBackup;
          _this3.markupsExtension.renderer.markupsCamera = markupsCameraBackup;

          afterCloneAfterRender();
        } };


      _ThirdParty_html2canvas_html2canvas__WEBPACK_IMPORTED_MODULE_0___default()(this.container, options).then(function (res) {
        var _document = _this3.getDocument();
        var textCanvas = _document.createElement('canvas');
        textCanvas.width = res.width;
        textCanvas.height = res.height;
        var ctx = textCanvas.getContext('2d');

        // Flip text vertically.
        ctx.translate(0, textCanvas.height);
        ctx.scale(1, -1);
        ctx.drawImage(res, 0, 0);

        // Copy the image contents to the canvas
        var canvasCtx = canvas.getContext('2d');
        canvasCtx.globalCompositeOperation = 'source-over';
        canvasCtx.drawImage(textCanvas, 0, 0);
        cb(canvas);
      });
    } }, { key: "destroy", value: function destroy()

    {var _this4 = this;
      this.unregisterEventListeners();

      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_2__["forAll"])(this.labels, function (label) {
        _this4.container.removeChild(label);
      });

      this.labels = null;
      this.textMarkups = null;
      this.textSizeCache = null;

      this.markupsExtension = null;
      this.viewer = null;
    } }]);return TextRenderer;}();


av.GlobalManagerMixin.call(TextRenderer.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/Service/MarkupServiceWeb.js":
/*!***********************************************************!*\
  !*** ./extensions/BimMarkups/Service/MarkupServiceWeb.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupServiceWeb; });
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsServiceBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsServiceBase */ "./extensions/BimMarkups/Service/MarkupsServiceBase.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupServiceWeb = /*#__PURE__*/function (_MarkupServiceBase) {_inherits(MarkupServiceWeb, _MarkupServiceBase);var _super = _createSuper(MarkupServiceWeb);
  function MarkupServiceWeb(markupsExtension, options) {var _this;_classCallCheck(this, MarkupServiceWeb);
    _this = _super.call(this, markupsExtension, options);

    // Which type to use: markups or issues
    var type = 'markup';
    _this.issueType = _this.ISSUES_TYPE[type];
    // End Points
    var config = _this.ENV_TABLE[options.env] || _this.ENV_TABLE['Development'];
    _this.ISSUE_SERVICE_URL = config.ISSUE_SERVICE;
    _this.OBJECT_STORAGE_SERVICE_URL = config.OBJECT_STORAGE;

    // Additional properties related to issue service JSON API call.
    // ??? consider to leverage an existing JSON API JS client
    // ??? to manage all calls, but right now do straightforward RESTful handling.
    _this.maxPageLimit = 200; // Now, issue service can return 200 items at once.

    // Record all ongoing request, then can cancel them if no longer needed.
    _this.xhrGetReq = [];

    _this.headers = [
    {
      name: 'x-ads-acm-namespace',
      value: _this.options.acmNamespace },

    {
      name: 'x-ads-acm-check-groups',
      value: 'true' }];



    if (_this.options.acmScopes) {
      _this.headers.push({
        name: 'x-ads-acm-scopes',
        value: _this.options.acmScopes });

    }return _this;
  }_createClass(MarkupServiceWeb, [{ key: "checkValidation",


































































    /**
                                                              * This is a dummy check that the must have value is set
                                                              * so that service is ready to call
                                                             */value: function checkValidation()
    {
      var token = this.getAccessToken();
      this.valid = !!token && !!this.options.issueProject && !!this.issueType;

      return this.valid;
    }

    /**
       *
       *
       * @param {Array} [additionalHeaders] - Additional headers with items {name:String, value:String}
       * @returns {Promise}
       */ }, { key: "requestMarkups", value: function requestMarkups(
    pageLimit, offset, additionalHeaders, statuses) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      if (!pageLimit) {
        pageLimit = this.maxPageLimit;
      }
      if (!offset) {
        offset = 0;
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        if (!self.options.documentUrn) {
          return reject();
        }

        // Add page limit and offset query parameters for JSON API usage.
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.issueType.endpoint].join('');
        url = [url, '?page[limit]=' + pageLimit + '&page[offset]=' + offset].join('');

        if (self.options.documentUrn) {
          // If specify document urn, then request issues filtered by this urn.
          var doc = encodeURIComponent(self.options.documentUrn);
          url = [url, '&filter[target_urn]=', doc].join('');
        }

        url = [url, '&include=attachments'].join('');

        if (statuses) {
          url = [url, '&filter[status]=', statuses].join('');
        }

        // Sort the results by its created time in descent order
        // TODO: as the request goes more complex, need to consider to
        // refactor this to use a JSON API library to better manage
        // different request paramters.
        url = [url, '&sort=-created_at'].join('');

        var callbacks = self.getAjaxCallback(function () {
          self.removeXhr(xhr);
          resolve.apply(null, arguments);
        }, function () {
          self.removeXhr(xhr);
          reject.apply(null, arguments);
        });

        var xhr = self.createRequest(self, 'GET', url, 'application/vnd.api+json', callbacks);
        self.injectHeaders(xhr, additionalHeaders);
        xhr.send();

        self.addXhr(xhr);
      });
    }

    /**
       *
       *
       * @param {Object}
       * @param {Array} [additionalHeaders] - Additional headers with items {name:String, value:String}
       * @returns {Promise}
       */ }, { key: "postMarkups", value: function postMarkups(
    metadata, additionalHeaders) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.issueType.endpoint].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'POST', url, 'application/vnd.api+json', callbacks);

        self.injectHeaders(xhr, additionalHeaders);

        var body = {
          data: {
            type: self.issueType.value,
            attributes: metadata } };



        xhr.send(JSON.stringify(body));
      }).then(self.parseResponse);
    } }, { key: "fetchOSSBucketForAttachment", value: function fetchOSSBucketForAttachment(

    attachment) {var _this2 = this;
      return new Promise(function (resolve, reject) {
        _this2.fetchLocationForNewOssAttachment([], {
          onLoad: function onLoad(event) {
            var xhr = event.currentTarget;
            if (xhr.status === 201 || xhr.status === 200) {
              // interprete  response and pare oss bucket and key
              // Then fill in attachment.ossPath
              var bucketData = JSON.parse(xhr.responseText);
              attachment.ossPath = bucketData.data.attributes.urn;
              resolve();
            } else {
              reject('Failed fetching OSS Bucket');
            }
          },
          onError: reject,
          onTimeout: reject,
          onAbort: reject });

      });
    } }, { key: "uploadAttachment", value: function uploadAttachment(

    attachment) {var _this3 = this;
      return new Promise(function (resolve, reject) {
        // At this point, oss bucket and key should all be fetched.
        var bucketData = _this3.extractOssBucketAndId(attachment.ossPath);
        var bucketId = bucketData[0];
        var bucketKey = bucketData[1];

        _this3.postAttachment(bucketKey, attachment.data, bucketId, {
          onLoad: function onLoad(event) {
            // Upload attachment successfully.
            var xhr = event.currentTarget;
            if (xhr.status === 200 || xhr.status === 201) {
              resolve();
            } else {
              reject('Failed uploading attachment');
            }
          },
          onError: reject,
          onTimeout: reject,
          onAbort: reject });

      });
    } }, { key: "postLayer", value: function () {var _postLayer = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(

      metadata, markupResources, originalMarkupGuid) {var _this4 = this;var fetchOSSBucketForAttachments, uploadAttachments, postMarkup, numOfRetries, i, result;return regeneratorRuntime.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:
                // Post markup steps,
                // 1. Fetch OSS bucket location.
                // 2. Upload attachment to the OSS bucket.
                // 3. Post markup object.

                fetchOSSBucketForAttachments = function fetchOSSBucketForAttachments() {
                  if (markupResources.length === 0) {
                    return Promise.resolve();
                  }

                  // This is an array of promise
                  var pa = markupResources.map(function (attachment) {
                    return _this4.fetchOSSBucketForAttachment(attachment);
                  });

                  return Promise.all(pa);
                };

                uploadAttachments = function uploadAttachments() {
                  if (markupResources.length === 0) {
                    return Promise.resolve();
                  }

                  var pa = markupResources.map(function (attachment) {
                    return _this4.uploadAttachment(attachment);
                  });

                  return Promise.all(pa);
                };

                postMarkup = function postMarkup() {
                  markupResources.forEach(function (attachment) {
                    metadata.resource_urns[attachment.type] = attachment.ossPath;
                  });

                  if (originalMarkupGuid) {
                    return _this4.updateLayer(originalMarkupGuid, metadata);
                  }

                  return _this4.postMarkups(metadata, []);
                };

                numOfRetries = 3;

                i = 0;case 5:if (!(i < numOfRetries)) {_context.next = 28;break;}_context.prev = 6;_context.next = 9;return (

                  fetchOSSBucketForAttachments());case 9:_context.next = 11;return (
                  uploadAttachments());case 11:_context.next = 13;return (
                  postMarkup());case 13:result = _context.sent;return _context.abrupt("return",
                result);case 17:_context.prev = 17;_context.t0 = _context["catch"](6);

                console.error(_context.t0);if (!(

                numOfRetries === i + 1)) {_context.next = 24;break;}throw _context.t0;case 24:


                console.warn('Retry saving layer.');case 25:i++;_context.next = 5;break;case 28:case "end":return _context.stop();}}}, _callee, null, [[6, 17]]);}));function postLayer(_x, _x2, _x3) {return _postLayer.apply(this, arguments);}return postLayer;}() }, { key: "parseResponse", value: function parseResponse(





    result) {
      try {
        var attachObj = JSON.parse(result);
        var attachData = attachObj.data;

        return Promise.resolve(attachData);
      } catch (e) {
        return Promise.reject(e);
      }
    } }, { key: "publishLayer", value: function publishLayer(

    markupId) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;

      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.issueType.endpoint, '/', markupId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'PATCH', url, 'application/vnd.api+json', callbacks);

        var body = {
          data: {
            type: self.issueType.value,
            id: markupId,
            attributes: {
              status: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_PUBLISHED"] } } };




        xhr.send(JSON.stringify(body));
      }).then(self.parseResponse);
    } }, { key: "archiveLayer", value: function archiveLayer(

    markupId, closeVersion) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;

      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.issueType.endpoint, '/', markupId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'PATCH', url, 'application/vnd.api+json', callbacks);

        var body = {
          data: {
            type: self.issueType.value,
            id: markupId,
            attributes: {
              close_version: closeVersion,
              status: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_0__["MARKUP_STATUS_ARCHIVED"] } } };




        xhr.send(JSON.stringify(body));
      }).then(self.parseResponse);
    } }, { key: "fetchLocationForNewOssAttachment", value: function fetchLocationForNewOssAttachment(

    additionalHeaders, callbacks) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, '/oss_objects'].join('');
      var xhr = this.createRequest(this, 'POST', url, 'application/vnd.api+json', callbacks);
      this.injectHeaders(xhr, additionalHeaders);

      var body = {
        data: {
          type: 'oss_objects' } };



      xhr.send(JSON.stringify(body));

      return null;
    } }, { key: "getAttachment", value: function getAttachment(

    urn, isBinaryData) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var dataParts = self.extractOssBucketAndId(urn);
        var url = [self.OBJECT_STORAGE_SERVICE_URL, 'buckets/', dataParts[0], '/objects/', dataParts[1]].join('');

        var callbacks = self.getAjaxCallback(
        function () {
          self.removeXhr(xhr);
          resolve.apply(null, arguments);
        }, function () {
          self.removeXhr(xhr);
          reject.apply(null, arguments);
        },
        isBinaryData);


        var xhr = self.createRequest(self, 'GET', url, null, callbacks);
        self.injectHeaders(xhr, self.headers);
        if (isBinaryData) {
          xhr.responseType = 'arraybuffer';
        }
        xhr.send();
        self.addXhr(xhr);
      });
    } }, { key: "postAttachment", value: function postAttachment(

    objectKey, fileData, bucketId, callbacks) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var url = [this.OBJECT_STORAGE_SERVICE_URL, 'buckets/', bucketId, '/objects/', objectKey].join('');
      var xhr = this.createRequest(this, 'PUT', url, 'text/plain', callbacks);
      this.injectHeaders(xhr, this.headers);
      xhr.send(fileData);

      return null;
    } }, { key: "updateLayer", value: function updateLayer(

    markupId, updateMarkupAttrs) {var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.issueType.endpoint, '/', markupId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);

        var xhr = self.createRequest(self, 'PATCH', url, 'application/vnd.api+json', callbacks);
        self.injectHeaders(xhr, additionalHeaders);

        var body = {
          data: {
            type: self.issueType.value,
            id: markupId,
            attributes: updateMarkupAttrs || {} } };



        xhr.send(JSON.stringify(body));

        self.addXhr(xhr);
      }).then(self.parseResponse);
    } }, { key: "deleteLayer", value: function deleteLayer(

    layerId) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.ISSUES_TYPE.markup.endpoint + '/', layerId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'DELETE', url, 'application/vnd.api+json', callbacks);

        // no body
        xhr.send();
      });
    } }, { key: "postDocumentAttachment", value: function postDocumentAttachment(

    docAttachment, additionalHeaders) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable.');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.ATTACHMENT.endpoint].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'POST', url, 'application/vnd.api+json', callbacks);

        self.injectHeaders(xhr, additionalHeaders);

        var body = {
          data: {
            type: self.ATTACHMENT.value,
            attributes: docAttachment.attributes } };



        xhr.send(JSON.stringify(body));
      }).then(self.parseResponse);
    } }, { key: "deleteDocumentAttachment", value: function deleteDocumentAttachment(

    docAttachmentId) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.ATTACHMENT.endpoint + '/', docAttachmentId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'DELETE', url, 'application/vnd.api+json', callbacks);

        // no body
        xhr.send();
      });
    } }, { key: "renameDocumentAttachment", value: function renameDocumentAttachment(

    docAttachmentId, newName) {
      if (!this.checkValidation()) {
        return Promise.reject('Service is unavailable');
      }

      var self = this;
      return new Promise(function (resolve, reject) {
        var url = [self.ISSUE_SERVICE_URL, 'containers/', self.options.issueProject, self.ATTACHMENT.endpoint + '/', docAttachmentId].join('');
        var callbacks = self.getAjaxCallback(resolve, reject);
        var xhr = self.createRequest(self, 'PATCH', url, 'application/vnd.api+json', callbacks);

        var body = {
          data: {
            type: self.ATTACHMENT.value,
            id: docAttachmentId,
            attributes: {
              name: newName } } };




        // no body
        xhr.send(JSON.stringify(body));
      }).then(self.parseResponse);
    }

    /**
       * Extracts the bucket id and the attachment id from an OSS URN.
       * @param {String} ossUrn
       * @returns {Array} With values: [ <bucket_id>, <attachment_id> ]
       */ }, { key: "extractOssBucketAndId", value: function extractOssBucketAndId(
    ossUrn) {
      var dataParts = ossUrn.split('/'); // Returns 2 array with 2 elements [ <stuff + bucket_id>, <attachment_id> ]
      var bucketId = dataParts[0]; // Something like 'urn:adsk.objects:os.object:issues'
      var tmpArray = bucketId.split(':'); // We need to get 'issues' at the end.
      dataParts[0] = tmpArray[tmpArray.length - 1];
      return dataParts;
    } }, { key: "cancelAllGet", value: function cancelAllGet()

    {
      // Start cancel all pending xhr calls.
      var count = this.xhrGetReq.length;
      for (var i = count - 1; i >= 0; i--) {
        if (this.xhrGetReq[i]) {
          this.xhrGetReq[i].abort();
        }
      }

      this.xhrGetReq = [];
    } }, { key: "removeXhr", value: function removeXhr(

    xhr) {
      var idx = this.xhrGetReq.indexOf(xhr);
      if (idx > -1) {
        this.xhrGetReq.splice(idx, 1);
      }
    } }, { key: "addXhr", value: function addXhr(

    xhr) {
      this.xhrGetReq.push(xhr);
    } }, { key: "getAccessToken", value: function getAccessToken()

    {
      if (!this.markupsExtension.options.getAccessToken) {
        return;
      }

      var token;

      // getAccessToken calls a synched function in docs-ui-web: https://git.autodesk.com/BIM360/docs-ui-web/blob/055ec7debc3ac81107f13863c59f042bb53d04a2/src/javascripts/services/token_service.js#L36
      // It makes sure that only after the CB is called with an updated token, the rest of the code wil be called.
      // If there is no need to update the token, the current token will be returned.
      this.markupsExtension.options.getAccessToken(function (t, exp) {
        token = t;
      });
      // Will be called only after the updated token is updated:
      return token;
    }

    /**
       * Returns an object compatible with our AJAX callbacks mechanism.
       * Internal usage only.
       *
       * @param {Function} resolve
       * @param {Function} reject
       * @param {Boolean} [isBinaryData] Whether the response is to be binary or not (defaults to not-binary)
       * @returns {{onLoad: Function, onError: Function, onTimeout: Function}}
       */ }, { key: "getAjaxCallback", value: function getAjaxCallback(
    resolve, reject, isBinaryData) {
      return {
        onLoad: function onLoad(event) {
          if (event.currentTarget.status === 201 ||
          event.currentTarget.status === 200 ||
          event.currentTarget.status === 204)
          {
            resolve(isBinaryData ? event.currentTarget.response :
            event.currentTarget.responseText);
          } else {
            reject();
          }
        },
        onError: reject,
        onTimeout: reject,
        onAbort: reject };

    }

    /**
       * Creates a request object to communicate with the issues endpoint.
       * Returned value is ready to initiate async operation through it's send() method
       * (it hasn't been called yet)
       *
       * @param {MarkupService} instance
       * @param {String} operation - POST, GET, DELETE
       * @param {String} url - REST endpoint
       * @param {String} contentType - Content type header
       * @param {Object} callbacks - {onLoad:Function, onError:Function, onTimeout:Function}
       * @returns {XMLHttpRequest}
       */ }, { key: "createRequest", value: function createRequest(
    instance, operation, url, contentType, callbacks) {
      var xhr = new XMLHttpRequest();
      xhr.open(operation, url, true);
      if (contentType) {
        xhr.setRequestHeader('Content-Type', contentType);
      }
      var token = this.getAccessToken();
      xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
      xhr.setRequestHeader('Authorization', 'Bearer ' + token);

      xhr.onload = callbacks.onLoad;
      xhr.onerror = callbacks.onError;
      xhr.ontimeout = callbacks.onTimeout;
      xhr.onabort = callbacks.onAbort;

      return xhr;
    }

    /**
       * Injects additional RequestHeaders before dispatching the async op to the issue endpoint.
       *
       * @param {XMLHttpRequest} xhr
       * @param {Array} additionalHeaders - Additional headers with items {name:String, value:String}
       */ }, { key: "injectHeaders", value: function injectHeaders(
    xhr, additionalHeaders) {
      if (additionalHeaders) {
        additionalHeaders.forEach(function (headerInfo) {
          xhr.setRequestHeader(headerInfo.name, headerInfo.value);
        });
      }
    } }, { key: "ENV_TABLE", get: function get() {return { Local: { ISSUE_SERVICE: 'https://developer-dev.api.autodesk.com/issues-dev/v1/', OBJECT_STORAGE: 'https://developer-dev.api.autodesk.com/oss/v2/' }, Development: { ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-dev/v1/', OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/' }, Qa: { ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-qa/v1/', OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/' }, Staging: { ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-stg/v1/', OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/' }, Production: { ISSUE_SERVICE: 'https://developer.api.autodesk.com/issues/v1/', OBJECT_STORAGE: 'https://developer.api.autodesk.com/oss/v2/' } };} }, { key: "ISSUES_TYPE", get: function get() {return { issue: { value: 'issues', endpoint: '/issues' }, markup: { value: 'markups', endpoint: '/markups' }, area_markup: { value: 'areas', endpoint: '/areas' }, area_status: { value: 'area_statuses', endpoint: '/area-statuses' } };} // This is the endpoint to get generic attachment for either a makrup
    // or an issue.
    // Note: this attachment is used for user explicitly attach any documents
    // to a markup/issue. There is another concept of 'attachment' inside of
    // markup which is part of markup data.
    // So, I will refer to this attachment as DocumentAttachment to eliminate
    // any misread.
  }, { key: "ATTACHMENT", get: function get() {return { value: 'attachments', endpoint: '/attachments' };} }]);return MarkupServiceWeb;}(_MarkupsServiceBase__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Service/MarkupsServiceBase.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/Service/MarkupsServiceBase.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupServiceBase; });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var MarkupServiceBase = /*#__PURE__*/function () {
  function MarkupServiceBase(markupsExtension, options) {_classCallCheck(this, MarkupServiceBase);
    this.markupsExtension = markupsExtension;
    this.options = options || {};
  }_createClass(MarkupServiceBase, [{ key: "postLayer", value: function () {var _postLayer = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(

      metadata, additionalHeaders) {return regeneratorRuntime.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:
                console.log('postLayer');return _context.abrupt("return",

                new Promise(function (resolve, reject) {
                }));case 2:case "end":return _context.stop();}}}, _callee);}));function postLayer(_x, _x2) {return _postLayer.apply(this, arguments);}return postLayer;}() }, { key: "publishLayer", value: function publishLayer(


    markupId) {
      console.log('publishLayer');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "archiveLayer", value: function archiveLayer(

    markupId, closeVersion) {
      console.log('archiveLayer');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "updateLayer", value: function updateLayer(

    guid, metadata) {var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
      console.log('updateLayer');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "deleteLayer", value: function deleteLayer(

    layerId) {
      console.log('deleteLayer');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "postDocumentAttachment", value: function postDocumentAttachment(

    docAttachment, additionalHeaders) {
      console.log('postDocumentAttachment');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "deleteDocumentAttachment", value: function deleteDocumentAttachment(

    docAttachmentId) {
      console.log('deleteDocumentAttachment');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "renameDocumentAttachment", value: function renameDocumentAttachment(

    docAttachmentId, newName) {
      console.log('renameDocumentAttachment');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "requestMarkups", value: function requestMarkups(

    pageLimit, offset, additionalHeaders, statuses) {
      console.log('requestMarkups');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "getAttachment", value: function getAttachment(

    urn, isBinaryData, additionalHeaders) {
      console.log('getAttachment');

      return new Promise(function (resolve, reject) {
      });
    } }, { key: "cancelAllGet", value: function cancelAllGet()

    {
      console.log('cancelAllGet');
    } }]);return MarkupServiceBase;}();

/***/ }),

/***/ "./extensions/BimMarkups/Service/MarkupsServiceMobile.js":
/*!***************************************************************!*\
  !*** ./extensions/BimMarkups/Service/MarkupsServiceMobile.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupServiceMobile; });
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _MarkupsServiceBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupsServiceBase */ "./extensions/BimMarkups/Service/MarkupsServiceBase.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var

MarkupServiceMobile = /*#__PURE__*/function (_MarkupServiceBase) {_inherits(MarkupServiceMobile, _MarkupServiceBase);var _super = _createSuper(MarkupServiceMobile);
  function MarkupServiceMobile(markupsExtension, options) {var _this;_classCallCheck(this, MarkupServiceMobile);
    _this = _super.call(this, markupsExtension, options);

    _this.pendingRequests = {};return _this;
  }_createClass(MarkupServiceMobile, [{ key: "requestMarkups", value: function requestMarkups()

    {
      // For mobile apps, the flow of requesting markups is simpler than in MarkupsServiceWeb.
      // Once the native app gets `markupToolLoaded` callback, it should handle the connection with the backend,
      // and just send us the completed markups using `loadLayers` API.
      this.markupsExtension.mobileCallbacks.markupToolLoaded();

      // This Promise won't get resolved by purpose.
      return new Promise(function (resolve, reject) {});
    } }, { key: "postLayer", value: function postLayer(

    metadata, resources, originalMarkupGuid) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      if (originalMarkupGuid) {
        this.markupsExtension.mobileCallbacks.updateLayer(originalMarkupGuid, metadata, resources, requestId);
      } else {
        this.markupsExtension.mobileCallbacks.postLayer(metadata, resources, requestId);
      }

      return this.returnDelayedPromise(requestId);
    }

    // Used to update metadata only.
  }, { key: "updateLayer", value: function updateLayer(originalMarkupGuid, metadata) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      this.markupsExtension.mobileCallbacks.updateLayer(originalMarkupGuid, metadata);

      return this.returnDelayedPromise(requestId);
    } }, { key: "deleteLayer", value: function deleteLayer(

    guid) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      this.markupsExtension.mobileCallbacks.deleteLayer(guid, requestId);

      return this.returnDelayedPromise(requestId);
    } }, { key: "publishLayer", value: function publishLayer(

    guid) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      this.markupsExtension.mobileCallbacks.publishLayer(guid, requestId);

      return this.returnDelayedPromise(requestId);
    } }, { key: "archiveLayer", value: function archiveLayer(

    guid, closeVersion) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      this.markupsExtension.mobileCallbacks.archiveLayer(guid, closeVersion, requestId);

      return this.returnDelayedPromise(requestId);
    }

    // NOT YET IMPLEMENTED
  }, { key: "postDocumentAttachment", value: function postDocumentAttachment(docAttachment, additionalHeaders) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      // this.markupsExtension.mobileCallbacks.postDocumentAttachment(docAttachment, additionalHeaders);

      return this.returnDelayedPromise(requestId);
    }

    // NOT YET IMPLEMENTED
  }, { key: "deleteDocumentAttachment", value: function deleteDocumentAttachment(docAttachmentId) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      // this.markupsExtension.mobileCallbacks.deleteDocumentAttachment(docAttachmentId);

      return this.returnDelayedPromise(requestId);
    }

    // NOT YET IMPLEMENTED
  }, { key: "renameDocumentAttachment", value: function renameDocumentAttachment(docAttachmentId, newName) {
      var requestId = Object(uuid__WEBPACK_IMPORTED_MODULE_0__["v4"])();

      // this.markupsExtension.mobileCallbacks.renameDocumentAttachment(docAttachmentId, newName);

      return this.returnDelayedPromise(requestId);
    }

    //
    // Private methods.
    //
  }, { key: "cancelAllGet", value: function cancelAllGet()
    {var _this2 = this;
      Object.keys(this.pendingRequests).forEach(function (requestId) {
        _this2.pendingRequests[requestId].reject();
        delete _this2.pendingRequests[requestId];
      });
    }

    // A generic method to return a delayed promise.
    // It is used to wait for the mobile app to return us a result from a backend request.
  }, { key: "returnDelayedPromise", value: function returnDelayedPromise(requestId) {
      var delayedPromise = {};

      var p = new Promise(function (resolve, reject) {
        delayedPromise.resolve = resolve;
        delayedPromise.reject = reject;
      });

      this.pendingRequests[requestId] = delayedPromise;

      return p;
    }

    // Called after the mobile app completed a request from the backend.
    // In case of failure, it is called with isSuccess: false.
  }, { key: "onRequestCompleted", value: function onRequestCompleted(result, isSuccess, requestId) {
      if (!this.pendingRequests[requestId]) {
        return;
      }

      if (isSuccess) {
        this.pendingRequests[requestId].resolve(result);
      } else {
        this.pendingRequests[requestId].reject();
      }

      delete this.pendingRequests[requestId];
    } }]);return MarkupServiceMobile;}(_MarkupsServiceBase__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./extensions/BimMarkups/Service/MarkupsServiceOperator.js":
/*!*****************************************************************!*\
  !*** ./extensions/BimMarkups/Service/MarkupsServiceOperator.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsServiceOperator; });
/* harmony import */ var _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/LodashUtils */ "./extensions/BimMarkups/Utils/LodashUtils.js");
/* harmony import */ var _MarkupServiceWeb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MarkupServiceWeb */ "./extensions/BimMarkups/Service/MarkupServiceWeb.js");
/* harmony import */ var _MarkupsServiceMobile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarkupsServiceMobile */ "./extensions/BimMarkups/Service/MarkupsServiceMobile.js");
/* harmony import */ var _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MarkupsConstants */ "./extensions/BimMarkups/MarkupsConstants.js");
/* harmony import */ var _MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../MarkupsCommon */ "./extensions/BimMarkups/MarkupsCommon.js");
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
/* harmony import */ var _MarkupsSceneState__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../MarkupsSceneState */ "./extensions/BimMarkups/MarkupsSceneState.js");
/* harmony import */ var _MarkupsSerializer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../MarkupsSerializer */ "./extensions/BimMarkups/MarkupsSerializer.js");
/* harmony import */ var _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../MarkupsLayerData */ "./extensions/BimMarkups/MarkupsLayerData.js");
function _toConsumableArray(arr) {return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();}function _nonIterableSpread() {throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _iterableToArray(iter) {if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);}function _arrayWithoutHoles(arr) {if (Array.isArray(arr)) return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}







var

MARKUP_ERRORS = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_ERRORS"];var

MarkupsServiceOperator = /*#__PURE__*/function () {function MarkupsServiceOperator() {_classCallCheck(this, MarkupsServiceOperator);}_createClass(MarkupsServiceOperator, [{ key: "reset", value: function reset(
    markupsExtension) {
      this.markupsExtension = markupsExtension;
      this.markupsManager = markupsExtension.markupsManager;
      this.markupsCache = markupsExtension.markupsCache;
      this.viewer = markupsExtension.viewer;
      this.options = this.markupsExtension.options;

      // Keep track on how many save processes are active.
      this.savingCounter = 0;

      var isMobileApp = markupsExtension.options.isMobileApp;

      var serviceClass = this.options.serviceClass || _MarkupServiceWeb__WEBPACK_IMPORTED_MODULE_1__["default"];
      this.service = isMobileApp ? new _MarkupsServiceMobile__WEBPACK_IMPORTED_MODULE_2__["default"](this.markupsExtension, this.options) : new serviceClass(this.markupsExtension, this.options);

      this.errorHandler = this.options.errorHandler || function () {};

      this.onSessionEndedBinded = this.onSessionEnded.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.onSessionEndedBinded);

      this.onLayerDeletedBinded = this.onLayerDeleted.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_DELETE, this.onLayerDeletedBinded);

      this.onDocumentAttachmentCreationStartBinded = this.onDocumentAttachmentCreationStart.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].DOCUMENT_ATTACHMENT_CREATION_START, this.onDocumentAttachmentCreationStartBinded);

      this.renameDocumentAttachmentBinded = this.renameDocumentAttachment.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].DOCUMENT_ATTACHMENT_RENAME, this.renameDocumentAttachmentBinded);

      this.deleteDocumentAttachmentBinded = this.deleteDocumentAttachment.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].DOCUMENT_ATTACHMENT_DELETE, this.deleteDocumentAttachmentBinded);

      this.onPublishLayerBinded = this.onPublishLayer.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_PUBLISH, this.onPublishLayerBinded);

      this.onArchiveLayerBinded = this.onArchiveLayer.bind(this);
      this.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_ARCHIVE, this.onArchiveLayerBinded);
    } }, { key: "onSessionEnded", value: function onSessionEnded(_ref)

    {var layer = _ref.layer,save = _ref.save;
      if (save && !layer.isEmpty()) {
        this.saveLayer(layer);
      }
    } }, { key: "onLayerDeleted", value: function onLayerDeleted(_ref2)

    {var layerData = _ref2.layerData;
      if (layerData) {
        this.deleteLayer(layerData);
      }
    } }, { key: "onPublishLayer", value: function onPublishLayer(_ref3)

    {var layerData = _ref3.layerData;
      if (layerData) {
        this.publishLayer(layerData);
      }
    } }, { key: "onArchiveLayer", value: function onArchiveLayer(_ref4)

    {var layerData = _ref4.layerData;
      if (layerData) {
        this.archiveLayer(layerData);
      }
    } }, { key: "fetchMarkups", value: function fetchMarkups()

    {var _this = this;
      var urn = this.options.documentUrn;
      this.numOfMarkupsLoaded = 0;

      var maxPageLimit = this.getMaxPageLimit();
      var offset = 0;
      var data = { layersData: [], relatedResources: [] };

      var markupStatusFilter = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_STATUSES_TO_LOAD"];

      var requestFuncRecursive = function requestFuncRecursive() {
        return _this.requestMarkups(data, maxPageLimit, offset, markupStatusFilter).
        then(function (result) {
          if (result && result.nextReq) {
            offset += maxPageLimit;
            return requestFuncRecursive();
          }
        }).catch(function (e) {
          console.warn('requestMarkups failed or canceled.');
        });
      };

      requestFuncRecursive().then(function () {return _this.getMetadata(data, urn);}).catch(function (e) {return e;});
    } }, { key: "requestMarkups", value: function requestMarkups(

    data, pageLimit, offset) {var statuses = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_STATUSES_TO_LOAD"];
      return this.service.requestMarkups(pageLimit, offset, null, statuses).then(function (result) {
        try {var _data$layersData;
          var resultObj = JSON.parse(result);
          (_data$layersData = data.layersData).push.apply(_data$layersData, _toConsumableArray(resultObj.data));

          var included = resultObj.included;
          if (included && Array.isArray(included)) {var _data$relatedResource;
            (_data$relatedResource = data.relatedResources).push.apply(_data$relatedResource, _toConsumableArray(included));
          }

          return Promise.resolve({
            nextReq: resultObj.links.next });

        } catch (e) {
          return Promise.reject(e);
        }
      }, function () {
        return Promise.reject();
      });
    } }, { key: "getMetadata", value: function getMetadata(_ref5,

    urn) {var _this2 = this;var relatedResources = _ref5.relatedResources,layersData = _ref5.layersData;
      // Prioritize downloading current sheet's markups first
      var predicate = function predicate(l) {return Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["isSheetNameEqual"])(l.attributes.markup_metadata.sheetName, _this2.options.sheetName);};

      var currentSheetLayersData = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].remove(layersData, predicate);

      layersData = currentSheetLayersData.concat(layersData);

      layersData.forEach(function (data) {
        var metadata = data.attributes;

        // In case of some bad markup data, do a pre-process to filter out any objects that don't have markup_metadata。
        if (!metadata.markup_metadata) {
          return;
        }

        var startVersion = metadata.starting_version;

        // Filter by version.
        if (_this2.options.documentVersion < startVersion) {
          return;
        }

        metadata.tags = metadata.tags || {};
        var resourceEmbed = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["isTrueValue"])(metadata.tags.resourceEmbed);

        // If layerData already in cache, don't add it again.
        var cachedLayerData = _this2.markupsCache.get(data.id);

        var layerData = cachedLayerData || new _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_8__["default"]();

        if (!cachedLayerData) {
          layerData.guid = data.id;
          layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_OPEN"];
          layerData.metadata = metadata;

          if (metadata.close_version > 0) {
            layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_CLOSED"];
          }

          // If the resources are embedded to markup object, then can retrieve it right away.
          var resources = metadata.resource_urns;

          if (resources) {
            var markupSvgData = _this2.createEmptyResourceObject(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SVG"], resourceEmbed, resources);

            if (markupSvgData) {
              layerData.resources.push(markupSvgData);
            }

            var markupScreenCapture = _this2.createEmptyResourceObject(_MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE"], resourceEmbed, resources);

            if (markupScreenCapture) {
              layerData.resources.push(markupScreenCapture);
            }
          }

          _this2.markupsCache.add(layerData.guid, layerData, urn);
        }

        _this2.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_FETCHED, layerData: layerData });

        _this2.getAttachment(layerData);
      });

      if (!this.fetchedAllMarkups && this.numOfMarkupsLoaded === this.markupsCache.length()) {
        this.fetchedAllMarkups = true;
        this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].ALL_MARKUPS_LOADED, amount: this.numOfMarkupsLoaded });
      }

      this.getUserProfiles();
      this.getProjectUsers();
      this.getRevisions();
      this.getAttachedDocumentData(relatedResources);

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_METADATA_FETCHED });

      return Promise.resolve();
    } }, { key: "notify", value: function notify(

    event) {
      if (this.markupsManager) {
        try {
          this.markupsManager.dispatchEvent(event);
        } catch (error) {
          console.warn(error);
          // Dispatch can fail if a sheet is being changed during loading.
        }
      }
    } }, { key: "getAttachment", value: function getAttachment(

    layerData) {var _this3 = this;
      var pa = layerData.resources.map(function (resource) {
        var result = null;

        // If data already there, then it is either a embed resource or it is already downloaded and cached.
        if (resource.data) {
          result = { layerData: layerData, resourceType: resource.type };
          _this3.onGetAttachment(result);

          return Promise.resolve(result);
        }

        // The thumbnail is in base64 format so not a binary.
        var ossDataType = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["ATTACHMENT_DATA_TYPE_TEXT"];

        // OSS data type is to determine whether the attachment is binary or not.
        var isBinaryData = ossDataType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["ATTACHMENT_DATA_TYPE_BINARY"];

        return _this3.service.getAttachment(resource.ossPath, isBinaryData).then(function (resourceData) {
          if (!resourceData) {
            return Promise.resolve(null);
          }

          resource.data = resourceData;
          result = { layerData: layerData, resourceType: resource.type };
          _this3.onGetAttachment(result);

          return Promise.resolve(result);
        }).catch(function (e) {
          // Request fail or canceled by demand.
        });
      });

      return Promise.all(pa);
    } }, { key: "onGetAttachment", value: function onGetAttachment(

    layerAndAttachType) {var
      layerData = layerAndAttachType.layerData,resourceType = layerAndAttachType.resourceType;

      if (resourceType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SVG"]) {
        this.numOfMarkupsLoaded += 1;

        this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_RESOURCE_FETCHED, layerData: layerData });

        if (!this.fetchedAllMarkups && this.numOfMarkupsLoaded === this.markupsCache.length()) {
          this.fetchedAllMarkups = true;
          this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].ALL_MARKUPS_LOADED, amount: this.numOfMarkupsLoaded });
        }
      }

      if (resourceType === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE"]) {
        this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_THUMBNAIL_FETCHED, layerData: layerData });
      }
    } }, { key: "createEmptyResourceObject", value: function createEmptyResourceObject(

    resourceType, resourceEmbed, resources) {
      if (resources[resourceType]) {
        var markupResource = {
          type: resourceType,
          data: null,
          id: null,
          ossPath: null };


        if (!resourceEmbed) {
          markupResource.ossPath = resources[resourceType];
        } else {
          markupResource.data = resources[resourceType];
        }
        return markupResource;
      }

      return null;
    } }, { key: "getAttachedDocumentData", value: function getAttachedDocumentData(

    attachments) {var _this4 = this;
      if (!attachments || !Array.isArray(attachments) || attachments.length === 0) {
        return;
      }

      if (!this.options.getAttachedDocumentCallback) {
        return;
      }

      var layerDatas = this.markupsCache.getAsList();

      var filteredAttachments = attachments.filter(function (at) {
        return layerDatas.some(function (layerData) {return at.attributes && at.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["LINK_TYPE_ATTACHMENTS"] && layerData.guid === at.attributes.issue_id;});
      });

      if (filteredAttachments.length > 0) {
        this.options.getAttachedDocumentCallback(filteredAttachments, function (response) {
          layerDatas.forEach(function (layerData) {
            if (response) {var _layerData$attachment;
              (_layerData$attachment = layerData.attachments).push.apply(_layerData$attachment, _toConsumableArray(response.filter(function (res) {
                return res.attributes.issue_id === layerData.guid && layerData.attachments.findIndex(function (attachment) {return attachment.id === res.id;}) === -1;
              })));

              layerData.attachments.forEach(function (documentAttachment) {
                _this4.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, layerData: layerData, documentAttachment: documentAttachment });
              });
            }
          });
        });
      }
    } }, { key: "getUserProfiles", value: function getUserProfiles()

    {var _this5 = this;
      // client must provide the callback function
      if (!this.options.getUserProfileCallback) {
        return;
      }


      Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["forAll"])(this.markupsCache.getCache(), function (layerData) {
        var oxygenId = layerData.metadata.created_by;

        if (oxygenId && !layerData.userName) {
          _this5.options.getUserProfileCallback(oxygenId, function (userInfo) {
            // Now only take user name out of the profile
            if (userInfo && userInfo.name) {
              layerData.userName = userInfo.name;
              _this5.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_METADATA_FETCHED });
            }
          });
        }
      });
    } }, { key: "getProjectUsers", value: function getProjectUsers()

    {var _this6 = this;
      // client must provide the callback function
      if (!this.options.getProjectUsersCallback) {
        return;
      }

      var callback = this.options.getProjectUsersCallback;

      callback(function (users) {
        _this6.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].PROJECT_USERS_FETCHED, users: users });
      });
    }

    /**
       * [getRevision: get revision number to an internal wip version on the given document]
       */ }, { key: "getRevisions", value: function getRevisions()
    {var _this7 = this;
      if (!this.options.getRevisionCallback) {
        return;
      }

      // Assume the returned version object is an array that contains
      // map from internal wip version to the revision number.
      this.options.getRevisionCallback(this.options.documentUrn, function (versions) {
        Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["forAll"])(_this7.markupsCache.getCache(), function (layerData) {
          if (!layerData || !layerData.metadata) {
            return;
          }

          var internalVersion = layerData.metadata.starting_version;
          layerData.metadata.tags.starting_revision = versions[internalVersion];
        });

        _this7.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_METADATA_FETCHED });
      });
    } }, { key: "generateMarkupDescription", value: function generateMarkupDescription(

    layer) {
      var description = [];

      layer.getAllMarkups().forEach(function (markup) {
        if (markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_TEXT"] || markup.type === _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_TYPE_CALLOUT"]) {
          description.push(markup.state.text);
        }
      });

      return description.join('.\n');
    } }, { key: "generateMetadata", value: function generateMetadata(

    status, layer) {var _this8 = this;
      var metadata = {};

      metadata.target_urn = this.options.documentUrn;
      metadata.starting_version = this.options.documentVersion;
      metadata.resource_urns = {};

      var sceneState = this.viewer.getState();
      var globalOffset = this.viewer.model ? this.viewer.model.getData().globalOffset : null;

      metadata.markup_metadata = Object(_MarkupsSceneState__WEBPACK_IMPORTED_MODULE_6__["generateSceneMetadata"])(sceneState, globalOffset, this.options);
      metadata.markup_metadata.links = Object(_MarkupsCommon__WEBPACK_IMPORTED_MODULE_4__["getObjectAsList"])(layer.links).map(function (link) {
        var position = link.state.position && link.state.position.clone();

        if (position && _this8.markupsExtension.viewer.model.isPdf(true)) {
          Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(_this8.markupsExtension.viewer, position);
        }

        return {
          id: link.guid,
          type: link.type,
          position: position };

      });

      metadata.description = this.generateMarkupDescription(layer);

      // [Ugly Revision]: record the revision label
      metadata.tags = {
        starting_revision: this.options.documentRevision || this.options.documentVersion };


      // Add collection urn in if specified.
      if (this.options.collectionUrn) {
        metadata.collection_urn = this.options.collectionUrn;
      }

      // Add user name as a tag to markup object, it is a tricky way of quickly getting user's display name
      // when retrieving from server.
      if (this.options.userName) {
        metadata.tags.userName = this.options.userName;
      }

      metadata.status = status;

      // https://jira.autodesk.com/browse/BLMV-2918
      // Update originalDocumentResolution when saving / updating a markup, in order to make sure that the markup will
      // maintain the same position for different DPIs of the same document.
      if (this.viewer.model.isLeaflet()) {
        var modelData = this.viewer.model.getData();var
        loadOptions = modelData.loadOptions.loadOptions;
        metadata.markup_metadata.originalDocumentResolution = [loadOptions.texWidth, loadOptions.texHeight];
      }

      return metadata;
    } }, { key: "saveLayer", value: function saveLayer(

    layer) {var _this9 = this;
      var urn = this.options.documentUrn;
      var isNew = !layer.layerData;
      var tmpId = "".concat(layer.id, "_tmp");
      var layerData = isNew ? new _MarkupsLayerData__WEBPACK_IMPORTED_MODULE_8__["default"]() : layer.layerData;
      var tmpLayerData;

      // 2. Generate markup object
      var metadata = this.generateMetadata(isNew ? this.markupsExtension.getCreationStatusType() : layerData.metadata.status, layer);

      // 3. Get markups data
      var svgResource = {
        type: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SVG"],
        data: Object(_MarkupsSerializer__WEBPACK_IMPORTED_MODULE_7__["generateSVGData"])(layer, this.markupsExtension.viewer, this.markupsExtension.renderer),
        id: null,
        ossPath: null };


      // screen capture
      var screenCaptureData = {
        type: _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE"],
        data: null,
        id: null,
        ossPath: null };


      var resources = [svgResource, screenCaptureData];

      layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_SAVING"];
      layerData.originalCreationTime = isNew ? new Date().toISOString() : metadata.created_at;
      layer.layerData = layerData;

      if (isNew) {
        tmpLayerData = _Utils_LodashUtils__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(layerData);
        tmpLayerData.metadata = metadata;
        tmpLayerData.resources = resources;
        this.markupsCache.add(tmpId, tmpLayerData, urn);
      }
      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCING, layerData: layerData, layer: layer });

      this.savingCounter++;

      this.markupsManager.generateScreenCapture(layer).then(function (img) {
        resources[1].data = img;

        if (!isNew) {
          layerData.resources = resources;
        }

        _this9.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCING, layerData: layerData, layer: layer });

        _this9.service.postLayer(metadata, resources, isNew ? undefined : layer.getGuid()).then(function (result) {
          var guid = result.id;
          layerData.guid = guid;
          layerData.metadata = result.attributes;
          layerData.resources = resources;
          layerData.attachments = layerData.attachments || [];
          layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_SAVE_SUCCEED"];
          _this9.markupsCache.add(guid, layerData, urn);
          layerData.userName = layerData.metadata.tags.userName;
        }).catch(function (e) {
          if (isNew) {
            layer.layerData = null;
          } else {
            layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_SAVE_FAILED"];
          }

          _this9.errorHandler(Autodesk.Viewing.i18n.translate('Failed to save markup'), MARKUP_ERRORS.MARKUP_SAVE_FAILED, e);
          console.error('Failed to save markup', layerData, e);
        }).finally(function () {
          _this9.markupsCache.remove(tmpId, urn);
          _this9.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData, layer: layer });
          _this9.savingCounter--;
        });
      }).catch(function () {
        _this9.savingCounter--;
      });
    }

    // ////////////////////////////////////////////////////////////////////// //
    // Start: Common private method
    // ////////////////////////////////////////////////////////////////////// //
  }, { key: "onDocumentAttachmentCreationStart", value: function onDocumentAttachmentCreationStart(_ref6)
    {var _this10 = this;var documentAttachments = _ref6.documentAttachments,layerData = _ref6.layerData;
      if (documentAttachments.length === 0) {
        return;
      }

      // TODO: at the moment, support save one at a time.
      if (documentAttachments.length > 1) {
        console.error('Dont save multiple attachments at a time.');
        return;
      }

      documentAttachments.forEach(function (at) {
        at.attributes.issue_id = layerData.guid;
        at.attributes.attachment_type = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["LINK_TYPE_DOCUMENT_ATTACHMENT"];
      });

      var documentAttachment = documentAttachments[0];

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCING, documentAttachment: documentAttachment, layerData: layerData });
      this.service.postDocumentAttachment(documentAttachment).then(function (attachment) {
        if (attachment && attachment.attributes && attachment.attributes.issue_id) {
          documentAttachment.attributes = attachment.attributes;
          documentAttachment.id = attachment.id;
          layerData.attachments.splice(0, 0, documentAttachment);
          _this10.markupsManager.createLinkMetadata(layerData);
        }

        _this10.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
      }).catch(function (e) {
        _this10.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
        _this10.errorHandler(Autodesk.Viewing.i18n.translate('Failed to create markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_CREATE_FAILED, e);
        console.error('Failed to create markup attachment', e);
      });
    }

    // ////////////////////////////////////////////////////////////////////// //
    // End: Common private method
    // ////////////////////////////////////////////////////////////////////// //
  }, { key: "deleteDocumentAttachment", value: function deleteDocumentAttachment(_ref7)
    {var _this11 = this;var documentAttachment = _ref7.documentAttachment,layerData = _ref7.layerData;
      documentAttachment.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_ATTACHMENT_DELETEING"];

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCING, documentAttachment: documentAttachment, layerData: layerData });

      this.service.deleteDocumentAttachment(documentAttachment.id).then(function () {
        var docAttachments = layerData.attachments;
        var index = docAttachments.indexOf(documentAttachment);

        if (index > -1) {
          docAttachments.splice(index, 1);
        }
        _this11.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
      }).catch(function (e) {
        _this11.errorHandler(Autodesk.Viewing.i18n.translate('Failed to delete markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_DELETE_FAILED, e);
        _this11.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
      });
    } }, { key: "renameDocumentAttachment", value: function renameDocumentAttachment(_ref8)

    {var _this12 = this;var documentAttachment = _ref8.documentAttachment,newName = _ref8.newName,layerData = _ref8.layerData;
      documentAttachment.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_ATTACHMENT_RENAMING"];
      documentAttachment.tmpName = newName;

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCING, documentAttachment: documentAttachment, layerData: layerData });

      this.service.renameDocumentAttachment(documentAttachment.id, newName).then(function (attachData) {
        documentAttachment.attributes = attachData.attributes;

        documentAttachment.status = undefined;
        documentAttachment.tmpName = undefined;
        _this12.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
      }).catch(function (e) {
        // If rename failed, the name of the attachment will still stay the old one.
        documentAttachment.status = undefined;
        documentAttachment.tmpName = undefined;
        _this12.errorHandler(Autodesk.Viewing.i18n.translate('Failed to rename markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_RENAME_FAILED, e);
        _this12.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LINK_SYNCED, documentAttachment: documentAttachment, layerData: layerData });
      });
    } }, { key: "updateLinkPosition", value: function updateLinkPosition(

    markupGuid, linkId, pos) {var _this13 = this;
      var position = pos.clone();

      if (this.markupsExtension.viewer.model.isPdf(true)) {
        Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(this.markupsExtension.viewer, position);
      }

      var metadata = {
        markup_metadata: {
          links: [{
            id: linkId,
            position: position }] } };




      return this.service.updateLayer(markupGuid, metadata).then(function (attachData) {
        return Promise.resolve(attachData);
      }, function (e) {
        _this13.errorHandler(Autodesk.Viewing.i18n.translate('Failed to update markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_UPDATE_FAILED, e);
        return Promise.reject('Failed to change the link position: ' + linkId);
      });
    } }, { key: "deleteLayer", value: function deleteLayer(

    layerData) {var _this14 = this;
      if (!layerData.guid) {
        // In case the argument is layer's guid.
        layerData = this.markupsCache.get(layerData);
      }

      layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_DELETING"];

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCING, layerData: layerData });

      var urn = this.options.documentUrn;

      return this.service.deleteLayer(layerData.guid).then(function (result) {
        _this14.markupsCache.remove(layerData.guid, urn);
        layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_DELETE_SUCCEED"];
        _this14.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });
        return Promise.resolve(true);
      }, function (e) {
        // Failed to delete the document.
        layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_DELETE_FAILED"];
        _this14.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });
        _this14.errorHandler(Autodesk.Viewing.i18n.translate('Failed to delete markup'), MARKUP_ERRORS.MARKUP_DELETE_FAILED, e);
        return Promise.reject('Failed to delete markup: ' + layerData.guid);
      });
    }

    // WARNING - for develop usage only!!!
  }, { key: "deleteAllLayers", value: function deleteAllLayers() {var _this15 = this;
      this.markupsCache.getAsList().forEach(function (layer) {
        _this15.deleteLayer(layer);
      });
    } }, { key: "publishLayer", value: function publishLayer(

    layerData) {var _this16 = this;
      if (!layerData.guid) {
        // In case the argument is layer's guid.
        layerData = this.markupsCache.get(layerData);
      }

      var prevStatus = layerData.status;
      layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_PUBLISHING"];

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCING, layerData: layerData });
      this.service.publishLayer(layerData.guid).then(function (updatedMetadata) {
        // Update local markup data
        layerData.status = prevStatus;
        layerData.metadata = updatedMetadata.attributes;
        _this16.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });
        return Promise.resolve();
      }).catch(function (e) {
        // Fail to publish layer
        layerData.status = prevStatus;
        _this16.errorHandler(Autodesk.Viewing.i18n.translate('Failed to publish markup'), MARKUP_ERRORS.MARKUP_PUBLISH_FAILED, e);
        _this16.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });
      });
    } }, { key: "archiveLayer", value: function archiveLayer(

    layerData) {var _this17 = this;
      if (!layerData.guid) {
        // In case the argument is layer's guid.
        layerData = this.markupsCache.get(layerData);
      }

      var prevStatus = layerData.status;
      layerData.status = _MarkupsConstants__WEBPACK_IMPORTED_MODULE_3__["MARKUP_STATUS_ARCHIVING"];

      this.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCING, layerData: layerData });
      this.service.archiveLayer(layerData.guid, this.options.currentRawDocumentVersion).then(function (updatedMetadata) {
        layerData.status = prevStatus;
        layerData.metadata = updatedMetadata.attributes;

        _this17.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });

        return Promise.resolve();
      }).catch(function (e) {
        // Fail to archive layer
        layerData.status = prevStatus;
        _this17.errorHandler(Autodesk.Viewing.i18n.translate('Failed to archive markup'), MARKUP_ERRORS.MARKUP_ARCHIVE_FAILED, e);
        _this17.notify({ type: _MarkupsEvents__WEBPACK_IMPORTED_MODULE_5__["MARKUPS_EVENTS"].LAYER_SYNCED, layerData: layerData });
      });
    } }, { key: "cancelRequests", value: function cancelRequests()

    {
      this.service.cancelAllGet();
    } }, { key: "terminate", value: function terminate()

    {
      this.cancelRequests();

      this.markupsExtension = null;
      this.markupsManager = null;
      this.service = null;
    } }, { key: "getMaxPageLimit", value: function getMaxPageLimit()

    {
      return this.service.maxPageLimit;
    } }]);return MarkupsServiceOperator;}();

/***/ }),

/***/ "./extensions/BimMarkups/ThirdParty/html2canvas/html2canvas.js":
/*!*********************************************************************!*\
  !*** ./extensions/BimMarkups/ThirdParty/html2canvas/html2canvas.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);} /*!
                                                                                                                                                                                                                                                                                                                                                                                * html2canvas 1.0.0-alpha.12 <https://html2canvas.hertzen.com>
                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2018 Niklas von Hertzen <https://hertzen.com>
                                                                                                                                                                                                                                                                                                                                                                                * Released under MIT License
                                                                                                                                                                                                                                                                                                                                                                                */
(function webpackUniversalModuleDefinition(root, factory) {
  if (( false ? undefined : _typeof(exports)) === 'object' && ( false ? undefined : _typeof(module)) === 'object')
  module.exports = factory();else
  if (true)
  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else
  {}
})(this, function () {
  return (/******/function (modules) {// webpackBootstrap
      /******/ // The module cache
      /******/var installedModules = {};
      /******/
      /******/ // The require function
      /******/function __webpack_require__(moduleId) {
        /******/
        /******/ // Check if module is in cache
        /******/if (installedModules[moduleId]) {
          /******/return installedModules[moduleId].exports;
          /******/}
        /******/ // Create a new module (and put it into the cache)
        /******/var module = installedModules[moduleId] = {
          /******/i: moduleId,
          /******/l: false,
          /******/exports: {}
          /******/ };
        /******/
        /******/ // Execute the module function
        /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
        /******/
        /******/ // Flag the module as loaded
        /******/module.l = true;
        /******/
        /******/ // Return the exports of the module
        /******/return module.exports;
        /******/}
      /******/
      /******/
      /******/ // expose the modules object (__webpack_modules__)
      /******/__webpack_require__.m = modules;
      /******/
      /******/ // expose the module cache
      /******/__webpack_require__.c = installedModules;
      /******/
      /******/ // define getter function for harmony exports
      /******/__webpack_require__.d = function (exports, name, getter) {
        /******/if (!__webpack_require__.o(exports, name)) {
          /******/Object.defineProperty(exports, name, {
            /******/configurable: false,
            /******/enumerable: true,
            /******/get: getter
            /******/ });
          /******/}
        /******/};
      /******/
      /******/ // getDefaultExport function for compatibility with non-harmony modules
      /******/__webpack_require__.n = function (module) {
        /******/var getter = module && module.__esModule ?
        /******/function getDefault() {return module['default'];} :
        /******/function getModuleExports() {return module;};
        /******/__webpack_require__.d(getter, 'a', getter);
        /******/return getter;
        /******/};
      /******/
      /******/ // Object.prototype.hasOwnProperty.call
      /******/__webpack_require__.o = function (object, property) {return Object.prototype.hasOwnProperty.call(object, property);};
      /******/
      /******/ // __webpack_public_path__
      /******/__webpack_require__.p = "";
      /******/
      /******/ // Load entry module and return exports
      /******/return __webpack_require__(__webpack_require__.s = 27);
      /******/}(
    /************************************************************************/
    /******/[
    /* 0 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      // http://dev.w3.org/csswg/css-color/

      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var HEX3 = /^#([a-f0-9]{3})$/i;
      var hex3 = function hex3(value) {
        var match = value.match(HEX3);
        if (match) {
          return [parseInt(match[1][0] + match[1][0], 16), parseInt(match[1][1] + match[1][1], 16), parseInt(match[1][2] + match[1][2], 16), null];
        }
        return false;
      };

      var HEX6 = /^#([a-f0-9]{6})$/i;
      var hex6 = function hex6(value) {
        var match = value.match(HEX6);
        if (match) {
          return [parseInt(match[1].substring(0, 2), 16), parseInt(match[1].substring(2, 4), 16), parseInt(match[1].substring(4, 6), 16), null];
        }
        return false;
      };

      var RGB = /^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;
      var rgb = function rgb(value) {
        var match = value.match(RGB);
        if (match) {
          return [Number(match[1]), Number(match[2]), Number(match[3]), null];
        }
        return false;
      };

      var RGBA = /^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;
      var rgba = function rgba(value) {
        var match = value.match(RGBA);
        if (match && match.length > 4) {
          return [Number(match[1]), Number(match[2]), Number(match[3]), Number(match[4])];
        }
        return false;
      };

      var fromArray = function fromArray(array) {
        return [Math.min(array[0], 255), Math.min(array[1], 255), Math.min(array[2], 255), array.length > 3 ? array[3] : null];
      };

      var namedColor = function namedColor(name) {
        var color = NAMED_COLORS[name.toLowerCase()];
        return color ? color : false;
      };

      var Color = function () {
        function Color(value) {
          _classCallCheck(this, Color);

          var _ref = Array.isArray(value) ? fromArray(value) : hex3(value) || rgb(value) || rgba(value) || namedColor(value) || hex6(value) || [0, 0, 0, null],
          _ref2 = _slicedToArray(_ref, 4),
          r = _ref2[0],
          g = _ref2[1],
          b = _ref2[2],
          a = _ref2[3];

          this.r = r;
          this.g = g;
          this.b = b;
          this.a = a;
        }

        _createClass(Color, [{
          key: 'isTransparent',
          value: function isTransparent() {
            return this.a === 0;
          } },
        {
          key: 'toString',
          value: function toString() {
            return this.a !== null && this.a !== 1 ? 'rgba(' + this.r + ',' + this.g + ',' + this.b + ',' + this.a + ')' : 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';
          } }]);


        return Color;
      }();

      exports.default = Color;


      var NAMED_COLORS = {
        transparent: [0, 0, 0, 0],
        aliceblue: [240, 248, 255, null],
        antiquewhite: [250, 235, 215, null],
        aqua: [0, 255, 255, null],
        aquamarine: [127, 255, 212, null],
        azure: [240, 255, 255, null],
        beige: [245, 245, 220, null],
        bisque: [255, 228, 196, null],
        black: [0, 0, 0, null],
        blanchedalmond: [255, 235, 205, null],
        blue: [0, 0, 255, null],
        blueviolet: [138, 43, 226, null],
        brown: [165, 42, 42, null],
        burlywood: [222, 184, 135, null],
        cadetblue: [95, 158, 160, null],
        chartreuse: [127, 255, 0, null],
        chocolate: [210, 105, 30, null],
        coral: [255, 127, 80, null],
        cornflowerblue: [100, 149, 237, null],
        cornsilk: [255, 248, 220, null],
        crimson: [220, 20, 60, null],
        cyan: [0, 255, 255, null],
        darkblue: [0, 0, 139, null],
        darkcyan: [0, 139, 139, null],
        darkgoldenrod: [184, 134, 11, null],
        darkgray: [169, 169, 169, null],
        darkgreen: [0, 100, 0, null],
        darkgrey: [169, 169, 169, null],
        darkkhaki: [189, 183, 107, null],
        darkmagenta: [139, 0, 139, null],
        darkolivegreen: [85, 107, 47, null],
        darkorange: [255, 140, 0, null],
        darkorchid: [153, 50, 204, null],
        darkred: [139, 0, 0, null],
        darksalmon: [233, 150, 122, null],
        darkseagreen: [143, 188, 143, null],
        darkslateblue: [72, 61, 139, null],
        darkslategray: [47, 79, 79, null],
        darkslategrey: [47, 79, 79, null],
        darkturquoise: [0, 206, 209, null],
        darkviolet: [148, 0, 211, null],
        deeppink: [255, 20, 147, null],
        deepskyblue: [0, 191, 255, null],
        dimgray: [105, 105, 105, null],
        dimgrey: [105, 105, 105, null],
        dodgerblue: [30, 144, 255, null],
        firebrick: [178, 34, 34, null],
        floralwhite: [255, 250, 240, null],
        forestgreen: [34, 139, 34, null],
        fuchsia: [255, 0, 255, null],
        gainsboro: [220, 220, 220, null],
        ghostwhite: [248, 248, 255, null],
        gold: [255, 215, 0, null],
        goldenrod: [218, 165, 32, null],
        gray: [128, 128, 128, null],
        green: [0, 128, 0, null],
        greenyellow: [173, 255, 47, null],
        grey: [128, 128, 128, null],
        honeydew: [240, 255, 240, null],
        hotpink: [255, 105, 180, null],
        indianred: [205, 92, 92, null],
        indigo: [75, 0, 130, null],
        ivory: [255, 255, 240, null],
        khaki: [240, 230, 140, null],
        lavender: [230, 230, 250, null],
        lavenderblush: [255, 240, 245, null],
        lawngreen: [124, 252, 0, null],
        lemonchiffon: [255, 250, 205, null],
        lightblue: [173, 216, 230, null],
        lightcoral: [240, 128, 128, null],
        lightcyan: [224, 255, 255, null],
        lightgoldenrodyellow: [250, 250, 210, null],
        lightgray: [211, 211, 211, null],
        lightgreen: [144, 238, 144, null],
        lightgrey: [211, 211, 211, null],
        lightpink: [255, 182, 193, null],
        lightsalmon: [255, 160, 122, null],
        lightseagreen: [32, 178, 170, null],
        lightskyblue: [135, 206, 250, null],
        lightslategray: [119, 136, 153, null],
        lightslategrey: [119, 136, 153, null],
        lightsteelblue: [176, 196, 222, null],
        lightyellow: [255, 255, 224, null],
        lime: [0, 255, 0, null],
        limegreen: [50, 205, 50, null],
        linen: [250, 240, 230, null],
        magenta: [255, 0, 255, null],
        maroon: [128, 0, 0, null],
        mediumaquamarine: [102, 205, 170, null],
        mediumblue: [0, 0, 205, null],
        mediumorchid: [186, 85, 211, null],
        mediumpurple: [147, 112, 219, null],
        mediumseagreen: [60, 179, 113, null],
        mediumslateblue: [123, 104, 238, null],
        mediumspringgreen: [0, 250, 154, null],
        mediumturquoise: [72, 209, 204, null],
        mediumvioletred: [199, 21, 133, null],
        midnightblue: [25, 25, 112, null],
        mintcream: [245, 255, 250, null],
        mistyrose: [255, 228, 225, null],
        moccasin: [255, 228, 181, null],
        navajowhite: [255, 222, 173, null],
        navy: [0, 0, 128, null],
        oldlace: [253, 245, 230, null],
        olive: [128, 128, 0, null],
        olivedrab: [107, 142, 35, null],
        orange: [255, 165, 0, null],
        orangered: [255, 69, 0, null],
        orchid: [218, 112, 214, null],
        palegoldenrod: [238, 232, 170, null],
        palegreen: [152, 251, 152, null],
        paleturquoise: [175, 238, 238, null],
        palevioletred: [219, 112, 147, null],
        papayawhip: [255, 239, 213, null],
        peachpuff: [255, 218, 185, null],
        peru: [205, 133, 63, null],
        pink: [255, 192, 203, null],
        plum: [221, 160, 221, null],
        powderblue: [176, 224, 230, null],
        purple: [128, 0, 128, null],
        rebeccapurple: [102, 51, 153, null],
        red: [255, 0, 0, null],
        rosybrown: [188, 143, 143, null],
        royalblue: [65, 105, 225, null],
        saddlebrown: [139, 69, 19, null],
        salmon: [250, 128, 114, null],
        sandybrown: [244, 164, 96, null],
        seagreen: [46, 139, 87, null],
        seashell: [255, 245, 238, null],
        sienna: [160, 82, 45, null],
        silver: [192, 192, 192, null],
        skyblue: [135, 206, 235, null],
        slateblue: [106, 90, 205, null],
        slategray: [112, 128, 144, null],
        slategrey: [112, 128, 144, null],
        snow: [255, 250, 250, null],
        springgreen: [0, 255, 127, null],
        steelblue: [70, 130, 180, null],
        tan: [210, 180, 140, null],
        teal: [0, 128, 128, null],
        thistle: [216, 191, 216, null],
        tomato: [255, 99, 71, null],
        turquoise: [64, 224, 208, null],
        violet: [238, 130, 238, null],
        wheat: [245, 222, 179, null],
        white: [255, 255, 255, null],
        whitesmoke: [245, 245, 245, null],
        yellow: [255, 255, 0, null],
        yellowgreen: [154, 205, 50, null] };


      var TRANSPARENT = exports.TRANSPARENT = new Color([0, 0, 0, 0]);

      /***/},
    /* 1 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.calculateLengthFromValueWithUnit = exports.LENGTH_TYPE = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var LENGTH_WITH_UNIT = /([\d.]+)(px|r?em|%)/i;

      var LENGTH_TYPE = exports.LENGTH_TYPE = {
        PX: 0,
        PERCENTAGE: 1 };


      var Length = function () {
        function Length(value) {
          _classCallCheck(this, Length);

          this.type = value.substr(value.length - 1) === '%' ? LENGTH_TYPE.PERCENTAGE : LENGTH_TYPE.PX;
          var parsedValue = parseFloat(value);
          if ( true && isNaN(parsedValue)) {
            console.error('Invalid value given for Length: "' + value + '"');
          }
          this.value = isNaN(parsedValue) ? 0 : parsedValue;
        }

        _createClass(Length, [{
          key: 'isPercentage',
          value: function isPercentage() {
            return this.type === LENGTH_TYPE.PERCENTAGE;
          } },
        {
          key: 'getAbsoluteValue',
          value: function getAbsoluteValue(parentLength) {
            return this.isPercentage() ? parentLength * (this.value / 100) : this.value;
          } }],
        [{
          key: 'create',
          value: function create(v) {
            return new Length(v);
          } }]);


        return Length;
      }();

      exports.default = Length;


      var getRootFontSize = function getRootFontSize(container) {
        var parent = container.parent;
        return parent ? getRootFontSize(parent) : parseFloat(container.style.font.fontSize);
      };

      var calculateLengthFromValueWithUnit = exports.calculateLengthFromValueWithUnit = function calculateLengthFromValueWithUnit(container, value, unit) {
        switch (unit) {
          case 'px':
          case '%':
            return new Length(value + unit);
          case 'em':
          case 'rem':
            var length = new Length(value);
            length.value *= unit === 'em' ? parseFloat(container.style.font.fontSize) : getRootFontSize(container);
            return length;
          default:
            // TODO: handle correctly if unknown unit is used
            return new Length('0');}

      };

      /***/},
    /* 2 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseBoundCurves = exports.calculatePaddingBoxPath = exports.calculateBorderBoxPath = exports.parsePathForBorder = exports.parseDocumentSize = exports.calculateContentBox = exports.calculatePaddingBox = exports.parseBounds = exports.Bounds = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Vector = __webpack_require__(7);

      var _Vector2 = _interopRequireDefault(_Vector);

      var _BezierCurve = __webpack_require__(32);

      var _BezierCurve2 = _interopRequireDefault(_BezierCurve);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var TOP = 0;
      var RIGHT = 1;
      var BOTTOM = 2;
      var LEFT = 3;

      var H = 0;
      var V = 1;

      var Bounds = exports.Bounds = function () {
        function Bounds(x, y, w, h) {
          _classCallCheck(this, Bounds);

          this.left = x;
          this.top = y;
          this.width = w;
          this.height = h;
        }

        _createClass(Bounds, null, [{
          key: 'fromClientRect',
          value: function fromClientRect(clientRect, scrollX, scrollY) {
            return new Bounds(clientRect.left + scrollX, clientRect.top + scrollY, clientRect.width, clientRect.height);
          } }]);


        return Bounds;
      }();

      var parseBounds = exports.parseBounds = function parseBounds(node, scrollX, scrollY) {
        return Bounds.fromClientRect(node.getBoundingClientRect(), scrollX, scrollY);
      };

      var calculatePaddingBox = exports.calculatePaddingBox = function calculatePaddingBox(bounds, borders) {
        return new Bounds(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth, bounds.width - (borders[RIGHT].borderWidth + borders[LEFT].borderWidth), bounds.height - (borders[TOP].borderWidth + borders[BOTTOM].borderWidth));
      };

      var calculateContentBox = exports.calculateContentBox = function calculateContentBox(bounds, padding, borders) {
        // TODO support percentage paddings
        var paddingTop = padding[TOP].value;
        var paddingRight = padding[RIGHT].value;
        var paddingBottom = padding[BOTTOM].value;
        var paddingLeft = padding[LEFT].value;

        return new Bounds(bounds.left + paddingLeft + borders[LEFT].borderWidth, bounds.top + paddingTop + borders[TOP].borderWidth, bounds.width - (borders[RIGHT].borderWidth + borders[LEFT].borderWidth + paddingLeft + paddingRight), bounds.height - (borders[TOP].borderWidth + borders[BOTTOM].borderWidth + paddingTop + paddingBottom));
      };

      var parseDocumentSize = exports.parseDocumentSize = function parseDocumentSize(document) {
        var body = document.body;
        var documentElement = document.documentElement;

        if (!body || !documentElement) {
          throw new Error(true ? 'Unable to get document size' : undefined);
        }
        var width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));

        var height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));

        return new Bounds(0, 0, width, height);
      };

      var parsePathForBorder = exports.parsePathForBorder = function parsePathForBorder(curves, borderSide) {
        switch (borderSide) {
          case TOP:
            return createPathFromCurves(curves.topLeftOuter, curves.topLeftInner, curves.topRightOuter, curves.topRightInner);
          case RIGHT:
            return createPathFromCurves(curves.topRightOuter, curves.topRightInner, curves.bottomRightOuter, curves.bottomRightInner);
          case BOTTOM:
            return createPathFromCurves(curves.bottomRightOuter, curves.bottomRightInner, curves.bottomLeftOuter, curves.bottomLeftInner);
          case LEFT:
          default:
            return createPathFromCurves(curves.bottomLeftOuter, curves.bottomLeftInner, curves.topLeftOuter, curves.topLeftInner);}

      };

      var createPathFromCurves = function createPathFromCurves(outer1, inner1, outer2, inner2) {
        var path = [];
        if (outer1 instanceof _BezierCurve2.default) {
          path.push(outer1.subdivide(0.5, false));
        } else {
          path.push(outer1);
        }

        if (outer2 instanceof _BezierCurve2.default) {
          path.push(outer2.subdivide(0.5, true));
        } else {
          path.push(outer2);
        }

        if (inner2 instanceof _BezierCurve2.default) {
          path.push(inner2.subdivide(0.5, true).reverse());
        } else {
          path.push(inner2);
        }

        if (inner1 instanceof _BezierCurve2.default) {
          path.push(inner1.subdivide(0.5, false).reverse());
        } else {
          path.push(inner1);
        }

        return path;
      };

      var calculateBorderBoxPath = exports.calculateBorderBoxPath = function calculateBorderBoxPath(curves) {
        return [curves.topLeftOuter, curves.topRightOuter, curves.bottomRightOuter, curves.bottomLeftOuter];
      };

      var calculatePaddingBoxPath = exports.calculatePaddingBoxPath = function calculatePaddingBoxPath(curves) {
        return [curves.topLeftInner, curves.topRightInner, curves.bottomRightInner, curves.bottomLeftInner];
      };

      var parseBoundCurves = exports.parseBoundCurves = function parseBoundCurves(bounds, borders, borderRadius) {
        var tlh = borderRadius[CORNER.TOP_LEFT][H].getAbsoluteValue(bounds.width);
        var tlv = borderRadius[CORNER.TOP_LEFT][V].getAbsoluteValue(bounds.height);
        var trh = borderRadius[CORNER.TOP_RIGHT][H].getAbsoluteValue(bounds.width);
        var trv = borderRadius[CORNER.TOP_RIGHT][V].getAbsoluteValue(bounds.height);
        var brh = borderRadius[CORNER.BOTTOM_RIGHT][H].getAbsoluteValue(bounds.width);
        var brv = borderRadius[CORNER.BOTTOM_RIGHT][V].getAbsoluteValue(bounds.height);
        var blh = borderRadius[CORNER.BOTTOM_LEFT][H].getAbsoluteValue(bounds.width);
        var blv = borderRadius[CORNER.BOTTOM_LEFT][V].getAbsoluteValue(bounds.height);

        var factors = [];
        factors.push((tlh + trh) / bounds.width);
        factors.push((blh + brh) / bounds.width);
        factors.push((tlv + blv) / bounds.height);
        factors.push((trv + brv) / bounds.height);
        var maxFactor = Math.max.apply(Math, factors);

        if (maxFactor > 1) {
          tlh /= maxFactor;
          tlv /= maxFactor;
          trh /= maxFactor;
          trv /= maxFactor;
          brh /= maxFactor;
          brv /= maxFactor;
          blh /= maxFactor;
          blv /= maxFactor;
        }

        var topWidth = bounds.width - trh;
        var rightHeight = bounds.height - brv;
        var bottomWidth = bounds.width - brh;
        var leftHeight = bounds.height - blv;

        return {
          topLeftOuter: tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT) : new _Vector2.default(bounds.left, bounds.top),
          topLeftInner: tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth, Math.max(0, tlh - borders[LEFT].borderWidth), Math.max(0, tlv - borders[TOP].borderWidth), CORNER.TOP_LEFT) : new _Vector2.default(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth),
          topRightOuter: trh > 0 || trv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT) : new _Vector2.default(bounds.left + bounds.width, bounds.top),
          topRightInner: trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borders[LEFT].borderWidth), bounds.top + borders[TOP].borderWidth, topWidth > bounds.width + borders[LEFT].borderWidth ? 0 : trh - borders[LEFT].borderWidth, trv - borders[TOP].borderWidth, CORNER.TOP_RIGHT) : new _Vector2.default(bounds.left + bounds.width - borders[RIGHT].borderWidth, bounds.top + borders[TOP].borderWidth),
          bottomRightOuter: brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT) : new _Vector2.default(bounds.left + bounds.width, bounds.top + bounds.height),
          bottomRightInner: brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borders[LEFT].borderWidth), bounds.top + Math.min(rightHeight, bounds.height + borders[TOP].borderWidth), Math.max(0, brh - borders[RIGHT].borderWidth), brv - borders[BOTTOM].borderWidth, CORNER.BOTTOM_RIGHT) : new _Vector2.default(bounds.left + bounds.width - borders[RIGHT].borderWidth, bounds.top + bounds.height - borders[BOTTOM].borderWidth),
          bottomLeftOuter: blh > 0 || blv > 0 ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT) : new _Vector2.default(bounds.left, bounds.top + bounds.height),
          bottomLeftInner: blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borders[LEFT].borderWidth, bounds.top + leftHeight, Math.max(0, blh - borders[LEFT].borderWidth), blv - borders[BOTTOM].borderWidth, CORNER.BOTTOM_LEFT) : new _Vector2.default(bounds.left + borders[LEFT].borderWidth, bounds.top + bounds.height - borders[BOTTOM].borderWidth) };

      };

      var CORNER = {
        TOP_LEFT: 0,
        TOP_RIGHT: 1,
        BOTTOM_RIGHT: 2,
        BOTTOM_LEFT: 3 };


      var getCurvePoints = function getCurvePoints(x, y, r1, r2, position) {
        var kappa = 4 * ((Math.sqrt(2) - 1) / 3);
        var ox = r1 * kappa; // control point offset horizontal
        var oy = r2 * kappa; // control point offset vertical
        var xm = x + r1; // x-middle
        var ym = y + r2; // y-middle

        switch (position) {
          case CORNER.TOP_LEFT:
            return new _BezierCurve2.default(new _Vector2.default(x, ym), new _Vector2.default(x, ym - oy), new _Vector2.default(xm - ox, y), new _Vector2.default(xm, y));
          case CORNER.TOP_RIGHT:
            return new _BezierCurve2.default(new _Vector2.default(x, y), new _Vector2.default(x + ox, y), new _Vector2.default(xm, ym - oy), new _Vector2.default(xm, ym));
          case CORNER.BOTTOM_RIGHT:
            return new _BezierCurve2.default(new _Vector2.default(xm, y), new _Vector2.default(xm, y + oy), new _Vector2.default(x + ox, ym), new _Vector2.default(x, ym));
          case CORNER.BOTTOM_LEFT:
          default:
            return new _BezierCurve2.default(new _Vector2.default(xm, ym), new _Vector2.default(xm - ox, ym), new _Vector2.default(x, y + oy), new _Vector2.default(x, y));}

      };

      /***/},
    /* 3 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      var _Util = __webpack_require__(4);

      var _background = __webpack_require__(5);

      var _border = __webpack_require__(12);

      var _borderRadius = __webpack_require__(33);

      var _display = __webpack_require__(34);

      var _float = __webpack_require__(35);

      var _font = __webpack_require__(36);

      var _letterSpacing = __webpack_require__(37);

      var _lineBreak = __webpack_require__(38);

      var _listStyle = __webpack_require__(8);

      var _margin = __webpack_require__(39);

      var _overflow = __webpack_require__(40);

      var _overflowWrap = __webpack_require__(18);

      var _padding = __webpack_require__(17);

      var _position = __webpack_require__(19);

      var _textDecoration = __webpack_require__(11);

      var _textShadow = __webpack_require__(41);

      var _textTransform = __webpack_require__(20);

      var _transform = __webpack_require__(42);

      var _visibility = __webpack_require__(43);

      var _wordBreak = __webpack_require__(44);

      var _zIndex = __webpack_require__(45);

      var _Bounds = __webpack_require__(2);

      var _Input = __webpack_require__(21);

      var _ListItem = __webpack_require__(14);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];

      var NodeContainer = function () {
        function NodeContainer(node, parent, resourceLoader, index) {
          var _this = this;

          _classCallCheck(this, NodeContainer);

          this.parent = parent;
          this.tagName = node.tagName;
          this.index = index;
          this.childNodes = [];
          this.listItems = [];
          if (typeof node.start === 'number') {
            this.listStart = node.start;
          }
          var defaultView = node.ownerDocument.defaultView;
          var scrollX = defaultView.pageXOffset;
          var scrollY = defaultView.pageYOffset;
          var style = defaultView.getComputedStyle(node, null);
          var display = (0, _display.parseDisplay)(style.display);

          var IS_INPUT = node.type === 'radio' || node.type === 'checkbox';

          var position = (0, _position.parsePosition)(style.position);

          this.style = {
            background: IS_INPUT ? _Input.INPUT_BACKGROUND : (0, _background.parseBackground)(style, resourceLoader),
            border: IS_INPUT ? _Input.INPUT_BORDERS : (0, _border.parseBorder)(style),
            borderRadius: (node instanceof defaultView.HTMLInputElement || node instanceof HTMLInputElement) && IS_INPUT ? (0, _Input.getInputBorderRadius)(node) : (0, _borderRadius.parseBorderRadius)(style),
            color: IS_INPUT ? _Input.INPUT_COLOR : new _Color2.default(style.color),
            display: display,
            float: (0, _float.parseCSSFloat)(style.float),
            font: (0, _font.parseFont)(style),
            letterSpacing: (0, _letterSpacing.parseLetterSpacing)(style.letterSpacing),
            listStyle: display === _display.DISPLAY.LIST_ITEM ? (0, _listStyle.parseListStyle)(style) : null,
            lineBreak: (0, _lineBreak.parseLineBreak)(style.lineBreak),
            margin: (0, _margin.parseMargin)(style),
            opacity: parseFloat(style.opacity),
            overflow: INPUT_TAGS.indexOf(node.tagName) === -1 ? (0, _overflow.parseOverflow)(style.overflow) : _overflow.OVERFLOW.HIDDEN,
            overflowWrap: (0, _overflowWrap.parseOverflowWrap)(style.overflowWrap ? style.overflowWrap : style.wordWrap),
            padding: (0, _padding.parsePadding)(style),
            position: position,
            textDecoration: (0, _textDecoration.parseTextDecoration)(style),
            textShadow: (0, _textShadow.parseTextShadow)(style.textShadow),
            textTransform: (0, _textTransform.parseTextTransform)(style.textTransform),
            transform: (0, _transform.parseTransform)(style),
            visibility: (0, _visibility.parseVisibility)(style.visibility),
            wordBreak: (0, _wordBreak.parseWordBreak)(style.wordBreak),
            zIndex: (0, _zIndex.parseZIndex)(position !== _position.POSITION.STATIC ? style.zIndex : 'auto') };


          if (this.isTransformed()) {
            // getBoundingClientRect provides values post-transform, we want them without the transformation
            node.style.transform = 'matrix(1,0,0,1,0,0)';
          }

          if (display === _display.DISPLAY.LIST_ITEM) {
            var listOwner = (0, _ListItem.getListOwner)(this);
            if (listOwner) {
              var listIndex = listOwner.listItems.length;
              listOwner.listItems.push(this);
              this.listIndex = node.hasAttribute('value') && typeof node.value === 'number' ? node.value : listIndex === 0 ? typeof listOwner.listStart === 'number' ? listOwner.listStart : 1 : listOwner.listItems[listIndex - 1].listIndex + 1;
            }
          }

          // TODO move bound retrieval for all nodes to a later stage?
          if (node.tagName === 'IMG') {
            node.addEventListener('load', function () {
              _this.bounds = (0, _Bounds.parseBounds)(node, scrollX, scrollY);
              _this.curvedBounds = (0, _Bounds.parseBoundCurves)(_this.bounds, _this.style.border, _this.style.borderRadius);
            });
          }
          this.image = getImage(node, resourceLoader);
          this.bounds = IS_INPUT ? (0, _Input.reformatInputBounds)((0, _Bounds.parseBounds)(node, scrollX, scrollY)) : (0, _Bounds.parseBounds)(node, scrollX, scrollY);
          this.curvedBounds = (0, _Bounds.parseBoundCurves)(this.bounds, this.style.border, this.style.borderRadius);

          if (true) {
            this.name = '' + node.tagName.toLowerCase() + (node.id ? '#' + node.id : '') + node.className.toString().split(' ').map(function (s) {
              return s.length ? '.' + s : '';
            }).join('');
          }
        }

        _createClass(NodeContainer, [{
          key: 'getClipPaths',
          value: function getClipPaths() {
            var parentClips = this.parent ? this.parent.getClipPaths() : [];
            var isClipped = this.style.overflow !== _overflow.OVERFLOW.VISIBLE;

            return isClipped ? parentClips.concat([(0, _Bounds.calculatePaddingBoxPath)(this.curvedBounds)]) : parentClips;
          } },
        {
          key: 'isInFlow',
          value: function isInFlow() {
            return this.isRootElement() && !this.isFloating() && !this.isAbsolutelyPositioned();
          } },
        {
          key: 'isVisible',
          value: function isVisible() {
            return !(0, _Util.contains)(this.style.display, _display.DISPLAY.NONE) && this.style.opacity > 0 && this.style.visibility === _visibility.VISIBILITY.VISIBLE;
          } },
        {
          key: 'isAbsolutelyPositioned',
          value: function isAbsolutelyPositioned() {
            return this.style.position !== _position.POSITION.STATIC && this.style.position !== _position.POSITION.RELATIVE;
          } },
        {
          key: 'isPositioned',
          value: function isPositioned() {
            return this.style.position !== _position.POSITION.STATIC;
          } },
        {
          key: 'isFloating',
          value: function isFloating() {
            return this.style.float !== _float.FLOAT.NONE;
          } },
        {
          key: 'isRootElement',
          value: function isRootElement() {
            return this.parent === null;
          } },
        {
          key: 'isTransformed',
          value: function isTransformed() {
            return this.style.transform !== null;
          } },
        {
          key: 'isPositionedWithZIndex',
          value: function isPositionedWithZIndex() {
            return this.isPositioned() && !this.style.zIndex.auto;
          } },
        {
          key: 'isInlineLevel',
          value: function isInlineLevel() {
            return (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_BLOCK) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_FLEX) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_GRID) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_LIST_ITEM) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_TABLE);
          } },
        {
          key: 'isInlineBlockOrInlineTable',
          value: function isInlineBlockOrInlineTable() {
            return (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_BLOCK) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_TABLE);
          } }]);


        return NodeContainer;
      }();

      exports.default = NodeContainer;


      var getImage = function getImage(node, resourceLoader) {
        if (node instanceof node.ownerDocument.defaultView.SVGSVGElement || node instanceof SVGSVGElement) {
          var s = new XMLSerializer();
          return resourceLoader.loadImage('data:image/svg+xml,' + encodeURIComponent(s.serializeToString(node)));
        }
        switch (node.tagName) {
          case 'IMG':
            // $FlowFixMe
            var img = node;
            return resourceLoader.loadImage(img.currentSrc || img.src);
          case 'CANVAS':
            // $FlowFixMe
            var canvas = node;
            return resourceLoader.loadCanvas(canvas);
          case 'IFRAME':
            var iframeKey = node.getAttribute('data-html2canvas-internal-iframe-key');
            if (iframeKey) {
              return iframeKey;
            }
            break;}


        return null;
      };

      /***/},
    /* 4 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var contains = exports.contains = function contains(bit, value) {
        return (bit & value) !== 0;
      };

      var distance = exports.distance = function distance(a, b) {
        return Math.sqrt(a * a + b * b);
      };

      var copyCSSStyles = exports.copyCSSStyles = function copyCSSStyles(style, target) {
        // Edge does not provide value for cssText
        for (var i = style.length - 1; i >= 0; i--) {
          var property = style.item(i);
          // Safari shows pseudoelements if content is set
          if (property !== 'content') {
            target.style.setProperty(property, style.getPropertyValue(property));
          }
        }
        return target;
      };

      var SMALL_IMAGE = exports.SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';

      /***/},
    /* 5 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseBackgroundImage = exports.parseBackground = exports.calculateBackgroundRepeatPath = exports.calculateBackgroundPosition = exports.calculateBackgroungPositioningArea = exports.calculateBackgroungPaintingArea = exports.calculateGradientBackgroundSize = exports.calculateBackgroundSize = exports.BACKGROUND_ORIGIN = exports.BACKGROUND_CLIP = exports.BACKGROUND_SIZE = exports.BACKGROUND_REPEAT = undefined;

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      var _Size = __webpack_require__(31);

      var _Size2 = _interopRequireDefault(_Size);

      var _Vector = __webpack_require__(7);

      var _Vector2 = _interopRequireDefault(_Vector);

      var _Bounds = __webpack_require__(2);

      var _padding = __webpack_require__(17);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var BACKGROUND_REPEAT = exports.BACKGROUND_REPEAT = {
        REPEAT: 0,
        NO_REPEAT: 1,
        REPEAT_X: 2,
        REPEAT_Y: 3 };


      var BACKGROUND_SIZE = exports.BACKGROUND_SIZE = {
        AUTO: 0,
        CONTAIN: 1,
        COVER: 2,
        LENGTH: 3 };


      var BACKGROUND_CLIP = exports.BACKGROUND_CLIP = {
        BORDER_BOX: 0,
        PADDING_BOX: 1,
        CONTENT_BOX: 2 };


      var BACKGROUND_ORIGIN = exports.BACKGROUND_ORIGIN = BACKGROUND_CLIP;

      var AUTO = 'auto';

      var BackgroundSize = function BackgroundSize(size) {
        _classCallCheck(this, BackgroundSize);

        switch (size) {
          case 'contain':
            this.size = BACKGROUND_SIZE.CONTAIN;
            break;
          case 'cover':
            this.size = BACKGROUND_SIZE.COVER;
            break;
          case 'auto':
            this.size = BACKGROUND_SIZE.AUTO;
            break;
          default:
            this.value = new _Length2.default(size);}

      };

      var calculateBackgroundSize = exports.calculateBackgroundSize = function calculateBackgroundSize(backgroundImage, image, bounds) {
        var width = 0;
        var height = 0;
        var size = backgroundImage.size;
        if (size[0].size === BACKGROUND_SIZE.CONTAIN || size[0].size === BACKGROUND_SIZE.COVER) {
          var targetRatio = bounds.width / bounds.height;
          var currentRatio = image.width / image.height;
          return targetRatio < currentRatio !== (size[0].size === BACKGROUND_SIZE.COVER) ? new _Size2.default(bounds.width, bounds.width / currentRatio) : new _Size2.default(bounds.height * currentRatio, bounds.height);
        }

        if (size[0].value) {
          width = size[0].value.getAbsoluteValue(bounds.width);
        }

        if (size[0].size === BACKGROUND_SIZE.AUTO && size[1].size === BACKGROUND_SIZE.AUTO) {
          height = image.height;
        } else if (size[1].size === BACKGROUND_SIZE.AUTO) {
          height = width / image.width * image.height;
        } else if (size[1].value) {
          height = size[1].value.getAbsoluteValue(bounds.height);
        }

        if (size[0].size === BACKGROUND_SIZE.AUTO) {
          width = height / image.height * image.width;
        }

        return new _Size2.default(width, height);
      };

      var calculateGradientBackgroundSize = exports.calculateGradientBackgroundSize = function calculateGradientBackgroundSize(backgroundImage, bounds) {
        var size = backgroundImage.size;
        var width = size[0].value ? size[0].value.getAbsoluteValue(bounds.width) : bounds.width;
        var height = size[1].value ? size[1].value.getAbsoluteValue(bounds.height) : size[0].value ? width : bounds.height;

        return new _Size2.default(width, height);
      };

      var AUTO_SIZE = new BackgroundSize(AUTO);

      var calculateBackgroungPaintingArea = exports.calculateBackgroungPaintingArea = function calculateBackgroungPaintingArea(curves, clip) {
        switch (clip) {
          case BACKGROUND_CLIP.BORDER_BOX:
            return (0, _Bounds.calculateBorderBoxPath)(curves);
          case BACKGROUND_CLIP.PADDING_BOX:
          default:
            return (0, _Bounds.calculatePaddingBoxPath)(curves);}

      };

      var calculateBackgroungPositioningArea = exports.calculateBackgroungPositioningArea = function calculateBackgroungPositioningArea(backgroundOrigin, bounds, padding, border) {
        var paddingBox = (0, _Bounds.calculatePaddingBox)(bounds, border);

        switch (backgroundOrigin) {
          case BACKGROUND_ORIGIN.BORDER_BOX:
            return bounds;
          case BACKGROUND_ORIGIN.CONTENT_BOX:
            var paddingLeft = padding[_padding.PADDING_SIDES.LEFT].getAbsoluteValue(bounds.width);
            var paddingRight = padding[_padding.PADDING_SIDES.RIGHT].getAbsoluteValue(bounds.width);
            var paddingTop = padding[_padding.PADDING_SIDES.TOP].getAbsoluteValue(bounds.width);
            var paddingBottom = padding[_padding.PADDING_SIDES.BOTTOM].getAbsoluteValue(bounds.width);
            return new _Bounds.Bounds(paddingBox.left + paddingLeft, paddingBox.top + paddingTop, paddingBox.width - paddingLeft - paddingRight, paddingBox.height - paddingTop - paddingBottom);
          case BACKGROUND_ORIGIN.PADDING_BOX:
          default:
            return paddingBox;}

      };

      var calculateBackgroundPosition = exports.calculateBackgroundPosition = function calculateBackgroundPosition(position, size, bounds) {
        return new _Vector2.default(position[0].getAbsoluteValue(bounds.width - size.width), position[1].getAbsoluteValue(bounds.height - size.height));
      };

      var calculateBackgroundRepeatPath = exports.calculateBackgroundRepeatPath = function calculateBackgroundRepeatPath(background, position, size, backgroundPositioningArea, bounds) {
        var repeat = background.repeat;
        switch (repeat) {
          case BACKGROUND_REPEAT.REPEAT_X:
            return [new _Vector2.default(Math.round(bounds.left), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(size.height + backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left), Math.round(size.height + backgroundPositioningArea.top + position.y))];
          case BACKGROUND_REPEAT.REPEAT_Y:
            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.height + bounds.top))];
          case BACKGROUND_REPEAT.NO_REPEAT:
            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y + size.height)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y + size.height))];
          default:
            return [new _Vector2.default(Math.round(bounds.left), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(bounds.left), Math.round(bounds.height + bounds.top))];}

      };

      var parseBackground = exports.parseBackground = function parseBackground(style, resourceLoader) {
        return {
          backgroundColor: new _Color2.default(style.backgroundColor),
          backgroundImage: parseBackgroundImages(style, resourceLoader),
          backgroundClip: parseBackgroundClip(style.backgroundClip),
          backgroundOrigin: parseBackgroundOrigin(style.backgroundOrigin) };

      };

      var parseBackgroundClip = function parseBackgroundClip(backgroundClip) {
        switch (backgroundClip) {
          case 'padding-box':
            return BACKGROUND_CLIP.PADDING_BOX;
          case 'content-box':
            return BACKGROUND_CLIP.CONTENT_BOX;}

        return BACKGROUND_CLIP.BORDER_BOX;
      };

      var parseBackgroundOrigin = function parseBackgroundOrigin(backgroundOrigin) {
        switch (backgroundOrigin) {
          case 'padding-box':
            return BACKGROUND_ORIGIN.PADDING_BOX;
          case 'content-box':
            return BACKGROUND_ORIGIN.CONTENT_BOX;}

        return BACKGROUND_ORIGIN.BORDER_BOX;
      };

      var parseBackgroundRepeat = function parseBackgroundRepeat(backgroundRepeat) {
        switch (backgroundRepeat.trim()) {
          case 'no-repeat':
            return BACKGROUND_REPEAT.NO_REPEAT;
          case 'repeat-x':
          case 'repeat no-repeat':
            return BACKGROUND_REPEAT.REPEAT_X;
          case 'repeat-y':
          case 'no-repeat repeat':
            return BACKGROUND_REPEAT.REPEAT_Y;
          case 'repeat':
            return BACKGROUND_REPEAT.REPEAT;}


        if (true) {
          console.error('Invalid background-repeat value "' + backgroundRepeat + '"');
        }

        return BACKGROUND_REPEAT.REPEAT;
      };

      var parseBackgroundImages = function parseBackgroundImages(style, resourceLoader) {
        var sources = parseBackgroundImage(style.backgroundImage).map(function (backgroundImage) {
          if (backgroundImage.method === 'url') {
            var key = resourceLoader.loadImage(backgroundImage.args[0]);
            backgroundImage.args = key ? [key] : [];
          }
          return backgroundImage;
        });
        var positions = style.backgroundPosition.split(',');
        var repeats = style.backgroundRepeat.split(',');
        var sizes = style.backgroundSize.split(',');

        return sources.map(function (source, index) {
          var size = (sizes[index] || AUTO).trim().split(' ').map(parseBackgroundSize);
          var position = (positions[index] || AUTO).trim().split(' ').map(parseBackgoundPosition);

          return {
            source: source,
            repeat: parseBackgroundRepeat(typeof repeats[index] === 'string' ? repeats[index] : repeats[0]),
            size: size.length < 2 ? [size[0], AUTO_SIZE] : [size[0], size[1]],
            position: position.length < 2 ? [position[0], position[0]] : [position[0], position[1]] };

        });
      };

      var parseBackgroundSize = function parseBackgroundSize(size) {
        return size === 'auto' ? AUTO_SIZE : new BackgroundSize(size);
      };

      var parseBackgoundPosition = function parseBackgoundPosition(position) {
        switch (position) {
          case 'bottom':
          case 'right':
            return new _Length2.default('100%');
          case 'left':
          case 'top':
            return new _Length2.default('0%');
          case 'auto':
            return new _Length2.default('0');}

        return new _Length2.default(position);
      };

      var parseBackgroundImage = exports.parseBackgroundImage = function parseBackgroundImage(image) {
        var whitespace = /^\s$/;
        var results = [];

        var args = [];
        var method = '';
        var quote = null;
        var definition = '';
        var mode = 0;
        var numParen = 0;

        var appendResult = function appendResult() {
          var prefix = '';
          if (method) {
            if (definition.substr(0, 1) === '"') {
              definition = definition.substr(1, definition.length - 2);
            }

            if (definition) {
              args.push(definition.trim());
            }

            var prefix_i = method.indexOf('-', 1) + 1;
            if (method.substr(0, 1) === '-' && prefix_i > 0) {
              prefix = method.substr(0, prefix_i).toLowerCase();
              method = method.substr(prefix_i);
            }
            method = method.toLowerCase();
            if (method !== 'none') {
              results.push({
                prefix: prefix,
                method: method,
                args: args });

            }
          }
          args = [];
          method = definition = '';
        };

        image.split('').forEach(function (c) {
          if (mode === 0 && whitespace.test(c)) {
            return;
          }
          switch (c) {
            case '"':
              if (!quote) {
                quote = c;
              } else if (quote === c) {
                quote = null;
              }
              break;
            case '(':
              if (quote) {
                break;
              } else if (mode === 0) {
                mode = 1;
                return;
              } else {
                numParen++;
              }
              break;
            case ')':
              if (quote) {
                break;
              } else if (mode === 1) {
                if (numParen === 0) {
                  mode = 0;
                  appendResult();
                  return;
                } else {
                  numParen--;
                }
              }
              break;

            case ',':
              if (quote) {
                break;
              } else if (mode === 0) {
                appendResult();
                return;
              } else if (mode === 1) {
                if (numParen === 0 && !method.match(/^url$/i)) {
                  args.push(definition.trim());
                  definition = '';
                  return;
                }
              }
              break;}


          if (mode === 0) {
            method += c;
          } else {
            definition += c;
          }
        });

        appendResult();
        return results;
      };

      /***/},
    /* 6 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var PATH = exports.PATH = {
        VECTOR: 0,
        BEZIER_CURVE: 1,
        CIRCLE: 2 };


      /***/},
    /* 7 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _Path = __webpack_require__(6);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var Vector = function Vector(x, y) {
        _classCallCheck(this, Vector);

        this.type = _Path.PATH.VECTOR;
        this.x = x;
        this.y = y;
        if (true) {
          if (isNaN(x)) {
            console.error('Invalid x value given for Vector');
          }
          if (isNaN(y)) {
            console.error('Invalid y value given for Vector');
          }
        }
      };

      exports.default = Vector;

      /***/},
    /* 8 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseListStyle = exports.parseListStyleType = exports.LIST_STYLE_TYPE = exports.LIST_STYLE_POSITION = undefined;

      var _background = __webpack_require__(5);

      var LIST_STYLE_POSITION = exports.LIST_STYLE_POSITION = {
        INSIDE: 0,
        OUTSIDE: 1 };


      var LIST_STYLE_TYPE = exports.LIST_STYLE_TYPE = {
        NONE: -1,
        DISC: 0,
        CIRCLE: 1,
        SQUARE: 2,
        DECIMAL: 3,
        CJK_DECIMAL: 4,
        DECIMAL_LEADING_ZERO: 5,
        LOWER_ROMAN: 6,
        UPPER_ROMAN: 7,
        LOWER_GREEK: 8,
        LOWER_ALPHA: 9,
        UPPER_ALPHA: 10,
        ARABIC_INDIC: 11,
        ARMENIAN: 12,
        BENGALI: 13,
        CAMBODIAN: 14,
        CJK_EARTHLY_BRANCH: 15,
        CJK_HEAVENLY_STEM: 16,
        CJK_IDEOGRAPHIC: 17,
        DEVANAGARI: 18,
        ETHIOPIC_NUMERIC: 19,
        GEORGIAN: 20,
        GUJARATI: 21,
        GURMUKHI: 22,
        HEBREW: 22,
        HIRAGANA: 23,
        HIRAGANA_IROHA: 24,
        JAPANESE_FORMAL: 25,
        JAPANESE_INFORMAL: 26,
        KANNADA: 27,
        KATAKANA: 28,
        KATAKANA_IROHA: 29,
        KHMER: 30,
        KOREAN_HANGUL_FORMAL: 31,
        KOREAN_HANJA_FORMAL: 32,
        KOREAN_HANJA_INFORMAL: 33,
        LAO: 34,
        LOWER_ARMENIAN: 35,
        MALAYALAM: 36,
        MONGOLIAN: 37,
        MYANMAR: 38,
        ORIYA: 39,
        PERSIAN: 40,
        SIMP_CHINESE_FORMAL: 41,
        SIMP_CHINESE_INFORMAL: 42,
        TAMIL: 43,
        TELUGU: 44,
        THAI: 45,
        TIBETAN: 46,
        TRAD_CHINESE_FORMAL: 47,
        TRAD_CHINESE_INFORMAL: 48,
        UPPER_ARMENIAN: 49,
        DISCLOSURE_OPEN: 50,
        DISCLOSURE_CLOSED: 51 };


      var parseListStyleType = exports.parseListStyleType = function parseListStyleType(type) {
        switch (type) {
          case 'disc':
            return LIST_STYLE_TYPE.DISC;
          case 'circle':
            return LIST_STYLE_TYPE.CIRCLE;
          case 'square':
            return LIST_STYLE_TYPE.SQUARE;
          case 'decimal':
            return LIST_STYLE_TYPE.DECIMAL;
          case 'cjk-decimal':
            return LIST_STYLE_TYPE.CJK_DECIMAL;
          case 'decimal-leading-zero':
            return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;
          case 'lower-roman':
            return LIST_STYLE_TYPE.LOWER_ROMAN;
          case 'upper-roman':
            return LIST_STYLE_TYPE.UPPER_ROMAN;
          case 'lower-greek':
            return LIST_STYLE_TYPE.LOWER_GREEK;
          case 'lower-alpha':
            return LIST_STYLE_TYPE.LOWER_ALPHA;
          case 'upper-alpha':
            return LIST_STYLE_TYPE.UPPER_ALPHA;
          case 'arabic-indic':
            return LIST_STYLE_TYPE.ARABIC_INDIC;
          case 'armenian':
            return LIST_STYLE_TYPE.ARMENIAN;
          case 'bengali':
            return LIST_STYLE_TYPE.BENGALI;
          case 'cambodian':
            return LIST_STYLE_TYPE.CAMBODIAN;
          case 'cjk-earthly-branch':
            return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;
          case 'cjk-heavenly-stem':
            return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;
          case 'cjk-ideographic':
            return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;
          case 'devanagari':
            return LIST_STYLE_TYPE.DEVANAGARI;
          case 'ethiopic-numeric':
            return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;
          case 'georgian':
            return LIST_STYLE_TYPE.GEORGIAN;
          case 'gujarati':
            return LIST_STYLE_TYPE.GUJARATI;
          case 'gurmukhi':
            return LIST_STYLE_TYPE.GURMUKHI;
          case 'hebrew':
            return LIST_STYLE_TYPE.HEBREW;
          case 'hiragana':
            return LIST_STYLE_TYPE.HIRAGANA;
          case 'hiragana-iroha':
            return LIST_STYLE_TYPE.HIRAGANA_IROHA;
          case 'japanese-formal':
            return LIST_STYLE_TYPE.JAPANESE_FORMAL;
          case 'japanese-informal':
            return LIST_STYLE_TYPE.JAPANESE_INFORMAL;
          case 'kannada':
            return LIST_STYLE_TYPE.KANNADA;
          case 'katakana':
            return LIST_STYLE_TYPE.KATAKANA;
          case 'katakana-iroha':
            return LIST_STYLE_TYPE.KATAKANA_IROHA;
          case 'khmer':
            return LIST_STYLE_TYPE.KHMER;
          case 'korean-hangul-formal':
            return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;
          case 'korean-hanja-formal':
            return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;
          case 'korean-hanja-informal':
            return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;
          case 'lao':
            return LIST_STYLE_TYPE.LAO;
          case 'lower-armenian':
            return LIST_STYLE_TYPE.LOWER_ARMENIAN;
          case 'malayalam':
            return LIST_STYLE_TYPE.MALAYALAM;
          case 'mongolian':
            return LIST_STYLE_TYPE.MONGOLIAN;
          case 'myanmar':
            return LIST_STYLE_TYPE.MYANMAR;
          case 'oriya':
            return LIST_STYLE_TYPE.ORIYA;
          case 'persian':
            return LIST_STYLE_TYPE.PERSIAN;
          case 'simp-chinese-formal':
            return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;
          case 'simp-chinese-informal':
            return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;
          case 'tamil':
            return LIST_STYLE_TYPE.TAMIL;
          case 'telugu':
            return LIST_STYLE_TYPE.TELUGU;
          case 'thai':
            return LIST_STYLE_TYPE.THAI;
          case 'tibetan':
            return LIST_STYLE_TYPE.TIBETAN;
          case 'trad-chinese-formal':
            return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;
          case 'trad-chinese-informal':
            return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;
          case 'upper-armenian':
            return LIST_STYLE_TYPE.UPPER_ARMENIAN;
          case 'disclosure-open':
            return LIST_STYLE_TYPE.DISCLOSURE_OPEN;
          case 'disclosure-closed':
            return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;
          case 'none':
          default:
            return LIST_STYLE_TYPE.NONE;}

      };

      var parseListStyle = exports.parseListStyle = function parseListStyle(style) {
        var listStyleImage = (0, _background.parseBackgroundImage)(style.getPropertyValue('list-style-image'));
        return {
          listStyleType: parseListStyleType(style.getPropertyValue('list-style-type')),
          listStyleImage: listStyleImage.length ? listStyleImage[0] : null,
          listStylePosition: parseListStylePosition(style.getPropertyValue('list-style-position')) };

      };

      var parseListStylePosition = function parseListStylePosition(position) {
        switch (position) {
          case 'inside':
            return LIST_STYLE_POSITION.INSIDE;
          case 'outside':
          default:
            return LIST_STYLE_POSITION.OUTSIDE;}

      };

      /***/},
    /* 9 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _textTransform = __webpack_require__(20);

      var _TextBounds = __webpack_require__(22);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var TextContainer = function () {
        function TextContainer(text, parent, bounds) {
          _classCallCheck(this, TextContainer);

          this.text = text;
          this.parent = parent;
          this.bounds = bounds;
        }

        _createClass(TextContainer, null, [{
          key: 'fromTextNode',
          value: function fromTextNode(node, parent) {
            var text = transform(node.data, parent.style.textTransform);
            return new TextContainer(text, parent, (0, _TextBounds.parseTextBounds)(text, parent, node));
          } }]);


        return TextContainer;
      }();

      exports.default = TextContainer;


      var CAPITALIZE = /(^|\s|:|-|\(|\))([a-z])/g;

      var transform = function transform(text, _transform) {
        switch (_transform) {
          case _textTransform.TEXT_TRANSFORM.LOWERCASE:
            return text.toLowerCase();
          case _textTransform.TEXT_TRANSFORM.CAPITALIZE:
            return text.replace(CAPITALIZE, capitalize);
          case _textTransform.TEXT_TRANSFORM.UPPERCASE:
            return text.toUpperCase();
          default:
            return text;}

      };

      function capitalize(m, p1, p2) {
        if (m.length > 0) {
          return p1 + p2.toUpperCase();
        }

        return m;
      }

      /***/},
    /* 10 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _ForeignObjectRenderer = __webpack_require__(23);

      var testRangeBounds = function testRangeBounds(document) {
        var TEST_HEIGHT = 123;

        if (document.createRange) {
          var range = document.createRange();
          if (range.getBoundingClientRect) {
            var testElement = document.createElement('boundtest');
            testElement.style.height = TEST_HEIGHT + 'px';
            testElement.style.display = 'block';
            document.body.appendChild(testElement);

            range.selectNode(testElement);
            var rangeBounds = range.getBoundingClientRect();
            var rangeHeight = Math.round(rangeBounds.height);
            document.body.removeChild(testElement);
            if (rangeHeight === TEST_HEIGHT) {
              return true;
            }
          }
        }

        return false;
      };

      // iOS 10.3 taints canvas with base64 images unless crossOrigin = 'anonymous'
      var testBase64 = function testBase64(document, src) {
        var img = new Image();
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');

        return new Promise(function (resolve) {
          // Single pixel base64 image renders fine on iOS 10.3???
          img.src = src;

          var onload = function onload() {
            try {
              ctx.drawImage(img, 0, 0);
              canvas.toDataURL();
            } catch (e) {
              return resolve(false);
            }

            return resolve(true);
          };

          img.onload = onload;
          img.onerror = function () {
            return resolve(false);
          };

          if (img.complete === true) {
            setTimeout(function () {
              onload();
            }, 500);
          }
        });
      };

      var testCORS = function testCORS() {
        return typeof new Image().crossOrigin !== 'undefined';
      };

      var testResponseType = function testResponseType() {
        return typeof new XMLHttpRequest().responseType === 'string';
      };

      var testSVG = function testSVG(document) {
        var img = new Image();
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        img.src = 'data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\'></svg>';

        try {
          ctx.drawImage(img, 0, 0);
          canvas.toDataURL();
        } catch (e) {
          return false;
        }
        return true;
      };

      var isGreenPixel = function isGreenPixel(data) {
        return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;
      };

      var testForeignObject = function testForeignObject(document) {
        var canvas = document.createElement('canvas');
        var size = 100;
        canvas.width = size;
        canvas.height = size;
        var ctx = canvas.getContext('2d');
        ctx.fillStyle = 'rgb(0, 255, 0)';
        ctx.fillRect(0, 0, size, size);

        var img = new Image();
        var greenImageSrc = canvas.toDataURL();
        img.src = greenImageSrc;
        var svg = (0, _ForeignObjectRenderer.createForeignObjectSVG)(size, size, 0, 0, img);
        ctx.fillStyle = 'red';
        ctx.fillRect(0, 0, size, size);

        return (0, _ForeignObjectRenderer.loadSerializedSVG)(svg).then(function (img) {
          ctx.drawImage(img, 0, 0);
          var data = ctx.getImageData(0, 0, size, size).data;
          ctx.fillStyle = 'red';
          ctx.fillRect(0, 0, size, size);

          var node = document.createElement('div');
          node.style.backgroundImage = 'url(' + greenImageSrc + ')';
          node.style.height = size + 'px';
          // Firefox 55 does not render inline <img /> tags
          return isGreenPixel(data) ? (0, _ForeignObjectRenderer.loadSerializedSVG)((0, _ForeignObjectRenderer.createForeignObjectSVG)(size, size, 0, 0, node)) : Promise.reject(false);
        }).then(function (img) {
          ctx.drawImage(img, 0, 0);
          // Edge does not render background-images
          return isGreenPixel(ctx.getImageData(0, 0, size, size).data);
        }).catch(function (e) {
          return false;
        });
      };

      var FEATURES = {
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_RANGE_BOUNDS() {
          'use strict';

          var value = testRangeBounds(document);
          Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', { value: value });
          return value;
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_SVG_DRAWING() {
          'use strict';

          var value = testSVG(document);
          Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', { value: value });
          return value;
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_BASE64_DRAWING() {
          'use strict';

          return function (src) {
            var _value = testBase64(document, src);
            Object.defineProperty(FEATURES, 'SUPPORT_BASE64_DRAWING', { value: function value() {
                return _value;
              } });
            return _value;
          };
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_FOREIGNOBJECT_DRAWING() {
          'use strict';

          var value = typeof Array.from === 'function' && typeof window.fetch === 'function' ? testForeignObject(document) : Promise.resolve(false);
          Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', { value: value });
          return value;
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_CORS_IMAGES() {
          'use strict';

          var value = testCORS();
          Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', { value: value });
          return value;
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_RESPONSE_TYPE() {
          'use strict';

          var value = testResponseType();
          Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', { value: value });
          return value;
        },
        // $FlowFixMe - get/set properties not yet supported
        get SUPPORT_CORS_XHR() {
          'use strict';

          var value = ('withCredentials' in new XMLHttpRequest());
          Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', { value: value });
          return value;
        } };


      exports.default = FEATURES;

      /***/},
    /* 11 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseTextDecoration = exports.TEXT_DECORATION_LINE = exports.TEXT_DECORATION = exports.TEXT_DECORATION_STYLE = undefined;

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var TEXT_DECORATION_STYLE = exports.TEXT_DECORATION_STYLE = {
        SOLID: 0,
        DOUBLE: 1,
        DOTTED: 2,
        DASHED: 3,
        WAVY: 4 };


      var TEXT_DECORATION = exports.TEXT_DECORATION = {
        NONE: null };


      var TEXT_DECORATION_LINE = exports.TEXT_DECORATION_LINE = {
        UNDERLINE: 1,
        OVERLINE: 2,
        LINE_THROUGH: 3,
        BLINK: 4 };


      var parseLine = function parseLine(line) {
        switch (line) {
          case 'underline':
            return TEXT_DECORATION_LINE.UNDERLINE;
          case 'overline':
            return TEXT_DECORATION_LINE.OVERLINE;
          case 'line-through':
            return TEXT_DECORATION_LINE.LINE_THROUGH;}

        return TEXT_DECORATION_LINE.BLINK;
      };

      var parseTextDecorationLine = function parseTextDecorationLine(line) {
        if (line === 'none') {
          return null;
        }

        return line.split(' ').map(parseLine);
      };

      var parseTextDecorationStyle = function parseTextDecorationStyle(style) {
        switch (style) {
          case 'double':
            return TEXT_DECORATION_STYLE.DOUBLE;
          case 'dotted':
            return TEXT_DECORATION_STYLE.DOTTED;
          case 'dashed':
            return TEXT_DECORATION_STYLE.DASHED;
          case 'wavy':
            return TEXT_DECORATION_STYLE.WAVY;}

        return TEXT_DECORATION_STYLE.SOLID;
      };

      var parseTextDecoration = exports.parseTextDecoration = function parseTextDecoration(style) {
        var textDecorationLine = parseTextDecorationLine(style.textDecorationLine ? style.textDecorationLine : style.textDecoration);
        if (textDecorationLine === null) {
          return TEXT_DECORATION.NONE;
        }

        var textDecorationColor = style.textDecorationColor ? new _Color2.default(style.textDecorationColor) : null;
        var textDecorationStyle = parseTextDecorationStyle(style.textDecorationStyle);

        return {
          textDecorationLine: textDecorationLine,
          textDecorationColor: textDecorationColor,
          textDecorationStyle: textDecorationStyle };

      };

      /***/},
    /* 12 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseBorder = exports.BORDER_SIDES = exports.BORDER_STYLE = undefined;

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var BORDER_STYLE = exports.BORDER_STYLE = {
        NONE: 0,
        SOLID: 1 };


      var BORDER_SIDES = exports.BORDER_SIDES = {
        TOP: 0,
        RIGHT: 1,
        BOTTOM: 2,
        LEFT: 3 };


      var SIDES = Object.keys(BORDER_SIDES).map(function (s) {
        return s.toLowerCase();
      });

      var parseBorderStyle = function parseBorderStyle(style) {
        switch (style) {
          case 'none':
            return BORDER_STYLE.NONE;}

        return BORDER_STYLE.SOLID;
      };

      var parseBorder = exports.parseBorder = function parseBorder(style) {
        return SIDES.map(function (side) {
          var borderColor = new _Color2.default(style.getPropertyValue('border-' + side + '-color'));
          var borderStyle = parseBorderStyle(style.getPropertyValue('border-' + side + '-style'));
          var borderWidth = parseFloat(style.getPropertyValue('border-' + side + '-width'));
          return {
            borderColor: borderColor,
            borderStyle: borderStyle,
            borderWidth: isNaN(borderWidth) ? 0 : borderWidth };

        });
      };

      /***/},
    /* 13 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var toCodePoints = exports.toCodePoints = function toCodePoints(str) {
        var codePoints = [];
        var i = 0;
        var length = str.length;
        while (i < length) {
          var value = str.charCodeAt(i++);
          if (value >= 0xd800 && value <= 0xdbff && i < length) {
            var extra = str.charCodeAt(i++);
            if ((extra & 0xfc00) === 0xdc00) {
              codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);
            } else {
              codePoints.push(value);
              i--;
            }
          } else {
            codePoints.push(value);
          }
        }
        return codePoints;
      };

      var fromCodePoint = exports.fromCodePoint = function fromCodePoint() {
        if (String.fromCodePoint) {
          return String.fromCodePoint.apply(String, arguments);
        }

        var length = arguments.length;
        if (!length) {
          return '';
        }

        var codeUnits = [];

        var index = -1;
        var result = '';
        while (++index < length) {
          var codePoint = arguments.length <= index ? undefined : arguments[index];
          if (codePoint <= 0xffff) {
            codeUnits.push(codePoint);
          } else {
            codePoint -= 0x10000;
            codeUnits.push((codePoint >> 10) + 0xd800, codePoint % 0x400 + 0xdc00);
          }
          if (index + 1 === length || codeUnits.length > 0x4000) {
            result += String.fromCharCode.apply(String, codeUnits);
            codeUnits.length = 0;
          }
        }
        return result;
      };

      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

      // Use a lookup table to find the index.
      var lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);
      for (var i = 0; i < chars.length; i++) {
        lookup[chars.charCodeAt(i)] = i;
      }

      var decode = exports.decode = function decode(base64) {
        var bufferLength = base64.length * 0.75,
        len = base64.length,
        i = void 0,
        p = 0,
        encoded1 = void 0,
        encoded2 = void 0,
        encoded3 = void 0,
        encoded4 = void 0;

        if (base64[base64.length - 1] === '=') {
          bufferLength--;
          if (base64[base64.length - 2] === '=') {
            bufferLength--;
          }
        }

        var buffer = typeof ArrayBuffer !== 'undefined' && typeof Uint8Array !== 'undefined' && typeof Uint8Array.prototype.slice !== 'undefined' ? new ArrayBuffer(bufferLength) : new Array(bufferLength);
        var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);

        for (i = 0; i < len; i += 4) {
          encoded1 = lookup[base64.charCodeAt(i)];
          encoded2 = lookup[base64.charCodeAt(i + 1)];
          encoded3 = lookup[base64.charCodeAt(i + 2)];
          encoded4 = lookup[base64.charCodeAt(i + 3)];

          bytes[p++] = encoded1 << 2 | encoded2 >> 4;
          bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
          bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
        }

        return buffer;
      };

      var polyUint16Array = exports.polyUint16Array = function polyUint16Array(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var _i = 0; _i < length; _i += 2) {
          bytes.push(buffer[_i + 1] << 8 | buffer[_i]);
        }
        return bytes;
      };

      var polyUint32Array = exports.polyUint32Array = function polyUint32Array(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var _i2 = 0; _i2 < length; _i2 += 4) {
          bytes.push(buffer[_i2 + 3] << 24 | buffer[_i2 + 2] << 16 | buffer[_i2 + 1] << 8 | buffer[_i2]);
        }
        return bytes;
      };

      /***/},
    /* 14 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.createCounterText = exports.inlineListItemElement = exports.getListOwner = undefined;

      var _Util = __webpack_require__(4);

      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      var _TextContainer = __webpack_require__(9);

      var _TextContainer2 = _interopRequireDefault(_TextContainer);

      var _listStyle = __webpack_require__(8);

      var _Unicode = __webpack_require__(24);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      // Margin between the enumeration and the list item content
      var MARGIN_RIGHT = 7;

      var ancestorTypes = ['OL', 'UL', 'MENU'];

      var getListOwner = exports.getListOwner = function getListOwner(container) {
        var parent = container.parent;
        if (!parent) {
          return null;
        }

        do {
          var isAncestor = ancestorTypes.indexOf(parent.tagName) !== -1;
          if (isAncestor) {
            return parent;
          }
          parent = parent.parent;
        } while (parent);

        return container.parent;
      };

      var inlineListItemElement = exports.inlineListItemElement = function inlineListItemElement(node, container, resourceLoader) {
        var listStyle = container.style.listStyle;

        if (!listStyle) {
          return;
        }

        var style = node.ownerDocument.defaultView.getComputedStyle(node, null);
        var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
        (0, _Util.copyCSSStyles)(style, wrapper);

        wrapper.style.position = 'absolute';
        wrapper.style.bottom = 'auto';
        wrapper.style.display = 'block';
        wrapper.style.letterSpacing = 'normal';

        switch (listStyle.listStylePosition) {
          case _listStyle.LIST_STYLE_POSITION.OUTSIDE:
            wrapper.style.left = 'auto';
            wrapper.style.right = node.ownerDocument.defaultView.innerWidth - container.bounds.left - container.style.margin[1].getAbsoluteValue(container.bounds.width) + MARGIN_RIGHT + 'px';
            wrapper.style.textAlign = 'right';
            break;
          case _listStyle.LIST_STYLE_POSITION.INSIDE:
            wrapper.style.left = container.bounds.left - container.style.margin[3].getAbsoluteValue(container.bounds.width) + 'px';
            wrapper.style.right = 'auto';
            wrapper.style.textAlign = 'left';
            break;}


        var text = void 0;
        var MARGIN_TOP = container.style.margin[0].getAbsoluteValue(container.bounds.width);
        var styleImage = listStyle.listStyleImage;
        if (styleImage) {
          if (styleImage.method === 'url') {
            var image = node.ownerDocument.createElement('img');
            image.src = styleImage.args[0];
            wrapper.style.top = container.bounds.top - MARGIN_TOP + 'px';
            wrapper.style.width = 'auto';
            wrapper.style.height = 'auto';
            wrapper.appendChild(image);
          } else {
            var size = parseFloat(container.style.font.fontSize) * 0.5;
            wrapper.style.top = container.bounds.top - MARGIN_TOP + container.bounds.height - 1.5 * size + 'px';
            wrapper.style.width = size + 'px';
            wrapper.style.height = size + 'px';
            wrapper.style.backgroundImage = style.listStyleImage;
          }
        } else if (typeof container.listIndex === 'number') {
          text = node.ownerDocument.createTextNode(createCounterText(container.listIndex, listStyle.listStyleType, true));
          wrapper.appendChild(text);
          wrapper.style.top = container.bounds.top - MARGIN_TOP + 'px';
        }

        // $FlowFixMe
        var body = node.ownerDocument.body;
        body.appendChild(wrapper);

        if (text) {
          container.childNodes.push(_TextContainer2.default.fromTextNode(text, container));
          body.removeChild(wrapper);
        } else {
          // $FlowFixMe
          container.childNodes.push(new _NodeContainer2.default(wrapper, container, resourceLoader, 0));
        }
      };

      var ROMAN_UPPER = {
        integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
        values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I'] };


      var ARMENIAN = {
        integers: [9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
        values: ['Ք', 'Փ', 'Ւ', 'Ց', 'Ր', 'Տ', 'Վ', 'Ս', 'Ռ', 'Ջ', 'Պ', 'Չ', 'Ո', 'Շ', 'Ն', 'Յ', 'Մ', 'Ճ', 'Ղ', 'Ձ', 'Հ', 'Կ', 'Ծ', 'Խ', 'Լ', 'Ի', 'Ժ', 'Թ', 'Ը', 'Է', 'Զ', 'Ե', 'Դ', 'Գ', 'Բ', 'Ա'] };


      var HEBREW = {
        integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
        values: ['י׳', 'ט׳', 'ח׳', 'ז׳', 'ו׳', 'ה׳', 'ד׳', 'ג׳', 'ב׳', 'א׳', 'ת', 'ש', 'ר', 'ק', 'צ', 'פ', 'ע', 'ס', 'נ', 'מ', 'ל', 'כ', 'יט', 'יח', 'יז', 'טז', 'טו', 'י', 'ט', 'ח', 'ז', 'ו', 'ה', 'ד', 'ג', 'ב', 'א'] };


      var GEORGIAN = {
        integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
        values: ['ჵ', 'ჰ', 'ჯ', 'ჴ', 'ხ', 'ჭ', 'წ', 'ძ', 'ც', 'ჩ', 'შ', 'ყ', 'ღ', 'ქ', 'ფ', 'ჳ', 'ტ', 'ს', 'რ', 'ჟ', 'პ', 'ო', 'ჲ', 'ნ', 'მ', 'ლ', 'კ', 'ი', 'თ', 'ჱ', 'ზ', 'ვ', 'ე', 'დ', 'გ', 'ბ', 'ა'] };


      var createAdditiveCounter = function createAdditiveCounter(value, min, max, symbols, fallback, suffix) {
        if (value < min || value > max) {
          return createCounterText(value, fallback, suffix.length > 0);
        }

        return symbols.integers.reduce(function (string, integer, index) {
          while (value >= integer) {
            value -= integer;
            string += symbols.values[index];
          }
          return string;
        }, '') + suffix;
      };

      var createCounterStyleWithSymbolResolver = function createCounterStyleWithSymbolResolver(value, codePointRangeLength, isNumeric, resolver) {
        var string = '';

        do {
          if (!isNumeric) {
            value--;
          }
          string = resolver(value) + string;
          value /= codePointRangeLength;
        } while (value * codePointRangeLength >= codePointRangeLength);

        return string;
      };

      var createCounterStyleFromRange = function createCounterStyleFromRange(value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) {
        var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;

        return (value < 0 ? '-' : '') + (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, function (codePoint) {
          return (0, _Unicode.fromCodePoint)(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart);
        }) + suffix);
      };

      var createCounterStyleFromSymbols = function createCounterStyleFromSymbols(value, symbols) {
        var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '. ';

        var codePointRangeLength = symbols.length;
        return createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, function (codePoint) {
          return symbols[Math.floor(codePoint % codePointRangeLength)];
        }) + suffix;
      };

      var CJK_ZEROS = 1 << 0;
      var CJK_TEN_COEFFICIENTS = 1 << 1;
      var CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;
      var CJK_HUNDRED_COEFFICIENTS = 1 << 3;

      var createCJKCounter = function createCJKCounter(value, numbers, multipliers, negativeSign, suffix, flags) {
        if (value < -9999 || value > 9999) {
          return createCounterText(value, _listStyle.LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);
        }
        var tmp = Math.abs(value);
        var string = suffix;

        if (tmp === 0) {
          return numbers[0] + string;
        }

        for (var digit = 0; tmp > 0 && digit <= 4; digit++) {
          var coefficient = tmp % 10;

          if (coefficient === 0 && (0, _Util.contains)(flags, CJK_ZEROS) && string !== '') {
            string = numbers[coefficient] + string;
          } else if (coefficient > 1 || coefficient === 1 && digit === 0 || coefficient === 1 && digit === 1 && (0, _Util.contains)(flags, CJK_TEN_COEFFICIENTS) || coefficient === 1 && digit === 1 && (0, _Util.contains)(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100 || coefficient === 1 && digit > 1 && (0, _Util.contains)(flags, CJK_HUNDRED_COEFFICIENTS)) {
            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;
          } else if (coefficient === 1 && digit > 0) {
            string = multipliers[digit - 1] + string;
          }
          tmp = Math.floor(tmp / 10);
        }

        return (value < 0 ? negativeSign : '') + string;
      };

      var CHINESE_INFORMAL_MULTIPLIERS = '十百千萬';
      var CHINESE_FORMAL_MULTIPLIERS = '拾佰仟萬';
      var JAPANESE_NEGATIVE = 'マイナス';
      var KOREAN_NEGATIVE = '마이너스 ';

      var createCounterText = exports.createCounterText = function createCounterText(value, type, appendSuffix) {
        var defaultSuffix = appendSuffix ? '. ' : '';
        var cjkSuffix = appendSuffix ? '、' : '';
        var koreanSuffix = appendSuffix ? ', ' : '';
        switch (type) {
          case _listStyle.LIST_STYLE_TYPE.DISC:
            return '•';
          case _listStyle.LIST_STYLE_TYPE.CIRCLE:
            return '◦';
          case _listStyle.LIST_STYLE_TYPE.SQUARE:
            return '◾';
          case _listStyle.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:
            var string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
            return string.length < 4 ? '0' + string : string;
          case _listStyle.LIST_STYLE_TYPE.CJK_DECIMAL:
            return createCounterStyleFromSymbols(value, '〇一二三四五六七八九', cjkSuffix);
          case _listStyle.LIST_STYLE_TYPE.LOWER_ROMAN:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();
          case _listStyle.LIST_STYLE_TYPE.UPPER_ROMAN:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.LOWER_GREEK:
            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.LOWER_ALPHA:
            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.UPPER_ALPHA:
            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.ARABIC_INDIC:
            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.ARMENIAN:
          case _listStyle.LIST_STYLE_TYPE.UPPER_ARMENIAN:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.LOWER_ARMENIAN:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();
          case _listStyle.LIST_STYLE_TYPE.BENGALI:
            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.CAMBODIAN:
          case _listStyle.LIST_STYLE_TYPE.KHMER:
            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:
            return createCounterStyleFromSymbols(value, '子丑寅卯辰巳午未申酉戌亥', cjkSuffix);
          case _listStyle.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:
            return createCounterStyleFromSymbols(value, '甲乙丙丁戊己庚辛壬癸', cjkSuffix);
          case _listStyle.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:
          case _listStyle.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:
            return createCJKCounter(value, '零壹貳參肆伍陸柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:
            return createCJKCounter(value, '零壹贰叁肆伍陆柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.JAPANESE_INFORMAL:
            return createCJKCounter(value, '〇一二三四五六七八九', '十百千万', JAPANESE_NEGATIVE, cjkSuffix, 0);
          case _listStyle.LIST_STYLE_TYPE.JAPANESE_FORMAL:
            return createCJKCounter(value, '零壱弐参四伍六七八九', '拾百千万', JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:
            return createCJKCounter(value, '영일이삼사오육칠팔구', '십백천만', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', '十百千萬', KOREAN_NEGATIVE, koreanSuffix, 0);
          case _listStyle.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:
            return createCJKCounter(value, '零壹貳參四五六七八九', '拾百千', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case _listStyle.LIST_STYLE_TYPE.DEVANAGARI:
            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.GEORGIAN:
            return createAdditiveCounter(value, 1, 19999, GEORGIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.GUJARATI:
            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.GURMUKHI:
            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.HEBREW:
            return createAdditiveCounter(value, 1, 10999, HEBREW, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.HIRAGANA:
            return createCounterStyleFromSymbols(value, 'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん');
          case _listStyle.LIST_STYLE_TYPE.HIRAGANA_IROHA:
            return createCounterStyleFromSymbols(value, 'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす');
          case _listStyle.LIST_STYLE_TYPE.KANNADA:
            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.KATAKANA:
            return createCounterStyleFromSymbols(value, 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン', cjkSuffix);
          case _listStyle.LIST_STYLE_TYPE.KATAKANA_IROHA:
            return createCounterStyleFromSymbols(value, 'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス', cjkSuffix);
          case _listStyle.LIST_STYLE_TYPE.LAO:
            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.MONGOLIAN:
            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.MYANMAR:
            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.ORIYA:
            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.PERSIAN:
            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.TAMIL:
            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.TELUGU:
            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.THAI:
            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.TIBETAN:
            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);
          case _listStyle.LIST_STYLE_TYPE.DECIMAL:
          default:
            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);}

      };

      /***/},
    /* 15 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Path = __webpack_require__(6);

      var _textDecoration = __webpack_require__(11);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var addColorStops = function addColorStops(gradient, canvasGradient) {
        var maxStop = Math.max.apply(null, gradient.colorStops.map(function (colorStop) {
          return colorStop.stop;
        }));
        var f = 1 / Math.max(1, maxStop);
        gradient.colorStops.forEach(function (colorStop) {
          canvasGradient.addColorStop(f * colorStop.stop, colorStop.color.toString());
        });
      };

      var CanvasRenderer = function () {
        function CanvasRenderer(canvas) {
          _classCallCheck(this, CanvasRenderer);

          this.canvas = canvas ? canvas : document.createElement('canvas');
        }

        _createClass(CanvasRenderer, [{
          key: 'render',
          value: function render(options) {
            this.ctx = this.canvas.getContext('2d');
            this.options = options;
            this.canvas.width = Math.floor(options.width * options.scale);
            this.canvas.height = Math.floor(options.height * options.scale);
            this.canvas.style.width = options.width + 'px';
            this.canvas.style.height = options.height + 'px';

            this.ctx.scale(this.options.scale, this.options.scale);
            this.ctx.translate(-options.x, -options.y);
            this.ctx.textBaseline = 'bottom';
            options.logger.log('Canvas renderer initialized (' + options.width + 'x' + options.height + ' at ' + options.x + ',' + options.y + ') with scale ' + this.options.scale);
          } },
        {
          key: 'clip',
          value: function clip(clipPaths, callback) {
            var _this = this;

            if (clipPaths.length) {
              this.ctx.save();
              clipPaths.forEach(function (path) {
                _this.path(path);
                _this.ctx.clip();
              });
            }

            callback();

            if (clipPaths.length) {
              this.ctx.restore();
            }
          } },
        {
          key: 'drawImage',
          value: function drawImage(image, source, destination) {
            this.ctx.drawImage(image, source.left, source.top, source.width, source.height, destination.left, destination.top, destination.width, destination.height);
          } },
        {
          key: 'drawShape',
          value: function drawShape(path, color) {
            this.path(path);
            this.ctx.fillStyle = color.toString();
            this.ctx.fill();
          } },
        {
          key: 'fill',
          value: function fill(color) {
            this.ctx.fillStyle = color.toString();
            this.ctx.fill();
          } },
        {
          key: 'getTarget',
          value: function getTarget() {
            this.canvas.getContext('2d').setTransform(1, 0, 0, 1, 0, 0);
            return Promise.resolve(this.canvas);
          } },
        {
          key: 'path',
          value: function path(_path) {
            var _this2 = this;

            this.ctx.beginPath();
            if (Array.isArray(_path)) {
              _path.forEach(function (point, index) {
                var start = point.type === _Path.PATH.VECTOR ? point : point.start;
                if (index === 0) {
                  _this2.ctx.moveTo(start.x, start.y);
                } else {
                  _this2.ctx.lineTo(start.x, start.y);
                }

                if (point.type === _Path.PATH.BEZIER_CURVE) {
                  _this2.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);
                }
              });
            } else {
              this.ctx.arc(_path.x + _path.radius, _path.y + _path.radius, _path.radius, 0, Math.PI * 2, true);
            }

            this.ctx.closePath();
          } },
        {
          key: 'rectangle',
          value: function rectangle(x, y, width, height, color) {
            this.ctx.fillStyle = color.toString();
            this.ctx.fillRect(x, y, width, height);
          } },
        {
          key: 'renderLinearGradient',
          value: function renderLinearGradient(bounds, gradient) {
            var linearGradient = this.ctx.createLinearGradient(bounds.left + gradient.direction.x1, bounds.top + gradient.direction.y1, bounds.left + gradient.direction.x0, bounds.top + gradient.direction.y0);

            addColorStops(gradient, linearGradient);
            this.ctx.fillStyle = linearGradient;
            this.ctx.fillRect(bounds.left, bounds.top, bounds.width, bounds.height);
          } },
        {
          key: 'renderRadialGradient',
          value: function renderRadialGradient(bounds, gradient) {
            var _this3 = this;

            var x = bounds.left + gradient.center.x;
            var y = bounds.top + gradient.center.y;

            var radialGradient = this.ctx.createRadialGradient(x, y, 0, x, y, gradient.radius.x);
            if (!radialGradient) {
              return;
            }

            addColorStops(gradient, radialGradient);
            this.ctx.fillStyle = radialGradient;

            if (gradient.radius.x !== gradient.radius.y) {
              // transforms for elliptical radial gradient
              var midX = bounds.left + 0.5 * bounds.width;
              var midY = bounds.top + 0.5 * bounds.height;
              var f = gradient.radius.y / gradient.radius.x;
              var invF = 1 / f;

              this.transform(midX, midY, [1, 0, 0, f, 0, 0], function () {
                return _this3.ctx.fillRect(bounds.left, invF * (bounds.top - midY) + midY, bounds.width, bounds.height * invF);
              });
            } else {
              this.ctx.fillRect(bounds.left, bounds.top, bounds.width, bounds.height);
            }
          } },
        {
          key: 'renderRepeat',
          value: function renderRepeat(path, image, imageSize, offsetX, offsetY) {
            this.path(path);
            this.ctx.fillStyle = this.ctx.createPattern(this.resizeImage(image, imageSize), 'repeat');
            this.ctx.translate(offsetX, offsetY);
            this.ctx.fill();
            this.ctx.translate(-offsetX, -offsetY);
          } },
        {
          key: 'renderTextNode',
          value: function renderTextNode(textBounds, color, font, textDecoration, textShadows) {
            var _this4 = this;

            this.ctx.font = [font.fontStyle, font.fontVariant, font.fontWeight, font.fontSize, font.fontFamily].join(' ');

            textBounds.forEach(function (text) {
              _this4.ctx.fillStyle = color.toString();
              if (textShadows && text.text.trim().length) {
                textShadows.slice(0).reverse().forEach(function (textShadow) {
                  _this4.ctx.shadowColor = textShadow.color.toString();
                  _this4.ctx.shadowOffsetX = textShadow.offsetX * _this4.options.scale;
                  _this4.ctx.shadowOffsetY = textShadow.offsetY * _this4.options.scale;
                  _this4.ctx.shadowBlur = textShadow.blur;

                  _this4.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
                });
              } else {
                _this4.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
              }

              if (textDecoration !== null) {
                var textDecorationColor = textDecoration.textDecorationColor || color;
                textDecoration.textDecorationLine.forEach(function (textDecorationLine) {
                  switch (textDecorationLine) {
                    case _textDecoration.TEXT_DECORATION_LINE.UNDERLINE:
                      // Draws a line at the baseline of the font
                      // TODO As some browsers display the line as more than 1px if the font-size is big,
                      // need to take that into account both in position and size
                      var _options$fontMetrics$ = _this4.options.fontMetrics.getMetrics(font),
                      baseline = _options$fontMetrics$.baseline;

                      _this4.rectangle(text.bounds.left, Math.round(text.bounds.top + baseline), text.bounds.width, 1, textDecorationColor);
                      break;
                    case _textDecoration.TEXT_DECORATION_LINE.OVERLINE:
                      _this4.rectangle(text.bounds.left, Math.round(text.bounds.top), text.bounds.width, 1, textDecorationColor);
                      break;
                    case _textDecoration.TEXT_DECORATION_LINE.LINE_THROUGH:
                      // TODO try and find exact position for line-through
                      var _options$fontMetrics$2 = _this4.options.fontMetrics.getMetrics(font),
                      middle = _options$fontMetrics$2.middle;

                      _this4.rectangle(text.bounds.left, Math.ceil(text.bounds.top + middle), text.bounds.width, 1, textDecorationColor);
                      break;}

                });
              }
            });
          } },
        {
          key: 'resizeImage',
          value: function resizeImage(image, size) {
            if (image.width === size.width && image.height === size.height) {
              return image;
            }

            var canvas = this.canvas.ownerDocument.createElement('canvas');
            canvas.width = size.width;
            canvas.height = size.height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height);
            return canvas;
          } },
        {
          key: 'setOpacity',
          value: function setOpacity(opacity) {
            this.ctx.globalAlpha = opacity;
          } },
        {
          key: 'transform',
          value: function transform(offsetX, offsetY, matrix, callback) {
            this.ctx.save();
            this.ctx.translate(offsetX, offsetY);
            this.ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);
            this.ctx.translate(-offsetX, -offsetY);

            callback();

            this.ctx.restore();
          } }]);


        return CanvasRenderer;
      }();

      exports.default = CanvasRenderer;

      /***/},
    /* 16 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var Logger = function () {
        function Logger(enabled, id, start) {
          _classCallCheck(this, Logger);

          this.enabled = typeof window !== 'undefined' && enabled;
          this.start = start ? start : Date.now();
          this.id = id;
        }

        _createClass(Logger, [{
          key: 'child',
          value: function child(id) {
            return new Logger(this.enabled, id, this.start);
          }

          // eslint-disable-next-line flowtype/no-weak-types
        },
        {
          key: 'log',
          value: function log() {
            if (this.enabled && window.console && window.console.log) {
              for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
              }

              Function.prototype.bind.call(window.console.log, window.console).apply(window.console, [Date.now() - this.start + 'ms', this.id ? 'html2canvas (' + this.id + '):' : 'html2canvas:'].concat([].slice.call(args, 0)));
            }
          }

          // eslint-disable-next-line flowtype/no-weak-types
        },
        {
          key: 'error',
          value: function error() {
            if (this.enabled && window.console && window.console.error) {
              for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                args[_key2] = arguments[_key2];
              }

              Function.prototype.bind.call(window.console.error, window.console).apply(window.console, [Date.now() - this.start + 'ms', this.id ? 'html2canvas (' + this.id + '):' : 'html2canvas:'].concat([].slice.call(args, 0)));
            }
          } }]);


        return Logger;
      }();

      exports.default = Logger;

      /***/},
    /* 17 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parsePadding = exports.PADDING_SIDES = undefined;

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var PADDING_SIDES = exports.PADDING_SIDES = {
        TOP: 0,
        RIGHT: 1,
        BOTTOM: 2,
        LEFT: 3 };


      var SIDES = ['top', 'right', 'bottom', 'left'];

      var parsePadding = exports.parsePadding = function parsePadding(style) {
        return SIDES.map(function (side) {
          return new _Length2.default(style.getPropertyValue('padding-' + side));
        });
      };

      /***/},
    /* 18 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var OVERFLOW_WRAP = exports.OVERFLOW_WRAP = {
        NORMAL: 0,
        BREAK_WORD: 1 };


      var parseOverflowWrap = exports.parseOverflowWrap = function parseOverflowWrap(overflow) {
        switch (overflow) {
          case 'break-word':
            return OVERFLOW_WRAP.BREAK_WORD;
          case 'normal':
          default:
            return OVERFLOW_WRAP.NORMAL;}

      };

      /***/},
    /* 19 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var POSITION = exports.POSITION = {
        STATIC: 0,
        RELATIVE: 1,
        ABSOLUTE: 2,
        FIXED: 3,
        STICKY: 4 };


      var parsePosition = exports.parsePosition = function parsePosition(position) {
        switch (position) {
          case 'relative':
            return POSITION.RELATIVE;
          case 'absolute':
            return POSITION.ABSOLUTE;
          case 'fixed':
            return POSITION.FIXED;
          case 'sticky':
            return POSITION.STICKY;}


        return POSITION.STATIC;
      };

      /***/},
    /* 20 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var TEXT_TRANSFORM = exports.TEXT_TRANSFORM = {
        NONE: 0,
        LOWERCASE: 1,
        UPPERCASE: 2,
        CAPITALIZE: 3 };


      var parseTextTransform = exports.parseTextTransform = function parseTextTransform(textTransform) {
        switch (textTransform) {
          case 'uppercase':
            return TEXT_TRANSFORM.UPPERCASE;
          case 'lowercase':
            return TEXT_TRANSFORM.LOWERCASE;
          case 'capitalize':
            return TEXT_TRANSFORM.CAPITALIZE;}


        return TEXT_TRANSFORM.NONE;
      };

      /***/},
    /* 21 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.reformatInputBounds = exports.inlineSelectElement = exports.inlineTextAreaElement = exports.inlineInputElement = exports.getInputBorderRadius = exports.INPUT_BACKGROUND = exports.INPUT_BORDERS = exports.INPUT_COLOR = undefined;

      var _TextContainer = __webpack_require__(9);

      var _TextContainer2 = _interopRequireDefault(_TextContainer);

      var _background = __webpack_require__(5);

      var _border = __webpack_require__(12);

      var _Circle = __webpack_require__(50);

      var _Circle2 = _interopRequireDefault(_Circle);

      var _Vector = __webpack_require__(7);

      var _Vector2 = _interopRequireDefault(_Vector);

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      var _Bounds = __webpack_require__(2);

      var _TextBounds = __webpack_require__(22);

      var _Util = __webpack_require__(4);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var INPUT_COLOR = exports.INPUT_COLOR = new _Color2.default([42, 42, 42]);
      var INPUT_BORDER_COLOR = new _Color2.default([165, 165, 165]);
      var INPUT_BACKGROUND_COLOR = new _Color2.default([222, 222, 222]);
      var INPUT_BORDER = {
        borderWidth: 1,
        borderColor: INPUT_BORDER_COLOR,
        borderStyle: _border.BORDER_STYLE.SOLID };

      var INPUT_BORDERS = exports.INPUT_BORDERS = [INPUT_BORDER, INPUT_BORDER, INPUT_BORDER, INPUT_BORDER];
      var INPUT_BACKGROUND = exports.INPUT_BACKGROUND = {
        backgroundColor: INPUT_BACKGROUND_COLOR,
        backgroundImage: [],
        backgroundClip: _background.BACKGROUND_CLIP.PADDING_BOX,
        backgroundOrigin: _background.BACKGROUND_ORIGIN.PADDING_BOX };


      var RADIO_BORDER_RADIUS = new _Length2.default('50%');
      var RADIO_BORDER_RADIUS_TUPLE = [RADIO_BORDER_RADIUS, RADIO_BORDER_RADIUS];
      var INPUT_RADIO_BORDER_RADIUS = [RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE];

      var CHECKBOX_BORDER_RADIUS = new _Length2.default('3px');
      var CHECKBOX_BORDER_RADIUS_TUPLE = [CHECKBOX_BORDER_RADIUS, CHECKBOX_BORDER_RADIUS];
      var INPUT_CHECKBOX_BORDER_RADIUS = [CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE];

      var getInputBorderRadius = exports.getInputBorderRadius = function getInputBorderRadius(node) {
        return node.type === 'radio' ? INPUT_RADIO_BORDER_RADIUS : INPUT_CHECKBOX_BORDER_RADIUS;
      };

      var inlineInputElement = exports.inlineInputElement = function inlineInputElement(node, container) {
        if (node.type === 'radio' || node.type === 'checkbox') {
          if (node.checked) {
            var size = Math.min(container.bounds.width, container.bounds.height);
            container.childNodes.push(node.type === 'checkbox' ? [new _Vector2.default(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79), new _Vector2.default(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549), new _Vector2.default(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071), new _Vector2.default(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649), new _Vector2.default(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23), new _Vector2.default(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085), new _Vector2.default(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)] : new _Circle2.default(container.bounds.left + size / 4, container.bounds.top + size / 4, size / 4));
          }
        } else {
          inlineFormElement(getInputValue(node), node, container, false);
        }
      };

      var inlineTextAreaElement = exports.inlineTextAreaElement = function inlineTextAreaElement(node, container) {
        inlineFormElement(node.value, node, container, true);
      };

      var inlineSelectElement = exports.inlineSelectElement = function inlineSelectElement(node, container) {
        var option = node.options[node.selectedIndex || 0];
        inlineFormElement(option ? option.text || '' : '', node, container, false);
      };

      var reformatInputBounds = exports.reformatInputBounds = function reformatInputBounds(bounds) {
        if (bounds.width > bounds.height) {
          bounds.left += (bounds.width - bounds.height) / 2;
          bounds.width = bounds.height;
        } else if (bounds.width < bounds.height) {
          bounds.top += (bounds.height - bounds.width) / 2;
          bounds.height = bounds.width;
        }
        return bounds;
      };

      var inlineFormElement = function inlineFormElement(value, node, container, allowLinebreak) {
        var body = node.ownerDocument.body;
        if (value.length > 0 && body) {
          var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
          (0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node, null), wrapper);
          wrapper.style.position = 'absolute';
          wrapper.style.left = container.bounds.left + 'px';
          wrapper.style.top = container.bounds.top + 'px';
          if (!allowLinebreak) {
            wrapper.style.whiteSpace = 'nowrap';
          }
          var text = node.ownerDocument.createTextNode(value);
          wrapper.appendChild(text);
          body.appendChild(wrapper);
          container.childNodes.push(_TextContainer2.default.fromTextNode(text, container));
          body.removeChild(wrapper);
        }
      };

      var getInputValue = function getInputValue(node) {
        var value = node.type === 'password' ? new Array(node.value.length + 1).join("\u2022") : node.value;

        return value.length === 0 ? node.placeholder || '' : value;
      };

      /***/},
    /* 22 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseTextBounds = exports.TextBounds = undefined;

      var _Bounds = __webpack_require__(2);

      var _textDecoration = __webpack_require__(11);

      var _Feature = __webpack_require__(10);

      var _Feature2 = _interopRequireDefault(_Feature);

      var _Unicode = __webpack_require__(24);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var TextBounds = exports.TextBounds = function TextBounds(text, bounds) {
        _classCallCheck(this, TextBounds);

        this.text = text;
        this.bounds = bounds;
      };

      var parseTextBounds = exports.parseTextBounds = function parseTextBounds(value, parent, node) {
        var letterRendering = parent.style.letterSpacing !== 0;
        var textList = letterRendering ? (0, _Unicode.toCodePoints)(value).map(function (i) {
          return (0, _Unicode.fromCodePoint)(i);
        }) : (0, _Unicode.breakWords)(value, parent);
        var length = textList.length;
        var defaultView = node.parentNode ? node.parentNode.ownerDocument.defaultView : null;
        var scrollX = defaultView ? defaultView.pageXOffset : 0;
        var scrollY = defaultView ? defaultView.pageYOffset : 0;
        var textBounds = [];
        var offset = 0;
        for (var i = 0; i < length; i++) {
          var text = textList[i];
          if (parent.style.textDecoration !== _textDecoration.TEXT_DECORATION.NONE || text.trim().length > 0) {
            if (_Feature2.default.SUPPORT_RANGE_BOUNDS) {
              textBounds.push(new TextBounds(text, getRangeBounds(node, offset, text.length, scrollX, scrollY)));
            } else {
              var replacementNode = node.splitText(text.length);
              textBounds.push(new TextBounds(text, getWrapperBounds(node, scrollX, scrollY)));
              node = replacementNode;
            }
          } else if (!_Feature2.default.SUPPORT_RANGE_BOUNDS) {
            node = node.splitText(text.length);
          }
          offset += text.length;
        }
        return textBounds;
      };

      var getWrapperBounds = function getWrapperBounds(node, scrollX, scrollY) {
        var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
        wrapper.appendChild(node.cloneNode(true));
        var parentNode = node.parentNode;
        if (parentNode) {
          parentNode.replaceChild(wrapper, node);
          var bounds = (0, _Bounds.parseBounds)(wrapper, scrollX, scrollY);
          if (wrapper.firstChild) {
            parentNode.replaceChild(wrapper.firstChild, wrapper);
          }
          return bounds;
        }
        return new _Bounds.Bounds(0, 0, 0, 0);
      };

      var getRangeBounds = function getRangeBounds(node, offset, length, scrollX, scrollY) {
        var range = node.ownerDocument.createRange();
        range.setStart(node, offset);
        range.setEnd(node, offset + length);
        return _Bounds.Bounds.fromClientRect(range.getBoundingClientRect(), scrollX, scrollY);
      };

      /***/},
    /* 23 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var ForeignObjectRenderer = function () {
        function ForeignObjectRenderer(element) {
          _classCallCheck(this, ForeignObjectRenderer);

          this.element = element;
        }

        _createClass(ForeignObjectRenderer, [{
          key: 'render',
          value: function render(options) {
            var _this = this;

            this.options = options;
            this.canvas = document.createElement('canvas');
            this.ctx = this.canvas.getContext('2d');
            this.canvas.width = Math.floor(options.width) * options.scale;
            this.canvas.height = Math.floor(options.height) * options.scale;
            this.canvas.style.width = options.width + 'px';
            this.canvas.style.height = options.height + 'px';

            options.logger.log('ForeignObject renderer initialized (' + options.width + 'x' + options.height + ' at ' + options.x + ',' + options.y + ') with scale ' + options.scale);
            var svg = createForeignObjectSVG(Math.max(options.windowWidth, options.width) * options.scale, Math.max(options.windowHeight, options.height) * options.scale, options.scrollX * options.scale, options.scrollY * options.scale, this.element);

            return loadSerializedSVG(svg).then(function (img) {
              if (options.backgroundColor) {
                _this.ctx.fillStyle = options.backgroundColor.toString();
                _this.ctx.fillRect(0, 0, options.width * options.scale, options.height * options.scale);
              }

              _this.ctx.drawImage(img, -options.x * options.scale, -options.y * options.scale);
              return _this.canvas;
            });
          } }]);


        return ForeignObjectRenderer;
      }();

      exports.default = ForeignObjectRenderer;
      var createForeignObjectSVG = exports.createForeignObjectSVG = function createForeignObjectSVG(width, height, x, y, node) {
        var xmlns = 'http://www.w3.org/2000/svg';
        var svg = document.createElementNS(xmlns, 'svg');
        var foreignObject = document.createElementNS(xmlns, 'foreignObject');
        svg.setAttributeNS(null, 'width', width);
        svg.setAttributeNS(null, 'height', height);

        foreignObject.setAttributeNS(null, 'width', '100%');
        foreignObject.setAttributeNS(null, 'height', '100%');
        foreignObject.setAttributeNS(null, 'x', x);
        foreignObject.setAttributeNS(null, 'y', y);
        foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');
        svg.appendChild(foreignObject);

        foreignObject.appendChild(node);

        return svg;
      };

      var loadSerializedSVG = exports.loadSerializedSVG = function loadSerializedSVG(svg) {
        return new Promise(function (resolve, reject) {
          var img = new Image();
          img.onload = function () {
            return resolve(img);
          };
          img.onerror = reject;

          img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(new XMLSerializer().serializeToString(svg));
        });
      };

      /***/},
    /* 24 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.breakWords = exports.fromCodePoint = exports.toCodePoints = undefined;

      var _cssLineBreak = __webpack_require__(46);

      Object.defineProperty(exports, 'toCodePoints', {
        enumerable: true,
        get: function get() {
          return _cssLineBreak.toCodePoints;
        } });

      Object.defineProperty(exports, 'fromCodePoint', {
        enumerable: true,
        get: function get() {
          return _cssLineBreak.fromCodePoint;
        } });


      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      var _overflowWrap = __webpack_require__(18);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var breakWords = exports.breakWords = function breakWords(str, parent) {
        var breaker = (0, _cssLineBreak.LineBreaker)(str, {
          lineBreak: parent.style.lineBreak,
          wordBreak: parent.style.overflowWrap === _overflowWrap.OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : parent.style.wordBreak });


        var words = [];
        var bk = void 0;

        while (!(bk = breaker.next()).done) {
          words.push(bk.value.slice());
        }

        return words;
      };

      /***/},
    /* 25 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.FontMetrics = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Util = __webpack_require__(4);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var SAMPLE_TEXT = 'Hidden Text';

      var FontMetrics = exports.FontMetrics = function () {
        function FontMetrics(document) {
          _classCallCheck(this, FontMetrics);

          this._data = {};
          this._document = document;
        }

        _createClass(FontMetrics, [{
          key: '_parseMetrics',
          value: function _parseMetrics(font) {
            var container = this._document.createElement('div');
            var img = this._document.createElement('img');
            var span = this._document.createElement('span');

            var body = this._document.body;
            if (!body) {
              throw new Error(true ? 'No document found for font metrics' : undefined);
            }

            container.style.visibility = 'hidden';
            container.style.fontFamily = font.fontFamily;
            container.style.fontSize = font.fontSize;
            container.style.margin = '0';
            container.style.padding = '0';

            body.appendChild(container);

            img.src = _Util.SMALL_IMAGE;
            img.width = 1;
            img.height = 1;

            img.style.margin = '0';
            img.style.padding = '0';
            img.style.verticalAlign = 'baseline';

            span.style.fontFamily = font.fontFamily;
            span.style.fontSize = font.fontSize;
            span.style.margin = '0';
            span.style.padding = '0';

            span.appendChild(this._document.createTextNode(SAMPLE_TEXT));
            container.appendChild(span);
            container.appendChild(img);
            var baseline = img.offsetTop - span.offsetTop + 2;

            container.removeChild(span);
            container.appendChild(this._document.createTextNode(SAMPLE_TEXT));

            container.style.lineHeight = 'normal';
            img.style.verticalAlign = 'super';

            var middle = img.offsetTop - container.offsetTop + 2;

            body.removeChild(container);

            return { baseline: baseline, middle: middle };
          } },
        {
          key: 'getMetrics',
          value: function getMetrics(font) {
            var key = font.fontFamily + ' ' + font.fontSize;
            if (this._data[key] === undefined) {
              this._data[key] = this._parseMetrics(font);
            }

            return this._data[key];
          } }]);


        return FontMetrics;
      }();

      /***/},
    /* 26 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.Proxy = undefined;

      var _Feature = __webpack_require__(10);

      var _Feature2 = _interopRequireDefault(_Feature);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var Proxy = exports.Proxy = function Proxy(src, options) {
        if (!options.proxy) {
          return Promise.reject(true ? 'No proxy defined' : undefined);
        }
        var proxy = options.proxy;

        return new Promise(function (resolve, reject) {
          var responseType = _Feature2.default.SUPPORT_CORS_XHR && _Feature2.default.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';
          var xhr = _Feature2.default.SUPPORT_CORS_XHR ? new XMLHttpRequest() : new XDomainRequest();
          xhr.onload = function () {
            if (xhr instanceof XMLHttpRequest) {
              if (xhr.status === 200) {
                if (responseType === 'text') {
                  resolve(xhr.response);
                } else {
                  var reader = new FileReader();
                  // $FlowFixMe
                  reader.addEventListener('load', function () {
                    return resolve(reader.result);
                  }, false);
                  // $FlowFixMe
                  reader.addEventListener('error', function (e) {
                    return reject(e);
                  }, false);
                  reader.readAsDataURL(xhr.response);
                }
              } else {
                reject(true ? 'Failed to proxy resource ' + src.substring(0, 256) + ' with status code ' + xhr.status : undefined);
              }
            } else {
              resolve(xhr.responseText);
            }
          };

          xhr.onerror = reject;
          xhr.open('GET', proxy + '?url=' + encodeURIComponent(src) + '&responseType=' + responseType);

          if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {
            xhr.responseType = responseType;
          }

          if (options.imageTimeout) {
            var timeout = options.imageTimeout;
            xhr.timeout = timeout;
            xhr.ontimeout = function () {
              return reject(true ? 'Timed out (' + timeout + 'ms) proxying ' + src.substring(0, 256) : undefined);
            };
          }

          xhr.send();
        });
      };

      /***/},
    /* 27 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      var _extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};

      var _CanvasRenderer = __webpack_require__(15);

      var _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);

      var _Logger = __webpack_require__(16);

      var _Logger2 = _interopRequireDefault(_Logger);

      var _Window = __webpack_require__(28);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var html2canvas = function html2canvas(element, conf) {
        var config = conf || {};
        var logger = new _Logger2.default(typeof config.logging === 'boolean' ? config.logging : true);
        logger.log('html2canvas ' + "1.0.0-alpha.12");

        if ( true && typeof config.onrendered === 'function') {
          logger.error('onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value');
        }

        var ownerDocument = element.ownerDocument;
        if (!ownerDocument) {
          return Promise.reject('Provided element is not within a Document');
        }
        var defaultView = ownerDocument.defaultView;

        var defaultOptions = {
          async: true,
          allowTaint: false,
          backgroundColor: '#ffffff',
          imageTimeout: 15000,
          logging: true,
          proxy: null,
          removeContainer: true,
          foreignObjectRendering: false,
          scale: defaultView.devicePixelRatio || 1,
          target: new _CanvasRenderer2.default(config.canvas),
          useCORS: false,
          windowWidth: defaultView.innerWidth,
          windowHeight: defaultView.innerHeight,
          scrollX: defaultView.pageXOffset,
          scrollY: defaultView.pageYOffset };


        var result = (0, _Window.renderElement)(element, _extends({}, defaultOptions, config), logger);

        if (true) {
          return result.catch(function (e) {
            logger.error(e);
            throw e;
          });
        }
        return result;
      };

      html2canvas.CanvasRenderer = _CanvasRenderer2.default;

      module.exports = html2canvas;

      /***/},
    /* 28 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.renderElement = undefined;

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _Logger = __webpack_require__(16);

      var _Logger2 = _interopRequireDefault(_Logger);

      var _NodeParser = __webpack_require__(29);

      var _Renderer = __webpack_require__(51);

      var _Renderer2 = _interopRequireDefault(_Renderer);

      var _ForeignObjectRenderer = __webpack_require__(23);

      var _ForeignObjectRenderer2 = _interopRequireDefault(_ForeignObjectRenderer);

      var _Feature = __webpack_require__(10);

      var _Feature2 = _interopRequireDefault(_Feature);

      var _Bounds = __webpack_require__(2);

      var _Clone = __webpack_require__(54);

      var _Font = __webpack_require__(25);

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var renderElement = exports.renderElement = function renderElement(element, options, logger) {
        var ownerDocument = element.ownerDocument;

        var windowBounds = new _Bounds.Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight);

        // http://www.w3.org/TR/css3-background/#special-backgrounds
        var documentBackgroundColor = ownerDocument.documentElement ? new _Color2.default(getComputedStyle(ownerDocument.documentElement).backgroundColor) : _Color.TRANSPARENT;
        var bodyBackgroundColor = ownerDocument.body ? new _Color2.default(getComputedStyle(ownerDocument.body).backgroundColor) : _Color.TRANSPARENT;

        var backgroundColor = element === ownerDocument.documentElement ? documentBackgroundColor.isTransparent() ? bodyBackgroundColor.isTransparent() ? options.backgroundColor ? new _Color2.default(options.backgroundColor) : null : bodyBackgroundColor : documentBackgroundColor : options.backgroundColor ? new _Color2.default(options.backgroundColor) : null;

        return (options.foreignObjectRendering ? // $FlowFixMe
        _Feature2.default.SUPPORT_FOREIGNOBJECT_DRAWING : Promise.resolve(false)).then(function (supportForeignObject) {
          return supportForeignObject ? function (cloner) {
            if (true) {
              logger.log('Document cloned, using foreignObject rendering');
            }

            return cloner.inlineFonts(ownerDocument).then(function () {
              return cloner.resourceLoader.ready();
            }).then(function () {
              var renderer = new _ForeignObjectRenderer2.default(cloner.documentElement);

              var defaultView = ownerDocument.defaultView;
              var scrollX = defaultView.pageXOffset;
              var scrollY = defaultView.pageYOffset;

              var isDocument = element.tagName === 'HTML' || element.tagName === 'BODY';

              var _ref = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(element, scrollX, scrollY),
              width = _ref.width,
              height = _ref.height,
              left = _ref.left,
              top = _ref.top;

              return renderer.render({
                backgroundColor: backgroundColor,
                logger: logger,
                scale: options.scale,
                x: typeof options.x === 'number' ? options.x : left,
                y: typeof options.y === 'number' ? options.y : top,
                width: typeof options.width === 'number' ? options.width : Math.ceil(width),
                height: typeof options.height === 'number' ? options.height : Math.ceil(height),
                windowWidth: options.windowWidth,
                windowHeight: options.windowHeight,
                scrollX: options.scrollX,
                scrollY: options.scrollY });

            });
          }(new _Clone.DocumentCloner(element, options, logger, true, renderElement)) : (0, _Clone.cloneWindow)(ownerDocument, windowBounds, element, options, logger, renderElement).then(function (_ref2) {
            var _ref3 = _slicedToArray(_ref2, 3),
            container = _ref3[0],
            clonedElement = _ref3[1],
            resourceLoader = _ref3[2];

            if (true) {
              logger.log('Document cloned, using computed rendering');
            }

            var stack = (0, _NodeParser.NodeParser)(clonedElement, resourceLoader, logger);
            var clonedDocument = clonedElement.ownerDocument;

            if (backgroundColor === stack.container.style.background.backgroundColor) {
              stack.container.style.background.backgroundColor = _Color.TRANSPARENT;
            }

            return resourceLoader.ready().then(function (imageStore) {
              var fontMetrics = new _Font.FontMetrics(clonedDocument);
              if (true) {
                logger.log('Starting renderer');
              }

              var defaultView = clonedDocument.defaultView;
              var scrollX = defaultView.pageXOffset;
              var scrollY = defaultView.pageYOffset;

              var isDocument = clonedElement.tagName === 'HTML' || clonedElement.tagName === 'BODY';

              var _ref4 = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(clonedElement, scrollX, scrollY),
              width = _ref4.width,
              height = _ref4.height,
              left = _ref4.left,
              top = _ref4.top;

              var renderOptions = {
                backgroundColor: backgroundColor,
                fontMetrics: fontMetrics,
                imageStore: imageStore,
                logger: logger,
                scale: options.scale,
                x: typeof options.x === 'number' ? options.x : left,
                y: typeof options.y === 'number' ? options.y : top,
                width: typeof options.width === 'number' ? options.width : Math.ceil(width),
                height: typeof options.height === 'number' ? options.height : Math.ceil(height) };


              if (Array.isArray(options.target)) {
                return Promise.all(options.target.map(function (target) {
                  var renderer = new _Renderer2.default(target, renderOptions);
                  return renderer.render(stack);
                }));
              } else {
                var renderer = new _Renderer2.default(options.target, renderOptions);
                var canvas = renderer.render(stack);
                if (options.removeContainer === true) {
                  if (container.parentNode) {
                    container.parentNode.removeChild(container);
                  } else if (true) {
                    logger.log('Cannot detach cloned iframe as it is not in the DOM anymore');
                  }
                }

                return canvas;
              }
            });
          });
        });
      };

      /***/},
    /* 29 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.NodeParser = undefined;

      var _StackingContext = __webpack_require__(30);

      var _StackingContext2 = _interopRequireDefault(_StackingContext);

      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      var _TextContainer = __webpack_require__(9);

      var _TextContainer2 = _interopRequireDefault(_TextContainer);

      var _Input = __webpack_require__(21);

      var _ListItem = __webpack_require__(14);

      var _listStyle = __webpack_require__(8);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var NodeParser = exports.NodeParser = function NodeParser(node, resourceLoader, logger) {
        if (true) {
          logger.log('Starting node parsing');
        }

        var index = 0;

        var container = new _NodeContainer2.default(node, null, resourceLoader, index++);
        var stack = new _StackingContext2.default(container, null, true);

        parseNodeTree(node, container, stack, resourceLoader, index);

        if (true) {
          logger.log('Finished parsing node tree');
        }

        return stack;
      };

      var IGNORED_NODE_NAMES = ['SCRIPT', 'HEAD', 'TITLE', 'OBJECT', 'BR', 'OPTION'];

      var parseNodeTree = function parseNodeTree(node, parent, stack, resourceLoader, index) {
        if ( true && index > 50000) {
          throw new Error('Recursion error while parsing node tree');
        }

        for (var childNode = node.firstChild, nextNode; childNode; childNode = nextNode) {
          nextNode = childNode.nextSibling;
          var defaultView = childNode.ownerDocument.defaultView;
          if (childNode instanceof defaultView.Text || childNode instanceof Text || defaultView.parent && childNode instanceof defaultView.parent.Text) {
            if (childNode.data.trim().length > 0) {
              parent.childNodes.push(_TextContainer2.default.fromTextNode(childNode, parent));
            }
          } else if (childNode instanceof defaultView.HTMLElement || childNode instanceof HTMLElement || defaultView.parent && childNode instanceof defaultView.parent.HTMLElement) {
            if (IGNORED_NODE_NAMES.indexOf(childNode.nodeName) === -1) {
              var container = new _NodeContainer2.default(childNode, parent, resourceLoader, index++);
              if (container.isVisible()) {
                if (childNode.tagName === 'INPUT') {
                  // $FlowFixMe
                  (0, _Input.inlineInputElement)(childNode, container);
                } else if (childNode.tagName === 'TEXTAREA') {
                  // $FlowFixMe
                  (0, _Input.inlineTextAreaElement)(childNode, container);
                } else if (childNode.tagName === 'SELECT') {
                  // $FlowFixMe
                  (0, _Input.inlineSelectElement)(childNode, container);
                } else if (container.style.listStyle && container.style.listStyle.listStyleType !== _listStyle.LIST_STYLE_TYPE.NONE) {
                  (0, _ListItem.inlineListItemElement)(childNode, container, resourceLoader);
                }

                var SHOULD_TRAVERSE_CHILDREN = childNode.tagName !== 'TEXTAREA';
                var treatAsRealStackingContext = createsRealStackingContext(container, childNode);
                if (treatAsRealStackingContext || createsStackingContext(container)) {
                  // for treatAsRealStackingContext:false, any positioned descendants and descendants
                  // which actually create a new stacking context should be considered part of the parent stacking context
                  var parentStack = treatAsRealStackingContext || container.isPositioned() ? stack.getRealParentStackingContext() : stack;
                  var childStack = new _StackingContext2.default(container, parentStack, treatAsRealStackingContext);
                  parentStack.contexts.push(childStack);
                  if (SHOULD_TRAVERSE_CHILDREN) {
                    parseNodeTree(childNode, container, childStack, resourceLoader, index);
                  }
                } else {
                  stack.children.push(container);
                  if (SHOULD_TRAVERSE_CHILDREN) {
                    parseNodeTree(childNode, container, stack, resourceLoader, index);
                  }
                }
              }
            }
          } else if (childNode instanceof defaultView.SVGSVGElement || childNode instanceof SVGSVGElement || defaultView.parent && childNode instanceof defaultView.parent.SVGSVGElement) {
            var _container = new _NodeContainer2.default(childNode, parent, resourceLoader, index++);
            var _treatAsRealStackingContext = createsRealStackingContext(_container, childNode);
            if (_treatAsRealStackingContext || createsStackingContext(_container)) {
              // for treatAsRealStackingContext:false, any positioned descendants and descendants
              // which actually create a new stacking context should be considered part of the parent stacking context
              var _parentStack = _treatAsRealStackingContext || _container.isPositioned() ? stack.getRealParentStackingContext() : stack;
              var _childStack = new _StackingContext2.default(_container, _parentStack, _treatAsRealStackingContext);
              _parentStack.contexts.push(_childStack);
            } else {
              stack.children.push(_container);
            }
          }
        }
      };

      var createsRealStackingContext = function createsRealStackingContext(container, node) {
        return container.isRootElement() || container.isPositionedWithZIndex() || container.style.opacity < 1 || container.isTransformed() || isBodyWithTransparentRoot(container, node);
      };

      var createsStackingContext = function createsStackingContext(container) {
        return container.isPositioned() || container.isFloating();
      };

      var isBodyWithTransparentRoot = function isBodyWithTransparentRoot(container, node) {
        return node.nodeName === 'BODY' && container.parent instanceof _NodeContainer2.default && container.parent.style.background.backgroundColor.isTransparent();
      };

      /***/},
    /* 30 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      var _position = __webpack_require__(19);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var StackingContext = function () {
        function StackingContext(container, parent, treatAsRealStackingContext) {
          _classCallCheck(this, StackingContext);

          this.container = container;
          this.parent = parent;
          this.contexts = [];
          this.children = [];
          this.treatAsRealStackingContext = treatAsRealStackingContext;
        }

        _createClass(StackingContext, [{
          key: 'getOpacity',
          value: function getOpacity() {
            return this.parent ? this.container.style.opacity * this.parent.getOpacity() : this.container.style.opacity;
          } },
        {
          key: 'getRealParentStackingContext',
          value: function getRealParentStackingContext() {
            return !this.parent || this.treatAsRealStackingContext ? this : this.parent.getRealParentStackingContext();
          } }]);


        return StackingContext;
      }();

      exports.default = StackingContext;

      /***/},
    /* 31 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var Size = function Size(width, height) {
        _classCallCheck(this, Size);

        this.width = width;
        this.height = height;
      };

      exports.default = Size;

      /***/},
    /* 32 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Path = __webpack_require__(6);

      var _Vector = __webpack_require__(7);

      var _Vector2 = _interopRequireDefault(_Vector);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var lerp = function lerp(a, b, t) {
        return new _Vector2.default(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);
      };

      var BezierCurve = function () {
        function BezierCurve(start, startControl, endControl, end) {
          _classCallCheck(this, BezierCurve);

          this.type = _Path.PATH.BEZIER_CURVE;
          this.start = start;
          this.startControl = startControl;
          this.endControl = endControl;
          this.end = end;
        }

        _createClass(BezierCurve, [{
          key: 'subdivide',
          value: function subdivide(t, firstHalf) {
            var ab = lerp(this.start, this.startControl, t);
            var bc = lerp(this.startControl, this.endControl, t);
            var cd = lerp(this.endControl, this.end, t);
            var abbc = lerp(ab, bc, t);
            var bccd = lerp(bc, cd, t);
            var dest = lerp(abbc, bccd, t);
            return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);
          } },
        {
          key: 'reverse',
          value: function reverse() {
            return new BezierCurve(this.end, this.endControl, this.startControl, this.start);
          } }]);


        return BezierCurve;
      }();

      exports.default = BezierCurve;

      /***/},
    /* 33 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseBorderRadius = undefined;

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var SIDES = ['top-left', 'top-right', 'bottom-right', 'bottom-left'];

      var parseBorderRadius = exports.parseBorderRadius = function parseBorderRadius(style) {
        return SIDES.map(function (side) {
          var value = style.getPropertyValue('border-' + side + '-radius');

          var _value$split$map = value.split(' ').map(_Length2.default.create),
          _value$split$map2 = _slicedToArray(_value$split$map, 2),
          horizontal = _value$split$map2[0],
          vertical = _value$split$map2[1];

          return typeof vertical === 'undefined' ? [horizontal, horizontal] : [horizontal, vertical];
        });
      };

      /***/},
    /* 34 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var DISPLAY = exports.DISPLAY = {
        NONE: 1 << 0,
        BLOCK: 1 << 1,
        INLINE: 1 << 2,
        RUN_IN: 1 << 3,
        FLOW: 1 << 4,
        FLOW_ROOT: 1 << 5,
        TABLE: 1 << 6,
        FLEX: 1 << 7,
        GRID: 1 << 8,
        RUBY: 1 << 9,
        SUBGRID: 1 << 10,
        LIST_ITEM: 1 << 11,
        TABLE_ROW_GROUP: 1 << 12,
        TABLE_HEADER_GROUP: 1 << 13,
        TABLE_FOOTER_GROUP: 1 << 14,
        TABLE_ROW: 1 << 15,
        TABLE_CELL: 1 << 16,
        TABLE_COLUMN_GROUP: 1 << 17,
        TABLE_COLUMN: 1 << 18,
        TABLE_CAPTION: 1 << 19,
        RUBY_BASE: 1 << 20,
        RUBY_TEXT: 1 << 21,
        RUBY_BASE_CONTAINER: 1 << 22,
        RUBY_TEXT_CONTAINER: 1 << 23,
        CONTENTS: 1 << 24,
        INLINE_BLOCK: 1 << 25,
        INLINE_LIST_ITEM: 1 << 26,
        INLINE_TABLE: 1 << 27,
        INLINE_FLEX: 1 << 28,
        INLINE_GRID: 1 << 29 };


      var parseDisplayValue = function parseDisplayValue(display) {
        switch (display) {
          case 'block':
            return DISPLAY.BLOCK;
          case 'inline':
            return DISPLAY.INLINE;
          case 'run-in':
            return DISPLAY.RUN_IN;
          case 'flow':
            return DISPLAY.FLOW;
          case 'flow-root':
            return DISPLAY.FLOW_ROOT;
          case 'table':
            return DISPLAY.TABLE;
          case 'flex':
            return DISPLAY.FLEX;
          case 'grid':
            return DISPLAY.GRID;
          case 'ruby':
            return DISPLAY.RUBY;
          case 'subgrid':
            return DISPLAY.SUBGRID;
          case 'list-item':
            return DISPLAY.LIST_ITEM;
          case 'table-row-group':
            return DISPLAY.TABLE_ROW_GROUP;
          case 'table-header-group':
            return DISPLAY.TABLE_HEADER_GROUP;
          case 'table-footer-group':
            return DISPLAY.TABLE_FOOTER_GROUP;
          case 'table-row':
            return DISPLAY.TABLE_ROW;
          case 'table-cell':
            return DISPLAY.TABLE_CELL;
          case 'table-column-group':
            return DISPLAY.TABLE_COLUMN_GROUP;
          case 'table-column':
            return DISPLAY.TABLE_COLUMN;
          case 'table-caption':
            return DISPLAY.TABLE_CAPTION;
          case 'ruby-base':
            return DISPLAY.RUBY_BASE;
          case 'ruby-text':
            return DISPLAY.RUBY_TEXT;
          case 'ruby-base-container':
            return DISPLAY.RUBY_BASE_CONTAINER;
          case 'ruby-text-container':
            return DISPLAY.RUBY_TEXT_CONTAINER;
          case 'contents':
            return DISPLAY.CONTENTS;
          case 'inline-block':
            return DISPLAY.INLINE_BLOCK;
          case 'inline-list-item':
            return DISPLAY.INLINE_LIST_ITEM;
          case 'inline-table':
            return DISPLAY.INLINE_TABLE;
          case 'inline-flex':
            return DISPLAY.INLINE_FLEX;
          case 'inline-grid':
            return DISPLAY.INLINE_GRID;}


        return DISPLAY.NONE;
      };

      var setDisplayBit = function setDisplayBit(bit, display) {
        return bit | parseDisplayValue(display);
      };

      var parseDisplay = exports.parseDisplay = function parseDisplay(display) {
        return display.split(' ').reduce(setDisplayBit, 0);
      };

      /***/},
    /* 35 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var FLOAT = exports.FLOAT = {
        NONE: 0,
        LEFT: 1,
        RIGHT: 2,
        INLINE_START: 3,
        INLINE_END: 4 };


      var parseCSSFloat = exports.parseCSSFloat = function parseCSSFloat(float) {
        switch (float) {
          case 'left':
            return FLOAT.LEFT;
          case 'right':
            return FLOAT.RIGHT;
          case 'inline-start':
            return FLOAT.INLINE_START;
          case 'inline-end':
            return FLOAT.INLINE_END;}

        return FLOAT.NONE;
      };

      /***/},
    /* 36 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });



      var parseFontWeight = function parseFontWeight(weight) {
        switch (weight) {
          case 'normal':
            return 400;
          case 'bold':
            return 700;}


        var value = parseInt(weight, 10);
        return isNaN(value) ? 400 : value;
      };

      var parseFont = exports.parseFont = function parseFont(style) {
        var fontFamily = style.fontFamily;
        var fontSize = style.fontSize;
        var fontStyle = style.fontStyle;
        var fontVariant = style.fontVariant;
        var fontWeight = parseFontWeight(style.fontWeight);

        return {
          fontFamily: fontFamily,
          fontSize: fontSize,
          fontStyle: fontStyle,
          fontVariant: fontVariant,
          fontWeight: fontWeight };

      };

      /***/},
    /* 37 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var parseLetterSpacing = exports.parseLetterSpacing = function parseLetterSpacing(letterSpacing) {
        if (letterSpacing === 'normal') {
          return 0;
        }
        var value = parseFloat(letterSpacing);
        return isNaN(value) ? 0 : value;
      };

      /***/},
    /* 38 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var LINE_BREAK = exports.LINE_BREAK = {
        NORMAL: 'normal',
        STRICT: 'strict' };


      var parseLineBreak = exports.parseLineBreak = function parseLineBreak(wordBreak) {
        switch (wordBreak) {
          case 'strict':
            return LINE_BREAK.STRICT;
          case 'normal':
          default:
            return LINE_BREAK.NORMAL;}

      };

      /***/},
    /* 39 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseMargin = undefined;

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var SIDES = ['top', 'right', 'bottom', 'left'];

      var parseMargin = exports.parseMargin = function parseMargin(style) {
        return SIDES.map(function (side) {
          return new _Length2.default(style.getPropertyValue('margin-' + side));
        });
      };

      /***/},
    /* 40 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var OVERFLOW = exports.OVERFLOW = {
        VISIBLE: 0,
        HIDDEN: 1,
        SCROLL: 2,
        AUTO: 3 };


      var parseOverflow = exports.parseOverflow = function parseOverflow(overflow) {
        switch (overflow) {
          case 'hidden':
            return OVERFLOW.HIDDEN;
          case 'scroll':
            return OVERFLOW.SCROLL;
          case 'auto':
            return OVERFLOW.AUTO;
          case 'visible':
          default:
            return OVERFLOW.VISIBLE;}

      };

      /***/},
    /* 41 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseTextShadow = undefined;

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var NUMBER = /^([+-]|\d|\.)$/i;

      var parseTextShadow = exports.parseTextShadow = function parseTextShadow(textShadow) {
        if (textShadow === 'none' || typeof textShadow !== 'string') {
          return null;
        }

        var currentValue = '';
        var isLength = false;
        var values = [];
        var shadows = [];
        var numParens = 0;
        var color = null;

        var appendValue = function appendValue() {
          if (currentValue.length) {
            if (isLength) {
              values.push(parseFloat(currentValue));
            } else {
              color = new _Color2.default(currentValue);
            }
          }
          isLength = false;
          currentValue = '';
        };

        var appendShadow = function appendShadow() {
          if (values.length && color !== null) {
            shadows.push({
              color: color,
              offsetX: values[0] || 0,
              offsetY: values[1] || 0,
              blur: values[2] || 0 });

          }
          values.splice(0, values.length);
          color = null;
        };

        for (var i = 0; i < textShadow.length; i++) {
          var c = textShadow[i];
          switch (c) {
            case '(':
              currentValue += c;
              numParens++;
              break;
            case ')':
              currentValue += c;
              numParens--;
              break;
            case ',':
              if (numParens === 0) {
                appendValue();
                appendShadow();
              } else {
                currentValue += c;
              }
              break;
            case ' ':
              if (numParens === 0) {
                appendValue();
              } else {
                currentValue += c;
              }
              break;
            default:
              if (currentValue.length === 0 && NUMBER.test(c)) {
                isLength = true;
              }
              currentValue += c;}

        }

        appendValue();
        appendShadow();

        if (shadows.length === 0) {
          return null;
        }

        return shadows;
      };

      /***/},
    /* 42 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseTransform = undefined;

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      var toFloat = function toFloat(s) {
        return parseFloat(s.trim());
      };

      var MATRIX = /(matrix|matrix3d)\((.+)\)/;

      var parseTransform = exports.parseTransform = function parseTransform(style) {
        var transform = parseTransformMatrix(style.transform || style.webkitTransform || style.mozTransform ||
        // $FlowFixMe
        style.msTransform ||
        // $FlowFixMe
        style.oTransform);
        if (transform === null) {
          return null;
        }

        return {
          transform: transform,
          transformOrigin: parseTransformOrigin(style.transformOrigin || style.webkitTransformOrigin || style.mozTransformOrigin ||
          // $FlowFixMe
          style.msTransformOrigin ||
          // $FlowFixMe
          style.oTransformOrigin) };

      };

      // $FlowFixMe
      var parseTransformOrigin = function parseTransformOrigin(origin) {
        if (typeof origin !== 'string') {
          var v = new _Length2.default('0');
          return [v, v];
        }
        var values = origin.split(' ').map(_Length2.default.create);
        return [values[0], values[1]];
      };

      // $FlowFixMe
      var parseTransformMatrix = function parseTransformMatrix(transform) {
        if (transform === 'none' || typeof transform !== 'string') {
          return null;
        }

        var match = transform.match(MATRIX);
        if (match) {
          if (match[1] === 'matrix') {
            var matrix = match[2].split(',').map(toFloat);
            return [matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]];
          } else {
            var matrix3d = match[2].split(',').map(toFloat);
            return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];
          }
        }
        return null;
      };

      /***/},
    /* 43 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var VISIBILITY = exports.VISIBILITY = {
        VISIBLE: 0,
        HIDDEN: 1,
        COLLAPSE: 2 };


      var parseVisibility = exports.parseVisibility = function parseVisibility(visibility) {
        switch (visibility) {
          case 'hidden':
            return VISIBILITY.HIDDEN;
          case 'collapse':
            return VISIBILITY.COLLAPSE;
          case 'visible':
          default:
            return VISIBILITY.VISIBLE;}

      };

      /***/},
    /* 44 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var WORD_BREAK = exports.WORD_BREAK = {
        NORMAL: 'normal',
        BREAK_ALL: 'break-all',
        KEEP_ALL: 'keep-all' };


      var parseWordBreak = exports.parseWordBreak = function parseWordBreak(wordBreak) {
        switch (wordBreak) {
          case 'break-all':
            return WORD_BREAK.BREAK_ALL;
          case 'keep-all':
            return WORD_BREAK.KEEP_ALL;
          case 'normal':
          default:
            return WORD_BREAK.NORMAL;}

      };

      /***/},
    /* 45 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var parseZIndex = exports.parseZIndex = function parseZIndex(zIndex) {
        var auto = zIndex === 'auto';
        return {
          auto: auto,
          order: auto ? 0 : parseInt(zIndex, 10) };

      };

      /***/},
    /* 46 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _Util = __webpack_require__(13);

      Object.defineProperty(exports, 'toCodePoints', {
        enumerable: true,
        get: function get() {
          return _Util.toCodePoints;
        } });

      Object.defineProperty(exports, 'fromCodePoint', {
        enumerable: true,
        get: function get() {
          return _Util.fromCodePoint;
        } });


      var _LineBreak = __webpack_require__(47);

      Object.defineProperty(exports, 'LineBreaker', {
        enumerable: true,
        get: function get() {
          return _LineBreak.LineBreaker;
        } });


      /***/},
    /* 47 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.LineBreaker = exports.inlineBreakOpportunities = exports.lineBreakAtIndex = exports.codePointsToCharacterClasses = exports.UnicodeTrie = exports.BREAK_ALLOWED = exports.BREAK_NOT_ALLOWED = exports.BREAK_MANDATORY = exports.classes = exports.LETTER_NUMBER_MODIFIER = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _Trie = __webpack_require__(48);

      var _linebreakTrie = __webpack_require__(49);

      var _linebreakTrie2 = _interopRequireDefault(_linebreakTrie);

      var _Util = __webpack_require__(13);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _toConsumableArray(arr) {if (Array.isArray(arr)) {for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {arr2[i] = arr[i];}return arr2;} else {return Array.from(arr);}}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var LETTER_NUMBER_MODIFIER = exports.LETTER_NUMBER_MODIFIER = 50;

      // Non-tailorable Line Breaking Classes
      var BK = 1; //  Cause a line break (after)
      var CR = 2; //  Cause a line break (after), except between CR and LF
      var LF = 3; //  Cause a line break (after)
      var CM = 4; //  Prohibit a line break between the character and the preceding character
      var NL = 5; //  Cause a line break (after)
      var SG = 6; //  Do not occur in well-formed text
      var WJ = 7; //  Prohibit line breaks before and after
      var ZW = 8; //  Provide a break opportunity
      var GL = 9; //  Prohibit line breaks before and after
      var SP = 10; // Enable indirect line breaks
      var ZWJ = 11; // Prohibit line breaks within joiner sequences
      // Break Opportunities
      var B2 = 12; //  Provide a line break opportunity before and after the character
      var BA = 13; //  Generally provide a line break opportunity after the character
      var BB = 14; //  Generally provide a line break opportunity before the character
      var HY = 15; //  Provide a line break opportunity after the character, except in numeric context
      var CB = 16; //   Provide a line break opportunity contingent on additional information
      // Characters Prohibiting Certain Breaks
      var CL = 17; //  Prohibit line breaks before
      var CP = 18; //  Prohibit line breaks before
      var EX = 19; //  Prohibit line breaks before
      var IN = 20; //  Allow only indirect line breaks between pairs
      var NS = 21; //  Allow only indirect line breaks before
      var OP = 22; //  Prohibit line breaks after
      var QU = 23; //  Act like they are both opening and closing
      // Numeric Context
      var IS = 24; //  Prevent breaks after any and before numeric
      var NU = 25; //  Form numeric expressions for line breaking purposes
      var PO = 26; //  Do not break following a numeric expression
      var PR = 27; //  Do not break in front of a numeric expression
      var SY = 28; //  Prevent a break before; and allow a break after
      // Other Characters
      var AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID
      var AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters
      var CJ = 31; //  Treat as NS or ID for strict or normal breaking.
      var EB = 32; //  Do not break from following Emoji Modifier
      var EM = 33; //  Do not break from preceding Emoji Base
      var H2 = 34; //  Form Korean syllable blocks
      var H3 = 35; //  Form Korean syllable blocks
      var HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic
      var ID = 37; //  Break before or after; except in some numeric context
      var JL = 38; //  Form Korean syllable blocks
      var JV = 39; //  Form Korean syllable blocks
      var JT = 40; //  Form Korean syllable blocks
      var RI = 41; //  Keep pairs together. For pairs; break before and after other classes
      var SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis
      var XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions

      var classes = exports.classes = {
        BK: BK,
        CR: CR,
        LF: LF,
        CM: CM,
        NL: NL,
        SG: SG,
        WJ: WJ,
        ZW: ZW,
        GL: GL,
        SP: SP,
        ZWJ: ZWJ,
        B2: B2,
        BA: BA,
        BB: BB,
        HY: HY,
        CB: CB,
        CL: CL,
        CP: CP,
        EX: EX,
        IN: IN,
        NS: NS,
        OP: OP,
        QU: QU,
        IS: IS,
        NU: NU,
        PO: PO,
        PR: PR,
        SY: SY,
        AI: AI,
        AL: AL,
        CJ: CJ,
        EB: EB,
        EM: EM,
        H2: H2,
        H3: H3,
        HL: HL,
        ID: ID,
        JL: JL,
        JV: JV,
        JT: JT,
        RI: RI,
        SA: SA,
        XX: XX };


      var BREAK_MANDATORY = exports.BREAK_MANDATORY = '!';
      var BREAK_NOT_ALLOWED = exports.BREAK_NOT_ALLOWED = '×';
      var BREAK_ALLOWED = exports.BREAK_ALLOWED = '÷';
      var UnicodeTrie = exports.UnicodeTrie = (0, _Trie.createTrieFromBase64)(_linebreakTrie2.default);

      var ALPHABETICS = [AL, HL];
      var HARD_LINE_BREAKS = [BK, CR, LF, NL];
      var SPACE = [SP, ZW];
      var PREFIX_POSTFIX = [PR, PO];
      var LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE);
      var KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];
      var HYPHEN = [HY, BA];

      var codePointsToCharacterClasses = exports.codePointsToCharacterClasses = function codePointsToCharacterClasses(codePoints) {
        var lineBreak = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'strict';

        var types = [];
        var indicies = [];
        var categories = [];
        codePoints.forEach(function (codePoint, index) {
          var classType = UnicodeTrie.get(codePoint);
          if (classType > LETTER_NUMBER_MODIFIER) {
            categories.push(true);
            classType -= LETTER_NUMBER_MODIFIER;
          } else {
            categories.push(false);
          }

          if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {
            // U+2010, – U+2013, 〜 U+301C, ゠ U+30A0
            if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {
              indicies.push(index);
              return types.push(CB);
            }
          }

          if (classType === CM || classType === ZWJ) {
            // LB10 Treat any remaining combining mark or ZWJ as AL.
            if (index === 0) {
              indicies.push(index);
              return types.push(AL);
            }

            // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of
            // the base character in all of the following rules. Treat ZWJ as if it were CM.
            var prev = types[index - 1];
            if (LINE_BREAKS.indexOf(prev) === -1) {
              indicies.push(indicies[index - 1]);
              return types.push(prev);
            }
            indicies.push(index);
            return types.push(AL);
          }

          indicies.push(index);

          if (classType === CJ) {
            return types.push(lineBreak === 'strict' ? NS : ID);
          }

          if (classType === SA) {
            return types.push(AL);
          }

          if (classType === AI) {
            return types.push(AL);
          }

          // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL
          // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised
          // to take into account the actual line breaking properties for these characters.
          if (classType === XX) {
            if (codePoint >= 0x20000 && codePoint <= 0x2fffd || codePoint >= 0x30000 && codePoint <= 0x3fffd) {
              return types.push(ID);
            } else {
              return types.push(AL);
            }
          }

          types.push(classType);
        });

        return [indicies, types, categories];
      };

      var isAdjacentWithSpaceIgnored = function isAdjacentWithSpaceIgnored(a, b, currentIndex, classTypes) {
        var current = classTypes[currentIndex];
        if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {
          var i = currentIndex;
          while (i <= classTypes.length) {
            i++;
            var next = classTypes[i];

            if (next === b) {
              return true;
            }

            if (next !== SP) {
              break;
            }
          }
        }

        if (current === SP) {
          var _i = currentIndex;

          while (_i > 0) {
            _i--;
            var prev = classTypes[_i];

            if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {
              var n = currentIndex;
              while (n <= classTypes.length) {
                n++;
                var _next = classTypes[n];

                if (_next === b) {
                  return true;
                }

                if (_next !== SP) {
                  break;
                }
              }
            }

            if (prev !== SP) {
              break;
            }
          }
        }
        return false;
      };

      var previousNonSpaceClassType = function previousNonSpaceClassType(currentIndex, classTypes) {
        var i = currentIndex;
        while (i >= 0) {
          var type = classTypes[i];
          if (type === SP) {
            i--;
          } else {
            return type;
          }
        }
        return 0;
      };

      var _lineBreakAtIndex = function _lineBreakAtIndex(codePoints, classTypes, indicies, index, forbiddenBreaks) {
        if (indicies[index] === 0) {
          return BREAK_NOT_ALLOWED;
        }

        var currentIndex = index - 1;
        if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {
          return BREAK_NOT_ALLOWED;
        }

        var beforeIndex = currentIndex - 1;
        var afterIndex = currentIndex + 1;
        var current = classTypes[currentIndex];

        // LB4 Always break after hard line breaks.
        // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.
        var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;
        var next = classTypes[afterIndex];

        if (current === CR && next === LF) {
          return BREAK_NOT_ALLOWED;
        }

        if (HARD_LINE_BREAKS.indexOf(current) !== -1) {
          return BREAK_MANDATORY;
        }

        // LB6 Do not break before hard line breaks.
        if (HARD_LINE_BREAKS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB7 Do not break before spaces or zero width space.
        if (SPACE.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.
        if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {
          return BREAK_ALLOWED;
        }

        // LB8a Do not break between a zero width joiner and an ideograph, emoji base or emoji modifier.
        if (UnicodeTrie.get(codePoints[currentIndex]) === ZWJ && (next === ID || next === EB || next === EM)) {
          return BREAK_NOT_ALLOWED;
        }

        // LB11 Do not break before or after Word joiner and related characters.
        if (current === WJ || next === WJ) {
          return BREAK_NOT_ALLOWED;
        }

        // LB12 Do not break after NBSP and related characters.
        if (current === GL) {
          return BREAK_NOT_ALLOWED;
        }

        // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.
        if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {
          return BREAK_NOT_ALLOWED;
        }

        // LB13 Do not break before ‘]’ or ‘!’ or ‘;’ or ‘/’, even after spaces.
        if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB14 Do not break after ‘[’, even after spaces.
        if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {
          return BREAK_NOT_ALLOWED;
        }

        // LB15 Do not break within ‘”[’, even with intervening spaces.
        if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED;
        }

        // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.
        if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED;
        }

        // LB17 Do not break within ‘——’, even with intervening spaces.
        if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED;
        }

        // LB18 Break after spaces.
        if (current === SP) {
          return BREAK_ALLOWED;
        }

        // LB19 Do not break before or after quotation marks, such as ‘ ” ’.
        if (current === QU || next === QU) {
          return BREAK_NOT_ALLOWED;
        }

        // LB20 Break before and after unresolved CB.
        if (next === CB || current === CB) {
          return BREAK_ALLOWED;
        }

        // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.
        if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {
          return BREAK_NOT_ALLOWED;
        }

        // LB21a Don't break after Hebrew + Hyphen.
        if (before === HL && HYPHEN.indexOf(current) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB21b Don’t break between Solidus and Hebrew letters.
        if (current === SY && next === HL) {
          return BREAK_NOT_ALLOWED;
        }

        // LB22 Do not break between two ellipses, or between letters, numbers or exclamations and ellipsis.
        if (next === IN && ALPHABETICS.concat(IN, EX, NU, ID, EB, EM).indexOf(current) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB23 Do not break between digits and letters.
        if (ALPHABETICS.indexOf(next) !== -1 && current === NU || ALPHABETICS.indexOf(current) !== -1 && next === NU) {
          return BREAK_NOT_ALLOWED;
        }

        // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.
        if (current === PR && [ID, EB, EM].indexOf(next) !== -1 || [ID, EB, EM].indexOf(current) !== -1 && next === PO) {
          return BREAK_NOT_ALLOWED;
        }

        // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.
        if (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1 || PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB25 Do not break between the following pairs of classes relevant to numbers:
        if (
        // (PR | PO) × ( OP | HY )? NU
        [PR, PO].indexOf(current) !== -1 && (next === NU || [OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU) ||
        // ( OP | HY ) × NU
        [OP, HY].indexOf(current) !== -1 && next === NU ||
        // NU ×	(NU | SY | IS)
        current === NU && [NU, SY, IS].indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // NU (NU | SY | IS)* × (NU | SY | IS | CL | CP)
        if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {
          var prevIndex = currentIndex;
          while (prevIndex >= 0) {
            var type = classTypes[prevIndex];
            if (type === NU) {
              return BREAK_NOT_ALLOWED;
            } else if ([SY, IS].indexOf(type) !== -1) {
              prevIndex--;
            } else {
              break;
            }
          }
        }

        // NU (NU | SY | IS)* (CL | CP)? × (PO | PR))
        if ([PR, PO].indexOf(next) !== -1) {
          var _prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;
          while (_prevIndex >= 0) {
            var _type = classTypes[_prevIndex];
            if (_type === NU) {
              return BREAK_NOT_ALLOWED;
            } else if ([SY, IS].indexOf(_type) !== -1) {
              _prevIndex--;
            } else {
              break;
            }
          }
        }

        // LB26 Do not break a Korean syllable.
        if (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1 || [JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1 || [JT, H3].indexOf(current) !== -1 && next === JT) {
          return BREAK_NOT_ALLOWED;
        }

        // LB27 Treat a Korean Syllable Block the same as ID.
        if (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1 || KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR) {
          return BREAK_NOT_ALLOWED;
        }

        // LB28 Do not break between alphabetics (“at”).
        if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB29 Do not break between numeric punctuation and alphabetics (“e.g.”).
        if (current === IS && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }

        // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.
        if (ALPHABETICS.concat(NU).indexOf(current) !== -1 && next === OP || ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP) {
          return BREAK_NOT_ALLOWED;
        }

        // LB30a Break between two regional indicator symbols if and only if there are an even number of regional
        // indicators preceding the position of the break.
        if (current === RI && next === RI) {
          var i = indicies[currentIndex];
          var count = 1;
          while (i > 0) {
            i--;
            if (classTypes[i] === RI) {
              count++;
            } else {
              break;
            }
          }
          if (count % 2 !== 0) {
            return BREAK_NOT_ALLOWED;
          }
        }

        // LB30b Do not break between an emoji base and an emoji modifier.
        if (current === EB && next === EM) {
          return BREAK_NOT_ALLOWED;
        }

        return BREAK_ALLOWED;
      };

      var lineBreakAtIndex = exports.lineBreakAtIndex = function lineBreakAtIndex(codePoints, index) {
        // LB2 Never break at the start of text.
        if (index === 0) {
          return BREAK_NOT_ALLOWED;
        }

        // LB3 Always break at the end of text.
        if (index >= codePoints.length) {
          return BREAK_MANDATORY;
        }

        var _codePointsToCharacte = codePointsToCharacterClasses(codePoints),
        _codePointsToCharacte2 = _slicedToArray(_codePointsToCharacte, 2),
        indicies = _codePointsToCharacte2[0],
        classTypes = _codePointsToCharacte2[1];

        return _lineBreakAtIndex(codePoints, classTypes, indicies, index);
      };

      var cssFormattedClasses = function cssFormattedClasses(codePoints, options) {
        if (!options) {
          options = { lineBreak: 'normal', wordBreak: 'normal' };
        }

        var _codePointsToCharacte3 = codePointsToCharacterClasses(codePoints, options.lineBreak),
        _codePointsToCharacte4 = _slicedToArray(_codePointsToCharacte3, 3),
        indicies = _codePointsToCharacte4[0],
        classTypes = _codePointsToCharacte4[1],
        isLetterNumber = _codePointsToCharacte4[2];

        if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {
          classTypes = classTypes.map(function (type) {
            return [NU, AL, SA].indexOf(type) !== -1 ? ID : type;
          });
        }

        var forbiddenBreakpoints = options.wordBreak === 'keep-all' ? isLetterNumber.map(function (isLetterNumber, i) {
          return isLetterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;
        }) : null;

        return [indicies, classTypes, forbiddenBreakpoints];
      };

      var inlineBreakOpportunities = exports.inlineBreakOpportunities = function inlineBreakOpportunities(str, options) {
        var codePoints = (0, _Util.toCodePoints)(str);
        var output = BREAK_NOT_ALLOWED;

        var _cssFormattedClasses = cssFormattedClasses(codePoints, options),
        _cssFormattedClasses2 = _slicedToArray(_cssFormattedClasses, 3),
        indicies = _cssFormattedClasses2[0],
        classTypes = _cssFormattedClasses2[1],
        forbiddenBreakpoints = _cssFormattedClasses2[2];

        codePoints.forEach(function (codePoint, i) {
          output += (0, _Util.fromCodePoint)(codePoint) + (i >= codePoints.length - 1 ? BREAK_MANDATORY : _lineBreakAtIndex(codePoints, classTypes, indicies, i + 1, forbiddenBreakpoints));
        });

        return output;
      };

      var Break = function () {
        function Break(codePoints, lineBreak, start, end) {
          _classCallCheck(this, Break);

          this._codePoints = codePoints;
          this.required = lineBreak === BREAK_MANDATORY;
          this.start = start;
          this.end = end;
        }

        _createClass(Break, [{
          key: 'slice',
          value: function slice() {
            return _Util.fromCodePoint.apply(undefined, _toConsumableArray(this._codePoints.slice(this.start, this.end)));
          } }]);


        return Break;
      }();

      var LineBreaker = exports.LineBreaker = function LineBreaker(str, options) {
        var codePoints = (0, _Util.toCodePoints)(str);

        var _cssFormattedClasses3 = cssFormattedClasses(codePoints, options),
        _cssFormattedClasses4 = _slicedToArray(_cssFormattedClasses3, 3),
        indicies = _cssFormattedClasses4[0],
        classTypes = _cssFormattedClasses4[1],
        forbiddenBreakpoints = _cssFormattedClasses4[2];

        var length = codePoints.length;
        var lastEnd = 0;
        var nextIndex = 0;

        return {
          next: function next() {
            if (nextIndex >= length) {
              return { done: true };
            }
            var lineBreak = BREAK_NOT_ALLOWED;
            while (nextIndex < length && (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) === BREAK_NOT_ALLOWED) {}

            if (lineBreak !== BREAK_NOT_ALLOWED || nextIndex === length) {
              var value = new Break(codePoints, lineBreak, lastEnd, nextIndex);
              lastEnd = nextIndex;
              return { value: value, done: false };
            }

            return { done: true };
          } };

      };

      /***/},
    /* 48 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.Trie = exports.createTrieFromBase64 = exports.UTRIE2_INDEX_2_MASK = exports.UTRIE2_INDEX_2_BLOCK_LENGTH = exports.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = exports.UTRIE2_INDEX_1_OFFSET = exports.UTRIE2_UTF8_2B_INDEX_2_LENGTH = exports.UTRIE2_UTF8_2B_INDEX_2_OFFSET = exports.UTRIE2_INDEX_2_BMP_LENGTH = exports.UTRIE2_LSCP_INDEX_2_LENGTH = exports.UTRIE2_DATA_MASK = exports.UTRIE2_DATA_BLOCK_LENGTH = exports.UTRIE2_LSCP_INDEX_2_OFFSET = exports.UTRIE2_SHIFT_1_2 = exports.UTRIE2_INDEX_SHIFT = exports.UTRIE2_SHIFT_1 = exports.UTRIE2_SHIFT_2 = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Util = __webpack_require__(13);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      /** Shift size for getting the index-2 table offset. */
      var UTRIE2_SHIFT_2 = exports.UTRIE2_SHIFT_2 = 5;

      /** Shift size for getting the index-1 table offset. */
      var UTRIE2_SHIFT_1 = exports.UTRIE2_SHIFT_1 = 6 + 5;

      /**
                                                            * Shift size for shifting left the index array values.
                                                            * Increases possible data size with 16-bit index values at the cost
                                                            * of compactability.
                                                            * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.
                                                            */
      var UTRIE2_INDEX_SHIFT = exports.UTRIE2_INDEX_SHIFT = 2;

      /**
                                                                * Difference between the two shift sizes,
                                                                * for getting an index-1 offset from an index-2 offset. 6=11-5
                                                                */
      var UTRIE2_SHIFT_1_2 = exports.UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;

      /**
                                                                                          * The part of the index-2 table for U+D800..U+DBFF stores values for
                                                                                          * lead surrogate code _units_ not code _points_.
                                                                                          * Values for lead surrogate code _points_ are indexed with this portion of the table.
                                                                                          * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)
                                                                                          */
      var UTRIE2_LSCP_INDEX_2_OFFSET = exports.UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;

      /** Number of entries in a data block. 32=0x20 */
      var UTRIE2_DATA_BLOCK_LENGTH = exports.UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;
      /** Mask for getting the lower bits for the in-data-block offset. */
      var UTRIE2_DATA_MASK = exports.UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;

      var UTRIE2_LSCP_INDEX_2_LENGTH = exports.UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;
      /** Count the lengths of both BMP pieces. 2080=0x820 */
      var UTRIE2_INDEX_2_BMP_LENGTH = exports.UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;
      /**
                                                                                                                                    * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.
                                                                                                                                    * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.
                                                                                                                                    */
      var UTRIE2_UTF8_2B_INDEX_2_OFFSET = exports.UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;
      var UTRIE2_UTF8_2B_INDEX_2_LENGTH = exports.UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */
      /**
                                                                                                                                                       * The index-1 table, only used for supplementary code points, at offset 2112=0x840.
                                                                                                                                                       * Variable length, for code points up to highStart, where the last single-value range starts.
                                                                                                                                                       * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.
                                                                                                                                                       * (For 0x100000 supplementary code points U+10000..U+10ffff.)
                                                                                                                                                       *
                                                                                                                                                       * The part of the index-2 table for supplementary code points starts
                                                                                                                                                       * after this index-1 table.
                                                                                                                                                       *
                                                                                                                                                       * Both the index-1 table and the following part of the index-2 table
                                                                                                                                                       * are omitted completely if there is only BMP data.
                                                                                                                                                       */
      var UTRIE2_INDEX_1_OFFSET = exports.UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;

      /**
                                                                                                                                  * Number of index-1 entries for the BMP. 32=0x20
                                                                                                                                  * This part of the index-1 table is omitted from the serialized form.
                                                                                                                                  */
      var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = exports.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;

      /** Number of entries in an index-2 block. 64=0x40 */
      var UTRIE2_INDEX_2_BLOCK_LENGTH = exports.UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;
      /** Mask for getting the lower bits for the in-index-2-block offset. */
      var UTRIE2_INDEX_2_MASK = exports.UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;

      var createTrieFromBase64 = exports.createTrieFromBase64 = function createTrieFromBase64(base64) {
        var buffer = (0, _Util.decode)(base64);
        var view32 = Array.isArray(buffer) ? (0, _Util.polyUint32Array)(buffer) : new Uint32Array(buffer);
        var view16 = Array.isArray(buffer) ? (0, _Util.polyUint16Array)(buffer) : new Uint16Array(buffer);
        var headerLength = 24;

        var index = view16.slice(headerLength / 2, view32[4] / 2);
        var data = view32[5] === 2 ? view16.slice((headerLength + view32[4]) / 2) : view32.slice(Math.ceil((headerLength + view32[4]) / 4));

        return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);
      };

      var Trie = exports.Trie = function () {
        function Trie(initialValue, errorValue, highStart, highValueIndex, index, data) {
          _classCallCheck(this, Trie);

          this.initialValue = initialValue;
          this.errorValue = errorValue;
          this.highStart = highStart;
          this.highValueIndex = highValueIndex;
          this.index = index;
          this.data = data;
        }

        /**
           * Get the value for a code point as stored in the Trie.
           *
           * @param codePoint the code point
           * @return the value
           */


        _createClass(Trie, [{
          key: 'get',
          value: function get(codePoint) {
            var ix = void 0;
            if (codePoint >= 0) {
              if (codePoint < 0x0d800 || codePoint > 0x0dbff && codePoint <= 0x0ffff) {
                // Ordinary BMP code point, excluding leading surrogates.
                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.
                // 16 bit data is stored in the index array itself.
                ix = this.index[codePoint >> UTRIE2_SHIFT_2];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }

              if (codePoint <= 0xffff) {
                // Lead Surrogate Code Point.  A Separate index section is stored for
                // lead surrogate code units and code points.
                //   The main index has the code unit data.
                //   For this function, we need the code point data.
                // Note: this expression could be refactored for slightly improved efficiency, but
                //       surrogate code points will be so rare in practice that it's not worth it.
                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + (codePoint - 0xd800 >> UTRIE2_SHIFT_2)];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }

              if (codePoint < this.highStart) {
                // Supplemental code point, use two-level lookup.
                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);
                ix = this.index[ix];
                ix += codePoint >> UTRIE2_SHIFT_2 & UTRIE2_INDEX_2_MASK;
                ix = this.index[ix];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }
              if (codePoint <= 0x10ffff) {
                return this.data[this.highValueIndex];
              }
            }

            // Fall through.  The code point is outside of the legal range of 0..0x10ffff.
            return this.errorValue;
          } }]);


        return Trie;
      }();

      /***/},
    /* 49 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      module.exports = 'KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA';

      /***/},
    /* 50 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _Path = __webpack_require__(6);

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var Circle = function Circle(x, y, radius) {
        _classCallCheck(this, Circle);

        this.type = _Path.PATH.CIRCLE;
        this.x = x;
        this.y = y;
        this.radius = radius;
        if (true) {
          if (isNaN(x)) {
            console.error('Invalid x value given for Circle');
          }
          if (isNaN(y)) {
            console.error('Invalid y value given for Circle');
          }
          if (isNaN(radius)) {
            console.error('Invalid radius value given for Circle');
          }
        }
      };

      exports.default = Circle;

      /***/},
    /* 51 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });


      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Bounds = __webpack_require__(2);

      var _Font = __webpack_require__(25);

      var _Gradient = __webpack_require__(52);

      var _TextContainer = __webpack_require__(9);

      var _TextContainer2 = _interopRequireDefault(_TextContainer);

      var _background = __webpack_require__(5);

      var _border = __webpack_require__(12);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var Renderer = function () {
        function Renderer(target, options) {
          _classCallCheck(this, Renderer);

          this.target = target;
          this.options = options;
          target.render(options);
        }

        _createClass(Renderer, [{
          key: 'renderNode',
          value: function renderNode(container) {
            if (container.isVisible()) {
              this.renderNodeBackgroundAndBorders(container);
              this.renderNodeContent(container);
            }
          } },
        {
          key: 'renderNodeContent',
          value: function renderNodeContent(container) {
            var _this = this;

            var callback = function callback() {
              if (container.childNodes.length) {
                container.childNodes.forEach(function (child) {
                  if (child instanceof _TextContainer2.default) {
                    var style = child.parent.style;
                    _this.target.renderTextNode(child.bounds, style.color, style.font, style.textDecoration, style.textShadow);
                  } else {
                    _this.target.drawShape(child, container.style.color);
                  }
                });
              }

              if (container.image) {
                var _image = _this.options.imageStore.get(container.image);
                if (_image) {
                  var contentBox = (0, _Bounds.calculateContentBox)(container.bounds, container.style.padding, container.style.border);
                  var _width = typeof _image.width === 'number' && _image.width > 0 ? _image.width : contentBox.width;
                  var _height = typeof _image.height === 'number' && _image.height > 0 ? _image.height : contentBox.height;
                  if (_width > 0 && _height > 0) {
                    _this.target.clip([(0, _Bounds.calculatePaddingBoxPath)(container.curvedBounds)], function () {
                      _this.target.drawImage(_image, new _Bounds.Bounds(0, 0, _width, _height), contentBox);
                    });
                  }
                }
              }
            };
            var paths = container.getClipPaths();
            if (paths.length) {
              this.target.clip(paths, callback);
            } else {
              callback();
            }
          } },
        {
          key: 'renderNodeBackgroundAndBorders',
          value: function renderNodeBackgroundAndBorders(container) {
            var _this2 = this;

            var HAS_BACKGROUND = !container.style.background.backgroundColor.isTransparent() || container.style.background.backgroundImage.length;

            var hasRenderableBorders = container.style.border.some(function (border) {
              return border.borderStyle !== _border.BORDER_STYLE.NONE && !border.borderColor.isTransparent();
            });

            var callback = function callback() {
              var backgroundPaintingArea = (0, _background.calculateBackgroungPaintingArea)(container.curvedBounds, container.style.background.backgroundClip);

              if (HAS_BACKGROUND) {
                _this2.target.clip([backgroundPaintingArea], function () {
                  if (!container.style.background.backgroundColor.isTransparent()) {
                    _this2.target.fill(container.style.background.backgroundColor);
                  }

                  _this2.renderBackgroundImage(container);
                });
              }

              container.style.border.forEach(function (border, side) {
                if (border.borderStyle !== _border.BORDER_STYLE.NONE && !border.borderColor.isTransparent()) {
                  _this2.renderBorder(border, side, container.curvedBounds);
                }
              });
            };

            if (HAS_BACKGROUND || hasRenderableBorders) {
              var paths = container.parent ? container.parent.getClipPaths() : [];
              if (paths.length) {
                this.target.clip(paths, callback);
              } else {
                callback();
              }
            }
          } },
        {
          key: 'renderBackgroundImage',
          value: function renderBackgroundImage(container) {
            var _this3 = this;

            container.style.background.backgroundImage.slice(0).reverse().forEach(function (backgroundImage) {
              if (backgroundImage.source.method === 'url' && backgroundImage.source.args.length) {
                _this3.renderBackgroundRepeat(container, backgroundImage);
              } else if (/gradient/i.test(backgroundImage.source.method)) {
                _this3.renderBackgroundGradient(container, backgroundImage);
              }
            });
          } },
        {
          key: 'renderBackgroundRepeat',
          value: function renderBackgroundRepeat(container, background) {
            var image = this.options.imageStore.get(background.source.args[0]);
            if (image) {
              var backgroundPositioningArea = (0, _background.calculateBackgroungPositioningArea)(container.style.background.backgroundOrigin, container.bounds, container.style.padding, container.style.border);
              var backgroundImageSize = (0, _background.calculateBackgroundSize)(background, image, backgroundPositioningArea);
              var position = (0, _background.calculateBackgroundPosition)(background.position, backgroundImageSize, backgroundPositioningArea);
              var _path = (0, _background.calculateBackgroundRepeatPath)(background, position, backgroundImageSize, backgroundPositioningArea, container.bounds);

              var _offsetX = Math.round(backgroundPositioningArea.left + position.x);
              var _offsetY = Math.round(backgroundPositioningArea.top + position.y);
              this.target.renderRepeat(_path, image, backgroundImageSize, _offsetX, _offsetY);
            }
          } },
        {
          key: 'renderBackgroundGradient',
          value: function renderBackgroundGradient(container, background) {
            var backgroundPositioningArea = (0, _background.calculateBackgroungPositioningArea)(container.style.background.backgroundOrigin, container.bounds, container.style.padding, container.style.border);
            var backgroundImageSize = (0, _background.calculateGradientBackgroundSize)(background, backgroundPositioningArea);
            var position = (0, _background.calculateBackgroundPosition)(background.position, backgroundImageSize, backgroundPositioningArea);
            var gradientBounds = new _Bounds.Bounds(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y), backgroundImageSize.width, backgroundImageSize.height);

            var gradient = (0, _Gradient.parseGradient)(container, background.source, gradientBounds);
            if (gradient) {
              switch (gradient.type) {
                case _Gradient.GRADIENT_TYPE.LINEAR_GRADIENT:
                  // $FlowFixMe
                  this.target.renderLinearGradient(gradientBounds, gradient);
                  break;
                case _Gradient.GRADIENT_TYPE.RADIAL_GRADIENT:
                  // $FlowFixMe
                  this.target.renderRadialGradient(gradientBounds, gradient);
                  break;}

            }
          } },
        {
          key: 'renderBorder',
          value: function renderBorder(border, side, curvePoints) {
            this.target.drawShape((0, _Bounds.parsePathForBorder)(curvePoints, side), border.borderColor);
          } },
        {
          key: 'renderStack',
          value: function renderStack(stack) {
            var _this4 = this;

            if (stack.container.isVisible()) {
              var _opacity = stack.getOpacity();
              if (_opacity !== this._opacity) {
                this.target.setOpacity(stack.getOpacity());
                this._opacity = _opacity;
              }

              var _transform = stack.container.style.transform;
              if (_transform !== null) {
                this.target.transform(stack.container.bounds.left + _transform.transformOrigin[0].value, stack.container.bounds.top + _transform.transformOrigin[1].value, _transform.transform, function () {
                  return _this4.renderStackContent(stack);
                });
              } else {
                this.renderStackContent(stack);
              }
            }
          } },
        {
          key: 'renderStackContent',
          value: function renderStackContent(stack) {
            var _splitStackingContext = splitStackingContexts(stack),
            _splitStackingContext2 = _slicedToArray(_splitStackingContext, 5),
            negativeZIndex = _splitStackingContext2[0],
            zeroOrAutoZIndexOrTransformedOrOpacity = _splitStackingContext2[1],
            positiveZIndex = _splitStackingContext2[2],
            nonPositionedFloats = _splitStackingContext2[3],
            nonPositionedInlineLevel = _splitStackingContext2[4];

            var _splitDescendants = splitDescendants(stack),
            _splitDescendants2 = _slicedToArray(_splitDescendants, 2),
            inlineLevel = _splitDescendants2[0],
            nonInlineLevel = _splitDescendants2[1];

            // https://www.w3.org/TR/css-position-3/#painting-order
            // 1. the background and borders of the element forming the stacking context.


            this.renderNodeBackgroundAndBorders(stack.container);
            // 2. the child stacking contexts with negative stack levels (most negative first).
            negativeZIndex.sort(sortByZIndex).forEach(this.renderStack, this);
            // 3. For all its in-flow, non-positioned, block-level descendants in tree order:
            this.renderNodeContent(stack.container);
            nonInlineLevel.forEach(this.renderNode, this);
            // 4. All non-positioned floating descendants, in tree order. For each one of these,
            // treat the element as if it created a new stacking context, but any positioned descendants and descendants
            // which actually create a new stacking context should be considered part of the parent stacking context,
            // not this new one.
            nonPositionedFloats.forEach(this.renderStack, this);
            // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.
            nonPositionedInlineLevel.forEach(this.renderStack, this);
            inlineLevel.forEach(this.renderNode, this);
            // 6. All positioned, opacity or transform descendants, in tree order that fall into the following categories:
            //  All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order.
            //  For those with 'z-index: auto', treat the element as if it created a new stacking context,
            //  but any positioned descendants and descendants which actually create a new stacking context should be
            //  considered part of the parent stacking context, not this new one. For those with 'z-index: 0',
            //  treat the stacking context generated atomically.
            //
            //  All opacity descendants with opacity less than 1
            //
            //  All transform descendants with transform other than none
            zeroOrAutoZIndexOrTransformedOrOpacity.forEach(this.renderStack, this);
            // 7. Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index
            // order (smallest first) then tree order.
            positiveZIndex.sort(sortByZIndex).forEach(this.renderStack, this);
          } },
        {
          key: 'render',
          value: function render(stack) {
            var _this5 = this;

            if (this.options.backgroundColor) {
              this.target.rectangle(this.options.x, this.options.y, this.options.width, this.options.height, this.options.backgroundColor);
            }
            this.renderStack(stack);
            var target = this.target.getTarget();
            if (true) {
              return target.then(function (output) {
                _this5.options.logger.log('Render completed');
                return output;
              });
            }
            return target;
          } }]);


        return Renderer;
      }();

      exports.default = Renderer;


      var splitDescendants = function splitDescendants(stack) {
        var inlineLevel = [];
        var nonInlineLevel = [];

        var length = stack.children.length;
        for (var i = 0; i < length; i++) {
          var child = stack.children[i];
          if (child.isInlineLevel()) {
            inlineLevel.push(child);
          } else {
            nonInlineLevel.push(child);
          }
        }
        return [inlineLevel, nonInlineLevel];
      };

      var splitStackingContexts = function splitStackingContexts(stack) {
        var negativeZIndex = [];
        var zeroOrAutoZIndexOrTransformedOrOpacity = [];
        var positiveZIndex = [];
        var nonPositionedFloats = [];
        var nonPositionedInlineLevel = [];
        var length = stack.contexts.length;
        for (var i = 0; i < length; i++) {
          var child = stack.contexts[i];
          if (child.container.isPositioned() || child.container.style.opacity < 1 || child.container.isTransformed()) {
            if (child.container.style.zIndex.order < 0) {
              negativeZIndex.push(child);
            } else if (child.container.style.zIndex.order > 0) {
              positiveZIndex.push(child);
            } else {
              zeroOrAutoZIndexOrTransformedOrOpacity.push(child);
            }
          } else {
            if (child.container.isFloating()) {
              nonPositionedFloats.push(child);
            } else {
              nonPositionedInlineLevel.push(child);
            }
          }
        }
        return [negativeZIndex, zeroOrAutoZIndexOrTransformedOrOpacity, positiveZIndex, nonPositionedFloats, nonPositionedInlineLevel];
      };

      var sortByZIndex = function sortByZIndex(a, b) {
        if (a.container.style.zIndex.order > b.container.style.zIndex.order) {
          return 1;
        } else if (a.container.style.zIndex.order < b.container.style.zIndex.order) {
          return -1;
        }

        return a.container.index > b.container.index ? 1 : -1;
      };

      /***/},
    /* 52 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.transformWebkitRadialGradientArgs = exports.parseGradient = exports.RadialGradient = exports.LinearGradient = exports.RADIAL_GRADIENT_SHAPE = exports.GRADIENT_TYPE = undefined;

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _NodeContainer = __webpack_require__(3);

      var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

      var _Angle = __webpack_require__(53);

      var _Color = __webpack_require__(0);

      var _Color2 = _interopRequireDefault(_Color);

      var _Length = __webpack_require__(1);

      var _Length2 = _interopRequireDefault(_Length);

      var _Util = __webpack_require__(4);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var SIDE_OR_CORNER = /^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i;
      var PERCENTAGE_ANGLES = /^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i;
      var ENDS_WITH_LENGTH = /(px)|%|( 0)$/i;
      var FROM_TO_COLORSTOP = /^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i;
      var RADIAL_SHAPE_DEFINITION = /^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i;

      var GRADIENT_TYPE = exports.GRADIENT_TYPE = {
        LINEAR_GRADIENT: 0,
        RADIAL_GRADIENT: 1 };


      var RADIAL_GRADIENT_SHAPE = exports.RADIAL_GRADIENT_SHAPE = {
        CIRCLE: 0,
        ELLIPSE: 1 };


      var LENGTH_FOR_POSITION = {
        left: new _Length2.default('0%'),
        top: new _Length2.default('0%'),
        center: new _Length2.default('50%'),
        right: new _Length2.default('100%'),
        bottom: new _Length2.default('100%') };


      var LinearGradient = exports.LinearGradient = function LinearGradient(colorStops, direction) {
        _classCallCheck(this, LinearGradient);

        this.type = GRADIENT_TYPE.LINEAR_GRADIENT;
        this.colorStops = colorStops;
        this.direction = direction;
      };

      var RadialGradient = exports.RadialGradient = function RadialGradient(colorStops, shape, center, radius) {
        _classCallCheck(this, RadialGradient);

        this.type = GRADIENT_TYPE.RADIAL_GRADIENT;
        this.colorStops = colorStops;
        this.shape = shape;
        this.center = center;
        this.radius = radius;
      };

      var parseGradient = exports.parseGradient = function parseGradient(container, _ref, bounds) {
        var args = _ref.args,
        method = _ref.method,
        prefix = _ref.prefix;

        if (method === 'linear-gradient') {
          return parseLinearGradient(args, bounds, !!prefix);
        } else if (method === 'gradient' && args[0] === 'linear') {
          // TODO handle correct angle
          return parseLinearGradient(['to bottom'].concat(transformObsoleteColorStops(args.slice(3))), bounds, !!prefix);
        } else if (method === 'radial-gradient') {
          return parseRadialGradient(container, prefix === '-webkit-' ? transformWebkitRadialGradientArgs(args) : args, bounds);
        } else if (method === 'gradient' && args[0] === 'radial') {
          return parseRadialGradient(container, transformObsoleteColorStops(transformWebkitRadialGradientArgs(args.slice(1))), bounds);
        }
      };

      var parseColorStops = function parseColorStops(args, firstColorStopIndex, lineLength) {
        var colorStops = [];

        for (var i = firstColorStopIndex; i < args.length; i++) {
          var value = args[i];
          var HAS_LENGTH = ENDS_WITH_LENGTH.test(value);
          var lastSpaceIndex = value.lastIndexOf(' ');
          var _color = new _Color2.default(HAS_LENGTH ? value.substring(0, lastSpaceIndex) : value);
          var _stop = HAS_LENGTH ? new _Length2.default(value.substring(lastSpaceIndex + 1)) : i === firstColorStopIndex ? new _Length2.default('0%') : i === args.length - 1 ? new _Length2.default('100%') : null;
          colorStops.push({ color: _color, stop: _stop });
        }

        var absoluteValuedColorStops = colorStops.map(function (_ref2) {
          var color = _ref2.color,
          stop = _ref2.stop;

          var absoluteStop = lineLength === 0 ? 0 : stop ? stop.getAbsoluteValue(lineLength) / lineLength : null;

          return {
            color: color,
            // $FlowFixMe
            stop: absoluteStop };

        });

        var previousColorStop = absoluteValuedColorStops[0].stop;
        for (var _i = 0; _i < absoluteValuedColorStops.length; _i++) {
          if (previousColorStop !== null) {
            var _stop2 = absoluteValuedColorStops[_i].stop;
            if (_stop2 === null) {
              var n = _i;
              while (absoluteValuedColorStops[n].stop === null) {
                n++;
              }
              var steps = n - _i + 1;
              var nextColorStep = absoluteValuedColorStops[n].stop;
              var stepSize = (nextColorStep - previousColorStop) / steps;
              for (; _i < n; _i++) {
                previousColorStop = absoluteValuedColorStops[_i].stop = previousColorStop + stepSize;
              }
            } else {
              previousColorStop = _stop2;
            }
          }
        }

        return absoluteValuedColorStops;
      };

      var parseLinearGradient = function parseLinearGradient(args, bounds, hasPrefix) {
        var angle = (0, _Angle.parseAngle)(args[0]);
        var HAS_SIDE_OR_CORNER = SIDE_OR_CORNER.test(args[0]);
        var HAS_DIRECTION = HAS_SIDE_OR_CORNER || angle !== null || PERCENTAGE_ANGLES.test(args[0]);
        var direction = HAS_DIRECTION ? angle !== null ? calculateGradientDirection(
        // if there is a prefix, the 0° angle points due East (instead of North per W3C)
        hasPrefix ? angle - Math.PI * 0.5 : angle, bounds) : HAS_SIDE_OR_CORNER ? parseSideOrCorner(args[0], bounds) : parsePercentageAngle(args[0], bounds) : calculateGradientDirection(Math.PI, bounds);
        var firstColorStopIndex = HAS_DIRECTION ? 1 : 0;

        // TODO: Fix some inaccuracy with color stops with px values
        var lineLength = Math.min((0, _Util.distance)(Math.abs(direction.x0) + Math.abs(direction.x1), Math.abs(direction.y0) + Math.abs(direction.y1)), bounds.width * 2, bounds.height * 2);

        return new LinearGradient(parseColorStops(args, firstColorStopIndex, lineLength), direction);
      };

      var parseRadialGradient = function parseRadialGradient(container, args, bounds) {
        var m = args[0].match(RADIAL_SHAPE_DEFINITION);
        var shape = m && (m[1] === 'circle' || // explicit shape specification
        m[3] !== undefined && m[5] === undefined) // only one radius coordinate
        ? RADIAL_GRADIENT_SHAPE.CIRCLE : RADIAL_GRADIENT_SHAPE.ELLIPSE;
        var radius = {};
        var center = {};

        if (m) {
          // Radius
          if (m[3] !== undefined) {
            radius.x = (0, _Length.calculateLengthFromValueWithUnit)(container, m[3], m[4]).getAbsoluteValue(bounds.width);
          }

          if (m[5] !== undefined) {
            radius.y = (0, _Length.calculateLengthFromValueWithUnit)(container, m[5], m[6]).getAbsoluteValue(bounds.height);
          }

          // Position
          if (m[7]) {
            center.x = LENGTH_FOR_POSITION[m[7].toLowerCase()];
          } else if (m[8] !== undefined) {
            center.x = (0, _Length.calculateLengthFromValueWithUnit)(container, m[8], m[9]);
          }

          if (m[10]) {
            center.y = LENGTH_FOR_POSITION[m[10].toLowerCase()];
          } else if (m[11] !== undefined) {
            center.y = (0, _Length.calculateLengthFromValueWithUnit)(container, m[11], m[12]);
          }
        }

        var gradientCenter = {
          x: center.x === undefined ? bounds.width / 2 : center.x.getAbsoluteValue(bounds.width),
          y: center.y === undefined ? bounds.height / 2 : center.y.getAbsoluteValue(bounds.height) };

        var gradientRadius = calculateRadius(m && m[2] || 'farthest-corner', shape, gradientCenter, radius, bounds);

        return new RadialGradient(parseColorStops(args, m ? 1 : 0, Math.min(gradientRadius.x, gradientRadius.y)), shape, gradientCenter, gradientRadius);
      };

      var calculateGradientDirection = function calculateGradientDirection(radian, bounds) {
        var width = bounds.width;
        var height = bounds.height;
        var HALF_WIDTH = width * 0.5;
        var HALF_HEIGHT = height * 0.5;
        var lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));
        var HALF_LINE_LENGTH = lineLength / 2;

        var x0 = HALF_WIDTH + Math.sin(radian) * HALF_LINE_LENGTH;
        var y0 = HALF_HEIGHT - Math.cos(radian) * HALF_LINE_LENGTH;
        var x1 = width - x0;
        var y1 = height - y0;

        return { x0: x0, x1: x1, y0: y0, y1: y1 };
      };

      var parseTopRight = function parseTopRight(bounds) {
        return Math.acos(bounds.width / 2 / ((0, _Util.distance)(bounds.width, bounds.height) / 2));
      };

      var parseSideOrCorner = function parseSideOrCorner(side, bounds) {
        switch (side) {
          case 'bottom':
          case 'to top':
            return calculateGradientDirection(0, bounds);
          case 'left':
          case 'to right':
            return calculateGradientDirection(Math.PI / 2, bounds);
          case 'right':
          case 'to left':
            return calculateGradientDirection(3 * Math.PI / 2, bounds);
          case 'top right':
          case 'right top':
          case 'to bottom left':
          case 'to left bottom':
            return calculateGradientDirection(Math.PI + parseTopRight(bounds), bounds);
          case 'top left':
          case 'left top':
          case 'to bottom right':
          case 'to right bottom':
            return calculateGradientDirection(Math.PI - parseTopRight(bounds), bounds);
          case 'bottom left':
          case 'left bottom':
          case 'to top right':
          case 'to right top':
            return calculateGradientDirection(parseTopRight(bounds), bounds);
          case 'bottom right':
          case 'right bottom':
          case 'to top left':
          case 'to left top':
            return calculateGradientDirection(2 * Math.PI - parseTopRight(bounds), bounds);
          case 'top':
          case 'to bottom':
          default:
            return calculateGradientDirection(Math.PI, bounds);}

      };

      var parsePercentageAngle = function parsePercentageAngle(angle, bounds) {
        var _angle$split$map = angle.split(' ').map(parseFloat),
        _angle$split$map2 = _slicedToArray(_angle$split$map, 2),
        left = _angle$split$map2[0],
        top = _angle$split$map2[1];

        var ratio = left / 100 * bounds.width / (top / 100 * bounds.height);

        return calculateGradientDirection(Math.atan(isNaN(ratio) ? 1 : ratio) + Math.PI / 2, bounds);
      };

      var findCorner = function findCorner(bounds, x, y, closest) {
        var corners = [{ x: 0, y: 0 }, { x: 0, y: bounds.height }, { x: bounds.width, y: 0 }, { x: bounds.width, y: bounds.height }];

        // $FlowFixMe
        return corners.reduce(function (stat, corner) {
          var d = (0, _Util.distance)(x - corner.x, y - corner.y);
          if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {
            return {
              optimumCorner: corner,
              optimumDistance: d };

          }

          return stat;
        }, {
          optimumDistance: closest ? Infinity : -Infinity,
          optimumCorner: null }).
        optimumCorner;
      };

      var calculateRadius = function calculateRadius(extent, shape, center, radius, bounds) {
        var x = center.x;
        var y = center.y;
        var rx = 0;
        var ry = 0;

        switch (extent) {
          case 'closest-side':
            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.
            // If the shape is an ellipse, it exactly meets the closest side in each dimension.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
              rx = ry = Math.min(Math.abs(x), Math.abs(x - bounds.width), Math.abs(y), Math.abs(y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
              rx = Math.min(Math.abs(x), Math.abs(x - bounds.width));
              ry = Math.min(Math.abs(y), Math.abs(y - bounds.height));
            }
            break;

          case 'closest-corner':
            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.
            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
              rx = ry = Math.min((0, _Util.distance)(x, y), (0, _Util.distance)(x, y - bounds.height), (0, _Util.distance)(x - bounds.width, y), (0, _Util.distance)(x - bounds.width, y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
              // Compute the ratio ry/rx (which is to be the same as for "closest-side")
              var c = Math.min(Math.abs(y), Math.abs(y - bounds.height)) / Math.min(Math.abs(x), Math.abs(x - bounds.width));
              var corner = findCorner(bounds, x, y, true);
              rx = (0, _Util.distance)(corner.x - x, (corner.y - y) / c);
              ry = c * rx;
            }
            break;

          case 'farthest-side':
            // Same as closest-side, except the ending shape is sized based on the farthest side(s)
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
              rx = ry = Math.max(Math.abs(x), Math.abs(x - bounds.width), Math.abs(y), Math.abs(y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
              rx = Math.max(Math.abs(x), Math.abs(x - bounds.width));
              ry = Math.max(Math.abs(y), Math.abs(y - bounds.height));
            }
            break;

          case 'farthest-corner':
            // Same as closest-corner, except the ending shape is sized based on the farthest corner.
            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
              rx = ry = Math.max((0, _Util.distance)(x, y), (0, _Util.distance)(x, y - bounds.height), (0, _Util.distance)(x - bounds.width, y), (0, _Util.distance)(x - bounds.width, y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
              // Compute the ratio ry/rx (which is to be the same as for "farthest-side")
              var _c = Math.max(Math.abs(y), Math.abs(y - bounds.height)) / Math.max(Math.abs(x), Math.abs(x - bounds.width));
              var _corner = findCorner(bounds, x, y, false);
              rx = (0, _Util.distance)(_corner.x - x, (_corner.y - y) / _c);
              ry = _c * rx;
            }
            break;

          default:
            // pixel or percentage values
            rx = radius.x || 0;
            ry = radius.y !== undefined ? radius.y : rx;
            break;}


        return {
          x: rx,
          y: ry };

      };

      var transformWebkitRadialGradientArgs = exports.transformWebkitRadialGradientArgs = function transformWebkitRadialGradientArgs(args) {
        var shape = '';
        var radius = '';
        var extent = '';
        var position = '';
        var idx = 0;

        var POSITION = /^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i;
        var SHAPE_AND_EXTENT = /^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i;
        var RADIUS = /^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i;

        var matchStartPosition = args[idx].match(POSITION);
        if (matchStartPosition) {
          idx++;
        }

        var matchShapeExtent = args[idx].match(SHAPE_AND_EXTENT);
        if (matchShapeExtent) {
          shape = matchShapeExtent[1] || '';
          extent = matchShapeExtent[2] || '';
          if (extent === 'contain') {
            extent = 'closest-side';
          } else if (extent === 'cover') {
            extent = 'farthest-corner';
          }
          idx++;
        }

        var matchStartRadius = args[idx].match(RADIUS);
        if (matchStartRadius) {
          idx++;
        }

        var matchEndPosition = args[idx].match(POSITION);
        if (matchEndPosition) {
          idx++;
        }

        var matchEndRadius = args[idx].match(RADIUS);
        if (matchEndRadius) {
          idx++;
        }

        var matchPosition = matchEndPosition || matchStartPosition;
        if (matchPosition && matchPosition[1]) {
          position = matchPosition[1] + (/^\d+$/.test(matchPosition[1]) ? 'px' : '');
          if (matchPosition[2]) {
            position += ' ' + matchPosition[2] + (/^\d+$/.test(matchPosition[2]) ? 'px' : '');
          }
        }

        var matchRadius = matchEndRadius || matchStartRadius;
        if (matchRadius) {
          radius = matchRadius[0];
          if (!matchRadius[1]) {
            radius += 'px';
          }
        }

        if (position && !shape && !radius && !extent) {
          radius = position;
          position = '';
        }

        if (position) {
          position = 'at ' + position;
        }

        return [[shape, extent, radius, position].filter(function (s) {
          return !!s;
        }).join(' ')].concat(args.slice(idx));
      };

      var transformObsoleteColorStops = function transformObsoleteColorStops(args) {
        return args.map(function (color) {
          return color.match(FROM_TO_COLORSTOP);
        })
        // $FlowFixMe
        .map(function (v, index) {
          if (!v) {
            return args[index];
          }

          switch (v[1]) {
            case 'from':
              return v[4] + ' 0%';
            case 'to':
              return v[4] + ' 100%';
            case 'color-stop':
              if (v[3] === '%') {
                return v[4] + ' ' + v[2];
              }
              return v[4] + ' ' + parseFloat(v[2]) * 100 + '%';}

        });
      };

      /***/},
    /* 53 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      var ANGLE = /([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;

      var parseAngle = exports.parseAngle = function parseAngle(angle) {
        var match = angle.match(ANGLE);

        if (match) {
          var value = parseFloat(match[1]);
          switch (match[2].toLowerCase()) {
            case 'deg':
              return Math.PI * value / 180;
            case 'grad':
              return Math.PI / 200 * value;
            case 'rad':
              return value;
            case 'turn':
              return Math.PI * 2 * value;}

        }

        return null;
      };

      /***/},
    /* 54 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.cloneWindow = exports.DocumentCloner = undefined;

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Bounds = __webpack_require__(2);

      var _Proxy = __webpack_require__(26);

      var _ResourceLoader = __webpack_require__(55);

      var _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);

      var _Util = __webpack_require__(4);

      var _background = __webpack_require__(5);

      var _CanvasRenderer = __webpack_require__(15);

      var _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);

      var _PseudoNodeContent = __webpack_require__(56);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';

      var DocumentCloner = exports.DocumentCloner = function () {
        function DocumentCloner(element, options, logger, copyInline, renderer) {
          _classCallCheck(this, DocumentCloner);

          this.referenceElement = element;
          this.scrolledElements = [];
          this.copyStyles = copyInline;
          this.inlineImages = copyInline;
          this.logger = logger;
          this.options = options;
          this.renderer = renderer;
          this.resourceLoader = new _ResourceLoader2.default(options, logger, window);
          this.pseudoContentData = {
            counters: {},
            quoteDepth: 0 };

          // $FlowFixMe
          this.documentElement = this.cloneNode(element.ownerDocument.documentElement);
        }

        _createClass(DocumentCloner, [{
          key: 'inlineAllImages',
          value: function inlineAllImages(node) {
            var _this = this;

            if (this.inlineImages && node) {
              var style = node.style;
              Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {
                if (backgroundImage.method === 'url') {
                  return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {
                    return img && typeof img.src === 'string' ? 'url("' + img.src + '")' : 'none';
                  }).catch(function (e) {
                    if (true) {
                      _this.logger.log('Unable to load image', e);
                    }
                  });
                }
                return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');
              })).then(function (backgroundImages) {
                if (backgroundImages.length > 1) {
                  // TODO Multiple backgrounds somehow broken in Chrome
                  style.backgroundColor = '';
                }
                style.backgroundImage = backgroundImages.join(',');
              });

              if (node instanceof HTMLImageElement) {
                this.resourceLoader.inlineImage(node.src).then(function (img) {
                  if (img && node instanceof HTMLImageElement && node.parentNode) {
                    var parentNode = node.parentNode;
                    var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));
                    parentNode.replaceChild(clonedChild, node);
                  }
                }).catch(function (e) {
                  if (true) {
                    _this.logger.log('Unable to load image', e);
                  }
                });
              }
            }
          } },
        {
          key: 'inlineFonts',
          value: function inlineFonts(document) {
            var _this2 = this;

            return Promise.all(Array.from(document.styleSheets).map(function (sheet) {
              if (sheet.href) {
                return fetch(sheet.href).then(function (res) {
                  return res.text();
                }).then(function (text) {
                  return createStyleSheetFontsFromText(text, sheet.href);
                }).catch(function (e) {
                  if (true) {
                    _this2.logger.log('Unable to load stylesheet', e);
                  }
                  return [];
                });
              }
              return getSheetFonts(sheet, document);
            })).then(function (fonts) {
              return fonts.reduce(function (acc, font) {
                return acc.concat(font);
              }, []);
            }).then(function (fonts) {
              return Promise.all(fonts.map(function (font) {
                return fetch(font.formats[0].src).then(function (response) {
                  return response.blob();
                }).then(function (blob) {
                  return new Promise(function (resolve, reject) {
                    var reader = new FileReader();
                    reader.onerror = reject;
                    reader.onload = function () {
                      // $FlowFixMe
                      var result = reader.result;
                      resolve(result);
                    };
                    reader.readAsDataURL(blob);
                  });
                }).then(function (dataUri) {
                  font.fontFace.setProperty('src', 'url("' + dataUri + '")');
                  return '@font-face {' + font.fontFace.cssText + ' ';
                });
              }));
            }).then(function (fontCss) {
              var style = document.createElement('style');
              style.textContent = fontCss.join('\n');
              _this2.documentElement.appendChild(style);
            });
          } },
        {
          key: 'createElementClone',
          value: function createElementClone(node) {
            var _this3 = this;

            if (this.copyStyles && node instanceof HTMLCanvasElement) {
              var img = node.ownerDocument.createElement('img');
              try {
                img.src = node.toDataURL();
                return img;
              } catch (e) {
                if (true) {
                  this.logger.log('Unable to clone canvas contents, canvas is tainted');
                }
              }
            }

            if (node instanceof HTMLIFrameElement) {
              var tempIframe = node.cloneNode(false);
              var iframeKey = generateIframeKey();
              tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);

              var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),
              width = _parseBounds.width,
              height = _parseBounds.height;

              this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {
                return _this3.renderer(documentElement, {
                  async: _this3.options.async,
                  allowTaint: _this3.options.allowTaint,
                  backgroundColor: '#ffffff',
                  canvas: null,
                  imageTimeout: _this3.options.imageTimeout,
                  logging: _this3.options.logging,
                  proxy: _this3.options.proxy,
                  removeContainer: _this3.options.removeContainer,
                  scale: _this3.options.scale,
                  foreignObjectRendering: _this3.options.foreignObjectRendering,
                  useCORS: _this3.options.useCORS,
                  target: new _CanvasRenderer2.default(),
                  width: width,
                  height: height,
                  x: 0,
                  y: 0,
                  windowWidth: documentElement.ownerDocument.defaultView.innerWidth,
                  windowHeight: documentElement.ownerDocument.defaultView.innerHeight,
                  scrollX: documentElement.ownerDocument.defaultView.pageXOffset,
                  scrollY: documentElement.ownerDocument.defaultView.pageYOffset },
                _this3.logger.child(iframeKey));
              }).then(function (canvas) {
                return new Promise(function (resolve, reject) {
                  var iframeCanvas = document.createElement('img');
                  iframeCanvas.onload = function () {
                    return resolve(canvas);
                  };
                  iframeCanvas.onerror = reject;
                  iframeCanvas.src = canvas.toDataURL();
                  if (tempIframe.parentNode) {
                    tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);
                  }
                });
              });
              return tempIframe;
            }

            if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {
              var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {
                try {
                  if (rule && rule.cssText) {
                    return css + rule.cssText;
                  }
                  return css;
                } catch (err) {
                  _this3.logger.log('Unable to access cssText property', rule.name);
                  return css;
                }
              }, '');
              var style = node.cloneNode(false);
              style.textContent = css;
              return style;
            }

            return node.cloneNode(false);
          } },
        {
          key: 'cloneNode',
          value: function cloneNode(node) {
            var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);

            var window = node.ownerDocument.defaultView;
            var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;
            var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;
            var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;

            if (this.referenceElement === node && clone instanceof window.HTMLElement) {
              this.clonedReferenceElement = clone;
            }

            if (clone instanceof window.HTMLBodyElement) {
              createPseudoHideStyles(clone);
            }

            var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);
            var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);

            for (var child = node.firstChild; child; child = child.nextSibling) {
              if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&
              // $FlowFixMe
              !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||
              // $FlowFixMe
              !this.options.ignoreElements(child))) {
                if (!this.copyStyles || child.nodeName !== 'STYLE') {
                  clone.appendChild(this.cloneNode(child));
                }
              }
            }

            var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);
            (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);

            if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {
              if (styleBefore) {
                this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));
              }
              if (styleAfter) {
                this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));
              }
              if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {
                (0, _Util.copyCSSStyles)(style, clone);
              }
              this.inlineAllImages(clone);
              if (node.scrollTop !== 0 || node.scrollLeft !== 0) {
                this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);
              }
              switch (node.nodeName) {
                case 'CANVAS':
                  if (!this.copyStyles) {
                    cloneCanvasContents(node, clone);
                  }
                  break;
                case 'TEXTAREA':
                case 'SELECT':
                  clone.value = node.value;
                  break;}

            }
            return clone;
          } }]);


        return DocumentCloner;
      }();

      var getSheetFonts = function getSheetFonts(sheet, document) {
        // $FlowFixMe
        return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {
          return rule.type === CSSRule.FONT_FACE_RULE;
        }).map(function (rule) {
          var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));
          var formats = [];
          for (var i = 0; i < src.length; i++) {
            if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {
              var a = document.createElement('a');
              a.href = src[i].args[0];
              if (document.body) {
                document.body.appendChild(a);
              }

              var font = {
                src: a.href,
                format: src[i + 1].args[0] };

              formats.push(font);
            }
          }

          return {
            // TODO select correct format for browser),

            formats: formats.filter(function (font) {
              return /^woff/i.test(font.format);

            }),
            fontFace: rule.style };

        }).filter(function (font) {
          return font.formats.length;
        });
      };

      var createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {
        var doc = document.implementation.createHTMLDocument('');
        var base = document.createElement('base');
        // $FlowFixMe
        base.href = baseHref;
        var style = document.createElement('style');

        style.textContent = text;
        if (doc.head) {
          doc.head.appendChild(base);
        }
        if (doc.body) {
          doc.body.appendChild(style);
        }

        return style.sheet ? getSheetFonts(style.sheet, doc) : [];
      };

      var restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {
        if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {
          ownerDocument.defaultView.scrollTo(x, y);
        }
      };

      var cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {
        try {
          if (clonedCanvas) {
            clonedCanvas.width = canvas.width;
            clonedCanvas.height = canvas.height;
            var ctx = canvas.getContext('2d');
            var clonedCtx = clonedCanvas.getContext('2d');
            if (ctx) {
              clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);
            } else {
              clonedCtx.drawImage(canvas, 0, 0);
            }
          }
        } catch (e) {}
      };

      var inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {
        if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {
          return;
        }

        var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');
        (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);

        if (contentItems) {
          var len = contentItems.length;
          for (var i = 0; i < len; i++) {
            var item = contentItems[i];
            switch (item.type) {
              case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:
                var img = clone.ownerDocument.createElement('img');
                img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];
                img.style.opacity = '1';
                anonymousReplacedElement.appendChild(img);
                break;
              case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:
                anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));
                break;}

          }
        }

        anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
        clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
        if (pseudoElt === PSEUDO_BEFORE) {
          clone.insertBefore(anonymousReplacedElement, clone.firstChild);
        } else {
          clone.appendChild(anonymousReplacedElement);
        }

        return anonymousReplacedElement;
      };

      var URL_REGEXP = /^url\((.+)\)$/i;
      var PSEUDO_BEFORE = ':before';
      var PSEUDO_AFTER = ':after';
      var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';
      var PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';

      var PSEUDO_HIDE_ELEMENT_STYLE = '{\n    content: "" !important;\n    display: none !important;\n}';

      var createPseudoHideStyles = function createPseudoHideStyles(body) {
        createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);
      };

      var createStyles = function createStyles(body, styles) {
        var style = body.ownerDocument.createElement('style');
        style.innerHTML = styles;
        body.appendChild(style);
      };

      var initNode = function initNode(_ref) {
        var _ref2 = _slicedToArray(_ref, 3),
        element = _ref2[0],
        x = _ref2[1],
        y = _ref2[2];

        element.scrollLeft = x;
        element.scrollTop = y;
      };

      var generateIframeKey = function generateIframeKey() {
        return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);
      };

      var DATA_URI_REGEXP = /^data:text\/(.+);(base64)?,(.*)$/i;

      var getIframeDocumentElement = function getIframeDocumentElement(node, options) {
        try {
          return Promise.resolve(node.contentWindow.document.documentElement);
        } catch (e) {
          return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {
            var match = html.match(DATA_URI_REGEXP);
            if (!match) {
              return Promise.reject();
            }

            return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);
          }).then(function (html) {
            return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {
              var cloneWindow = cloneIframeContainer.contentWindow;
              var documentClone = cloneWindow.document;

              documentClone.open();
              documentClone.write(html);
              var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {
                return documentClone.documentElement;
              });

              documentClone.close();
              return iframeLoad;
            });
          }) : Promise.reject();
        }
      };

      var createIframeContainer = function createIframeContainer(ownerDocument, bounds) {
        var cloneIframeContainer = ownerDocument.createElement('iframe');

        cloneIframeContainer.className = 'html2canvas-container';
        cloneIframeContainer.style.visibility = 'hidden';
        cloneIframeContainer.style.position = 'fixed';
        cloneIframeContainer.style.left = '-10000px';
        cloneIframeContainer.style.top = '0px';
        cloneIframeContainer.style.border = '0';
        cloneIframeContainer.width = bounds.width.toString();
        cloneIframeContainer.height = bounds.height.toString();
        cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it
        cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');
        if (!ownerDocument.body) {
          return Promise.reject(true ? 'Body element not found in Document that is getting rendered' : undefined);
        }

        ownerDocument.body.appendChild(cloneIframeContainer);

        return Promise.resolve(cloneIframeContainer);
      };

      var iframeLoader = function iframeLoader(cloneIframeContainer) {
        var cloneWindow = cloneIframeContainer.contentWindow;
        var documentClone = cloneWindow.document;

        return new Promise(function (resolve, reject) {
          cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {
            var interval = setInterval(function () {
              if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {
                clearInterval(interval);
                resolve(cloneIframeContainer);
              }
            }, 50);
          };
        });
      };

      var cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {
        var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);
        var scrollX = ownerDocument.defaultView.pageXOffset;
        var scrollY = ownerDocument.defaultView.pageYOffset;

        return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {
          var cloneWindow = cloneIframeContainer.contentWindow;
          var documentClone = cloneWindow.document;

          /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle
                                                    if window url is about:blank, we can assign the url to current by writing onto the document
                                                    */

          var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {
            cloner.scrolledElements.forEach(initNode);
            cloneWindow.scrollTo(bounds.left, bounds.top);
            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {
              documentClone.documentElement.style.top = -bounds.top + 'px';
              documentClone.documentElement.style.left = -bounds.left + 'px';
              documentClone.documentElement.style.position = 'absolute';
            }

            var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);

            var onclone = options.onclone;

            return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {
              return onclone(documentClone);
            }).then(function () {
              return result;
            }) : result : Promise.reject(true ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : undefined);
          });

          documentClone.open();
          documentClone.write(serializeDoctype(document.doctype) + '<html></html>');
          // Chrome scrolls the parent document for some reason after the write to the cloned window???
          restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);
          documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);
          documentClone.close();

          return iframeLoad;
        });
      };

      var serializeDoctype = function serializeDoctype(doctype) {
        var str = '';
        if (doctype) {
          str += '<!DOCTYPE ';
          if (doctype.name) {
            str += doctype.name;
          }

          if (doctype.internalSubset) {
            str += doctype.internalSubset;
          }

          if (doctype.publicId) {
            str += '"' + doctype.publicId + '"';
          }

          if (doctype.systemId) {
            str += '"' + doctype.systemId + '"';
          }

          str += '>';
        }

        return str;
      };

      /***/},
    /* 55 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.ResourceStore = undefined;

      var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();

      var _Feature = __webpack_require__(10);

      var _Feature2 = _interopRequireDefault(_Feature);

      var _Proxy = __webpack_require__(26);

      function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

      function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

      var ResourceLoader = function () {
        function ResourceLoader(options, logger, window) {
          _classCallCheck(this, ResourceLoader);

          this.options = options;
          this._window = window;
          this.origin = this.getOrigin(window.location.href);
          this.cache = {};
          this.logger = logger;
          this._index = 0;
        }

        _createClass(ResourceLoader, [{
          key: 'loadImage',
          value: function loadImage(src) {
            var _this = this;

            if (this.hasResourceInCache(src)) {
              return src;
            }
            if (isBlobImage(src)) {
              this.cache[src] = _loadImage(src, this.options.imageTimeout || 0);
              return src;
            }

            if (!isSVG(src) || _Feature2.default.SUPPORT_SVG_DRAWING) {
              if (this.options.allowTaint === true || isInlineImage(src) || this.isSameOrigin(src)) {
                return this.addImage(src, src, false);
              } else if (!this.isSameOrigin(src)) {
                if (typeof this.options.proxy === 'string') {
                  this.cache[src] = (0, _Proxy.Proxy)(src, this.options).then(function (src) {
                    return _loadImage(src, _this.options.imageTimeout || 0);
                  });
                  return src;
                } else if (this.options.useCORS === true && _Feature2.default.SUPPORT_CORS_IMAGES) {
                  return this.addImage(src, src, true);
                }
              }
            }
          } },
        {
          key: 'inlineImage',
          value: function inlineImage(src) {
            var _this2 = this;

            if (isInlineImage(src)) {
              return _loadImage(src, this.options.imageTimeout || 0);
            }
            if (this.hasResourceInCache(src)) {
              return this.cache[src];
            }
            if (!this.isSameOrigin(src) && typeof this.options.proxy === 'string') {
              return this.cache[src] = (0, _Proxy.Proxy)(src, this.options).then(function (src) {
                return _loadImage(src, _this2.options.imageTimeout || 0);
              });
            }

            return this.xhrImage(src);
          } },
        {
          key: 'xhrImage',
          value: function xhrImage(src) {
            var _this3 = this;

            this.cache[src] = new Promise(function (resolve, reject) {
              var xhr = new XMLHttpRequest();
              xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                  if (xhr.status !== 200) {
                    reject('Failed to fetch image ' + src.substring(0, 256) + ' with status code ' + xhr.status);
                  } else {
                    var reader = new FileReader();
                    reader.addEventListener('load', function () {
                      // $FlowFixMe
                      var result = reader.result;
                      resolve(result);
                    }, false);
                    reader.addEventListener('error', function (e) {
                      return reject(e);
                    }, false);
                    reader.readAsDataURL(xhr.response);
                  }
                }
              };
              xhr.responseType = 'blob';
              if (_this3.options.imageTimeout) {
                var timeout = _this3.options.imageTimeout;
                xhr.timeout = timeout;
                xhr.ontimeout = function () {
                  return reject(true ? 'Timed out (' + timeout + 'ms) fetching ' + src.substring(0, 256) : undefined);
                };
              }
              xhr.open('GET', src, true);
              xhr.send();
            }).then(function (src) {
              return _loadImage(src, _this3.options.imageTimeout || 0);
            });

            return this.cache[src];
          } },
        {
          key: 'loadCanvas',
          value: function loadCanvas(node) {
            var key = String(this._index++);
            this.cache[key] = Promise.resolve(node);
            return key;
          } },
        {
          key: 'hasResourceInCache',
          value: function hasResourceInCache(key) {
            return typeof this.cache[key] !== 'undefined';
          } },
        {
          key: 'addImage',
          value: function addImage(key, src, useCORS) {
            var _this4 = this;

            if (true) {
              this.logger.log('Added image ' + key.substring(0, 256));
            }

            var imageLoadHandler = function imageLoadHandler(supportsDataImages) {
              return new Promise(function (resolve, reject) {
                var img = new Image();
                img.onload = function () {
                  return resolve(img);
                };
                //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous
                if (!supportsDataImages || useCORS) {
                  img.crossOrigin = 'anonymous';
                }

                img.onerror = reject;
                img.src = src;
                if (img.complete === true) {
                  // Inline XML images may fail to parse, throwing an Error later on
                  setTimeout(function () {
                    resolve(img);
                  }, 500);
                }
                if (_this4.options.imageTimeout) {
                  var timeout = _this4.options.imageTimeout;
                  setTimeout(function () {
                    return reject(true ? 'Timed out (' + timeout + 'ms) fetching ' + src.substring(0, 256) : undefined);
                  }, timeout);
                }
              });
            };

            this.cache[key] = isInlineBase64Image(src) && !isSVG(src) ? // $FlowFixMe
            _Feature2.default.SUPPORT_BASE64_DRAWING(src).then(imageLoadHandler) : imageLoadHandler(true);
            return key;
          } },
        {
          key: 'isSameOrigin',
          value: function isSameOrigin(url) {
            return this.getOrigin(url) === this.origin;
          } },
        {
          key: 'getOrigin',
          value: function getOrigin(url) {
            var link = this._link || (this._link = this._window.document.createElement('a'));
            link.href = url;
            link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/
            return link.protocol + link.hostname + link.port;
          } },
        {
          key: 'ready',
          value: function ready() {
            var _this5 = this;

            var keys = Object.keys(this.cache);
            var values = keys.map(function (str) {
              return _this5.cache[str].catch(function (e) {
                if (true) {
                  _this5.logger.log('Unable to load image', e);
                }
                return null;
              });
            });
            return Promise.all(values).then(function (images) {
              if (true) {
                _this5.logger.log('Finished loading ' + images.length + ' images', images);
              }
              return new ResourceStore(keys, images);
            });
          } }]);


        return ResourceLoader;
      }();

      exports.default = ResourceLoader;

      var ResourceStore = exports.ResourceStore = function () {
        function ResourceStore(keys, resources) {
          _classCallCheck(this, ResourceStore);

          this._keys = keys;
          this._resources = resources;
        }

        _createClass(ResourceStore, [{
          key: 'get',
          value: function get(key) {
            var index = this._keys.indexOf(key);
            return index === -1 ? null : this._resources[index];
          } }]);


        return ResourceStore;
      }();

      var INLINE_SVG = /^data:image\/svg\+xml/i;
      var INLINE_BASE64 = /^data:image\/.*;base64,/i;
      var INLINE_IMG = /^data:image\/.*/i;

      var isInlineImage = function isInlineImage(src) {
        return INLINE_IMG.test(src);
      };
      var isInlineBase64Image = function isInlineBase64Image(src) {
        return INLINE_BASE64.test(src);
      };
      var isBlobImage = function isBlobImage(src) {
        return src.substr(0, 4) === 'blob';
      };

      var isSVG = function isSVG(src) {
        return src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);
      };

      var _loadImage = function _loadImage(src, timeout) {
        return new Promise(function (resolve, reject) {
          var img = new Image();
          img.onload = function () {
            return resolve(img);
          };
          img.onerror = reject;
          img.src = src;
          if (img.complete === true) {
            // Inline XML images may fail to parse, throwing an Error later on
            setTimeout(function () {
              resolve(img);
            }, 500);
          }
          if (timeout) {
            setTimeout(function () {
              return reject(true ? 'Timed out (' + timeout + 'ms) loading image' : undefined);
            }, timeout);
          }
        });
      };

      /***/},
    /* 56 */
    /***/function (module, exports, __webpack_require__) {

      "use strict";


      Object.defineProperty(exports, "__esModule", {
        value: true });

      exports.parseContent = exports.resolvePseudoContent = exports.popCounters = exports.parseCounterReset = exports.TOKEN_TYPE = exports.PSEUDO_CONTENT_ITEM_TYPE = undefined;

      var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();

      var _ListItem = __webpack_require__(14);

      var _listStyle = __webpack_require__(8);

      var PSEUDO_CONTENT_ITEM_TYPE = exports.PSEUDO_CONTENT_ITEM_TYPE = {
        TEXT: 0,
        IMAGE: 1 };


      var TOKEN_TYPE = exports.TOKEN_TYPE = {
        STRING: 0,
        ATTRIBUTE: 1,
        URL: 2,
        COUNTER: 3,
        COUNTERS: 4,
        OPENQUOTE: 5,
        CLOSEQUOTE: 6 };


      var parseCounterReset = exports.parseCounterReset = function parseCounterReset(style, data) {
        if (!style || !style.counterReset || style.counterReset === 'none') {
          return [];
        }

        var counterNames = [];
        var counterResets = style.counterReset.split(/\s*,\s*/);
        var lenCounterResets = counterResets.length;

        for (var i = 0; i < lenCounterResets; i++) {
          var _counterResets$i$spli = counterResets[i].split(/\s+/),
          _counterResets$i$spli2 = _slicedToArray(_counterResets$i$spli, 2),
          counterName = _counterResets$i$spli2[0],
          initialValue = _counterResets$i$spli2[1];

          counterNames.push(counterName);
          var counter = data.counters[counterName];
          if (!counter) {
            counter = data.counters[counterName] = [];
          }
          counter.push(parseInt(initialValue || 0, 10));
        }

        return counterNames;
      };

      var popCounters = exports.popCounters = function popCounters(counterNames, data) {
        var lenCounters = counterNames.length;
        for (var i = 0; i < lenCounters; i++) {
          data.counters[counterNames[i]].pop();
        }
      };

      var resolvePseudoContent = exports.resolvePseudoContent = function resolvePseudoContent(node, style, data) {
        if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {
          return null;
        }

        var tokens = parseContent(style.content);

        var len = tokens.length;
        var contentItems = [];
        var s = '';

        // increment the counter (if there is a "counter-increment" declaration)
        var counterIncrement = style.counterIncrement;
        if (counterIncrement && counterIncrement !== 'none') {
          var _counterIncrement$spl = counterIncrement.split(/\s+/),
          _counterIncrement$spl2 = _slicedToArray(_counterIncrement$spl, 2),
          counterName = _counterIncrement$spl2[0],
          incrementValue = _counterIncrement$spl2[1];

          var counter = data.counters[counterName];
          if (counter) {
            counter[counter.length - 1] += incrementValue === undefined ? 1 : parseInt(incrementValue, 10);
          }
        }

        // build the content string
        for (var i = 0; i < len; i++) {
          var token = tokens[i];
          switch (token.type) {
            case TOKEN_TYPE.STRING:
              s += token.value || '';
              break;

            case TOKEN_TYPE.ATTRIBUTE:
              if (node instanceof HTMLElement && token.value) {
                s += node.getAttribute(token.value) || '';
              }
              break;

            case TOKEN_TYPE.COUNTER:
              var _counter = data.counters[token.name || ''];
              if (_counter) {
                s += formatCounterValue([_counter[_counter.length - 1]], '', token.format);
              }
              break;

            case TOKEN_TYPE.COUNTERS:
              var _counters = data.counters[token.name || ''];
              if (_counters) {
                s += formatCounterValue(_counters, token.glue, token.format);
              }
              break;

            case TOKEN_TYPE.OPENQUOTE:
              s += getQuote(style, true, data.quoteDepth);
              data.quoteDepth++;
              break;

            case TOKEN_TYPE.CLOSEQUOTE:
              data.quoteDepth--;
              s += getQuote(style, false, data.quoteDepth);
              break;

            case TOKEN_TYPE.URL:
              if (s) {
                contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.TEXT, value: s });
                s = '';
              }
              contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.IMAGE, value: token.value || '' });
              break;}

        }

        if (s) {
          contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.TEXT, value: s });
        }

        return contentItems;
      };

      var parseContent = exports.parseContent = function parseContent(content, cache) {
        if (cache && cache[content]) {
          return cache[content];
        }

        var tokens = [];
        var len = content.length;

        var isString = false;
        var isEscaped = false;
        var isFunction = false;
        var str = '';
        var functionName = '';
        var args = [];

        for (var i = 0; i < len; i++) {
          var c = content.charAt(i);

          switch (c) {
            case "'":
            case '"':
              if (isEscaped) {
                str += c;
              } else {
                isString = !isString;
                if (!isFunction && !isString) {
                  tokens.push({ type: TOKEN_TYPE.STRING, value: str });
                  str = '';
                }
              }
              break;

            case '\\':
              if (isEscaped) {
                str += c;
                isEscaped = false;
              } else {
                isEscaped = true;
              }
              break;

            case '(':
              if (isString) {
                str += c;
              } else {
                isFunction = true;
                functionName = str;
                str = '';
                args = [];
              }
              break;

            case ')':
              if (isString) {
                str += c;
              } else if (isFunction) {
                if (str) {
                  args.push(str);
                }

                switch (functionName) {
                  case 'attr':
                    if (args.length > 0) {
                      tokens.push({ type: TOKEN_TYPE.ATTRIBUTE, value: args[0] });
                    }
                    break;

                  case 'counter':
                    if (args.length > 0) {
                      var counter = {
                        type: TOKEN_TYPE.COUNTER,
                        name: args[0] };

                      if (args.length > 1) {
                        counter.format = args[1];
                      }
                      tokens.push(counter);
                    }
                    break;

                  case 'counters':
                    if (args.length > 0) {
                      var _counters2 = {
                        type: TOKEN_TYPE.COUNTERS,
                        name: args[0] };

                      if (args.length > 1) {
                        _counters2.glue = args[1];
                      }
                      if (args.length > 2) {
                        _counters2.format = args[2];
                      }
                      tokens.push(_counters2);
                    }
                    break;

                  case 'url':
                    if (args.length > 0) {
                      tokens.push({ type: TOKEN_TYPE.URL, value: args[0] });
                    }
                    break;}


                isFunction = false;
                str = '';
              }
              break;

            case ',':
              if (isString) {
                str += c;
              } else if (isFunction) {
                args.push(str);
                str = '';
              }
              break;

            case ' ':
            case '\t':
              if (isString) {
                str += c;
              } else if (str) {
                addOtherToken(tokens, str);
                str = '';
              }
              break;

            default:
              str += c;}


          if (c !== '\\') {
            isEscaped = false;
          }
        }

        if (str) {
          addOtherToken(tokens, str);
        }

        if (cache) {
          cache[content] = tokens;
        }

        return tokens;
      };

      var addOtherToken = function addOtherToken(tokens, identifier) {
        switch (identifier) {
          case 'open-quote':
            tokens.push({ type: TOKEN_TYPE.OPENQUOTE });
            break;
          case 'close-quote':
            tokens.push({ type: TOKEN_TYPE.CLOSEQUOTE });
            break;}

      };

      var getQuote = function getQuote(style, isOpening, quoteDepth) {
        var quotes = style.quotes ? style.quotes.split(/\s+/) : ["'\"'", "'\"'"];
        var idx = quoteDepth * 2;
        if (idx >= quotes.length) {
          idx = quotes.length - 2;
        }
        if (!isOpening) {
          ++idx;
        }
        return quotes[idx].replace(/^["']|["']$/g, '');
      };

      var formatCounterValue = function formatCounterValue(counter, glue, format) {
        var len = counter.length;
        var result = '';

        for (var i = 0; i < len; i++) {
          if (i > 0) {
            result += glue || '';
          }
          result += (0, _ListItem.createCounterText)(counter[i], (0, _listStyle.parseListStyleType)(format || 'decimal'), false);
        }

        return result;
      };

      /***/}
    /******/]));
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./extensions/BimMarkups/ThirdParty/lodash/lodash.custom.js":
/*!******************************************************************!*\
  !*** ./extensions/BimMarkups/ThirdParty/lodash/lodash.custom.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, module) {var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);} /**
                                                                                                                                                                                                                                                                                                                                                                                * @license
                                                                                                                                                                                                                                                                                                                                                                                * Lodash (Custom Build) <https://lodash.com/>
                                                                                                                                                                                                                                                                                                                                                                                * Build: `lodash include="cloneDeep,debounce,findLast,remove" exports="amd"`
                                                                                                                                                                                                                                                                                                                                                                                * Copyright JS Foundation and other contributors <https://js.foundation/>
                                                                                                                                                                                                                                                                                                                                                                                * Released under MIT license <https://lodash.com/license>
                                                                                                                                                                                                                                                                                                                                                                                * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
                                                                                                                                                                                                                                                                                                                                                                                * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
                                                                                                                                                                                                                                                                                                                                                                                */
;(function () {

  /** Used as a safe reference for `undefined` in pre-ES5 environments. */
  var undefined;

  /** Used as the semantic version number. */
  var VERSION = '4.17.5';

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /** Error message constants. */
  var FUNC_ERROR_TEXT = 'Expected a function';

  /** Used to stand-in for `undefined` hash values. */
  var HASH_UNDEFINED = '__lodash_hash_undefined__';

  /** Used as the maximum memoize cache size. */
  var MAX_MEMOIZE_SIZE = 500;

  /** Used to compose bitmasks for cloning. */
  var CLONE_DEEP_FLAG = 1,
  CLONE_FLAT_FLAG = 2,
  CLONE_SYMBOLS_FLAG = 4;

  /** Used to compose bitmasks for value comparisons. */
  var COMPARE_PARTIAL_FLAG = 1,
  COMPARE_UNORDERED_FLAG = 2;

  /** Used as references for various `Number` constants. */
  var INFINITY = 1 / 0,
  MAX_SAFE_INTEGER = 9007199254740991,
  MAX_INTEGER = 1.7976931348623157e+308,
  NAN = 0 / 0;

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]',
  arrayTag = '[object Array]',
  asyncTag = '[object AsyncFunction]',
  boolTag = '[object Boolean]',
  dateTag = '[object Date]',
  errorTag = '[object Error]',
  funcTag = '[object Function]',
  genTag = '[object GeneratorFunction]',
  mapTag = '[object Map]',
  numberTag = '[object Number]',
  nullTag = '[object Null]',
  objectTag = '[object Object]',
  promiseTag = '[object Promise]',
  proxyTag = '[object Proxy]',
  regexpTag = '[object RegExp]',
  setTag = '[object Set]',
  stringTag = '[object String]',
  symbolTag = '[object Symbol]',
  undefinedTag = '[object Undefined]',
  weakMapTag = '[object WeakMap]';

  var arrayBufferTag = '[object ArrayBuffer]',
  dataViewTag = '[object DataView]',
  float32Tag = '[object Float32Array]',
  float64Tag = '[object Float64Array]',
  int8Tag = '[object Int8Array]',
  int16Tag = '[object Int16Array]',
  int32Tag = '[object Int32Array]',
  uint8Tag = '[object Uint8Array]',
  uint8ClampedTag = '[object Uint8ClampedArray]',
  uint16Tag = '[object Uint16Array]',
  uint32Tag = '[object Uint32Array]';

  /** Used to match property names within property paths. */
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
  reIsPlainProp = /^\w*$/,
  rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

  /**
                                                                                                                    * Used to match `RegExp`
                                                                                                                    * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
                                                                                                                    */
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

  /** Used to match leading and trailing whitespace. */
  var reTrim = /^\s+|\s+$/g;

  /** Used to match backslashes in property paths. */
  var reEscapeChar = /\\(\\)?/g;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /** Used to detect bad signed hexadecimal string values. */
  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

  /** Used to detect binary string values. */
  var reIsBinary = /^0b[01]+$/i;

  /** Used to detect host constructors (Safari). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used to detect octal string values. */
  var reIsOctal = /^0o[0-7]+$/i;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^(?:0|[1-9]\d*)$/;

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
  typedArrayTags[errorTag] = typedArrayTags[funcTag] =
  typedArrayTags[mapTag] = typedArrayTags[numberTag] =
  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
  typedArrayTags[setTag] = typedArrayTags[stringTag] =
  typedArrayTags[weakMapTag] = false;

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] =
  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =
  cloneableTags[boolTag] = cloneableTags[dateTag] =
  cloneableTags[float32Tag] = cloneableTags[float64Tag] =
  cloneableTags[int8Tag] = cloneableTags[int16Tag] =
  cloneableTags[int32Tag] = cloneableTags[mapTag] =
  cloneableTags[numberTag] = cloneableTags[objectTag] =
  cloneableTags[regexpTag] = cloneableTags[setTag] =
  cloneableTags[stringTag] = cloneableTags[symbolTag] =
  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] =
  cloneableTags[weakMapTag] = false;

  /** Built-in method references without a dependency on `root`. */
  var freeParseInt = parseInt;

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = (typeof global === "undefined" ? "undefined" : _typeof(global)) == 'object' && global && global.Object === Object && global;

  /** Detect free variable `self`. */
  var freeSelf = (typeof self === "undefined" ? "undefined" : _typeof(self)) == 'object' && self && self.Object === Object && self;

  /** Used as a reference to the global object. */
  var root = freeGlobal || freeSelf || Function('return this')();

  /** Detect free variable `exports`. */
  var freeExports = ( false ? undefined : _typeof(exports)) == 'object' && exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = freeExports && ( false ? undefined : _typeof(module)) == 'object' && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports;

  /** Detect free variable `process` from Node.js. */
  var freeProcess = moduleExports && freeGlobal.process;

  /** Used to access faster Node.js helpers. */
  var nodeUtil = function () {
    try {
      return freeProcess && freeProcess.binding && freeProcess.binding('util');
    } catch (e) {}
  }();

  /* Node.js helper references. */
  var nodeIsMap = nodeUtil && nodeUtil.isMap,
  nodeIsSet = nodeUtil && nodeUtil.isSet,
  nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

  /*--------------------------------------------------------------------------*/

  /**
                                                                                  * A specialized version of `_.forEach` for arrays without support for
                                                                                  * iteratee shorthands.
                                                                                  *
                                                                                  * @private
                                                                                  * @param {Array} [array] The array to iterate over.
                                                                                  * @param {Function} iteratee The function invoked per iteration.
                                                                                  * @returns {Array} Returns `array`.
                                                                                  */
  function arrayEach(array, iteratee) {
    var index = -1,
    length = array == null ? 0 : array.length;

    while (++index < length) {
      if (iteratee(array[index], index, array) === false) {
        break;
      }
    }
    return array;
  }

  /**
     * A specialized version of `_.filter` for arrays without support for
     * iteratee shorthands.
     *
     * @private
     * @param {Array} [array] The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
  function arrayFilter(array, predicate) {
    var index = -1,
    length = array == null ? 0 : array.length,
    resIndex = 0,
    result = [];

    while (++index < length) {
      var value = array[index];
      if (predicate(value, index, array)) {
        result[resIndex++] = value;
      }
    }
    return result;
  }

  /**
     * A specialized version of `_.map` for arrays without support for iteratee
     * shorthands.
     *
     * @private
     * @param {Array} [array] The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
  function arrayMap(array, iteratee) {
    var index = -1,
    length = array == null ? 0 : array.length,
    result = Array(length);

    while (++index < length) {
      result[index] = iteratee(array[index], index, array);
    }
    return result;
  }

  /**
     * Appends the elements of `values` to `array`.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to append.
     * @returns {Array} Returns `array`.
     */
  function arrayPush(array, values) {
    var index = -1,
    length = values.length,
    offset = array.length;

    while (++index < length) {
      array[offset + index] = values[index];
    }
    return array;
  }

  /**
     * A specialized version of `_.some` for arrays without support for iteratee
     * shorthands.
     *
     * @private
     * @param {Array} [array] The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
  function arraySome(array, predicate) {
    var index = -1,
    length = array == null ? 0 : array.length;

    while (++index < length) {
      if (predicate(array[index], index, array)) {
        return true;
      }
    }
    return false;
  }

  /**
     * The base implementation of `_.findIndex` and `_.findLastIndex` without
     * support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} predicate The function invoked per iteration.
     * @param {number} fromIndex The index to search from.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {number} Returns the index of the matched value, else `-1`.
     */
  function baseFindIndex(array, predicate, fromIndex, fromRight) {
    var length = array.length,
    index = fromIndex + (fromRight ? 1 : -1);

    while (fromRight ? index-- : ++index < length) {
      if (predicate(array[index], index, array)) {
        return index;
      }
    }
    return -1;
  }

  /**
     * The base implementation of `_.property` without support for deep paths.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @returns {Function} Returns the new accessor function.
     */
  function baseProperty(key) {
    return function (object) {
      return object == null ? undefined : object[key];
    };
  }

  /**
     * The base implementation of `_.times` without support for iteratee shorthands
     * or max array length checks.
     *
     * @private
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the array of results.
     */
  function baseTimes(n, iteratee) {
    var index = -1,
    result = Array(n);

    while (++index < n) {
      result[index] = iteratee(index);
    }
    return result;
  }

  /**
     * The base implementation of `_.unary` without support for storing metadata.
     *
     * @private
     * @param {Function} func The function to cap arguments for.
     * @returns {Function} Returns the new capped function.
     */
  function baseUnary(func) {
    return function (value) {
      return func(value);
    };
  }

  /**
     * Checks if a `cache` value for `key` exists.
     *
     * @private
     * @param {Object} cache The cache to query.
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
  function cacheHas(cache, key) {
    return cache.has(key);
  }

  /**
     * Gets the value at `key` of `object`.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {string} key The key of the property to get.
     * @returns {*} Returns the property value.
     */
  function getValue(object, key) {
    return object == null ? undefined : object[key];
  }

  /**
     * Converts `map` to its key-value pairs.
     *
     * @private
     * @param {Object} map The map to convert.
     * @returns {Array} Returns the key-value pairs.
     */
  function mapToArray(map) {
    var index = -1,
    result = Array(map.size);

    map.forEach(function (value, key) {
      result[++index] = [key, value];
    });
    return result;
  }

  /**
     * Creates a unary function that invokes `func` with its argument transformed.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {Function} transform The argument transform.
     * @returns {Function} Returns the new function.
     */
  function overArg(func, transform) {
    return function (arg) {
      return func(transform(arg));
    };
  }

  /**
     * Converts `set` to an array of its values.
     *
     * @private
     * @param {Object} set The set to convert.
     * @returns {Array} Returns the values.
     */
  function setToArray(set) {
    var index = -1,
    result = Array(set.size);

    set.forEach(function (value) {
      result[++index] = value;
    });
    return result;
  }

  /*--------------------------------------------------------------------------*/

  /** Used for built-in method references. */
  var arrayProto = Array.prototype,
  funcProto = Function.prototype,
  objectProto = Object.prototype;

  /** Used to detect overreaching core-js shims. */
  var coreJsData = root['__core-js_shared__'];

  /** Used to resolve the decompiled source of functions. */
  var funcToString = funcProto.toString;

  /** Used to check objects for own properties. */
  var hasOwnProperty = objectProto.hasOwnProperty;

  /** Used to detect methods masquerading as native. */
  var maskSrcKey = function () {
    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
    return uid ? 'Symbol(src)_1.' + uid : '';
  }();

  /**
        * Used to resolve the
        * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
        * of values.
        */
  var nativeObjectToString = objectProto.toString;

  /** Used to detect if a method is native. */
  var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&').
  replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');


  /** Built-in value references. */
  var Buffer = moduleExports ? root.Buffer : undefined,
  _Symbol = root.Symbol,
  Uint8Array = root.Uint8Array,
  allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,
  getPrototype = overArg(Object.getPrototypeOf, Object),
  objectCreate = Object.create,
  propertyIsEnumerable = objectProto.propertyIsEnumerable,
  splice = arrayProto.splice,
  symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;

  var defineProperty = function () {
    try {
      var func = getNative(Object, 'defineProperty');
      func({}, '', {});
      return func;
    } catch (e) {}
  }();

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeGetSymbols = Object.getOwnPropertySymbols,
  nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,
  nativeKeys = overArg(Object.keys, Object),
  nativeMax = Math.max,
  nativeMin = Math.min;

  /* Built-in method references that are verified to be native. */
  var DataView = getNative(root, 'DataView'),
  Map = getNative(root, 'Map'),
  Promise = getNative(root, 'Promise'),
  Set = getNative(root, 'Set'),
  WeakMap = getNative(root, 'WeakMap'),
  nativeCreate = getNative(Object, 'create');

  /** Used to lookup unminified function names. */
  var realNames = {};

  /** Used to detect maps, sets, and weakmaps. */
  var dataViewCtorString = toSource(DataView),
  mapCtorString = toSource(Map),
  promiseCtorString = toSource(Promise),
  setCtorString = toSource(Set),
  weakMapCtorString = toSource(WeakMap);

  /** Used to convert symbols to primitives and strings. */
  var symbolProto = _Symbol ? _Symbol.prototype : undefined,
  symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,
  symbolToString = symbolProto ? symbolProto.toString : undefined;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates a `lodash` object which wraps `value` to enable implicit method
                                                                                * chain sequences. Methods that operate on and return arrays, collections,
                                                                                * and functions can be chained together. Methods that retrieve a single value
                                                                                * or may return a primitive value will automatically end the chain sequence
                                                                                * and return the unwrapped value. Otherwise, the value must be unwrapped
                                                                                * with `_#value`.
                                                                                *
                                                                                * Explicit chain sequences, which must be unwrapped with `_#value`, may be
                                                                                * enabled using `_.chain`.
                                                                                *
                                                                                * The execution of chained methods is lazy, that is, it's deferred until
                                                                                * `_#value` is implicitly or explicitly called.
                                                                                *
                                                                                * Lazy evaluation allows several methods to support shortcut fusion.
                                                                                * Shortcut fusion is an optimization to merge iteratee calls; this avoids
                                                                                * the creation of intermediate arrays and can greatly reduce the number of
                                                                                * iteratee executions. Sections of a chain sequence qualify for shortcut
                                                                                * fusion if the section is applied to an array and iteratees accept only
                                                                                * one argument. The heuristic for whether a section qualifies for shortcut
                                                                                * fusion is subject to change.
                                                                                *
                                                                                * Chaining is supported in custom builds as long as the `_#value` method is
                                                                                * directly or indirectly included in the build.
                                                                                *
                                                                                * In addition to lodash methods, wrappers have `Array` and `String` methods.
                                                                                *
                                                                                * The wrapper `Array` methods are:
                                                                                * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`
                                                                                *
                                                                                * The wrapper `String` methods are:
                                                                                * `replace` and `split`
                                                                                *
                                                                                * The wrapper methods that support shortcut fusion are:
                                                                                * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,
                                                                                * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,
                                                                                * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`
                                                                                *
                                                                                * The chainable wrapper methods are:
                                                                                * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,
                                                                                * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,
                                                                                * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,
                                                                                * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,
                                                                                * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,
                                                                                * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,
                                                                                * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,
                                                                                * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,
                                                                                * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,
                                                                                * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,
                                                                                * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,
                                                                                * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,
                                                                                * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,
                                                                                * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,
                                                                                * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,
                                                                                * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,
                                                                                * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,
                                                                                * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,
                                                                                * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,
                                                                                * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,
                                                                                * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,
                                                                                * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,
                                                                                * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,
                                                                                * `zipObject`, `zipObjectDeep`, and `zipWith`
                                                                                *
                                                                                * The wrapper methods that are **not** chainable by default are:
                                                                                * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,
                                                                                * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,
                                                                                * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,
                                                                                * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,
                                                                                * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,
                                                                                * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,
                                                                                * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,
                                                                                * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,
                                                                                * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,
                                                                                * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,
                                                                                * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,
                                                                                * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,
                                                                                * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,
                                                                                * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,
                                                                                * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,
                                                                                * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,
                                                                                * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,
                                                                                * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,
                                                                                * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,
                                                                                * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,
                                                                                * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,
                                                                                * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,
                                                                                * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,
                                                                                * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,
                                                                                * `upperFirst`, `value`, and `words`
                                                                                *
                                                                                * @name _
                                                                                * @constructor
                                                                                * @category Seq
                                                                                * @param {*} value The value to wrap in a `lodash` instance.
                                                                                * @returns {Object} Returns the new `lodash` wrapper instance.
                                                                                * @example
                                                                                *
                                                                                * function square(n) {
                                                                                *   return n * n;
                                                                                * }
                                                                                *
                                                                                * var wrapped = _([1, 2, 3]);
                                                                                *
                                                                                * // Returns an unwrapped value.
                                                                                * wrapped.reduce(_.add);
                                                                                * // => 6
                                                                                *
                                                                                * // Returns a wrapped value.
                                                                                * var squares = wrapped.map(square);
                                                                                *
                                                                                * _.isArray(squares);
                                                                                * // => false
                                                                                *
                                                                                * _.isArray(squares.value());
                                                                                * // => true
                                                                                */
  function lodash() {
    // No operation performed.
  }

  /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} proto The object to inherit from.
     * @returns {Object} Returns the new object.
     */
  var baseCreate = function () {
    function object() {}
    return function (proto) {
      if (!isObject(proto)) {
        return {};
      }
      if (objectCreate) {
        return objectCreate(proto);
      }
      object.prototype = proto;
      var result = new object();
      object.prototype = undefined;
      return result;
    };
  }();

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates a hash object.
                                                                                *
                                                                                * @private
                                                                                * @constructor
                                                                                * @param {Array} [entries] The key-value pairs to cache.
                                                                                */
  function Hash(entries) {
    var index = -1,
    length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  /**
     * Removes all key-value entries from the hash.
     *
     * @private
     * @name clear
     * @memberOf Hash
     */
  function hashClear() {
    this.__data__ = nativeCreate ? nativeCreate(null) : {};
    this.size = 0;
  }

  /**
     * Removes `key` and its value from the hash.
     *
     * @private
     * @name delete
     * @memberOf Hash
     * @param {Object} hash The hash to modify.
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
  function hashDelete(key) {
    var result = this.has(key) && delete this.__data__[key];
    this.size -= result ? 1 : 0;
    return result;
  }

  /**
     * Gets the hash value for `key`.
     *
     * @private
     * @name get
     * @memberOf Hash
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
  function hashGet(key) {
    var data = this.__data__;
    if (nativeCreate) {
      var result = data[key];
      return result === HASH_UNDEFINED ? undefined : result;
    }
    return hasOwnProperty.call(data, key) ? data[key] : undefined;
  }

  /**
     * Checks if a hash value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Hash
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
  function hashHas(key) {
    var data = this.__data__;
    return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);
  }

  /**
     * Sets the hash `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Hash
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the hash instance.
     */
  function hashSet(key, value) {
    var data = this.__data__;
    this.size += this.has(key) ? 0 : 1;
    data[key] = nativeCreate && value === undefined ? HASH_UNDEFINED : value;
    return this;
  }

  // Add methods to `Hash`.
  Hash.prototype.clear = hashClear;
  Hash.prototype['delete'] = hashDelete;
  Hash.prototype.get = hashGet;
  Hash.prototype.has = hashHas;
  Hash.prototype.set = hashSet;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates an list cache object.
                                                                                *
                                                                                * @private
                                                                                * @constructor
                                                                                * @param {Array} [entries] The key-value pairs to cache.
                                                                                */
  function ListCache(entries) {
    var index = -1,
    length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  /**
     * Removes all key-value entries from the list cache.
     *
     * @private
     * @name clear
     * @memberOf ListCache
     */
  function listCacheClear() {
    this.__data__ = [];
    this.size = 0;
  }

  /**
     * Removes `key` and its value from the list cache.
     *
     * @private
     * @name delete
     * @memberOf ListCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
  function listCacheDelete(key) {
    var data = this.__data__,
    index = assocIndexOf(data, key);

    if (index < 0) {
      return false;
    }
    var lastIndex = data.length - 1;
    if (index == lastIndex) {
      data.pop();
    } else {
      splice.call(data, index, 1);
    }
    --this.size;
    return true;
  }

  /**
     * Gets the list cache value for `key`.
     *
     * @private
     * @name get
     * @memberOf ListCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
  function listCacheGet(key) {
    var data = this.__data__,
    index = assocIndexOf(data, key);

    return index < 0 ? undefined : data[index][1];
  }

  /**
     * Checks if a list cache value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf ListCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
  function listCacheHas(key) {
    return assocIndexOf(this.__data__, key) > -1;
  }

  /**
     * Sets the list cache `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf ListCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the list cache instance.
     */
  function listCacheSet(key, value) {
    var data = this.__data__,
    index = assocIndexOf(data, key);

    if (index < 0) {
      ++this.size;
      data.push([key, value]);
    } else {
      data[index][1] = value;
    }
    return this;
  }

  // Add methods to `ListCache`.
  ListCache.prototype.clear = listCacheClear;
  ListCache.prototype['delete'] = listCacheDelete;
  ListCache.prototype.get = listCacheGet;
  ListCache.prototype.has = listCacheHas;
  ListCache.prototype.set = listCacheSet;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates a map cache object to store key-value pairs.
                                                                                *
                                                                                * @private
                                                                                * @constructor
                                                                                * @param {Array} [entries] The key-value pairs to cache.
                                                                                */
  function MapCache(entries) {
    var index = -1,
    length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  /**
     * Removes all key-value entries from the map.
     *
     * @private
     * @name clear
     * @memberOf MapCache
     */
  function mapCacheClear() {
    this.size = 0;
    this.__data__ = {
      'hash': new Hash(),
      'map': new (Map || ListCache)(),
      'string': new Hash() };

  }

  /**
     * Removes `key` and its value from the map.
     *
     * @private
     * @name delete
     * @memberOf MapCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
  function mapCacheDelete(key) {
    var result = getMapData(this, key)['delete'](key);
    this.size -= result ? 1 : 0;
    return result;
  }

  /**
     * Gets the map value for `key`.
     *
     * @private
     * @name get
     * @memberOf MapCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
  function mapCacheGet(key) {
    return getMapData(this, key).get(key);
  }

  /**
     * Checks if a map value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf MapCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
  function mapCacheHas(key) {
    return getMapData(this, key).has(key);
  }

  /**
     * Sets the map `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf MapCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the map cache instance.
     */
  function mapCacheSet(key, value) {
    var data = getMapData(this, key),
    size = data.size;

    data.set(key, value);
    this.size += data.size == size ? 0 : 1;
    return this;
  }

  // Add methods to `MapCache`.
  MapCache.prototype.clear = mapCacheClear;
  MapCache.prototype['delete'] = mapCacheDelete;
  MapCache.prototype.get = mapCacheGet;
  MapCache.prototype.has = mapCacheHas;
  MapCache.prototype.set = mapCacheSet;

  /*------------------------------------------------------------------------*/

  /**
                                                                                *
                                                                                * Creates an array cache object to store unique values.
                                                                                *
                                                                                * @private
                                                                                * @constructor
                                                                                * @param {Array} [values] The values to cache.
                                                                                */
  function SetCache(values) {
    var index = -1,
    length = values == null ? 0 : values.length;

    this.__data__ = new MapCache();
    while (++index < length) {
      this.add(values[index]);
    }
  }

  /**
     * Adds `value` to the array cache.
     *
     * @private
     * @name add
     * @memberOf SetCache
     * @alias push
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache instance.
     */
  function setCacheAdd(value) {
    this.__data__.set(value, HASH_UNDEFINED);
    return this;
  }

  /**
     * Checks if `value` is in the array cache.
     *
     * @private
     * @name has
     * @memberOf SetCache
     * @param {*} value The value to search for.
     * @returns {number} Returns `true` if `value` is found, else `false`.
     */
  function setCacheHas(value) {
    return this.__data__.has(value);
  }

  // Add methods to `SetCache`.
  SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
  SetCache.prototype.has = setCacheHas;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates a stack cache object to store key-value pairs.
                                                                                *
                                                                                * @private
                                                                                * @constructor
                                                                                * @param {Array} [entries] The key-value pairs to cache.
                                                                                */
  function Stack(entries) {
    var data = this.__data__ = new ListCache(entries);
    this.size = data.size;
  }

  /**
     * Removes all key-value entries from the stack.
     *
     * @private
     * @name clear
     * @memberOf Stack
     */
  function stackClear() {
    this.__data__ = new ListCache();
    this.size = 0;
  }

  /**
     * Removes `key` and its value from the stack.
     *
     * @private
     * @name delete
     * @memberOf Stack
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
  function stackDelete(key) {
    var data = this.__data__,
    result = data['delete'](key);

    this.size = data.size;
    return result;
  }

  /**
     * Gets the stack value for `key`.
     *
     * @private
     * @name get
     * @memberOf Stack
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
  function stackGet(key) {
    return this.__data__.get(key);
  }

  /**
     * Checks if a stack value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Stack
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
  function stackHas(key) {
    return this.__data__.has(key);
  }

  /**
     * Sets the stack `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Stack
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the stack cache instance.
     */
  function stackSet(key, value) {
    var data = this.__data__;
    if (data instanceof ListCache) {
      var pairs = data.__data__;
      if (!Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
        pairs.push([key, value]);
        this.size = ++data.size;
        return this;
      }
      data = this.__data__ = new MapCache(pairs);
    }
    data.set(key, value);
    this.size = data.size;
    return this;
  }

  // Add methods to `Stack`.
  Stack.prototype.clear = stackClear;
  Stack.prototype['delete'] = stackDelete;
  Stack.prototype.get = stackGet;
  Stack.prototype.has = stackHas;
  Stack.prototype.set = stackSet;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates an array of the enumerable property names of the array-like `value`.
                                                                                *
                                                                                * @private
                                                                                * @param {*} value The value to query.
                                                                                * @param {boolean} inherited Specify returning inherited property names.
                                                                                * @returns {Array} Returns the array of property names.
                                                                                */
  function arrayLikeKeys(value, inherited) {
    var isArr = isArray(value),
    isArg = !isArr && isArguments(value),
    isBuff = !isArr && !isArg && isBuffer(value),
    isType = !isArr && !isArg && !isBuff && isTypedArray(value),
    skipIndexes = isArr || isArg || isBuff || isType,
    result = skipIndexes ? baseTimes(value.length, String) : [],
    length = result.length;

    for (var key in value) {
      if ((inherited || hasOwnProperty.call(value, key)) &&
      !(skipIndexes && (
      // Safari 9 has enumerable `arguments.length` in strict mode.
      key == 'length' ||
      // Node.js 0.10 has enumerable non-index properties on buffers.
      isBuff && (key == 'offset' || key == 'parent') ||
      // PhantomJS 2 has enumerable non-index properties on typed arrays.
      isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') ||
      // Skip index properties.
      isIndex(key, length))))
      {
        result.push(key);
      }
    }
    return result;
  }

  /**
     * Assigns `value` to `key` of `object` if the existing value is not equivalent
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */
  function assignValue(object, key, value) {
    var objValue = object[key];
    if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
    value === undefined && !(key in object)) {
      baseAssignValue(object, key, value);
    }
  }

  /**
     * Gets the index at which the `key` is found in `array` of key-value pairs.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {*} key The key to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     */
  function assocIndexOf(array, key) {
    var length = array.length;
    while (length--) {
      if (eq(array[length][0], key)) {
        return length;
      }
    }
    return -1;
  }

  /**
     * The base implementation of `_.assign` without support for multiple sources
     * or `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
  function baseAssign(object, source) {
    return object && copyObject(source, keys(source), object);
  }

  /**
     * The base implementation of `_.assignIn` without support for multiple sources
     * or `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
  function baseAssignIn(object, source) {
    return object && copyObject(source, keysIn(source), object);
  }

  /**
     * The base implementation of `assignValue` and `assignMergeValue` without
     * value checks.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */
  function baseAssignValue(object, key, value) {
    if (key == '__proto__' && defineProperty) {
      defineProperty(object, key, {
        'configurable': true,
        'enumerable': true,
        'value': value,
        'writable': true });

    } else {
      object[key] = value;
    }
  }

  /**
     * The base implementation of `_.clone` and `_.cloneDeep` which tracks
     * traversed objects.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Deep clone
     *  2 - Flatten inherited properties
     *  4 - Clone symbols
     * @param {Function} [customizer] The function to customize cloning.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The parent object of `value`.
     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.
     * @returns {*} Returns the cloned value.
     */
  function baseClone(value, bitmask, customizer, key, object, stack) {
    var result,
    isDeep = bitmask & CLONE_DEEP_FLAG,
    isFlat = bitmask & CLONE_FLAT_FLAG,
    isFull = bitmask & CLONE_SYMBOLS_FLAG;

    if (customizer) {
      result = object ? customizer(value, key, object, stack) : customizer(value);
    }
    if (result !== undefined) {
      return result;
    }
    if (!isObject(value)) {
      return value;
    }
    var isArr = isArray(value);
    if (isArr) {
      result = initCloneArray(value);
      if (!isDeep) {
        return copyArray(value, result);
      }
    } else {
      var tag = getTag(value),
      isFunc = tag == funcTag || tag == genTag;

      if (isBuffer(value)) {
        return cloneBuffer(value, isDeep);
      }
      if (tag == objectTag || tag == argsTag || isFunc && !object) {
        result = isFlat || isFunc ? {} : initCloneObject(value);
        if (!isDeep) {
          return isFlat ?
          copySymbolsIn(value, baseAssignIn(result, value)) :
          copySymbols(value, baseAssign(result, value));
        }
      } else {
        if (!cloneableTags[tag]) {
          return object ? value : {};
        }
        result = initCloneByTag(value, tag, isDeep);
      }
    }
    // Check for circular references and return its corresponding clone.
    stack || (stack = new Stack());
    var stacked = stack.get(value);
    if (stacked) {
      return stacked;
    }
    stack.set(value, result);

    if (isSet(value)) {
      value.forEach(function (subValue) {
        result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
      });

      return result;
    }

    if (isMap(value)) {
      value.forEach(function (subValue, key) {
        result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
      });

      return result;
    }

    var keysFunc = isFull ?
    isFlat ? getAllKeysIn : getAllKeys :
    isFlat ? keysIn : keys;

    var props = isArr ? undefined : keysFunc(value);
    arrayEach(props || value, function (subValue, key) {
      if (props) {
        key = subValue;
        subValue = value[key];
      }
      // Recursively populate clone (susceptible to call stack limits).
      assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });
    return result;
  }

  /**
     * The base implementation of `_.get` without support for default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @returns {*} Returns the resolved value.
     */
  function baseGet(object, path) {
    path = castPath(path, object);

    var index = 0,
    length = path.length;

    while (object != null && index < length) {
      object = object[toKey(path[index++])];
    }
    return index && index == length ? object : undefined;
  }

  /**
     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
     * `keysFunc` and `symbolsFunc` to get the enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @param {Function} symbolsFunc The function to get the symbols of `object`.
     * @returns {Array} Returns the array of property names and symbols.
     */
  function baseGetAllKeys(object, keysFunc, symbolsFunc) {
    var result = keysFunc(object);
    return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
  }

  /**
     * The base implementation of `getTag` without fallbacks for buggy environments.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the `toStringTag`.
     */
  function baseGetTag(value) {
    if (value == null) {
      return value === undefined ? undefinedTag : nullTag;
    }
    return symToStringTag && symToStringTag in Object(value) ?
    getRawTag(value) :
    objectToString(value);
  }

  /**
     * The base implementation of `_.hasIn` without support for deep paths.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {Array|string} key The key to check.
     * @returns {boolean} Returns `true` if `key` exists, else `false`.
     */
  function baseHasIn(object, key) {
    return object != null && key in Object(object);
  }

  /**
     * The base implementation of `_.isArguments`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an `arguments` object,
     */
  function baseIsArguments(value) {
    return isObjectLike(value) && baseGetTag(value) == argsTag;
  }

  /**
     * The base implementation of `_.isEqual` which supports partial comparisons
     * and tracks traversed objects.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Unordered comparison
     *  2 - Partial comparison
     * @param {Function} [customizer] The function to customize comparisons.
     * @param {Object} [stack] Tracks traversed `value` and `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
  function baseIsEqual(value, other, bitmask, customizer, stack) {
    if (value === other) {
      return true;
    }
    if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
      return value !== value && other !== other;
    }
    return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
  }

  /**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} [stack] Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
  function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
    var objIsArr = isArray(object),
    othIsArr = isArray(other),
    objTag = objIsArr ? arrayTag : getTag(object),
    othTag = othIsArr ? arrayTag : getTag(other);

    objTag = objTag == argsTag ? objectTag : objTag;
    othTag = othTag == argsTag ? objectTag : othTag;

    var objIsObj = objTag == objectTag,
    othIsObj = othTag == objectTag,
    isSameTag = objTag == othTag;

    if (isSameTag && isBuffer(object)) {
      if (!isBuffer(other)) {
        return false;
      }
      objIsArr = true;
      objIsObj = false;
    }
    if (isSameTag && !objIsObj) {
      stack || (stack = new Stack());
      return objIsArr || isTypedArray(object) ?
      equalArrays(object, other, bitmask, customizer, equalFunc, stack) :
      equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
    }
    if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
      var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
      othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

      if (objIsWrapped || othIsWrapped) {
        var objUnwrapped = objIsWrapped ? object.value() : object,
        othUnwrapped = othIsWrapped ? other.value() : other;

        stack || (stack = new Stack());
        return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
      }
    }
    if (!isSameTag) {
      return false;
    }
    stack || (stack = new Stack());
    return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
  }

  /**
     * The base implementation of `_.isMap` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     */
  function baseIsMap(value) {
    return isObjectLike(value) && getTag(value) == mapTag;
  }

  /**
     * The base implementation of `_.isMatch` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Array} matchData The property names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */
  function baseIsMatch(object, source, matchData, customizer) {
    var index = matchData.length,
    length = index,
    noCustomizer = !customizer;

    if (object == null) {
      return !length;
    }
    object = Object(object);
    while (index--) {
      var data = matchData[index];
      if (noCustomizer && data[2] ?
      data[1] !== object[data[0]] :
      !(data[0] in object))
      {
        return false;
      }
    }
    while (++index < length) {
      data = matchData[index];
      var key = data[0],
      objValue = object[key],
      srcValue = data[1];

      if (noCustomizer && data[2]) {
        if (objValue === undefined && !(key in object)) {
          return false;
        }
      } else {
        var stack = new Stack();
        if (customizer) {
          var result = customizer(objValue, srcValue, key, object, source, stack);
        }
        if (!(result === undefined ?
        baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) :
        result))
        {
          return false;
        }
      }
    }
    return true;
  }

  /**
     * The base implementation of `_.isNative` without bad shim checks.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function,
     *  else `false`.
     */
  function baseIsNative(value) {
    if (!isObject(value) || isMasked(value)) {
      return false;
    }
    var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
    return pattern.test(toSource(value));
  }

  /**
     * The base implementation of `_.isSet` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a set, else `false`.
     */
  function baseIsSet(value) {
    return isObjectLike(value) && getTag(value) == setTag;
  }

  /**
     * The base implementation of `_.isTypedArray` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     */
  function baseIsTypedArray(value) {
    return isObjectLike(value) &&
    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
  }

  /**
     * The base implementation of `_.iteratee`.
     *
     * @private
     * @param {*} [value=_.identity] The value to convert to an iteratee.
     * @returns {Function} Returns the iteratee.
     */
  function baseIteratee(value) {
    // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
    // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
    if (typeof value == 'function') {
      return value;
    }
    if (value == null) {
      return identity;
    }
    if (_typeof(value) == 'object') {
      return isArray(value) ?
      baseMatchesProperty(value[0], value[1]) :
      baseMatches(value);
    }
    return property(value);
  }

  /**
     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
  function baseKeys(object) {
    if (!isPrototype(object)) {
      return nativeKeys(object);
    }
    var result = [];
    for (var key in Object(object)) {
      if (hasOwnProperty.call(object, key) && key != 'constructor') {
        result.push(key);
      }
    }
    return result;
  }

  /**
     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
  function baseKeysIn(object) {
    if (!isObject(object)) {
      return nativeKeysIn(object);
    }
    var isProto = isPrototype(object),
    result = [];

    for (var key in object) {
      if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
        result.push(key);
      }
    }
    return result;
  }

  /**
     * The base implementation of `_.matches` which doesn't clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new spec function.
     */
  function baseMatches(source) {
    var matchData = getMatchData(source);
    if (matchData.length == 1 && matchData[0][2]) {
      return matchesStrictComparable(matchData[0][0], matchData[0][1]);
    }
    return function (object) {
      return object === source || baseIsMatch(object, source, matchData);
    };
  }

  /**
     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */
  function baseMatchesProperty(path, srcValue) {
    if (isKey(path) && isStrictComparable(srcValue)) {
      return matchesStrictComparable(toKey(path), srcValue);
    }
    return function (object) {
      var objValue = get(object, path);
      return objValue === undefined && objValue === srcValue ?
      hasIn(object, path) :
      baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
    };
  }

  /**
     * A specialized version of `baseProperty` which supports deep paths.
     *
     * @private
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new accessor function.
     */
  function basePropertyDeep(path) {
    return function (object) {
      return baseGet(object, path);
    };
  }

  /**
     * The base implementation of `_.pullAt` without support for individual
     * indexes or capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */
  function basePullAt(array, indexes) {
    var length = array ? indexes.length : 0,
    lastIndex = length - 1;

    while (length--) {
      var index = indexes[length];
      if (length == lastIndex || index !== previous) {
        var previous = index;
        if (isIndex(index)) {
          splice.call(array, index, 1);
        } else {
          baseUnset(array, index);
        }
      }
    }
    return array;
  }

  /**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
  function baseSlice(array, start, end) {
    var index = -1,
    length = array.length;

    if (start < 0) {
      start = -start > length ? 0 : length + start;
    }
    end = end > length ? length : end;
    if (end < 0) {
      end += length;
    }
    length = start > end ? 0 : end - start >>> 0;
    start >>>= 0;

    var result = Array(length);
    while (++index < length) {
      result[index] = array[index + start];
    }
    return result;
  }

  /**
     * The base implementation of `_.toString` which doesn't convert nullish
     * values to empty strings.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {string} Returns the string.
     */
  function baseToString(value) {
    // Exit early for strings to avoid a performance hit in some environments.
    if (typeof value == 'string') {
      return value;
    }
    if (isArray(value)) {
      // Recursively convert values (susceptible to call stack limits).
      return arrayMap(value, baseToString) + '';
    }
    if (isSymbol(value)) {
      return symbolToString ? symbolToString.call(value) : '';
    }
    var result = value + '';
    return result == '0' && 1 / value == -INFINITY ? '-0' : result;
  }

  /**
     * The base implementation of `_.unset`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The property path to unset.
     * @returns {boolean} Returns `true` if the property is deleted, else `false`.
     */
  function baseUnset(object, path) {
    path = castPath(path, object);
    object = parent(object, path);
    return object == null || delete object[toKey(last(path))];
  }

  /**
     * Casts `value` to a path array if it's not one.
     *
     * @private
     * @param {*} value The value to inspect.
     * @param {Object} [object] The object to query keys on.
     * @returns {Array} Returns the cast property path array.
     */
  function castPath(value, object) {
    if (isArray(value)) {
      return value;
    }
    return isKey(value, object) ? [value] : stringToPath(toString(value));
  }

  /**
     * Creates a clone of  `buffer`.
     *
     * @private
     * @param {Buffer} buffer The buffer to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Buffer} Returns the cloned buffer.
     */
  function cloneBuffer(buffer, isDeep) {
    if (isDeep) {
      return buffer.slice();
    }
    var length = buffer.length,
    result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

    buffer.copy(result);
    return result;
  }

  /**
     * Creates a clone of `arrayBuffer`.
     *
     * @private
     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */
  function cloneArrayBuffer(arrayBuffer) {
    var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
    new Uint8Array(result).set(new Uint8Array(arrayBuffer));
    return result;
  }

  /**
     * Creates a clone of `dataView`.
     *
     * @private
     * @param {Object} dataView The data view to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the cloned data view.
     */
  function cloneDataView(dataView, isDeep) {
    var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;
    return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
  }

  /**
     * Creates a clone of `regexp`.
     *
     * @private
     * @param {Object} regexp The regexp to clone.
     * @returns {Object} Returns the cloned regexp.
     */
  function cloneRegExp(regexp) {
    var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
    result.lastIndex = regexp.lastIndex;
    return result;
  }

  /**
     * Creates a clone of the `symbol` object.
     *
     * @private
     * @param {Object} symbol The symbol object to clone.
     * @returns {Object} Returns the cloned symbol object.
     */
  function cloneSymbol(symbol) {
    return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
  }

  /**
     * Creates a clone of `typedArray`.
     *
     * @private
     * @param {Object} typedArray The typed array to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the cloned typed array.
     */
  function cloneTypedArray(typedArray, isDeep) {
    var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
    return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
  }

  /**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */
  function copyArray(source, array) {
    var index = -1,
    length = source.length;

    array || (array = Array(length));
    while (++index < length) {
      array[index] = source[index];
    }
    return array;
  }

  /**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property identifiers to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @param {Function} [customizer] The function to customize copied values.
     * @returns {Object} Returns `object`.
     */
  function copyObject(source, props, object, customizer) {
    var isNew = !object;
    object || (object = {});

    var index = -1,
    length = props.length;

    while (++index < length) {
      var key = props[index];

      var newValue = customizer ?
      customizer(object[key], source[key], key, object, source) :
      undefined;

      if (newValue === undefined) {
        newValue = source[key];
      }
      if (isNew) {
        baseAssignValue(object, key, newValue);
      } else {
        assignValue(object, key, newValue);
      }
    }
    return object;
  }

  /**
     * Copies own symbols of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy symbols from.
     * @param {Object} [object={}] The object to copy symbols to.
     * @returns {Object} Returns `object`.
     */
  function copySymbols(source, object) {
    return copyObject(source, getSymbols(source), object);
  }

  /**
     * Copies own and inherited symbols of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy symbols from.
     * @param {Object} [object={}] The object to copy symbols to.
     * @returns {Object} Returns `object`.
     */
  function copySymbolsIn(source, object) {
    return copyObject(source, getSymbolsIn(source), object);
  }

  /**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} findIndexFunc The function to find the collection index.
     * @returns {Function} Returns the new find function.
     */
  function createFind(findIndexFunc) {
    return function (collection, predicate, fromIndex) {
      var iterable = Object(collection);
      if (!isArrayLike(collection)) {
        var iteratee = getIteratee(predicate, 3);
        collection = keys(collection);
        predicate = function predicate(key) {return iteratee(iterable[key], key, iterable);};
      }
      var index = findIndexFunc(collection, predicate, fromIndex);
      return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;
    };
  }

  /**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `array` and `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */
  function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
    var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
    arrLength = array.length,
    othLength = other.length;

    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
      return false;
    }
    // Assume cyclic values are equal.
    var stacked = stack.get(array);
    if (stacked && stack.get(other)) {
      return stacked == other;
    }
    var index = -1,
    result = true,
    seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined;

    stack.set(array, other);
    stack.set(other, array);

    // Ignore non-index properties.
    while (++index < arrLength) {
      var arrValue = array[index],
      othValue = other[index];

      if (customizer) {
        var compared = isPartial ?
        customizer(othValue, arrValue, index, other, array, stack) :
        customizer(arrValue, othValue, index, array, other, stack);
      }
      if (compared !== undefined) {
        if (compared) {
          continue;
        }
        result = false;
        break;
      }
      // Recursively compare arrays (susceptible to call stack limits).
      if (seen) {
        if (!arraySome(other, function (othValue, othIndex) {
          if (!cacheHas(seen, othIndex) && (
          arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
            return seen.push(othIndex);
          }
        })) {
          result = false;
          break;
        }
      } else if (!(
      arrValue === othValue ||
      equalFunc(arrValue, othValue, bitmask, customizer, stack)))
      {
        result = false;
        break;
      }
    }
    stack['delete'](array);
    stack['delete'](other);
    return result;
  }

  /**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
  function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
    switch (tag) {
      case dataViewTag:
        if (object.byteLength != other.byteLength ||
        object.byteOffset != other.byteOffset) {
          return false;
        }
        object = object.buffer;
        other = other.buffer;

      case arrayBufferTag:
        if (object.byteLength != other.byteLength ||
        !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
          return false;
        }
        return true;

      case boolTag:
      case dateTag:
      case numberTag:
        // Coerce booleans to `1` or `0` and dates to milliseconds.
        // Invalid dates are coerced to `NaN`.
        return eq(+object, +other);

      case errorTag:
        return object.name == other.name && object.message == other.message;

      case regexpTag:
      case stringTag:
        // Coerce regexes to strings and treat strings, primitives and objects,
        // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
        // for more details.
        return object == other + '';

      case mapTag:
        var convert = mapToArray;

      case setTag:
        var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
        convert || (convert = setToArray);

        if (object.size != other.size && !isPartial) {
          return false;
        }
        // Assume cyclic values are equal.
        var stacked = stack.get(object);
        if (stacked) {
          return stacked == other;
        }
        bitmask |= COMPARE_UNORDERED_FLAG;

        // Recursively compare objects (susceptible to call stack limits).
        stack.set(object, other);
        var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
        stack['delete'](object);
        return result;

      case symbolTag:
        if (symbolValueOf) {
          return symbolValueOf.call(object) == symbolValueOf.call(other);
        }}

    return false;
  }

  /**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
  function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
    var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
    objProps = getAllKeys(object),
    objLength = objProps.length,
    othProps = getAllKeys(other),
    othLength = othProps.length;

    if (objLength != othLength && !isPartial) {
      return false;
    }
    var index = objLength;
    while (index--) {
      var key = objProps[index];
      if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
        return false;
      }
    }
    // Assume cyclic values are equal.
    var stacked = stack.get(object);
    if (stacked && stack.get(other)) {
      return stacked == other;
    }
    var result = true;
    stack.set(object, other);
    stack.set(other, object);

    var skipCtor = isPartial;
    while (++index < objLength) {
      key = objProps[index];
      var objValue = object[key],
      othValue = other[key];

      if (customizer) {
        var compared = isPartial ?
        customizer(othValue, objValue, key, other, object, stack) :
        customizer(objValue, othValue, key, object, other, stack);
      }
      // Recursively compare objects (susceptible to call stack limits).
      if (!(compared === undefined ?
      objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) :
      compared))
      {
        result = false;
        break;
      }
      skipCtor || (skipCtor = key == 'constructor');
    }
    if (result && !skipCtor) {
      var objCtor = object.constructor,
      othCtor = other.constructor;

      // Non `Object` object instances with different constructors are not equal.
      if (objCtor != othCtor &&
      'constructor' in object && 'constructor' in other &&
      !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
      typeof othCtor == 'function' && othCtor instanceof othCtor)) {
        result = false;
      }
    }
    stack['delete'](object);
    stack['delete'](other);
    return result;
  }

  /**
     * Creates an array of own enumerable property names and symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */
  function getAllKeys(object) {
    return baseGetAllKeys(object, keys, getSymbols);
  }

  /**
     * Creates an array of own and inherited enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */
  function getAllKeysIn(object) {
    return baseGetAllKeys(object, keysIn, getSymbolsIn);
  }

  /**
     * Gets the appropriate "iteratee" function. If `_.iteratee` is customized,
     * this function returns the custom method, otherwise it returns `baseIteratee`.
     * If arguments are provided, the chosen function is invoked with them and
     * its result is returned.
     *
     * @private
     * @param {*} [value] The value to convert to an iteratee.
     * @param {number} [arity] The arity of the created iteratee.
     * @returns {Function} Returns the chosen function or its result.
     */
  function getIteratee() {
    var result = lodash.iteratee || iteratee;
    result = result === iteratee ? baseIteratee : result;
    return arguments.length ? result(arguments[0], arguments[1]) : result;
  }

  /**
     * Gets the data for `map`.
     *
     * @private
     * @param {Object} map The map to query.
     * @param {string} key The reference key.
     * @returns {*} Returns the map data.
     */
  function getMapData(map, key) {
    var data = map.__data__;
    return isKeyable(key) ?
    data[typeof key == 'string' ? 'string' : 'hash'] :
    data.map;
  }

  /**
     * Gets the property names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */
  function getMatchData(object) {
    var result = keys(object),
    length = result.length;

    while (length--) {
      var key = result[length],
      value = object[key];

      result[length] = [key, value, isStrictComparable(value)];
    }
    return result;
  }

  /**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */
  function getNative(object, key) {
    var value = getValue(object, key);
    return baseIsNative(value) ? value : undefined;
  }

  /**
     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the raw `toStringTag`.
     */
  function getRawTag(value) {
    var isOwn = hasOwnProperty.call(value, symToStringTag),
    tag = value[symToStringTag];

    try {
      value[symToStringTag] = undefined;
      var unmasked = true;
    } catch (e) {}

    var result = nativeObjectToString.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag] = tag;
      } else {
        delete value[symToStringTag];
      }
    }
    return result;
  }

  /**
     * Creates an array of the own enumerable symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of symbols.
     */
  var getSymbols = !nativeGetSymbols ? stubArray : function (object) {
    if (object == null) {
      return [];
    }
    object = Object(object);
    return arrayFilter(nativeGetSymbols(object), function (symbol) {
      return propertyIsEnumerable.call(object, symbol);
    });
  };

  /**
      * Creates an array of the own and inherited enumerable symbols of `object`.
      *
      * @private
      * @param {Object} object The object to query.
      * @returns {Array} Returns the array of symbols.
      */
  var getSymbolsIn = !nativeGetSymbols ? stubArray : function (object) {
    var result = [];
    while (object) {
      arrayPush(result, getSymbols(object));
      object = getPrototype(object);
    }
    return result;
  };

  /**
      * Gets the `toStringTag` of `value`.
      *
      * @private
      * @param {*} value The value to query.
      * @returns {string} Returns the `toStringTag`.
      */
  var getTag = baseGetTag;

  // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
  if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag ||
  Map && getTag(new Map()) != mapTag ||
  Promise && getTag(Promise.resolve()) != promiseTag ||
  Set && getTag(new Set()) != setTag ||
  WeakMap && getTag(new WeakMap()) != weakMapTag) {
    getTag = function getTag(value) {
      var result = baseGetTag(value),
      Ctor = result == objectTag ? value.constructor : undefined,
      ctorString = Ctor ? toSource(Ctor) : '';

      if (ctorString) {
        switch (ctorString) {
          case dataViewCtorString:return dataViewTag;
          case mapCtorString:return mapTag;
          case promiseCtorString:return promiseTag;
          case setCtorString:return setTag;
          case weakMapCtorString:return weakMapTag;}

      }
      return result;
    };
  }

  /**
     * Checks if `path` exists on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @param {Function} hasFunc The function to check properties.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     */
  function hasPath(object, path, hasFunc) {
    path = castPath(path, object);

    var index = -1,
    length = path.length,
    result = false;

    while (++index < length) {
      var key = toKey(path[index]);
      if (!(result = object != null && hasFunc(object, key))) {
        break;
      }
      object = object[key];
    }
    if (result || ++index != length) {
      return result;
    }
    length = object == null ? 0 : object.length;
    return !!length && isLength(length) && isIndex(key, length) && (
    isArray(object) || isArguments(object));
  }

  /**
     * Initializes an array clone.
     *
     * @private
     * @param {Array} array The array to clone.
     * @returns {Array} Returns the initialized clone.
     */
  function initCloneArray(array) {
    var length = array.length,
    result = new array.constructor(length);

    // Add properties assigned by `RegExp#exec`.
    if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
      result.index = array.index;
      result.input = array.input;
    }
    return result;
  }

  /**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */
  function initCloneObject(object) {
    return typeof object.constructor == 'function' && !isPrototype(object) ?
    baseCreate(getPrototype(object)) :
    {};
  }

  /**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */
  function initCloneByTag(object, tag, isDeep) {
    var Ctor = object.constructor;
    switch (tag) {
      case arrayBufferTag:
        return cloneArrayBuffer(object);

      case boolTag:
      case dateTag:
        return new Ctor(+object);

      case dataViewTag:
        return cloneDataView(object, isDeep);

      case float32Tag:case float64Tag:
      case int8Tag:case int16Tag:case int32Tag:
      case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:
        return cloneTypedArray(object, isDeep);

      case mapTag:
        return new Ctor();

      case numberTag:
      case stringTag:
        return new Ctor(object);

      case regexpTag:
        return cloneRegExp(object);

      case setTag:
        return new Ctor();

      case symbolTag:
        return cloneSymbol(object);}

  }

  /**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */
  function isIndex(value, length) {
    var type = _typeof(value);
    length = length == null ? MAX_SAFE_INTEGER : length;

    return !!length && (
    type == 'number' ||
    type != 'symbol' && reIsUint.test(value)) &&
    value > -1 && value % 1 == 0 && value < length;
  }

  /**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */
  function isKey(value, object) {
    if (isArray(value)) {
      return false;
    }
    var type = _typeof(value);
    if (type == 'number' || type == 'symbol' || type == 'boolean' ||
    value == null || isSymbol(value)) {
      return true;
    }
    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
    object != null && value in Object(object);
  }

  /**
     * Checks if `value` is suitable for use as unique object key.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
     */
  function isKeyable(value) {
    var type = _typeof(value);
    return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ?
    value !== '__proto__' :
    value === null;
  }

  /**
     * Checks if `func` has its source masked.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` is masked, else `false`.
     */
  function isMasked(func) {
    return !!maskSrcKey && maskSrcKey in func;
  }

  /**
     * Checks if `value` is likely a prototype object.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
     */
  function isPrototype(value) {
    var Ctor = value && value.constructor,
    proto = typeof Ctor == 'function' && Ctor.prototype || objectProto;

    return value === proto;
  }

  /**
     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` if suitable for strict
     *  equality comparisons, else `false`.
     */
  function isStrictComparable(value) {
    return value === value && !isObject(value);
  }

  /**
     * A specialized version of `matchesProperty` for source values suitable
     * for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */
  function matchesStrictComparable(key, srcValue) {
    return function (object) {
      if (object == null) {
        return false;
      }
      return object[key] === srcValue && (
      srcValue !== undefined || key in Object(object));
    };
  }

  /**
     * A specialized version of `_.memoize` which clears the memoized function's
     * cache when it exceeds `MAX_MEMOIZE_SIZE`.
     *
     * @private
     * @param {Function} func The function to have its output memoized.
     * @returns {Function} Returns the new memoized function.
     */
  function memoizeCapped(func) {
    var result = memoize(func, function (key) {
      if (cache.size === MAX_MEMOIZE_SIZE) {
        cache.clear();
      }
      return key;
    });

    var cache = result.cache;
    return result;
  }

  /**
     * This function is like
     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * except that it includes inherited enumerable properties.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
  function nativeKeysIn(object) {
    var result = [];
    if (object != null) {
      for (var key in Object(object)) {
        result.push(key);
      }
    }
    return result;
  }

  /**
     * Converts `value` to a string using `Object.prototype.toString`.
     *
     * @private
     * @param {*} value The value to convert.
     * @returns {string} Returns the converted string.
     */
  function objectToString(value) {
    return nativeObjectToString.call(value);
  }

  /**
     * Gets the parent value at `path` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path to get the parent value of.
     * @returns {*} Returns the parent value.
     */
  function parent(object, path) {
    return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
  }

  /**
     * Converts `string` to a property path array.
     *
     * @private
     * @param {string} string The string to convert.
     * @returns {Array} Returns the property path array.
     */
  var stringToPath = memoizeCapped(function (string) {
    var result = [];
    if (string.charCodeAt(0) === 46 /* . */) {
        result.push('');
      }
    string.replace(rePropName, function (match, number, quote, subString) {
      result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);
    });
    return result;
  });

  /**
       * Converts `value` to a string key if it's not a string or symbol.
       *
       * @private
       * @param {*} value The value to inspect.
       * @returns {string|symbol} Returns the key.
       */
  function toKey(value) {
    if (typeof value == 'string' || isSymbol(value)) {
      return value;
    }
    var result = value + '';
    return result == '0' && 1 / value == -INFINITY ? '-0' : result;
  }

  /**
     * Converts `func` to its source code.
     *
     * @private
     * @param {Function} func The function to convert.
     * @returns {string} Returns the source code.
     */
  function toSource(func) {
    if (func != null) {
      try {
        return funcToString.call(func);
      } catch (e) {}
      try {
        return func + '';
      } catch (e) {}
    }
    return '';
  }

  /*------------------------------------------------------------------------*/

  /**
                                                                                * This method is like `_.findIndex` except that it iterates over elements
                                                                                * of `collection` from right to left.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 2.0.0
                                                                                * @category Array
                                                                                * @param {Array} array The array to inspect.
                                                                                * @param {Function} [predicate=_.identity] The function invoked per iteration.
                                                                                * @param {number} [fromIndex=array.length-1] The index to search from.
                                                                                * @returns {number} Returns the index of the found element, else `-1`.
                                                                                * @example
                                                                                *
                                                                                * var users = [
                                                                                *   { 'user': 'barney',  'active': true },
                                                                                *   { 'user': 'fred',    'active': false },
                                                                                *   { 'user': 'pebbles', 'active': false }
                                                                                * ];
                                                                                *
                                                                                * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });
                                                                                * // => 2
                                                                                *
                                                                                * // The `_.matches` iteratee shorthand.
                                                                                * _.findLastIndex(users, { 'user': 'barney', 'active': true });
                                                                                * // => 0
                                                                                *
                                                                                * // The `_.matchesProperty` iteratee shorthand.
                                                                                * _.findLastIndex(users, ['active', false]);
                                                                                * // => 2
                                                                                *
                                                                                * // The `_.property` iteratee shorthand.
                                                                                * _.findLastIndex(users, 'active');
                                                                                * // => 0
                                                                                */
  function findLastIndex(array, predicate, fromIndex) {
    var length = array == null ? 0 : array.length;
    if (!length) {
      return -1;
    }
    var index = length - 1;
    if (fromIndex !== undefined) {
      index = toInteger(fromIndex);
      index = fromIndex < 0 ?
      nativeMax(length + index, 0) :
      nativeMin(index, length - 1);
    }
    return baseFindIndex(array, getIteratee(predicate, 3), index, true);
  }

  /**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */
  function last(array) {
    var length = array == null ? 0 : array.length;
    return length ? array[length - 1] : undefined;
  }

  /**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is invoked
     * with three arguments: (value, index, array).
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`
     * to pull elements from an array by value.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */
  function remove(array, predicate) {
    var result = [];
    if (!(array && array.length)) {
      return result;
    }
    var index = -1,
    indexes = [],
    length = array.length;

    predicate = getIteratee(predicate, 3);
    while (++index < length) {
      var value = array[index];
      if (predicate(value, index, array)) {
        result.push(value);
        indexes.push(index);
      }
    }
    basePullAt(array, indexes);
    return result;
  }

  /*------------------------------------------------------------------------*/

  /**
                                                                                * This method is like `_.find` except that it iterates over elements of
                                                                                * `collection` from right to left.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 2.0.0
                                                                                * @category Collection
                                                                                * @param {Array|Object} collection The collection to inspect.
                                                                                * @param {Function} [predicate=_.identity] The function invoked per iteration.
                                                                                * @param {number} [fromIndex=collection.length-1] The index to search from.
                                                                                * @returns {*} Returns the matched element, else `undefined`.
                                                                                * @example
                                                                                *
                                                                                * _.findLast([1, 2, 3, 4], function(n) {
                                                                                *   return n % 2 == 1;
                                                                                * });
                                                                                * // => 3
                                                                                */
  var findLast = createFind(findLastIndex);

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Gets the timestamp of the number of milliseconds that have elapsed since
                                                                                * the Unix epoch (1 January 1970 00:00:00 UTC).
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 2.4.0
                                                                                * @category Date
                                                                                * @returns {number} Returns the timestamp.
                                                                                * @example
                                                                                *
                                                                                * _.defer(function(stamp) {
                                                                                *   console.log(_.now() - stamp);
                                                                                * }, _.now());
                                                                                * // => Logs the number of milliseconds it took for the deferred invocation.
                                                                                */
  var now = function now() {
    return root.Date.now();
  };

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Creates a debounced function that delays invoking `func` until after `wait`
                                                                                * milliseconds have elapsed since the last time the debounced function was
                                                                                * invoked. The debounced function comes with a `cancel` method to cancel
                                                                                * delayed `func` invocations and a `flush` method to immediately invoke them.
                                                                                * Provide `options` to indicate whether `func` should be invoked on the
                                                                                * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
                                                                                * with the last arguments provided to the debounced function. Subsequent
                                                                                * calls to the debounced function return the result of the last `func`
                                                                                * invocation.
                                                                                *
                                                                                * **Note:** If `leading` and `trailing` options are `true`, `func` is
                                                                                * invoked on the trailing edge of the timeout only if the debounced function
                                                                                * is invoked more than once during the `wait` timeout.
                                                                                *
                                                                                * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
                                                                                * until to the next tick, similar to `setTimeout` with a timeout of `0`.
                                                                                *
                                                                                * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
                                                                                * for details over the differences between `_.debounce` and `_.throttle`.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 0.1.0
                                                                                * @category Function
                                                                                * @param {Function} func The function to debounce.
                                                                                * @param {number} [wait=0] The number of milliseconds to delay.
                                                                                * @param {Object} [options={}] The options object.
                                                                                * @param {boolean} [options.leading=false]
                                                                                *  Specify invoking on the leading edge of the timeout.
                                                                                * @param {number} [options.maxWait]
                                                                                *  The maximum time `func` is allowed to be delayed before it's invoked.
                                                                                * @param {boolean} [options.trailing=true]
                                                                                *  Specify invoking on the trailing edge of the timeout.
                                                                                * @returns {Function} Returns the new debounced function.
                                                                                * @example
                                                                                *
                                                                                * // Avoid costly calculations while the window size is in flux.
                                                                                * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
                                                                                *
                                                                                * // Invoke `sendMail` when clicked, debouncing subsequent calls.
                                                                                * jQuery(element).on('click', _.debounce(sendMail, 300, {
                                                                                *   'leading': true,
                                                                                *   'trailing': false
                                                                                * }));
                                                                                *
                                                                                * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
                                                                                * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
                                                                                * var source = new EventSource('/stream');
                                                                                * jQuery(source).on('message', debounced);
                                                                                *
                                                                                * // Cancel the trailing debounced invocation.
                                                                                * jQuery(window).on('popstate', debounced.cancel);
                                                                                */
  function debounce(func, wait, options) {
    var lastArgs,
    lastThis,
    maxWait,
    result,
    timerId,
    lastCallTime,
    lastInvokeTime = 0,
    leading = false,
    maxing = false,
    trailing = true;

    if (typeof func != 'function') {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    wait = toNumber(wait) || 0;
    if (isObject(options)) {
      leading = !!options.leading;
      maxing = 'maxWait' in options;
      maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
      trailing = 'trailing' in options ? !!options.trailing : trailing;
    }

    function invokeFunc(time) {
      var args = lastArgs,
      thisArg = lastThis;

      lastArgs = lastThis = undefined;
      lastInvokeTime = time;
      result = func.apply(thisArg, args);
      return result;
    }

    function leadingEdge(time) {
      // Reset any `maxWait` timer.
      lastInvokeTime = time;
      // Start the timer for the trailing edge.
      timerId = setTimeout(timerExpired, wait);
      // Invoke the leading edge.
      return leading ? invokeFunc(time) : result;
    }

    function remainingWait(time) {
      var timeSinceLastCall = time - lastCallTime,
      timeSinceLastInvoke = time - lastInvokeTime,
      timeWaiting = wait - timeSinceLastCall;

      return maxing ?
      nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) :
      timeWaiting;
    }

    function shouldInvoke(time) {
      var timeSinceLastCall = time - lastCallTime,
      timeSinceLastInvoke = time - lastInvokeTime;

      // Either this is the first call, activity has stopped and we're at the
      // trailing edge, the system time has gone backwards and we're treating
      // it as the trailing edge, or we've hit the `maxWait` limit.
      return lastCallTime === undefined || timeSinceLastCall >= wait ||
      timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
    }

    function timerExpired() {
      var time = now();
      if (shouldInvoke(time)) {
        return trailingEdge(time);
      }
      // Restart the timer.
      timerId = setTimeout(timerExpired, remainingWait(time));
    }

    function trailingEdge(time) {
      timerId = undefined;

      // Only invoke if we have `lastArgs` which means `func` has been
      // debounced at least once.
      if (trailing && lastArgs) {
        return invokeFunc(time);
      }
      lastArgs = lastThis = undefined;
      return result;
    }

    function cancel() {
      if (timerId !== undefined) {
        clearTimeout(timerId);
      }
      lastInvokeTime = 0;
      lastArgs = lastCallTime = lastThis = timerId = undefined;
    }

    function flush() {
      return timerId === undefined ? result : trailingEdge(now());
    }

    function debounced() {
      var time = now(),
      isInvoking = shouldInvoke(time);

      lastArgs = arguments;
      lastThis = this;
      lastCallTime = time;

      if (isInvoking) {
        if (timerId === undefined) {
          return leadingEdge(lastCallTime);
        }
        if (maxing) {
          // Handle invocations in a tight loop.
          timerId = setTimeout(timerExpired, wait);
          return invokeFunc(lastCallTime);
        }
      }
      if (timerId === undefined) {
        timerId = setTimeout(timerExpired, wait);
      }
      return result;
    }
    debounced.cancel = cancel;
    debounced.flush = flush;
    return debounced;
  }

  /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided, it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is used as the map cache key. The `func`
     * is invoked with the `this` binding of the memoized function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the
     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `clear`, `delete`, `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoized function.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     * var other = { 'c': 3, 'd': 4 };
     *
     * var values = _.memoize(_.values);
     * values(object);
     * // => [1, 2]
     *
     * values(other);
     * // => [3, 4]
     *
     * object.a = 2;
     * values(object);
     * // => [1, 2]
     *
     * // Modify the result cache.
     * values.cache.set(object, ['a', 'b']);
     * values(object);
     * // => ['a', 'b']
     *
     * // Replace `_.memoize.Cache`.
     * _.memoize.Cache = WeakMap;
     */
  function memoize(func, resolver) {
    if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    var memoized = function memoized() {
      var args = arguments,
      key = resolver ? resolver.apply(this, args) : args[0],
      cache = memoized.cache;

      if (cache.has(key)) {
        return cache.get(key);
      }
      var result = func.apply(this, args);
      memoized.cache = cache.set(key, result) || cache;
      return result;
    };
    memoized.cache = new (memoize.Cache || MapCache)();
    return memoized;
  }

  // Expose `MapCache`.
  memoize.Cache = MapCache;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * This method is like `_.clone` except that it recursively clones `value`.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 1.0.0
                                                                                * @category Lang
                                                                                * @param {*} value The value to recursively clone.
                                                                                * @returns {*} Returns the deep cloned value.
                                                                                * @see _.clone
                                                                                * @example
                                                                                *
                                                                                * var objects = [{ 'a': 1 }, { 'b': 2 }];
                                                                                *
                                                                                * var deep = _.cloneDeep(objects);
                                                                                * console.log(deep[0] === objects[0]);
                                                                                * // => false
                                                                                */
  function cloneDeep(value) {
    return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);
  }

  /**
     * Performs a
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * comparison between two values to determine if they are equivalent.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'a': 1 };
     * var other = { 'a': 1 };
     *
     * _.eq(object, object);
     * // => true
     *
     * _.eq(object, other);
     * // => false
     *
     * _.eq('a', 'a');
     * // => true
     *
     * _.eq('a', Object('a'));
     * // => false
     *
     * _.eq(NaN, NaN);
     * // => true
     */
  function eq(value, other) {
    return value === other || value !== value && other !== other;
  }

  /**
     * Checks if `value` is likely an `arguments` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an `arguments` object,
     *  else `false`.
     * @example
     *
     * _.isArguments(function() { return arguments; }());
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
  var isArguments = baseIsArguments(function () {return arguments;}()) ? baseIsArguments : function (value) {
    return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&
    !propertyIsEnumerable.call(value, 'callee');
  };

  /**
      * Checks if `value` is classified as an `Array` object.
      *
      * @static
      * @memberOf _
      * @since 0.1.0
      * @category Lang
      * @param {*} value The value to check.
      * @returns {boolean} Returns `true` if `value` is an array, else `false`.
      * @example
      *
      * _.isArray([1, 2, 3]);
      * // => true
      *
      * _.isArray(document.body.children);
      * // => false
      *
      * _.isArray('abc');
      * // => false
      *
      * _.isArray(_.noop);
      * // => false
      */
  var isArray = Array.isArray;

  /**
                                * Checks if `value` is array-like. A value is considered array-like if it's
                                * not a function and has a `value.length` that's an integer greater than or
                                * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
                                *
                                * @static
                                * @memberOf _
                                * @since 4.0.0
                                * @category Lang
                                * @param {*} value The value to check.
                                * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
                                * @example
                                *
                                * _.isArrayLike([1, 2, 3]);
                                * // => true
                                *
                                * _.isArrayLike(document.body.children);
                                * // => true
                                *
                                * _.isArrayLike('abc');
                                * // => true
                                *
                                * _.isArrayLike(_.noop);
                                * // => false
                                */
  function isArrayLike(value) {
    return value != null && isLength(value.length) && !isFunction(value);
  }

  /**
     * Checks if `value` is a buffer.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
     * @example
     *
     * _.isBuffer(new Buffer(2));
     * // => true
     *
     * _.isBuffer(new Uint8Array(2));
     * // => false
     */
  var isBuffer = nativeIsBuffer || stubFalse;

  /**
                                               * Checks if `value` is classified as a `Function` object.
                                               *
                                               * @static
                                               * @memberOf _
                                               * @since 0.1.0
                                               * @category Lang
                                               * @param {*} value The value to check.
                                               * @returns {boolean} Returns `true` if `value` is a function, else `false`.
                                               * @example
                                               *
                                               * _.isFunction(_);
                                               * // => true
                                               *
                                               * _.isFunction(/abc/);
                                               * // => false
                                               */
  function isFunction(value) {
    if (!isObject(value)) {
      return false;
    }
    // The use of `Object#toString` avoids issues with the `typeof` operator
    // in Safari 9 which returns 'object' for typed arrays and other constructors.
    var tag = baseGetTag(value);
    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
  }

  /**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This method is loosely based on
     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     * @example
     *
     * _.isLength(3);
     * // => true
     *
     * _.isLength(Number.MIN_VALUE);
     * // => false
     *
     * _.isLength(Infinity);
     * // => false
     *
     * _.isLength('3');
     * // => false
     */
  function isLength(value) {
    return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
  }

  /**
     * Checks if `value` is the
     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(_.noop);
     * // => true
     *
     * _.isObject(null);
     * // => false
     */
  function isObject(value) {
    var type = _typeof(value);
    return value != null && (type == 'object' || type == 'function');
  }

  /**
     * Checks if `value` is object-like. A value is object-like if it's not `null`
     * and has a `typeof` result of "object".
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
     * @example
     *
     * _.isObjectLike({});
     * // => true
     *
     * _.isObjectLike([1, 2, 3]);
     * // => true
     *
     * _.isObjectLike(_.noop);
     * // => false
     *
     * _.isObjectLike(null);
     * // => false
     */
  function isObjectLike(value) {
    return value != null && _typeof(value) == 'object';
  }

  /**
     * Checks if `value` is classified as a `Map` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     * @example
     *
     * _.isMap(new Map);
     * // => true
     *
     * _.isMap(new WeakMap);
     * // => false
     */
  var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;

  /**
                                                             * Checks if `value` is classified as a `Set` object.
                                                             *
                                                             * @static
                                                             * @memberOf _
                                                             * @since 4.3.0
                                                             * @category Lang
                                                             * @param {*} value The value to check.
                                                             * @returns {boolean} Returns `true` if `value` is a set, else `false`.
                                                             * @example
                                                             *
                                                             * _.isSet(new Set);
                                                             * // => true
                                                             *
                                                             * _.isSet(new WeakSet);
                                                             * // => false
                                                             */
  var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;

  /**
                                                             * Checks if `value` is classified as a `Symbol` primitive or object.
                                                             *
                                                             * @static
                                                             * @memberOf _
                                                             * @since 4.0.0
                                                             * @category Lang
                                                             * @param {*} value The value to check.
                                                             * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
                                                             * @example
                                                             *
                                                             * _.isSymbol(Symbol.iterator);
                                                             * // => true
                                                             *
                                                             * _.isSymbol('abc');
                                                             * // => false
                                                             */
  function isSymbol(value) {
    return _typeof(value) == 'symbol' ||
    isObjectLike(value) && baseGetTag(value) == symbolTag;
  }

  /**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */
  var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

  /**
                                                                                         * Converts `value` to a finite number.
                                                                                         *
                                                                                         * @static
                                                                                         * @memberOf _
                                                                                         * @since 4.12.0
                                                                                         * @category Lang
                                                                                         * @param {*} value The value to convert.
                                                                                         * @returns {number} Returns the converted number.
                                                                                         * @example
                                                                                         *
                                                                                         * _.toFinite(3.2);
                                                                                         * // => 3.2
                                                                                         *
                                                                                         * _.toFinite(Number.MIN_VALUE);
                                                                                         * // => 5e-324
                                                                                         *
                                                                                         * _.toFinite(Infinity);
                                                                                         * // => 1.7976931348623157e+308
                                                                                         *
                                                                                         * _.toFinite('3.2');
                                                                                         * // => 3.2
                                                                                         */
  function toFinite(value) {
    if (!value) {
      return value === 0 ? value : 0;
    }
    value = toNumber(value);
    if (value === INFINITY || value === -INFINITY) {
      var sign = value < 0 ? -1 : 1;
      return sign * MAX_INTEGER;
    }
    return value === value ? value : 0;
  }

  /**
     * Converts `value` to an integer.
     *
     * **Note:** This method is loosely based on
     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toInteger(3.2);
     * // => 3
     *
     * _.toInteger(Number.MIN_VALUE);
     * // => 0
     *
     * _.toInteger(Infinity);
     * // => 1.7976931348623157e+308
     *
     * _.toInteger('3.2');
     * // => 3
     */
  function toInteger(value) {
    var result = toFinite(value),
    remainder = result % 1;

    return result === result ? remainder ? result - remainder : result : 0;
  }

  /**
     * Converts `value` to a number.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to process.
     * @returns {number} Returns the number.
     * @example
     *
     * _.toNumber(3.2);
     * // => 3.2
     *
     * _.toNumber(Number.MIN_VALUE);
     * // => 5e-324
     *
     * _.toNumber(Infinity);
     * // => Infinity
     *
     * _.toNumber('3.2');
     * // => 3.2
     */
  function toNumber(value) {
    if (typeof value == 'number') {
      return value;
    }
    if (isSymbol(value)) {
      return NAN;
    }
    if (isObject(value)) {
      var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
      value = isObject(other) ? other + '' : other;
    }
    if (typeof value != 'string') {
      return value === 0 ? value : +value;
    }
    value = value.replace(reTrim, '');
    var isBinary = reIsBinary.test(value);
    return isBinary || reIsOctal.test(value) ?
    freeParseInt(value.slice(2), isBinary ? 2 : 8) :
    reIsBadHex.test(value) ? NAN : +value;
  }

  /**
     * Converts `value` to a string. An empty string is returned for `null`
     * and `undefined` values. The sign of `-0` is preserved.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {string} Returns the converted string.
     * @example
     *
     * _.toString(null);
     * // => ''
     *
     * _.toString(-0);
     * // => '-0'
     *
     * _.toString([1, 2, 3]);
     * // => '1,2,3'
     */
  function toString(value) {
    return value == null ? '' : baseToString(value);
  }

  /*------------------------------------------------------------------------*/

  /**
                                                                                * Gets the value at `path` of `object`. If the resolved value is
                                                                                * `undefined`, the `defaultValue` is returned in its place.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @since 3.7.0
                                                                                * @category Object
                                                                                * @param {Object} object The object to query.
                                                                                * @param {Array|string} path The path of the property to get.
                                                                                * @param {*} [defaultValue] The value returned for `undefined` resolved values.
                                                                                * @returns {*} Returns the resolved value.
                                                                                * @example
                                                                                *
                                                                                * var object = { 'a': [{ 'b': { 'c': 3 } }] };
                                                                                *
                                                                                * _.get(object, 'a[0].b.c');
                                                                                * // => 3
                                                                                *
                                                                                * _.get(object, ['a', '0', 'b', 'c']);
                                                                                * // => 3
                                                                                *
                                                                                * _.get(object, 'a.b.c', 'default');
                                                                                * // => 'default'
                                                                                */
  function get(object, path, defaultValue) {
    var result = object == null ? undefined : baseGet(object, path);
    return result === undefined ? defaultValue : result;
  }

  /**
     * Checks if `path` is a direct or inherited property of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     * @example
     *
     * var object = _.create({ 'a': _.create({ 'b': 2 }) });
     *
     * _.hasIn(object, 'a');
     * // => true
     *
     * _.hasIn(object, 'a.b');
     * // => true
     *
     * _.hasIn(object, ['a', 'b']);
     * // => true
     *
     * _.hasIn(object, 'b');
     * // => false
     */
  function hasIn(object, path) {
    return object != null && hasPath(object, path, baseHasIn);
  }

  /**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */
  function keys(object) {
    return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
  }

  /**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */
  function keysIn(object) {
    return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
  }

  /*------------------------------------------------------------------------*/

  /**
                                                                                * This method returns the first argument it receives.
                                                                                *
                                                                                * @static
                                                                                * @since 0.1.0
                                                                                * @memberOf _
                                                                                * @category Util
                                                                                * @param {*} value Any value.
                                                                                * @returns {*} Returns `value`.
                                                                                * @example
                                                                                *
                                                                                * var object = { 'a': 1 };
                                                                                *
                                                                                * console.log(_.identity(object) === object);
                                                                                * // => true
                                                                                */
  function identity(value) {
    return value;
  }

  /**
     * Creates a function that invokes `func` with the arguments of the created
     * function. If `func` is a property name, the created function returns the
     * property value for a given element. If `func` is an array or object, the
     * created function returns `true` for elements that contain the equivalent
     * source properties, otherwise it returns `false`.
     *
     * @static
     * @since 4.0.0
     * @memberOf _
     * @category Util
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));
     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.filter(users, _.iteratee(['user', 'fred']));
     * // => [{ 'user': 'fred', 'age': 40 }]
     *
     * // The `_.property` iteratee shorthand.
     * _.map(users, _.iteratee('user'));
     * // => ['barney', 'fred']
     *
     * // Create custom iteratee shorthands.
     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {
     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {
     *     return func.test(string);
     *   };
     * });
     *
     * _.filter(['abc', 'def'], /ef/);
     * // => ['def']
     */
  function iteratee(func) {
    return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));
  }

  /**
     * Creates a function that returns the value at `path` of a given object.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Util
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new accessor function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': 2 } },
     *   { 'a': { 'b': 1 } }
     * ];
     *
     * _.map(objects, _.property('a.b'));
     * // => [2, 1]
     *
     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
     * // => [1, 2]
     */
  function property(path) {
    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
  }

  /**
     * This method returns a new empty array.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {Array} Returns the new empty array.
     * @example
     *
     * var arrays = _.times(2, _.stubArray);
     *
     * console.log(arrays);
     * // => [[], []]
     *
     * console.log(arrays[0] === arrays[1]);
     * // => false
     */
  function stubArray() {
    return [];
  }

  /**
     * This method returns `false`.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {boolean} Returns `false`.
     * @example
     *
     * _.times(2, _.stubFalse);
     * // => [false, false]
     */
  function stubFalse() {
    return false;
  }

  /*------------------------------------------------------------------------*/

  // Add methods that return wrapped values in chain sequences.
  lodash.debounce = debounce;
  lodash.iteratee = iteratee;
  lodash.keys = keys;
  lodash.keysIn = keysIn;
  lodash.memoize = memoize;
  lodash.property = property;
  lodash.remove = remove;

  /*------------------------------------------------------------------------*/

  // Add methods that return unwrapped values in chain sequences.
  lodash.cloneDeep = cloneDeep;
  lodash.eq = eq;
  lodash.findLast = findLast;
  lodash.findLastIndex = findLastIndex;
  lodash.get = get;
  lodash.hasIn = hasIn;
  lodash.identity = identity;
  lodash.isArguments = isArguments;
  lodash.isArray = isArray;
  lodash.isArrayLike = isArrayLike;
  lodash.isBuffer = isBuffer;
  lodash.isFunction = isFunction;
  lodash.isLength = isLength;
  lodash.isMap = isMap;
  lodash.isObject = isObject;
  lodash.isObjectLike = isObjectLike;
  lodash.isSet = isSet;
  lodash.isSymbol = isSymbol;
  lodash.isTypedArray = isTypedArray;
  lodash.last = last;
  lodash.stubArray = stubArray;
  lodash.stubFalse = stubFalse;
  lodash.now = now;
  lodash.toFinite = toFinite;
  lodash.toInteger = toInteger;
  lodash.toNumber = toNumber;
  lodash.toString = toString;

  /*------------------------------------------------------------------------*/

  /**
                                                                                * The semantic version number.
                                                                                *
                                                                                * @static
                                                                                * @memberOf _
                                                                                * @type {string}
                                                                                */
  lodash.VERSION = VERSION;

  /*--------------------------------------------------------------------------*/

  // Some AMD build optimizers, like r.js, check for condition patterns like:
  if ( true && _typeof(__webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")) == 'object' && __webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")) {
    // Define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module.
    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {
      return lodash;
    }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
}).call(this);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./extensions/BimMarkups/ThirdParty/textarea-caret/textarea-caret.js":
/*!***************************************************************************!*\
  !*** ./extensions/BimMarkups/ThirdParty/textarea-caret/textarea-caret.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* jshint browser: true */

(function () {

  // We'll copy the properties below into the mirror div.
  // Note that some browsers, such as Firefox, do not concatenate properties
  // into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),
  // so we have to list every single property explicitly.
  var properties = [
  'direction', // RTL support
  'boxSizing',
  'width', // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does
  'height',
  'overflowX',
  'overflowY', // copy the scrollbar for IE

  'borderTopWidth',
  'borderRightWidth',
  'borderBottomWidth',
  'borderLeftWidth',
  'borderStyle',

  'paddingTop',
  'paddingRight',
  'paddingBottom',
  'paddingLeft',

  // https://developer.mozilla.org/en-US/docs/Web/CSS/font
  'fontStyle',
  'fontVariant',
  'fontWeight',
  'fontStretch',
  'fontSize',
  'fontSizeAdjust',
  'lineHeight',
  'fontFamily',

  'textAlign',
  'textTransform',
  'textIndent',
  'textDecoration', // might not make a difference, but better be safe

  'letterSpacing',
  'wordSpacing',

  'tabSize',
  'MozTabSize'];



  var isBrowser = typeof window !== 'undefined';
  var isFirefox = isBrowser && window.mozInnerScreenX != null;

  function getCaretCoordinates(element, position, options) {
    var _document = element.ownerDocument;
    var _window = _document.defaultView || _document.parentWindow;
    if (!isBrowser) {
      throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');
    }

    var debug = options && options.debug || false;
    if (debug) {
      var el = _document.querySelector('#input-textarea-caret-position-mirror-div');
      if (el) el.parentNode.removeChild(el);
    }

    // The mirror div will replicate the textarea's style
    var div = _document.createElement('div');
    div.id = 'input-textarea-caret-position-mirror-div';
    _document.body.appendChild(div);

    var style = div.style;
    var computed = _window.getComputedStyle ? _window.getComputedStyle(element) : element.currentStyle; // currentStyle for IE < 9
    var isInput = element.nodeName === 'INPUT';

    // Default textarea styles
    style.whiteSpace = 'pre-wrap';
    if (!isInput)
    style.wordWrap = 'break-word'; // only for textarea-s

    // Position off-screen
    style.position = 'absolute'; // required to return coordinates properly
    if (!debug)
    style.visibility = 'hidden'; // not 'display: none' because we want rendering

    // Transfer the element's properties to the div
    properties.forEach(function (prop) {
      if (isInput && prop === 'lineHeight') {
        // Special case for <input>s because text is rendered centered and line height may be != height
        style.lineHeight = computed.height;
      } else {
        style[prop] = computed[prop];
      }
    });

    if (isFirefox) {
      // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275
      if (element.scrollHeight > parseInt(computed.height))
      style.overflowY = 'scroll';
    } else {
      style.overflow = 'hidden'; // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'
    }

    div.textContent = element.value.substring(0, position);
    // The second special handling for input type="text" vs textarea:
    // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037
    if (isInput)
    div.textContent = div.textContent.replace(/\s/g, "\xA0");

    var span = _document.createElement('span');
    // Wrapping must be replicated *exactly*, including when a long word gets
    // onto the next line, with whitespace at the end of the line before (#7).
    // The  *only* reliable way to do that is to copy the *entire* rest of the
    // textarea's content into the <span> created at the caret position.
    // For inputs, just '.' would be enough, but no need to bother.
    span.textContent = element.value.substring(position) || '.'; // || because a completely empty faux span doesn't render at all
    div.appendChild(span);

    var coordinates = {
      top: span.offsetTop + parseInt(computed['borderTopWidth']),
      left: span.offsetLeft + parseInt(computed['borderLeftWidth']),
      height: parseInt(computed['lineHeight']) };


    if (debug) {
      span.style.backgroundColor = '#aaa';
    } else {
      _document.body.removeChild(div);
    }

    return coordinates;
  }

  if ( true && typeof module.exports != 'undefined') {
    module.exports = getCaretCoordinates;
  } else if (isBrowser) {
    _window.getCaretCoordinates = getCaretCoordinates;
  }

})();

/***/ }),

/***/ "./extensions/BimMarkups/UI/MarkupsUI.js":
/*!***********************************************!*\
  !*** ./extensions/BimMarkups/UI/MarkupsUI.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MarkupsUI; });
/* harmony import */ var _MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../MarkupsEvents */ "./extensions/BimMarkups/MarkupsEvents.js");
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}

var av = Autodesk.Viewing;var

MarkupsUI = /*#__PURE__*/function () {
  function MarkupsUI(markupsExtension) {_classCallCheck(this, MarkupsUI);
    this.viewer = markupsExtension.viewer;
    this.setGlobalManager(markupsExtension.globalManager);
    this.options = markupsExtension.options;
    this.markupsExtension = markupsExtension;

    this.createUI();
  }_createClass(MarkupsUI, [{ key: "createUI", value: function createUI()

    {
      var uiClasses = this.options.uiClasses;
      if (!uiClasses) {
        return;
      }

      var _document = this.getDocument();
      this.uiContainer = _document.createElement('div');
      this.uiContainer.id = 'MarkupsUI_Container';
      this.uiContainer.className = 'MarkupsUI_Container';
      this.viewer.container.appendChild(this.uiContainer);

      var ToolbarClass = uiClasses.ToolbarClass;
      this.toolbar = ToolbarClass && new ToolbarClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);

      var CreationToastClass = uiClasses.CreationToastClass;
      this.creationToast = CreationToastClass && new CreationToastClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);

      var ContextualMenuClass = uiClasses.ContextualMenuClass;
      this.contextualMenu = ContextualMenuClass && new ContextualMenuClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);

      var AttachmentsPreviewPanelClass = uiClasses.AttachmentsPreviewPanelClass;
      this.attachmentsPreviewPanel = AttachmentsPreviewPanelClass && new AttachmentsPreviewPanelClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);

      var MarkupsDialogModalsClass = uiClasses.MarkupsDialogModalsClass;
      this.MarkupsDialogModals = MarkupsDialogModalsClass && new MarkupsDialogModalsClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);

      if (this.viewer.impl.is2d) {
        var MarkupsVisibilityButtonClass = uiClasses.MarkupsVisibilityButtonClass;
        this.markupsVisibilityButton = MarkupsVisibilityButtonClass && new MarkupsVisibilityButtonClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);
      } else {
        var ExitMarkupViewClass = uiClasses.ExitMarkupViewClass;
        this.exitMarkupView = ExitMarkupViewClass && new ExitMarkupViewClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);
      }


      this.registerEventListeners();
    } }, { key: "destroy", value: function destroy()

    {
      if (this.toolbar) {
        this.toolbar.destroy();
        this.toolbar = null;
      }

      if (this.creationToast) {
        this.creationToast.destroy();
        this.creationToast = null;
      }

      if (this.contextualMenu) {
        this.contextualMenu.destroy();
        this.contextualMenu = null;
      }

      if (this.attachmentsPreviewPanel) {
        this.attachmentsPreviewPanel.destroy();
        this.attachmentsPreviewPanel = null;
      }

      if (this.markupsVisibilityButton) {
        this.markupsVisibilityButton.destroy();
        this.markupsVisibilityButton = null;
      }

      if (this.exitMarkupView) {
        this.exitMarkupView.destroy();
        this.exitMarkupView = null;
      }

      this.unregisterEventListeners();

      if (this.uiContainer) {
        this.viewer.container.removeChild(this.uiContainer);
        this.uiContainer = null;
      }

      this.markupsExtension = null;
      this.viewer = null;
      this.options = null;
    }

    ////////////////////////////////////////////////
    ///////// Handle LMV navigation buttons ////////
    ////////////////////////////////////////////////
  }, { key: "registerEventListeners", value: function registerEventListeners()
    {
      this.onSessionStartBinded = this.onSessionStart.bind(this);
      this.onSessionEndBinded = this.onSessionEnd.bind(this);

      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.onSessionStartBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.onSessionEndBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_SELECTED, this.onSessionStartBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.onSessionEndBinded);
      this.markupsExtension.markupsManager.addEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_CREATION_TYPE_CHANGED, this.onSessionStartBinded);
    } }, { key: "unregisterEventListeners", value: function unregisterEventListeners()

    {
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_START, this.onSessionStartBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_SESSION_END, this.onSessionEndBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_SELECTED, this.onSessionStartBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].LAYER_DESELECTED, this.onSessionEndBinded);
      this.markupsExtension.markupsManager.removeEventListener(_MarkupsEvents__WEBPACK_IMPORTED_MODULE_0__["MARKUPS_EVENTS"].MARKUP_CREATION_TYPE_CHANGED, this.onSessionStartBinded);
    } }, { key: "onSessionStart", value: function onSessionStart()

    {
      this.selectNavigationButton(null);

      if (this.viewer.impl.is2d) {
        this.handleNavButtonEvents(true);
      }
    } }, { key: "onSessionEnd", value: function onSessionEnd()

    {
      if (this.viewer.impl.is2d) {
        this.handleNavButtonEvents(false);
      }

      this.selectNavigationButton(this.markupsExtension.markupsManager.navigationToolBackup);
    } }, { key: "getNavigationControls", value: function getNavigationControls()

    {
      var LMVtoolbar = this.viewer.getToolbar();
      var navigationControls = LMVtoolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);
      return navigationControls._controls;
    }

    // Add / remove listeners for client event on each navigation toolbar button.
  }, { key: "handleNavButtonEvents", value: function handleNavButtonEvents(addEventListener) {var _this = this;
      this.onNavButtonClickBinded = this.onNavButtonClick.bind(this);
      var buttons = this.getNavigationControls();

      var handleButtonEvents = function handleButtonEvents(button) {
        if (addEventListener) {
          if (!button.hasEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, _this.onNavButtonClickBinded)) {
            button.addEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, _this.onNavButtonClickBinded);
          }
        } else {
          button.removeEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, _this.onNavButtonClickBinded);
        }
      };

      buttons.forEach(function (button) {
        handleButtonEvents(button);

        if (button.subMenu) {
          var subButtons = button.subMenu._controls;
          subButtons.forEach(function (subButton) {
            handleButtonEvents(subButton);
          });
        }
      });
    } }, { key: "onNavButtonClick", value: function onNavButtonClick(

    event) {var _this2 = this;
      var buttons = this.getNavigationControls();

      buttons.forEach(function (button) {
        if (button._id !== event.target._id) {
          button.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);
        } else if (button.getState() === Autodesk.Viewing.UI.Button.State.INACTIVE) {
          _this2.markupsExtension.markupsManager.changeMarkupCreationType(null);
          button.setState(Autodesk.Viewing.UI.Button.State.ACTIVE); // This is mandatory to actually change the active navigation tool & update icon.

          setTimeout(function () {
            _this2.markupsExtension.markupsManager.navigationToolBackup = _this2.viewer.getActiveNavigationTool();
          });
        }
      });
    }

    // Setup active navigation tool on viewer and also activate corresponding button on navigation toolbar.
  }, { key: "selectNavigationButton", value: function selectNavigationButton(toolName) {
      var setButtonState = function setButtonState(button) {
        var isActive = button._id.toLowerCase().indexOf(toolName) !== -1;
        button.setState(isActive ? Autodesk.Viewing.UI.Button.State.ACTIVE : Autodesk.Viewing.UI.Button.State.INACTIVE);
      };

      var buttons = this.getNavigationControls();

      buttons.forEach(function (button) {
        setButtonState(button);

        // Add additional check for group button
        if (button.subMenu) {
          button.subMenu._controls.forEach(function (subButton) {
            setButtonState(subButton);
          });
        }
      });
    } }]);return MarkupsUI;}();


av.GlobalManagerMixin.call(MarkupsUI.prototype);

/***/ }),

/***/ "./extensions/BimMarkups/Utils/ActionManager/Action.js":
/*!*************************************************************!*\
  !*** ./extensions/BimMarkups/Utils/ActionManager/Action.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Action; });
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * Action
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * A base class for a single Action.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * You should implement undo and redo methods.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */var

Action = /*#__PURE__*/function () {
  function Action(actionManager) {_classCallCheck(this, Action);
    this.actionManager = actionManager;
  }_createClass(Action, [{ key: "execute", value: function execute()

    {
      this.actionManager.execute(this);
    } }, { key: "undo", value: function undo()

    {
    } }, { key: "redo", value: function redo()

    {
    } }]);return Action;}();

/***/ }),

/***/ "./extensions/BimMarkups/Utils/ActionManager/ActionManager.js":
/*!********************************************************************!*\
  !*** ./extensions/BimMarkups/Utils/ActionManager/ActionManager.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ActionManager; });
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Action */ "./extensions/BimMarkups/Utils/ActionManager/Action.js");
function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === "object" || typeof call === "function")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === "undefined" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === "function") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}

/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * ActionManager
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Implementation of Command Pattern - https://en.wikipedia.org/wiki/Command_pattern.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Use in order to manage actions with undo and redo operations.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * This class extends EventDispatcher, so for every action, it triggers an event.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */var

ActionManager = /*#__PURE__*/function (_Autodesk$Viewing$Eve) {_inherits(ActionManager, _Autodesk$Viewing$Eve);var _super = _createSuper(ActionManager);
  function ActionManager() {var _this;_classCallCheck(this, ActionManager);
    _this = _super.call(this);

    _this.undoStack = [];
    _this.redoStack = [];

    _this.isGroupOpen = false;
    _this.nextActionId = 0;return _this;
  }_createClass(ActionManager, [{ key: "execute", value: function execute(

    action) {
      this.clearStack(this.redoStack);

      action.id = this.nextActionId;
      this.nextActionId += 1;

      action.redo();

      if (this.isGroupOpen) {
        this.group.push(action);
      } else {
        this.undoStack.push(action);
      }

      action.trigger = ActionManager.EXECUTE;
      this.notify(action);
    } }, { key: "undo", value: function undo()

    {var allowRedo = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      if (this.undoStack.length === 0) {
        return;
      }

      if (this.isGroupOpen) {
        console.warn('Cannot undo while action group is open!');
        return;
      }

      var action = this.undoStack.pop();
      if (allowRedo) {
        this.redoStack.push(action);
      }

      if (action instanceof _Action__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        action.undo();
      } else {
        // Action group
        for (var i = action.length - 1; i >= 0; i--) {
          action[i].undo();
        }
      }

      action.trigger = ActionManager.UNDO;
      this.notify(action);
    } }, { key: "redo", value: function redo()

    {
      if (this.redoStack.length === 0) {
        return;
      }

      if (this.isGroupOpen) {
        console.warn('Cannot redo while action group is open!');
        return;
      }

      var action = this.redoStack.pop();
      this.undoStack.push(action);

      if (action instanceof _Action__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        action.redo();
      } else {
        // Action group
        for (var i = 0; i < action.length; i++) {
          action[i].redo();
        }
      }

      action.trigger = ActionManager.REDO;
      this.notify(action);
    } }, { key: "clear", value: function clear()

    {
      this.clearStack(this.undoStack);
      this.clearStack(this.redoStack);

      this.isGroupOpen = false;
      this.group = [];

      this.notify([]);
    } }, { key: "clearStack", value: function clearStack(

    stack) {
      stack.splice(0, stack.length);
    } }, { key: "isUndoStackEmpty", value: function isUndoStackEmpty()

    {
      return this.undoStack.length === 0;
    } }, { key: "isRedoStackEmpty", value: function isRedoStackEmpty()

    {
      return this.redoStack.length === 0;
    } }, { key: "notify", value: function notify(

    actionGroup) {
      actionGroup = actionGroup instanceof _Action__WEBPACK_IMPORTED_MODULE_0__["default"] ? [actionGroup] : actionGroup;

      this.dispatchEvent({
        type: ActionManager.HISTORY_CHANGED_EVENT,
        actionGroup: actionGroup,
        hasUndo: !this.isUndoStackEmpty(),
        hasRedo: !this.isRedoStackEmpty() });

    } }, { key: "openActionGroup", value: function openActionGroup()

    {
      if (this.isGroupOpen) {
        console.warn('Cannot open a new action group while another one is still open');
        return;
      }

      this.group = [];
      this.undoStack.push(this.group);
      this.isGroupOpen = true;
    } }, { key: "closeActionGroup", value: function closeActionGroup()

    {
      if (this.group.length === 0) {
        this.undoStack.pop();
      }

      this.isGroupOpen = false;
    } }]);return ActionManager;}(Autodesk.Viewing.EventDispatcher);


// ActionManager Events
ActionManager.HISTORY_CHANGED_EVENT = 'action-manager.history.changed.event';
ActionManager.UNDO = 'action-manager.undo';
ActionManager.REDO = 'action-manager.redo';
ActionManager.EXECUTE = 'action-manager.execute';

/***/ }),

/***/ "./extensions/BimMarkups/Utils/CameraUtils.js":
/*!****************************************************!*\
  !*** ./extensions/BimMarkups/Utils/CameraUtils.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _GeometryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeometryUtils */ "./extensions/BimMarkups/Utils/GeometryUtils.js");


var CameraUtils = {};

// Same as viewer.worldToClient, but with a camera as argument.
CameraUtils.worldToClient = function (viewer, point, camera) {
  var p = new THREE.Vector4(point.x, point.y, point.z, 1);
  p.applyMatrix4(camera.matrixWorldInverse);
  p.applyMatrix4(camera.projectionMatrix);

  // Don't want to mirror values with negative z (behind camera)
  if (p.w > 0) {
    p.x /= p.w;
    p.y /= p.w;
    p.z /= p.w;
  }

  return viewer.impl.viewportToClient(p.x, p.y);
};

CameraUtils.getCameraEyeVector = function (camera) {
  return camera.target.clone().sub(camera.position).normalize();
};

CameraUtils.getCameraRightVector = function (camera) {
  var eye = CameraUtils.getCameraEyeVector(camera);
  return new THREE.Vector3().crossVectors(eye, camera.up).normalize();
};

CameraUtils.getCameraUpVector = function (camera) {
  var right = CameraUtils.getCameraRightVector(camera);
  var eye = CameraUtils.getCameraEyeVector(camera);
  return new THREE.Vector3().crossVectors(right, eye).normalize();
};

CameraUtils.getCameraRotation = function (camera) {
  return _GeometryUtils__WEBPACK_IMPORTED_MODULE_0__["default"].getSignedAngle(CameraUtils.getCameraUpVector(camera), new THREE.Vector3(0, 1, 0), CameraUtils.getCameraEyeVector(camera));
};

/* harmony default export */ __webpack_exports__["default"] = (CameraUtils);

/***/ }),

/***/ "./extensions/BimMarkups/Utils/GeometryUtils.js":
/*!******************************************************!*\
  !*** ./extensions/BimMarkups/Utils/GeometryUtils.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var GeometryUtils = {};

GeometryUtils.radiansToDegrees = function (radians) {
  return radians * (180 / Math.PI);
};

GeometryUtils.degreesToRadians = function (degrees) {
  return degrees * (Math.PI / 180);
};

GeometryUtils.applyRotation = function (points, angle, pivot, frontVector) {
  if (!(points instanceof Array)) {
    points = [points];
  }

  points.forEach(function (point) {
    point.sub(pivot);
    point.applyAxisAngle(frontVector, angle);
    point.add(pivot);
  });
};

GeometryUtils.getSignedAngle = function (v1, v2, eyeVector) {
  var angle = v1.angleTo(v2);

  var n = v1.clone().cross(v2).normalize();
  var sign = eyeVector.dot(n) > 0 ? 1 : -1;

  return angle * sign;
};

GeometryUtils.swapBoundingBoxY = function (boundingBox) {var _ref =
  [boundingBox.min.y, boundingBox.max.y];boundingBox.max.y = _ref[0];boundingBox.min.y = _ref[1];

  return boundingBox;
};

/* harmony default export */ __webpack_exports__["default"] = (GeometryUtils);

/***/ }),

/***/ "./extensions/BimMarkups/Utils/LodashUtils.js":
/*!****************************************************!*\
  !*** ./extensions/BimMarkups/Utils/LodashUtils.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ThirdParty/lodash/lodash.custom */ "./extensions/BimMarkups/ThirdParty/lodash/lodash.custom.js");
/* harmony import */ var _ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__);





var LodashUtils = {};

LodashUtils.cloneDeep = function (obj) {
  return Object(_ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(obj);
};

LodashUtils.findLast = function (array, predicate) {
  return Object(_ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__["findLast"])(array, predicate);
};

LodashUtils.debounce = function (func, wait, options) {
  return Object(_ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__["debounce"])(func, wait, options);
};

LodashUtils.remove = function (array, predicate) {
  return Object(_ThirdParty_lodash_lodash_custom__WEBPACK_IMPORTED_MODULE_0__["remove"])(array, predicate);
};

/* harmony default export */ __webpack_exports__["default"] = (LodashUtils);

/***/ }),

/***/ "./extensions/BimMarkups/Utils/ModelUtils.js":
/*!***************************************************!*\
  !*** ./extensions/BimMarkups/Utils/ModelUtils.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var ModelUtils = {};

ModelUtils.getModelExtension = function (url) {
  var match = url && url.toLowerCase().match(/\.([a-z0-9]+)(\?|$)/);
  var fileExtension = match ? match[1] : null;
  return fileExtension;
};

/* harmony default export */ __webpack_exports__["default"] = (ModelUtils);

/***/ }),

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/FrameRenderer.css":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/FrameRenderer.css ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".markup-frames-container {\n  transform: translateZ(0);\n  left: 0;\n  top: 0;\n  position: absolute; }\n\n.markup-selection-frame-container {\n  display: none; }\n\n.markup-selection-frame-container.visible {\n  display: block; }\n\n.markup-selection-frame {\n  transform: translateZ(0);\n  position: absolute;\n  pointer-events: none; }\n\n.markup-selection-frame.fill {\n  display: none;\n  background-color: rgba(6, 150, 215, 0.05); }\n\n/* iOS devices won't update the border without it. */\n.markup-selection-frame.fill.ios,\n.markup-selection-frame.border.ios {\n  transform: translateZ(0);\n  -webkit-transform: rotateZ(0deg); }\n\n.markup-selection-frame.fill.visible {\n  display: block; }\n\n.markup-selection-frame.border {\n  background-color: rgba(6, 150, 215, 0.6); }\n\n.markup-selection-frame.segment {\n  display: none; }\n\n.markup-selection-frame.segment.visible {\n  display: block; }\n\n.markup-anchor {\n  transform: translateZ(0);\n  display: none;\n  position: absolute;\n  background: #FFFFFF;\n  box-shadow: 0 0 0 1px rgba(107, 120, 127, 0.7);\n  pointer-events: none;\n  border-radius: 20px;\n  z-index: 1; }\n\n.markup-anchor-fill.rectangle,\n.markup-anchor.rectangle {\n  border-radius: 0px; }\n\n.markup-anchor-fill {\n  display: none;\n  width: 100%;\n  margin: 1px;\n  border-radius: 20px;\n  background: #0696D7; }\n\n.markup-anchor-fill.visible {\n  display: block; }\n\n.markup-anchor.visible {\n  display: flex; }\n\n.rect-selector-frame {\n  transform: translateZ(0);\n  position: absolute;\n  pointer-events: none;\n  border: #222222 dashed 1px;\n  border-radius: 5px; }\n\n.rect-selector-frame.visible {\n  display: block; }\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/Links/LinksRenderer.css":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/Links/LinksRenderer.css ***!
  \************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".markup-links-container {\n  transform: translateZ(0);\n  left: 0;\n  top: 0;\n  position: absolute; }\n\n.link {\n  display: none;\n  position: absolute;\n  pointer-events: none;\n  z-index: 1; }\n\n.link.visible {\n  display: block; }\n\n.link.transparent {\n  opacity: 0.3; }\n\n/* Document attachment link */\n.link-document-attachment {\n  transform: translateZ(0);\n  display: block;\n  position: absolute;\n  text-align: center;\n  font-family: \"Artifakt Element\";\n  background-color: #0696D7;\n  border-radius: 10.5px;\n  color: white;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 19px;\n  height: 20px;\n  width: 40px; }\n\n.link-document-attachment:before {\n  font-family: \"bimviewericon\", sans-serif;\n  content: \"\\E911\";\n  font-size: 11px;\n  padding-right: 4px; }\n\n.link.selected .link-document-attachment {\n  background-color: #0584BD; }\n\n.link.hover .link-document-attachment {\n  background-color: #38ABDF; }\n\n.link.editable .link-document-attachment {\n  outline: 1px solid rgba(6, 150, 215, 0.6); }\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/RendererHelpers/TextRenderer.css":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/dist/cjs.js!./extensions/BimMarkups/RendererHelpers/TextRenderer.css ***!
  \*********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".markup-text-container {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  pointer-events: none; }\n\n.markup-text {\n  /* Optimization */\n  will-change: contents;\n  transform: translateZ(0);\n  text-rendering: geometricPrecision;\n  display: none;\n  position: absolute;\n  /* changing position to fixed solves the 'out of screen' text expansion, but cause the text be visible on top of other element */\n  pointer-events: none;\n  text-align: left;\n  white-space: pre-wrap;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  /* IE11 replacement for overflow-wrap */\n  outline: none;\n  -webkit-user-select: none;\n  user-select: none; }\n\n/* IE uses <p> tag elements instead of divs inside contentedible,\n   inherit style to mimic div style.\n   add min width to edge cases.\n*/\n.markup-text p {\n  display: block;\n  box-sizing: content-box;\n  font-weight: inherit;\n  font-size: inherit;\n  font-family: inherit;\n  font-style: inherit;\n  word-wrap: inherit;\n  white-space: inherit;\n  line-height: inherit;\n  text-rendering: geometricPrecision;\n  -ms-text-size-adjust: 100%;\n  text-align: left;\n  margin: 0 0 0 0;\n  padding: 0 0 0 0;\n  user-select: text; }\n\n.markup-text.single-line br {\n  display: none; }\n\n.markup-text.visible {\n  display: block; }\n\n.markup-text-area {\n  pointer-events: all;\n  position: absolute;\n  z-index: 100; }\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/lib/css-base.js":
/*!*************************************************!*\
  !*** ./node_modules/css-loader/lib/css-base.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),

/***/ "./node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds/index.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var MILLISECONDS_IN_MINUTE = 60000

/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */
module.exports = function getTimezoneOffsetInMilliseconds (dirtyDate) {
  var date = new Date(dirtyDate.getTime())
  var baseTimezoneOffset = date.getTimezoneOffset()
  date.setSeconds(0, 0)
  var millisecondsPartOfTimezoneOffset = date.getTime() % MILLISECONDS_IN_MINUTE

  return baseTimezoneOffset * MILLISECONDS_IN_MINUTE + millisecondsPartOfTimezoneOffset
}


/***/ }),

/***/ "./node_modules/date-fns/add_days/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/add_days/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Add the specified number of days to the given date.
 *
 * @description
 * Add the specified number of days to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be added
 * @returns {Date} the new date with the days added
 *
 * @example
 * // Add 10 days to 1 September 2014:
 * var result = addDays(new Date(2014, 8, 1), 10)
 * //=> Thu Sep 11 2014 00:00:00
 */
function addDays (dirtyDate, dirtyAmount) {
  var date = parse(dirtyDate)
  var amount = Number(dirtyAmount)
  date.setDate(date.getDate() + amount)
  return date
}

module.exports = addDays


/***/ }),

/***/ "./node_modules/date-fns/add_hours/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/add_hours/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMilliseconds = __webpack_require__(/*! ../add_milliseconds/index.js */ "./node_modules/date-fns/add_milliseconds/index.js")

var MILLISECONDS_IN_HOUR = 3600000

/**
 * @category Hour Helpers
 * @summary Add the specified number of hours to the given date.
 *
 * @description
 * Add the specified number of hours to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of hours to be added
 * @returns {Date} the new date with the hours added
 *
 * @example
 * // Add 2 hours to 10 July 2014 23:00:00:
 * var result = addHours(new Date(2014, 6, 10, 23, 0), 2)
 * //=> Fri Jul 11 2014 01:00:00
 */
function addHours (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_HOUR)
}

module.exports = addHours


/***/ }),

/***/ "./node_modules/date-fns/add_iso_years/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/add_iso_years/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")
var setISOYear = __webpack_require__(/*! ../set_iso_year/index.js */ "./node_modules/date-fns/set_iso_year/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Add the specified number of ISO week-numbering years to the given date.
 *
 * @description
 * Add the specified number of ISO week-numbering years to the given date.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of ISO week-numbering years to be added
 * @returns {Date} the new date with the ISO week-numbering years added
 *
 * @example
 * // Add 5 ISO week-numbering years to 2 July 2010:
 * var result = addISOYears(new Date(2010, 6, 2), 5)
 * //=> Fri Jun 26 2015 00:00:00
 */
function addISOYears (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return setISOYear(dirtyDate, getISOYear(dirtyDate) + amount)
}

module.exports = addISOYears


/***/ }),

/***/ "./node_modules/date-fns/add_milliseconds/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/add_milliseconds/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added
 * @returns {Date} the new date with the milliseconds added
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * var result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */
function addMilliseconds (dirtyDate, dirtyAmount) {
  var timestamp = parse(dirtyDate).getTime()
  var amount = Number(dirtyAmount)
  return new Date(timestamp + amount)
}

module.exports = addMilliseconds


/***/ }),

/***/ "./node_modules/date-fns/add_minutes/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/add_minutes/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMilliseconds = __webpack_require__(/*! ../add_milliseconds/index.js */ "./node_modules/date-fns/add_milliseconds/index.js")

var MILLISECONDS_IN_MINUTE = 60000

/**
 * @category Minute Helpers
 * @summary Add the specified number of minutes to the given date.
 *
 * @description
 * Add the specified number of minutes to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of minutes to be added
 * @returns {Date} the new date with the minutes added
 *
 * @example
 * // Add 30 minutes to 10 July 2014 12:00:00:
 * var result = addMinutes(new Date(2014, 6, 10, 12, 0), 30)
 * //=> Thu Jul 10 2014 12:30:00
 */
function addMinutes (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_MINUTE)
}

module.exports = addMinutes


/***/ }),

/***/ "./node_modules/date-fns/add_months/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/add_months/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var getDaysInMonth = __webpack_require__(/*! ../get_days_in_month/index.js */ "./node_modules/date-fns/get_days_in_month/index.js")

/**
 * @category Month Helpers
 * @summary Add the specified number of months to the given date.
 *
 * @description
 * Add the specified number of months to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of months to be added
 * @returns {Date} the new date with the months added
 *
 * @example
 * // Add 5 months to 1 September 2014:
 * var result = addMonths(new Date(2014, 8, 1), 5)
 * //=> Sun Feb 01 2015 00:00:00
 */
function addMonths (dirtyDate, dirtyAmount) {
  var date = parse(dirtyDate)
  var amount = Number(dirtyAmount)
  var desiredMonth = date.getMonth() + amount
  var dateWithDesiredMonth = new Date(0)
  dateWithDesiredMonth.setFullYear(date.getFullYear(), desiredMonth, 1)
  dateWithDesiredMonth.setHours(0, 0, 0, 0)
  var daysInMonth = getDaysInMonth(dateWithDesiredMonth)
  // Set the last day of the new month
  // if the original date was the last day of the longer month
  date.setMonth(desiredMonth, Math.min(daysInMonth, date.getDate()))
  return date
}

module.exports = addMonths


/***/ }),

/***/ "./node_modules/date-fns/add_quarters/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/add_quarters/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMonths = __webpack_require__(/*! ../add_months/index.js */ "./node_modules/date-fns/add_months/index.js")

/**
 * @category Quarter Helpers
 * @summary Add the specified number of year quarters to the given date.
 *
 * @description
 * Add the specified number of year quarters to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of quarters to be added
 * @returns {Date} the new date with the quarters added
 *
 * @example
 * // Add 1 quarter to 1 September 2014:
 * var result = addQuarters(new Date(2014, 8, 1), 1)
 * //=> Mon Dec 01 2014 00:00:00
 */
function addQuarters (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  var months = amount * 3
  return addMonths(dirtyDate, months)
}

module.exports = addQuarters


/***/ }),

/***/ "./node_modules/date-fns/add_seconds/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/add_seconds/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMilliseconds = __webpack_require__(/*! ../add_milliseconds/index.js */ "./node_modules/date-fns/add_milliseconds/index.js")

/**
 * @category Second Helpers
 * @summary Add the specified number of seconds to the given date.
 *
 * @description
 * Add the specified number of seconds to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of seconds to be added
 * @returns {Date} the new date with the seconds added
 *
 * @example
 * // Add 30 seconds to 10 July 2014 12:45:00:
 * var result = addSeconds(new Date(2014, 6, 10, 12, 45, 0), 30)
 * //=> Thu Jul 10 2014 12:45:30
 */
function addSeconds (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMilliseconds(dirtyDate, amount * 1000)
}

module.exports = addSeconds


/***/ }),

/***/ "./node_modules/date-fns/add_weeks/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/add_weeks/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addDays = __webpack_require__(/*! ../add_days/index.js */ "./node_modules/date-fns/add_days/index.js")

/**
 * @category Week Helpers
 * @summary Add the specified number of weeks to the given date.
 *
 * @description
 * Add the specified number of week to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of weeks to be added
 * @returns {Date} the new date with the weeks added
 *
 * @example
 * // Add 4 weeks to 1 September 2014:
 * var result = addWeeks(new Date(2014, 8, 1), 4)
 * //=> Mon Sep 29 2014 00:00:00
 */
function addWeeks (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  var days = amount * 7
  return addDays(dirtyDate, days)
}

module.exports = addWeeks


/***/ }),

/***/ "./node_modules/date-fns/add_years/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/add_years/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMonths = __webpack_require__(/*! ../add_months/index.js */ "./node_modules/date-fns/add_months/index.js")

/**
 * @category Year Helpers
 * @summary Add the specified number of years to the given date.
 *
 * @description
 * Add the specified number of years to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of years to be added
 * @returns {Date} the new date with the years added
 *
 * @example
 * // Add 5 years to 1 September 2014:
 * var result = addYears(new Date(2014, 8, 1), 5)
 * //=> Sun Sep 01 2019 00:00:00
 */
function addYears (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMonths(dirtyDate, amount * 12)
}

module.exports = addYears


/***/ }),

/***/ "./node_modules/date-fns/are_ranges_overlapping/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/date-fns/are_ranges_overlapping/index.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Range Helpers
 * @summary Is the given date range overlapping with another date range?
 *
 * @description
 * Is the given date range overlapping with another date range?
 *
 * @param {Date|String|Number} initialRangeStartDate - the start of the initial range
 * @param {Date|String|Number} initialRangeEndDate - the end of the initial range
 * @param {Date|String|Number} comparedRangeStartDate - the start of the range to compare it with
 * @param {Date|String|Number} comparedRangeEndDate - the end of the range to compare it with
 * @returns {Boolean} whether the date ranges are overlapping
 * @throws {Error} startDate of a date range cannot be after its endDate
 *
 * @example
 * // For overlapping date ranges:
 * areRangesOverlapping(
 *   new Date(2014, 0, 10), new Date(2014, 0, 20), new Date(2014, 0, 17), new Date(2014, 0, 21)
 * )
 * //=> true
 *
 * @example
 * // For non-overlapping date ranges:
 * areRangesOverlapping(
 *   new Date(2014, 0, 10), new Date(2014, 0, 20), new Date(2014, 0, 21), new Date(2014, 0, 22)
 * )
 * //=> false
 */
function areRangesOverlapping (dirtyInitialRangeStartDate, dirtyInitialRangeEndDate, dirtyComparedRangeStartDate, dirtyComparedRangeEndDate) {
  var initialStartTime = parse(dirtyInitialRangeStartDate).getTime()
  var initialEndTime = parse(dirtyInitialRangeEndDate).getTime()
  var comparedStartTime = parse(dirtyComparedRangeStartDate).getTime()
  var comparedEndTime = parse(dirtyComparedRangeEndDate).getTime()

  if (initialStartTime > initialEndTime || comparedStartTime > comparedEndTime) {
    throw new Error('The start of the range cannot be after the end of the range')
  }

  return initialStartTime < comparedEndTime && comparedStartTime < initialEndTime
}

module.exports = areRangesOverlapping


/***/ }),

/***/ "./node_modules/date-fns/closest_index_to/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/closest_index_to/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Return an index of the closest date from the array comparing to the given date.
 *
 * @description
 * Return an index of the closest date from the array comparing to the given date.
 *
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @param {Date[]|String[]|Number[]} datesArray - the array to search
 * @returns {Number} an index of the date closest to the given date
 * @throws {TypeError} the second argument must be an instance of Array
 *
 * @example
 * // Which date is closer to 6 September 2015?
 * var dateToCompare = new Date(2015, 8, 6)
 * var datesArray = [
 *   new Date(2015, 0, 1),
 *   new Date(2016, 0, 1),
 *   new Date(2017, 0, 1)
 * ]
 * var result = closestIndexTo(dateToCompare, datesArray)
 * //=> 1
 */
function closestIndexTo (dirtyDateToCompare, dirtyDatesArray) {
  if (!(dirtyDatesArray instanceof Array)) {
    throw new TypeError(toString.call(dirtyDatesArray) + ' is not an instance of Array')
  }

  var dateToCompare = parse(dirtyDateToCompare)
  var timeToCompare = dateToCompare.getTime()

  var result
  var minDistance

  dirtyDatesArray.forEach(function (dirtyDate, index) {
    var currentDate = parse(dirtyDate)
    var distance = Math.abs(timeToCompare - currentDate.getTime())
    if (result === undefined || distance < minDistance) {
      result = index
      minDistance = distance
    }
  })

  return result
}

module.exports = closestIndexTo


/***/ }),

/***/ "./node_modules/date-fns/closest_to/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/closest_to/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Return a date from the array closest to the given date.
 *
 * @description
 * Return a date from the array closest to the given date.
 *
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @param {Date[]|String[]|Number[]} datesArray - the array to search
 * @returns {Date} the date from the array closest to the given date
 * @throws {TypeError} the second argument must be an instance of Array
 *
 * @example
 * // Which date is closer to 6 September 2015: 1 January 2000 or 1 January 2030?
 * var dateToCompare = new Date(2015, 8, 6)
 * var result = closestTo(dateToCompare, [
 *   new Date(2000, 0, 1),
 *   new Date(2030, 0, 1)
 * ])
 * //=> Tue Jan 01 2030 00:00:00
 */
function closestTo (dirtyDateToCompare, dirtyDatesArray) {
  if (!(dirtyDatesArray instanceof Array)) {
    throw new TypeError(toString.call(dirtyDatesArray) + ' is not an instance of Array')
  }

  var dateToCompare = parse(dirtyDateToCompare)
  var timeToCompare = dateToCompare.getTime()

  var result
  var minDistance

  dirtyDatesArray.forEach(function (dirtyDate) {
    var currentDate = parse(dirtyDate)
    var distance = Math.abs(timeToCompare - currentDate.getTime())
    if (result === undefined || distance < minDistance) {
      result = currentDate
      minDistance = distance
    }
  })

  return result
}

module.exports = closestTo


/***/ }),

/***/ "./node_modules/date-fns/compare_asc/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/compare_asc/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Compare the two dates and return -1, 0 or 1.
 *
 * @description
 * Compare the two dates and return 1 if the first date is after the second,
 * -1 if the first date is before the second or 0 if dates are equal.
 *
 * @param {Date|String|Number} dateLeft - the first date to compare
 * @param {Date|String|Number} dateRight - the second date to compare
 * @returns {Number} the result of the comparison
 *
 * @example
 * // Compare 11 February 1987 and 10 July 1989:
 * var result = compareAsc(
 *   new Date(1987, 1, 11),
 *   new Date(1989, 6, 10)
 * )
 * //=> -1
 *
 * @example
 * // Sort the array of dates:
 * var result = [
 *   new Date(1995, 6, 2),
 *   new Date(1987, 1, 11),
 *   new Date(1989, 6, 10)
 * ].sort(compareAsc)
 * //=> [
 * //   Wed Feb 11 1987 00:00:00,
 * //   Mon Jul 10 1989 00:00:00,
 * //   Sun Jul 02 1995 00:00:00
 * // ]
 */
function compareAsc (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var timeLeft = dateLeft.getTime()
  var dateRight = parse(dirtyDateRight)
  var timeRight = dateRight.getTime()

  if (timeLeft < timeRight) {
    return -1
  } else if (timeLeft > timeRight) {
    return 1
  } else {
    return 0
  }
}

module.exports = compareAsc


/***/ }),

/***/ "./node_modules/date-fns/compare_desc/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/compare_desc/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Compare the two dates reverse chronologically and return -1, 0 or 1.
 *
 * @description
 * Compare the two dates and return -1 if the first date is after the second,
 * 1 if the first date is before the second or 0 if dates are equal.
 *
 * @param {Date|String|Number} dateLeft - the first date to compare
 * @param {Date|String|Number} dateRight - the second date to compare
 * @returns {Number} the result of the comparison
 *
 * @example
 * // Compare 11 February 1987 and 10 July 1989 reverse chronologically:
 * var result = compareDesc(
 *   new Date(1987, 1, 11),
 *   new Date(1989, 6, 10)
 * )
 * //=> 1
 *
 * @example
 * // Sort the array of dates in reverse chronological order:
 * var result = [
 *   new Date(1995, 6, 2),
 *   new Date(1987, 1, 11),
 *   new Date(1989, 6, 10)
 * ].sort(compareDesc)
 * //=> [
 * //   Sun Jul 02 1995 00:00:00,
 * //   Mon Jul 10 1989 00:00:00,
 * //   Wed Feb 11 1987 00:00:00
 * // ]
 */
function compareDesc (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var timeLeft = dateLeft.getTime()
  var dateRight = parse(dirtyDateRight)
  var timeRight = dateRight.getTime()

  if (timeLeft > timeRight) {
    return -1
  } else if (timeLeft < timeRight) {
    return 1
  } else {
    return 0
  }
}

module.exports = compareDesc


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_days/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_days/index.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

var MILLISECONDS_IN_MINUTE = 60000
var MILLISECONDS_IN_DAY = 86400000

/**
 * @category Day Helpers
 * @summary Get the number of calendar days between the given dates.
 *
 * @description
 * Get the number of calendar days between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar days
 *
 * @example
 * // How many calendar days are between
 * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?
 * var result = differenceInCalendarDays(
 *   new Date(2012, 6, 2, 0, 0),
 *   new Date(2011, 6, 2, 23, 0)
 * )
 * //=> 366
 */
function differenceInCalendarDays (dirtyDateLeft, dirtyDateRight) {
  var startOfDayLeft = startOfDay(dirtyDateLeft)
  var startOfDayRight = startOfDay(dirtyDateRight)

  var timestampLeft = startOfDayLeft.getTime() -
    startOfDayLeft.getTimezoneOffset() * MILLISECONDS_IN_MINUTE
  var timestampRight = startOfDayRight.getTime() -
    startOfDayRight.getTimezoneOffset() * MILLISECONDS_IN_MINUTE

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a day is not constant
  // (e.g. it's different in the day of the daylight saving time clock shift)
  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY)
}

module.exports = differenceInCalendarDays


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_iso_weeks/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_iso_weeks/index.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")

var MILLISECONDS_IN_MINUTE = 60000
var MILLISECONDS_IN_WEEK = 604800000

/**
 * @category ISO Week Helpers
 * @summary Get the number of calendar ISO weeks between the given dates.
 *
 * @description
 * Get the number of calendar ISO weeks between the given dates.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar ISO weeks
 *
 * @example
 * // How many calendar ISO weeks are between 6 July 2014 and 21 July 2014?
 * var result = differenceInCalendarISOWeeks(
 *   new Date(2014, 6, 21),
 *   new Date(2014, 6, 6)
 * )
 * //=> 3
 */
function differenceInCalendarISOWeeks (dirtyDateLeft, dirtyDateRight) {
  var startOfISOWeekLeft = startOfISOWeek(dirtyDateLeft)
  var startOfISOWeekRight = startOfISOWeek(dirtyDateRight)

  var timestampLeft = startOfISOWeekLeft.getTime() -
    startOfISOWeekLeft.getTimezoneOffset() * MILLISECONDS_IN_MINUTE
  var timestampRight = startOfISOWeekRight.getTime() -
    startOfISOWeekRight.getTimezoneOffset() * MILLISECONDS_IN_MINUTE

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_WEEK)
}

module.exports = differenceInCalendarISOWeeks


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_iso_years/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_iso_years/index.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Get the number of calendar ISO week-numbering years between the given dates.
 *
 * @description
 * Get the number of calendar ISO week-numbering years between the given dates.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar ISO week-numbering years
 *
 * @example
 * // How many calendar ISO week-numbering years are 1 January 2010 and 1 January 2012?
 * var result = differenceInCalendarISOYears(
 *   new Date(2012, 0, 1),
 *   new Date(2010, 0, 1)
 * )
 * //=> 2
 */
function differenceInCalendarISOYears (dirtyDateLeft, dirtyDateRight) {
  return getISOYear(dirtyDateLeft) - getISOYear(dirtyDateRight)
}

module.exports = differenceInCalendarISOYears


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_months/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_months/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Get the number of calendar months between the given dates.
 *
 * @description
 * Get the number of calendar months between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar months
 *
 * @example
 * // How many calendar months are between 31 January 2014 and 1 September 2014?
 * var result = differenceInCalendarMonths(
 *   new Date(2014, 8, 1),
 *   new Date(2014, 0, 31)
 * )
 * //=> 8
 */
function differenceInCalendarMonths (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear()
  var monthDiff = dateLeft.getMonth() - dateRight.getMonth()

  return yearDiff * 12 + monthDiff
}

module.exports = differenceInCalendarMonths


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_quarters/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_quarters/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getQuarter = __webpack_require__(/*! ../get_quarter/index.js */ "./node_modules/date-fns/get_quarter/index.js")
var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Quarter Helpers
 * @summary Get the number of calendar quarters between the given dates.
 *
 * @description
 * Get the number of calendar quarters between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar quarters
 *
 * @example
 * // How many calendar quarters are between 31 December 2013 and 2 July 2014?
 * var result = differenceInCalendarQuarters(
 *   new Date(2014, 6, 2),
 *   new Date(2013, 11, 31)
 * )
 * //=> 3
 */
function differenceInCalendarQuarters (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear()
  var quarterDiff = getQuarter(dateLeft) - getQuarter(dateRight)

  return yearDiff * 4 + quarterDiff
}

module.exports = differenceInCalendarQuarters


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_weeks/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_weeks/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfWeek = __webpack_require__(/*! ../start_of_week/index.js */ "./node_modules/date-fns/start_of_week/index.js")

var MILLISECONDS_IN_MINUTE = 60000
var MILLISECONDS_IN_WEEK = 604800000

/**
 * @category Week Helpers
 * @summary Get the number of calendar weeks between the given dates.
 *
 * @description
 * Get the number of calendar weeks between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Number} the number of calendar weeks
 *
 * @example
 * // How many calendar weeks are between 5 July 2014 and 20 July 2014?
 * var result = differenceInCalendarWeeks(
 *   new Date(2014, 6, 20),
 *   new Date(2014, 6, 5)
 * )
 * //=> 3
 *
 * @example
 * // If the week starts on Monday,
 * // how many calendar weeks are between 5 July 2014 and 20 July 2014?
 * var result = differenceInCalendarWeeks(
 *   new Date(2014, 6, 20),
 *   new Date(2014, 6, 5),
 *   {weekStartsOn: 1}
 * )
 * //=> 2
 */
function differenceInCalendarWeeks (dirtyDateLeft, dirtyDateRight, dirtyOptions) {
  var startOfWeekLeft = startOfWeek(dirtyDateLeft, dirtyOptions)
  var startOfWeekRight = startOfWeek(dirtyDateRight, dirtyOptions)

  var timestampLeft = startOfWeekLeft.getTime() -
    startOfWeekLeft.getTimezoneOffset() * MILLISECONDS_IN_MINUTE
  var timestampRight = startOfWeekRight.getTime() -
    startOfWeekRight.getTimezoneOffset() * MILLISECONDS_IN_MINUTE

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_WEEK)
}

module.exports = differenceInCalendarWeeks


/***/ }),

/***/ "./node_modules/date-fns/difference_in_calendar_years/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_calendar_years/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Get the number of calendar years between the given dates.
 *
 * @description
 * Get the number of calendar years between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar years
 *
 * @example
 * // How many calendar years are between 31 December 2013 and 11 February 2015?
 * var result = differenceInCalendarYears(
 *   new Date(2015, 1, 11),
 *   new Date(2013, 11, 31)
 * )
 * //=> 2
 */
function differenceInCalendarYears (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  return dateLeft.getFullYear() - dateRight.getFullYear()
}

module.exports = differenceInCalendarYears


/***/ }),

/***/ "./node_modules/date-fns/difference_in_days/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/date-fns/difference_in_days/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInCalendarDays = __webpack_require__(/*! ../difference_in_calendar_days/index.js */ "./node_modules/date-fns/difference_in_calendar_days/index.js")
var compareAsc = __webpack_require__(/*! ../compare_asc/index.js */ "./node_modules/date-fns/compare_asc/index.js")

/**
 * @category Day Helpers
 * @summary Get the number of full days between the given dates.
 *
 * @description
 * Get the number of full days between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full days
 *
 * @example
 * // How many full days are between
 * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?
 * var result = differenceInDays(
 *   new Date(2012, 6, 2, 0, 0),
 *   new Date(2011, 6, 2, 23, 0)
 * )
 * //=> 365
 */
function differenceInDays (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var sign = compareAsc(dateLeft, dateRight)
  var difference = Math.abs(differenceInCalendarDays(dateLeft, dateRight))
  dateLeft.setDate(dateLeft.getDate() - sign * difference)

  // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full
  // If so, result must be decreased by 1 in absolute value
  var isLastDayNotFull = compareAsc(dateLeft, dateRight) === -sign
  return sign * (difference - isLastDayNotFull)
}

module.exports = differenceInDays


/***/ }),

/***/ "./node_modules/date-fns/difference_in_hours/index.js":
/*!************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_hours/index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var differenceInMilliseconds = __webpack_require__(/*! ../difference_in_milliseconds/index.js */ "./node_modules/date-fns/difference_in_milliseconds/index.js")

var MILLISECONDS_IN_HOUR = 3600000

/**
 * @category Hour Helpers
 * @summary Get the number of hours between the given dates.
 *
 * @description
 * Get the number of hours between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of hours
 *
 * @example
 * // How many hours are between 2 July 2014 06:50:00 and 2 July 2014 19:00:00?
 * var result = differenceInHours(
 *   new Date(2014, 6, 2, 19, 0),
 *   new Date(2014, 6, 2, 6, 50)
 * )
 * //=> 12
 */
function differenceInHours (dirtyDateLeft, dirtyDateRight) {
  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / MILLISECONDS_IN_HOUR
  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)
}

module.exports = differenceInHours


/***/ }),

/***/ "./node_modules/date-fns/difference_in_iso_years/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_iso_years/index.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInCalendarISOYears = __webpack_require__(/*! ../difference_in_calendar_iso_years/index.js */ "./node_modules/date-fns/difference_in_calendar_iso_years/index.js")
var compareAsc = __webpack_require__(/*! ../compare_asc/index.js */ "./node_modules/date-fns/compare_asc/index.js")
var subISOYears = __webpack_require__(/*! ../sub_iso_years/index.js */ "./node_modules/date-fns/sub_iso_years/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Get the number of full ISO week-numbering years between the given dates.
 *
 * @description
 * Get the number of full ISO week-numbering years between the given dates.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full ISO week-numbering years
 *
 * @example
 * // How many full ISO week-numbering years are between 1 January 2010 and 1 January 2012?
 * var result = differenceInISOYears(
 *   new Date(2012, 0, 1),
 *   new Date(2010, 0, 1)
 * )
 * //=> 1
 */
function differenceInISOYears (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var sign = compareAsc(dateLeft, dateRight)
  var difference = Math.abs(differenceInCalendarISOYears(dateLeft, dateRight))
  dateLeft = subISOYears(dateLeft, sign * difference)

  // Math.abs(diff in full ISO years - diff in calendar ISO years) === 1
  // if last calendar ISO year is not full
  // If so, result must be decreased by 1 in absolute value
  var isLastISOYearNotFull = compareAsc(dateLeft, dateRight) === -sign
  return sign * (difference - isLastISOYearNotFull)
}

module.exports = differenceInISOYears


/***/ }),

/***/ "./node_modules/date-fns/difference_in_milliseconds/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_milliseconds/index.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Millisecond Helpers
 * @summary Get the number of milliseconds between the given dates.
 *
 * @description
 * Get the number of milliseconds between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of milliseconds
 *
 * @example
 * // How many milliseconds are between
 * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?
 * var result = differenceInMilliseconds(
 *   new Date(2014, 6, 2, 12, 30, 21, 700),
 *   new Date(2014, 6, 2, 12, 30, 20, 600)
 * )
 * //=> 1100
 */
function differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)
  return dateLeft.getTime() - dateRight.getTime()
}

module.exports = differenceInMilliseconds


/***/ }),

/***/ "./node_modules/date-fns/difference_in_minutes/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_minutes/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var differenceInMilliseconds = __webpack_require__(/*! ../difference_in_milliseconds/index.js */ "./node_modules/date-fns/difference_in_milliseconds/index.js")

var MILLISECONDS_IN_MINUTE = 60000

/**
 * @category Minute Helpers
 * @summary Get the number of minutes between the given dates.
 *
 * @description
 * Get the number of minutes between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of minutes
 *
 * @example
 * // How many minutes are between 2 July 2014 12:07:59 and 2 July 2014 12:20:00?
 * var result = differenceInMinutes(
 *   new Date(2014, 6, 2, 12, 20, 0),
 *   new Date(2014, 6, 2, 12, 7, 59)
 * )
 * //=> 12
 */
function differenceInMinutes (dirtyDateLeft, dirtyDateRight) {
  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / MILLISECONDS_IN_MINUTE
  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)
}

module.exports = differenceInMinutes


/***/ }),

/***/ "./node_modules/date-fns/difference_in_months/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_months/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInCalendarMonths = __webpack_require__(/*! ../difference_in_calendar_months/index.js */ "./node_modules/date-fns/difference_in_calendar_months/index.js")
var compareAsc = __webpack_require__(/*! ../compare_asc/index.js */ "./node_modules/date-fns/compare_asc/index.js")

/**
 * @category Month Helpers
 * @summary Get the number of full months between the given dates.
 *
 * @description
 * Get the number of full months between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full months
 *
 * @example
 * // How many full months are between 31 January 2014 and 1 September 2014?
 * var result = differenceInMonths(
 *   new Date(2014, 8, 1),
 *   new Date(2014, 0, 31)
 * )
 * //=> 7
 */
function differenceInMonths (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var sign = compareAsc(dateLeft, dateRight)
  var difference = Math.abs(differenceInCalendarMonths(dateLeft, dateRight))
  dateLeft.setMonth(dateLeft.getMonth() - sign * difference)

  // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full
  // If so, result must be decreased by 1 in absolute value
  var isLastMonthNotFull = compareAsc(dateLeft, dateRight) === -sign
  return sign * (difference - isLastMonthNotFull)
}

module.exports = differenceInMonths


/***/ }),

/***/ "./node_modules/date-fns/difference_in_quarters/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_quarters/index.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var differenceInMonths = __webpack_require__(/*! ../difference_in_months/index.js */ "./node_modules/date-fns/difference_in_months/index.js")

/**
 * @category Quarter Helpers
 * @summary Get the number of full quarters between the given dates.
 *
 * @description
 * Get the number of full quarters between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full quarters
 *
 * @example
 * // How many full quarters are between 31 December 2013 and 2 July 2014?
 * var result = differenceInQuarters(
 *   new Date(2014, 6, 2),
 *   new Date(2013, 11, 31)
 * )
 * //=> 2
 */
function differenceInQuarters (dirtyDateLeft, dirtyDateRight) {
  var diff = differenceInMonths(dirtyDateLeft, dirtyDateRight) / 3
  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)
}

module.exports = differenceInQuarters


/***/ }),

/***/ "./node_modules/date-fns/difference_in_seconds/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_seconds/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var differenceInMilliseconds = __webpack_require__(/*! ../difference_in_milliseconds/index.js */ "./node_modules/date-fns/difference_in_milliseconds/index.js")

/**
 * @category Second Helpers
 * @summary Get the number of seconds between the given dates.
 *
 * @description
 * Get the number of seconds between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of seconds
 *
 * @example
 * // How many seconds are between
 * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?
 * var result = differenceInSeconds(
 *   new Date(2014, 6, 2, 12, 30, 20, 0),
 *   new Date(2014, 6, 2, 12, 30, 7, 999)
 * )
 * //=> 12
 */
function differenceInSeconds (dirtyDateLeft, dirtyDateRight) {
  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000
  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)
}

module.exports = differenceInSeconds


/***/ }),

/***/ "./node_modules/date-fns/difference_in_weeks/index.js":
/*!************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_weeks/index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var differenceInDays = __webpack_require__(/*! ../difference_in_days/index.js */ "./node_modules/date-fns/difference_in_days/index.js")

/**
 * @category Week Helpers
 * @summary Get the number of full weeks between the given dates.
 *
 * @description
 * Get the number of full weeks between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full weeks
 *
 * @example
 * // How many full weeks are between 5 July 2014 and 20 July 2014?
 * var result = differenceInWeeks(
 *   new Date(2014, 6, 20),
 *   new Date(2014, 6, 5)
 * )
 * //=> 2
 */
function differenceInWeeks (dirtyDateLeft, dirtyDateRight) {
  var diff = differenceInDays(dirtyDateLeft, dirtyDateRight) / 7
  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)
}

module.exports = differenceInWeeks


/***/ }),

/***/ "./node_modules/date-fns/difference_in_years/index.js":
/*!************************************************************!*\
  !*** ./node_modules/date-fns/difference_in_years/index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInCalendarYears = __webpack_require__(/*! ../difference_in_calendar_years/index.js */ "./node_modules/date-fns/difference_in_calendar_years/index.js")
var compareAsc = __webpack_require__(/*! ../compare_asc/index.js */ "./node_modules/date-fns/compare_asc/index.js")

/**
 * @category Year Helpers
 * @summary Get the number of full years between the given dates.
 *
 * @description
 * Get the number of full years between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of full years
 *
 * @example
 * // How many full years are between 31 December 2013 and 11 February 2015?
 * var result = differenceInYears(
 *   new Date(2015, 1, 11),
 *   new Date(2013, 11, 31)
 * )
 * //=> 1
 */
function differenceInYears (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)

  var sign = compareAsc(dateLeft, dateRight)
  var difference = Math.abs(differenceInCalendarYears(dateLeft, dateRight))
  dateLeft.setFullYear(dateLeft.getFullYear() - sign * difference)

  // Math.abs(diff in full years - diff in calendar years) === 1 if last calendar year is not full
  // If so, result must be decreased by 1 in absolute value
  var isLastYearNotFull = compareAsc(dateLeft, dateRight) === -sign
  return sign * (difference - isLastYearNotFull)
}

module.exports = differenceInYears


/***/ }),

/***/ "./node_modules/date-fns/distance_in_words/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/distance_in_words/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var compareDesc = __webpack_require__(/*! ../compare_desc/index.js */ "./node_modules/date-fns/compare_desc/index.js")
var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInSeconds = __webpack_require__(/*! ../difference_in_seconds/index.js */ "./node_modules/date-fns/difference_in_seconds/index.js")
var differenceInMonths = __webpack_require__(/*! ../difference_in_months/index.js */ "./node_modules/date-fns/difference_in_months/index.js")
var enLocale = __webpack_require__(/*! ../locale/en/index.js */ "./node_modules/date-fns/locale/en/index.js")

var MINUTES_IN_DAY = 1440
var MINUTES_IN_ALMOST_TWO_DAYS = 2520
var MINUTES_IN_MONTH = 43200
var MINUTES_IN_TWO_MONTHS = 86400

/**
 * @category Common Helpers
 * @summary Return the distance between the given dates in words.
 *
 * @description
 * Return the distance between the given dates in words.
 *
 * | Distance between dates                                            | Result              |
 * |-------------------------------------------------------------------|---------------------|
 * | 0 ... 30 secs                                                     | less than a minute  |
 * | 30 secs ... 1 min 30 secs                                         | 1 minute            |
 * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |
 * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |
 * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |
 * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |
 * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |
 * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |
 * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |
 * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |
 * | 1 yr ... 1 yr 3 months                                            | about 1 year        |
 * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |
 * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |
 * | N yrs ... N yrs 3 months                                          | about N years       |
 * | N yrs 3 months ... N yrs 9 months                                 | over N years        |
 * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |
 *
 * With `options.includeSeconds == true`:
 * | Distance between dates | Result               |
 * |------------------------|----------------------|
 * | 0 secs ... 5 secs      | less than 5 seconds  |
 * | 5 secs ... 10 secs     | less than 10 seconds |
 * | 10 secs ... 20 secs    | less than 20 seconds |
 * | 20 secs ... 40 secs    | half a minute        |
 * | 40 secs ... 60 secs    | less than a minute   |
 * | 60 secs ... 90 secs    | 1 minute             |
 *
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @param {Date|String|Number} date - the other date
 * @param {Object} [options] - the object with options
 * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed
 * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first
 * @param {Object} [options.locale=enLocale] - the locale object
 * @returns {String} the distance in words
 *
 * @example
 * // What is the distance between 2 July 2014 and 1 January 2015?
 * var result = distanceInWords(
 *   new Date(2014, 6, 2),
 *   new Date(2015, 0, 1)
 * )
 * //=> '6 months'
 *
 * @example
 * // What is the distance between 1 January 2015 00:00:15
 * // and 1 January 2015 00:00:00, including seconds?
 * var result = distanceInWords(
 *   new Date(2015, 0, 1, 0, 0, 15),
 *   new Date(2015, 0, 1, 0, 0, 0),
 *   {includeSeconds: true}
 * )
 * //=> 'less than 20 seconds'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 1 January 2015, with a suffix?
 * var result = distanceInWords(
 *   new Date(2016, 0, 1),
 *   new Date(2015, 0, 1),
 *   {addSuffix: true}
 * )
 * //=> 'about 1 year ago'
 *
 * @example
 * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?
 * var eoLocale = require('date-fns/locale/eo')
 * var result = distanceInWords(
 *   new Date(2016, 7, 1),
 *   new Date(2015, 0, 1),
 *   {locale: eoLocale}
 * )
 * //=> 'pli ol 1 jaro'
 */
function distanceInWords (dirtyDateToCompare, dirtyDate, dirtyOptions) {
  var options = dirtyOptions || {}

  var comparison = compareDesc(dirtyDateToCompare, dirtyDate)

  var locale = options.locale
  var localize = enLocale.distanceInWords.localize
  if (locale && locale.distanceInWords && locale.distanceInWords.localize) {
    localize = locale.distanceInWords.localize
  }

  var localizeOptions = {
    addSuffix: Boolean(options.addSuffix),
    comparison: comparison
  }

  var dateLeft, dateRight
  if (comparison > 0) {
    dateLeft = parse(dirtyDateToCompare)
    dateRight = parse(dirtyDate)
  } else {
    dateLeft = parse(dirtyDate)
    dateRight = parse(dirtyDateToCompare)
  }

  var seconds = differenceInSeconds(dateRight, dateLeft)
  var offset = dateRight.getTimezoneOffset() - dateLeft.getTimezoneOffset()
  var minutes = Math.round(seconds / 60) - offset
  var months

  // 0 up to 2 mins
  if (minutes < 2) {
    if (options.includeSeconds) {
      if (seconds < 5) {
        return localize('lessThanXSeconds', 5, localizeOptions)
      } else if (seconds < 10) {
        return localize('lessThanXSeconds', 10, localizeOptions)
      } else if (seconds < 20) {
        return localize('lessThanXSeconds', 20, localizeOptions)
      } else if (seconds < 40) {
        return localize('halfAMinute', null, localizeOptions)
      } else if (seconds < 60) {
        return localize('lessThanXMinutes', 1, localizeOptions)
      } else {
        return localize('xMinutes', 1, localizeOptions)
      }
    } else {
      if (minutes === 0) {
        return localize('lessThanXMinutes', 1, localizeOptions)
      } else {
        return localize('xMinutes', minutes, localizeOptions)
      }
    }

  // 2 mins up to 0.75 hrs
  } else if (minutes < 45) {
    return localize('xMinutes', minutes, localizeOptions)

  // 0.75 hrs up to 1.5 hrs
  } else if (minutes < 90) {
    return localize('aboutXHours', 1, localizeOptions)

  // 1.5 hrs up to 24 hrs
  } else if (minutes < MINUTES_IN_DAY) {
    var hours = Math.round(minutes / 60)
    return localize('aboutXHours', hours, localizeOptions)

  // 1 day up to 1.75 days
  } else if (minutes < MINUTES_IN_ALMOST_TWO_DAYS) {
    return localize('xDays', 1, localizeOptions)

  // 1.75 days up to 30 days
  } else if (minutes < MINUTES_IN_MONTH) {
    var days = Math.round(minutes / MINUTES_IN_DAY)
    return localize('xDays', days, localizeOptions)

  // 1 month up to 2 months
  } else if (minutes < MINUTES_IN_TWO_MONTHS) {
    months = Math.round(minutes / MINUTES_IN_MONTH)
    return localize('aboutXMonths', months, localizeOptions)
  }

  months = differenceInMonths(dateRight, dateLeft)

  // 2 months up to 12 months
  if (months < 12) {
    var nearestMonth = Math.round(minutes / MINUTES_IN_MONTH)
    return localize('xMonths', nearestMonth, localizeOptions)

  // 1 year up to max Date
  } else {
    var monthsSinceStartOfYear = months % 12
    var years = Math.floor(months / 12)

    // N years up to 1 years 3 months
    if (monthsSinceStartOfYear < 3) {
      return localize('aboutXYears', years, localizeOptions)

    // N years 3 months up to N years 9 months
    } else if (monthsSinceStartOfYear < 9) {
      return localize('overXYears', years, localizeOptions)

    // N years 9 months up to N year 12 months
    } else {
      return localize('almostXYears', years + 1, localizeOptions)
    }
  }
}

module.exports = distanceInWords


/***/ }),

/***/ "./node_modules/date-fns/distance_in_words_strict/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/date-fns/distance_in_words_strict/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var compareDesc = __webpack_require__(/*! ../compare_desc/index.js */ "./node_modules/date-fns/compare_desc/index.js")
var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var differenceInSeconds = __webpack_require__(/*! ../difference_in_seconds/index.js */ "./node_modules/date-fns/difference_in_seconds/index.js")
var enLocale = __webpack_require__(/*! ../locale/en/index.js */ "./node_modules/date-fns/locale/en/index.js")

var MINUTES_IN_DAY = 1440
var MINUTES_IN_MONTH = 43200
var MINUTES_IN_YEAR = 525600

/**
 * @category Common Helpers
 * @summary Return the distance between the given dates in words.
 *
 * @description
 * Return the distance between the given dates in words, using strict units.
 * This is like `distanceInWords`, but does not use helpers like 'almost', 'over',
 * 'less than' and the like.
 *
 * | Distance between dates | Result              |
 * |------------------------|---------------------|
 * | 0 ... 59 secs          | [0..59] seconds     |
 * | 1 ... 59 mins          | [1..59] minutes     |
 * | 1 ... 23 hrs           | [1..23] hours       |
 * | 1 ... 29 days          | [1..29] days        |
 * | 1 ... 11 months        | [1..11] months      |
 * | 1 ... N years          | [1..N]  years       |
 *
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @param {Date|String|Number} date - the other date
 * @param {Object} [options] - the object with options
 * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first
 * @param {'s'|'m'|'h'|'d'|'M'|'Y'} [options.unit] - if specified, will force a unit
 * @param {'floor'|'ceil'|'round'} [options.partialMethod='floor'] - which way to round partial units
 * @param {Object} [options.locale=enLocale] - the locale object
 * @returns {String} the distance in words
 *
 * @example
 * // What is the distance between 2 July 2014 and 1 January 2015?
 * var result = distanceInWordsStrict(
 *   new Date(2014, 6, 2),
 *   new Date(2015, 0, 2)
 * )
 * //=> '6 months'
 *
 * @example
 * // What is the distance between 1 January 2015 00:00:15
 * // and 1 January 2015 00:00:00?
 * var result = distanceInWordsStrict(
 *   new Date(2015, 0, 1, 0, 0, 15),
 *   new Date(2015, 0, 1, 0, 0, 0),
 * )
 * //=> '15 seconds'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 1 January 2015, with a suffix?
 * var result = distanceInWordsStrict(
 *   new Date(2016, 0, 1),
 *   new Date(2015, 0, 1),
 *   {addSuffix: true}
 * )
 * //=> '1 year ago'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 1 January 2015, in minutes?
 * var result = distanceInWordsStrict(
 *   new Date(2016, 0, 1),
 *   new Date(2015, 0, 1),
 *   {unit: 'm'}
 * )
 * //=> '525600 minutes'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 28 January 2015, in months, rounded up?
 * var result = distanceInWordsStrict(
 *   new Date(2015, 0, 28),
 *   new Date(2015, 0, 1),
 *   {unit: 'M', partialMethod: 'ceil'}
 * )
 * //=> '1 month'
 *
 * @example
 * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?
 * var eoLocale = require('date-fns/locale/eo')
 * var result = distanceInWordsStrict(
 *   new Date(2016, 7, 1),
 *   new Date(2015, 0, 1),
 *   {locale: eoLocale}
 * )
 * //=> '1 jaro'
 */
function distanceInWordsStrict (dirtyDateToCompare, dirtyDate, dirtyOptions) {
  var options = dirtyOptions || {}

  var comparison = compareDesc(dirtyDateToCompare, dirtyDate)

  var locale = options.locale
  var localize = enLocale.distanceInWords.localize
  if (locale && locale.distanceInWords && locale.distanceInWords.localize) {
    localize = locale.distanceInWords.localize
  }

  var localizeOptions = {
    addSuffix: Boolean(options.addSuffix),
    comparison: comparison
  }

  var dateLeft, dateRight
  if (comparison > 0) {
    dateLeft = parse(dirtyDateToCompare)
    dateRight = parse(dirtyDate)
  } else {
    dateLeft = parse(dirtyDate)
    dateRight = parse(dirtyDateToCompare)
  }

  var unit
  var mathPartial = Math[options.partialMethod ? String(options.partialMethod) : 'floor']
  var seconds = differenceInSeconds(dateRight, dateLeft)
  var offset = dateRight.getTimezoneOffset() - dateLeft.getTimezoneOffset()
  var minutes = mathPartial(seconds / 60) - offset
  var hours, days, months, years

  if (options.unit) {
    unit = String(options.unit)
  } else {
    if (minutes < 1) {
      unit = 's'
    } else if (minutes < 60) {
      unit = 'm'
    } else if (minutes < MINUTES_IN_DAY) {
      unit = 'h'
    } else if (minutes < MINUTES_IN_MONTH) {
      unit = 'd'
    } else if (minutes < MINUTES_IN_YEAR) {
      unit = 'M'
    } else {
      unit = 'Y'
    }
  }

  // 0 up to 60 seconds
  if (unit === 's') {
    return localize('xSeconds', seconds, localizeOptions)

  // 1 up to 60 mins
  } else if (unit === 'm') {
    return localize('xMinutes', minutes, localizeOptions)

  // 1 up to 24 hours
  } else if (unit === 'h') {
    hours = mathPartial(minutes / 60)
    return localize('xHours', hours, localizeOptions)

  // 1 up to 30 days
  } else if (unit === 'd') {
    days = mathPartial(minutes / MINUTES_IN_DAY)
    return localize('xDays', days, localizeOptions)

  // 1 up to 12 months
  } else if (unit === 'M') {
    months = mathPartial(minutes / MINUTES_IN_MONTH)
    return localize('xMonths', months, localizeOptions)

  // 1 year up to max Date
  } else if (unit === 'Y') {
    years = mathPartial(minutes / MINUTES_IN_YEAR)
    return localize('xYears', years, localizeOptions)
  }

  throw new Error('Unknown unit: ' + unit)
}

module.exports = distanceInWordsStrict


/***/ }),

/***/ "./node_modules/date-fns/distance_in_words_to_now/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/date-fns/distance_in_words_to_now/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var distanceInWords = __webpack_require__(/*! ../distance_in_words/index.js */ "./node_modules/date-fns/distance_in_words/index.js")

/**
 * @category Common Helpers
 * @summary Return the distance between the given date and now in words.
 *
 * @description
 * Return the distance between the given date and now in words.
 *
 * | Distance to now                                                   | Result              |
 * |-------------------------------------------------------------------|---------------------|
 * | 0 ... 30 secs                                                     | less than a minute  |
 * | 30 secs ... 1 min 30 secs                                         | 1 minute            |
 * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |
 * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |
 * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |
 * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |
 * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |
 * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |
 * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |
 * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |
 * | 1 yr ... 1 yr 3 months                                            | about 1 year        |
 * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |
 * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |
 * | N yrs ... N yrs 3 months                                          | about N years       |
 * | N yrs 3 months ... N yrs 9 months                                 | over N years        |
 * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |
 *
 * With `options.includeSeconds == true`:
 * | Distance to now     | Result               |
 * |---------------------|----------------------|
 * | 0 secs ... 5 secs   | less than 5 seconds  |
 * | 5 secs ... 10 secs  | less than 10 seconds |
 * | 10 secs ... 20 secs | less than 20 seconds |
 * | 20 secs ... 40 secs | half a minute        |
 * | 40 secs ... 60 secs | less than a minute   |
 * | 60 secs ... 90 secs | 1 minute             |
 *
 * @param {Date|String|Number} date - the given date
 * @param {Object} [options] - the object with options
 * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed
 * @param {Boolean} [options.addSuffix=false] - result specifies if the second date is earlier or later than the first
 * @param {Object} [options.locale=enLocale] - the locale object
 * @returns {String} the distance in words
 *
 * @example
 * // If today is 1 January 2015, what is the distance to 2 July 2014?
 * var result = distanceInWordsToNow(
 *   new Date(2014, 6, 2)
 * )
 * //=> '6 months'
 *
 * @example
 * // If now is 1 January 2015 00:00:00,
 * // what is the distance to 1 January 2015 00:00:15, including seconds?
 * var result = distanceInWordsToNow(
 *   new Date(2015, 0, 1, 0, 0, 15),
 *   {includeSeconds: true}
 * )
 * //=> 'less than 20 seconds'
 *
 * @example
 * // If today is 1 January 2015,
 * // what is the distance to 1 January 2016, with a suffix?
 * var result = distanceInWordsToNow(
 *   new Date(2016, 0, 1),
 *   {addSuffix: true}
 * )
 * //=> 'in about 1 year'
 *
 * @example
 * // If today is 1 January 2015,
 * // what is the distance to 1 August 2016 in Esperanto?
 * var eoLocale = require('date-fns/locale/eo')
 * var result = distanceInWordsToNow(
 *   new Date(2016, 7, 1),
 *   {locale: eoLocale}
 * )
 * //=> 'pli ol 1 jaro'
 */
function distanceInWordsToNow (dirtyDate, dirtyOptions) {
  return distanceInWords(Date.now(), dirtyDate, dirtyOptions)
}

module.exports = distanceInWordsToNow


/***/ }),

/***/ "./node_modules/date-fns/each_day/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/each_day/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Return the array of dates within the specified range.
 *
 * @description
 * Return the array of dates within the specified range.
 *
 * @param {Date|String|Number} startDate - the first date
 * @param {Date|String|Number} endDate - the last date
 * @param {Number} [step=1] - the step between each day
 * @returns {Date[]} the array with starts of days from the day of startDate to the day of endDate
 * @throws {Error} startDate cannot be after endDate
 *
 * @example
 * // Each day between 6 October 2014 and 10 October 2014:
 * var result = eachDay(
 *   new Date(2014, 9, 6),
 *   new Date(2014, 9, 10)
 * )
 * //=> [
 * //   Mon Oct 06 2014 00:00:00,
 * //   Tue Oct 07 2014 00:00:00,
 * //   Wed Oct 08 2014 00:00:00,
 * //   Thu Oct 09 2014 00:00:00,
 * //   Fri Oct 10 2014 00:00:00
 * // ]
 */
function eachDay (dirtyStartDate, dirtyEndDate, dirtyStep) {
  var startDate = parse(dirtyStartDate)
  var endDate = parse(dirtyEndDate)
  var step = dirtyStep !== undefined ? dirtyStep : 1

  var endTime = endDate.getTime()

  if (startDate.getTime() > endTime) {
    throw new Error('The first date cannot be after the second date')
  }

  var dates = []

  var currentDate = startDate
  currentDate.setHours(0, 0, 0, 0)

  while (currentDate.getTime() <= endTime) {
    dates.push(parse(currentDate))
    currentDate.setDate(currentDate.getDate() + step)
  }

  return dates
}

module.exports = eachDay


/***/ }),

/***/ "./node_modules/date-fns/end_of_day/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/end_of_day/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Return the end of a day for the given date.
 *
 * @description
 * Return the end of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a day
 *
 * @example
 * // The end of a day for 2 September 2014 11:55:00:
 * var result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 23:59:59.999
 */
function endOfDay (dirtyDate) {
  var date = parse(dirtyDate)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfDay


/***/ }),

/***/ "./node_modules/date-fns/end_of_hour/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/end_of_hour/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Hour Helpers
 * @summary Return the end of an hour for the given date.
 *
 * @description
 * Return the end of an hour for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of an hour
 *
 * @example
 * // The end of an hour for 2 September 2014 11:55:00:
 * var result = endOfHour(new Date(2014, 8, 2, 11, 55))
 * //=> Tue Sep 02 2014 11:59:59.999
 */
function endOfHour (dirtyDate) {
  var date = parse(dirtyDate)
  date.setMinutes(59, 59, 999)
  return date
}

module.exports = endOfHour


/***/ }),

/***/ "./node_modules/date-fns/end_of_iso_week/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/end_of_iso_week/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var endOfWeek = __webpack_require__(/*! ../end_of_week/index.js */ "./node_modules/date-fns/end_of_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Return the end of an ISO week for the given date.
 *
 * @description
 * Return the end of an ISO week for the given date.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of an ISO week
 *
 * @example
 * // The end of an ISO week for 2 September 2014 11:55:00:
 * var result = endOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sun Sep 07 2014 23:59:59.999
 */
function endOfISOWeek (dirtyDate) {
  return endOfWeek(dirtyDate, {weekStartsOn: 1})
}

module.exports = endOfISOWeek


/***/ }),

/***/ "./node_modules/date-fns/end_of_iso_year/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/end_of_iso_year/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")
var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Return the end of an ISO week-numbering year for the given date.
 *
 * @description
 * Return the end of an ISO week-numbering year,
 * which always starts 3 days before the year's first Thursday.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of an ISO week-numbering year
 *
 * @example
 * // The end of an ISO week-numbering year for 2 July 2005:
 * var result = endOfISOYear(new Date(2005, 6, 2))
 * //=> Sun Jan 01 2006 23:59:59.999
 */
function endOfISOYear (dirtyDate) {
  var year = getISOYear(dirtyDate)
  var fourthOfJanuaryOfNextYear = new Date(0)
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4)
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0)
  var date = startOfISOWeek(fourthOfJanuaryOfNextYear)
  date.setMilliseconds(date.getMilliseconds() - 1)
  return date
}

module.exports = endOfISOYear


/***/ }),

/***/ "./node_modules/date-fns/end_of_minute/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/end_of_minute/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Minute Helpers
 * @summary Return the end of a minute for the given date.
 *
 * @description
 * Return the end of a minute for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a minute
 *
 * @example
 * // The end of a minute for 1 December 2014 22:15:45.400:
 * var result = endOfMinute(new Date(2014, 11, 1, 22, 15, 45, 400))
 * //=> Mon Dec 01 2014 22:15:59.999
 */
function endOfMinute (dirtyDate) {
  var date = parse(dirtyDate)
  date.setSeconds(59, 999)
  return date
}

module.exports = endOfMinute


/***/ }),

/***/ "./node_modules/date-fns/end_of_month/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/end_of_month/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Return the end of a month for the given date.
 *
 * @description
 * Return the end of a month for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a month
 *
 * @example
 * // The end of a month for 2 September 2014 11:55:00:
 * var result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 30 2014 23:59:59.999
 */
function endOfMonth (dirtyDate) {
  var date = parse(dirtyDate)
  var month = date.getMonth()
  date.setFullYear(date.getFullYear(), month + 1, 0)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfMonth


/***/ }),

/***/ "./node_modules/date-fns/end_of_quarter/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/end_of_quarter/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Quarter Helpers
 * @summary Return the end of a year quarter for the given date.
 *
 * @description
 * Return the end of a year quarter for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a quarter
 *
 * @example
 * // The end of a quarter for 2 September 2014 11:55:00:
 * var result = endOfQuarter(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 30 2014 23:59:59.999
 */
function endOfQuarter (dirtyDate) {
  var date = parse(dirtyDate)
  var currentMonth = date.getMonth()
  var month = currentMonth - currentMonth % 3 + 3
  date.setMonth(month, 0)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfQuarter


/***/ }),

/***/ "./node_modules/date-fns/end_of_second/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/end_of_second/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Second Helpers
 * @summary Return the end of a second for the given date.
 *
 * @description
 * Return the end of a second for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a second
 *
 * @example
 * // The end of a second for 1 December 2014 22:15:45.400:
 * var result = endOfSecond(new Date(2014, 11, 1, 22, 15, 45, 400))
 * //=> Mon Dec 01 2014 22:15:45.999
 */
function endOfSecond (dirtyDate) {
  var date = parse(dirtyDate)
  date.setMilliseconds(999)
  return date
}

module.exports = endOfSecond


/***/ }),

/***/ "./node_modules/date-fns/end_of_today/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/end_of_today/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var endOfDay = __webpack_require__(/*! ../end_of_day/index.js */ "./node_modules/date-fns/end_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Return the end of today.
 *
 * @description
 * Return the end of today.
 *
 * @returns {Date} the end of today
 *
 * @example
 * // If today is 6 October 2014:
 * var result = endOfToday()
 * //=> Mon Oct 6 2014 23:59:59.999
 */
function endOfToday () {
  return endOfDay(new Date())
}

module.exports = endOfToday


/***/ }),

/***/ "./node_modules/date-fns/end_of_tomorrow/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/end_of_tomorrow/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @category Day Helpers
 * @summary Return the end of tomorrow.
 *
 * @description
 * Return the end of tomorrow.
 *
 * @returns {Date} the end of tomorrow
 *
 * @example
 * // If today is 6 October 2014:
 * var result = endOfTomorrow()
 * //=> Tue Oct 7 2014 23:59:59.999
 */
function endOfTomorrow () {
  var now = new Date()
  var year = now.getFullYear()
  var month = now.getMonth()
  var day = now.getDate()

  var date = new Date(0)
  date.setFullYear(year, month, day + 1)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfTomorrow


/***/ }),

/***/ "./node_modules/date-fns/end_of_week/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/end_of_week/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Week Helpers
 * @summary Return the end of a week for the given date.
 *
 * @description
 * Return the end of a week for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the end of a week
 *
 * @example
 * // The end of a week for 2 September 2014 11:55:00:
 * var result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sat Sep 06 2014 23:59:59.999
 *
 * @example
 * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:
 * var result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), {weekStartsOn: 1})
 * //=> Sun Sep 07 2014 23:59:59.999
 */
function endOfWeek (dirtyDate, dirtyOptions) {
  var weekStartsOn = dirtyOptions ? (Number(dirtyOptions.weekStartsOn) || 0) : 0

  var date = parse(dirtyDate)
  var day = date.getDay()
  var diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn)

  date.setDate(date.getDate() + diff)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfWeek


/***/ }),

/***/ "./node_modules/date-fns/end_of_year/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/end_of_year/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Return the end of a year for the given date.
 *
 * @description
 * Return the end of a year for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of a year
 *
 * @example
 * // The end of a year for 2 September 2014 11:55:00:
 * var result = endOfYear(new Date(2014, 8, 2, 11, 55, 00))
 * //=> Wed Dec 31 2014 23:59:59.999
 */
function endOfYear (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()
  date.setFullYear(year + 1, 0, 0)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfYear


/***/ }),

/***/ "./node_modules/date-fns/end_of_yesterday/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/end_of_yesterday/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @category Day Helpers
 * @summary Return the end of yesterday.
 *
 * @description
 * Return the end of yesterday.
 *
 * @returns {Date} the end of yesterday
 *
 * @example
 * // If today is 6 October 2014:
 * var result = endOfYesterday()
 * //=> Sun Oct 5 2014 23:59:59.999
 */
function endOfYesterday () {
  var now = new Date()
  var year = now.getFullYear()
  var month = now.getMonth()
  var day = now.getDate()

  var date = new Date(0)
  date.setFullYear(year, month, day - 1)
  date.setHours(23, 59, 59, 999)
  return date
}

module.exports = endOfYesterday


/***/ }),

/***/ "./node_modules/date-fns/format/index.js":
/*!***********************************************!*\
  !*** ./node_modules/date-fns/format/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getDayOfYear = __webpack_require__(/*! ../get_day_of_year/index.js */ "./node_modules/date-fns/get_day_of_year/index.js")
var getISOWeek = __webpack_require__(/*! ../get_iso_week/index.js */ "./node_modules/date-fns/get_iso_week/index.js")
var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")
var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var isValid = __webpack_require__(/*! ../is_valid/index.js */ "./node_modules/date-fns/is_valid/index.js")
var enLocale = __webpack_require__(/*! ../locale/en/index.js */ "./node_modules/date-fns/locale/en/index.js")

/**
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format.
 *
 * Accepted tokens:
 * | Unit                    | Token | Result examples                  |
 * |-------------------------|-------|----------------------------------|
 * | Month                   | M     | 1, 2, ..., 12                    |
 * |                         | Mo    | 1st, 2nd, ..., 12th              |
 * |                         | MM    | 01, 02, ..., 12                  |
 * |                         | MMM   | Jan, Feb, ..., Dec               |
 * |                         | MMMM  | January, February, ..., December |
 * | Quarter                 | Q     | 1, 2, 3, 4                       |
 * |                         | Qo    | 1st, 2nd, 3rd, 4th               |
 * | Day of month            | D     | 1, 2, ..., 31                    |
 * |                         | Do    | 1st, 2nd, ..., 31st              |
 * |                         | DD    | 01, 02, ..., 31                  |
 * | Day of year             | DDD   | 1, 2, ..., 366                   |
 * |                         | DDDo  | 1st, 2nd, ..., 366th             |
 * |                         | DDDD  | 001, 002, ..., 366               |
 * | Day of week             | d     | 0, 1, ..., 6                     |
 * |                         | do    | 0th, 1st, ..., 6th               |
 * |                         | dd    | Su, Mo, ..., Sa                  |
 * |                         | ddd   | Sun, Mon, ..., Sat               |
 * |                         | dddd  | Sunday, Monday, ..., Saturday    |
 * | Day of ISO week         | E     | 1, 2, ..., 7                     |
 * | ISO week                | W     | 1, 2, ..., 53                    |
 * |                         | Wo    | 1st, 2nd, ..., 53rd              |
 * |                         | WW    | 01, 02, ..., 53                  |
 * | Year                    | YY    | 00, 01, ..., 99                  |
 * |                         | YYYY  | 1900, 1901, ..., 2099            |
 * | ISO week-numbering year | GG    | 00, 01, ..., 99                  |
 * |                         | GGGG  | 1900, 1901, ..., 2099            |
 * | AM/PM                   | A     | AM, PM                           |
 * |                         | a     | am, pm                           |
 * |                         | aa    | a.m., p.m.                       |
 * | Hour                    | H     | 0, 1, ... 23                     |
 * |                         | HH    | 00, 01, ... 23                   |
 * |                         | h     | 1, 2, ..., 12                    |
 * |                         | hh    | 01, 02, ..., 12                  |
 * | Minute                  | m     | 0, 1, ..., 59                    |
 * |                         | mm    | 00, 01, ..., 59                  |
 * | Second                  | s     | 0, 1, ..., 59                    |
 * |                         | ss    | 00, 01, ..., 59                  |
 * | 1/10 of second          | S     | 0, 1, ..., 9                     |
 * | 1/100 of second         | SS    | 00, 01, ..., 99                  |
 * | Millisecond             | SSS   | 000, 001, ..., 999               |
 * | Timezone                | Z     | -01:00, +00:00, ... +12:00       |
 * |                         | ZZ    | -0100, +0000, ..., +1200         |
 * | Seconds timestamp       | X     | 512969520                        |
 * | Milliseconds timestamp  | x     | 512969520900                     |
 *
 * The characters wrapped in square brackets are escaped.
 *
 * The result may vary by locale.
 *
 * @param {Date|String|Number} date - the original date
 * @param {String} [format='YYYY-MM-DDTHH:mm:ss.SSSZ'] - the string of tokens
 * @param {Object} [options] - the object with options
 * @param {Object} [options.locale=enLocale] - the locale object
 * @returns {String} the formatted date string
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * var result = format(
 *   new Date(2014, 1, 11),
 *   'MM/DD/YYYY'
 * )
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * var eoLocale = require('date-fns/locale/eo')
 * var result = format(
 *   new Date(2014, 6, 2),
 *   'Do [de] MMMM YYYY',
 *   {locale: eoLocale}
 * )
 * //=> '2-a de julio 2014'
 */
function format (dirtyDate, dirtyFormatStr, dirtyOptions) {
  var formatStr = dirtyFormatStr ? String(dirtyFormatStr) : 'YYYY-MM-DDTHH:mm:ss.SSSZ'
  var options = dirtyOptions || {}

  var locale = options.locale
  var localeFormatters = enLocale.format.formatters
  var formattingTokensRegExp = enLocale.format.formattingTokensRegExp
  if (locale && locale.format && locale.format.formatters) {
    localeFormatters = locale.format.formatters

    if (locale.format.formattingTokensRegExp) {
      formattingTokensRegExp = locale.format.formattingTokensRegExp
    }
  }

  var date = parse(dirtyDate)

  if (!isValid(date)) {
    return 'Invalid Date'
  }

  var formatFn = buildFormatFn(formatStr, localeFormatters, formattingTokensRegExp)

  return formatFn(date)
}

var formatters = {
  // Month: 1, 2, ..., 12
  'M': function (date) {
    return date.getMonth() + 1
  },

  // Month: 01, 02, ..., 12
  'MM': function (date) {
    return addLeadingZeros(date.getMonth() + 1, 2)
  },

  // Quarter: 1, 2, 3, 4
  'Q': function (date) {
    return Math.ceil((date.getMonth() + 1) / 3)
  },

  // Day of month: 1, 2, ..., 31
  'D': function (date) {
    return date.getDate()
  },

  // Day of month: 01, 02, ..., 31
  'DD': function (date) {
    return addLeadingZeros(date.getDate(), 2)
  },

  // Day of year: 1, 2, ..., 366
  'DDD': function (date) {
    return getDayOfYear(date)
  },

  // Day of year: 001, 002, ..., 366
  'DDDD': function (date) {
    return addLeadingZeros(getDayOfYear(date), 3)
  },

  // Day of week: 0, 1, ..., 6
  'd': function (date) {
    return date.getDay()
  },

  // Day of ISO week: 1, 2, ..., 7
  'E': function (date) {
    return date.getDay() || 7
  },

  // ISO week: 1, 2, ..., 53
  'W': function (date) {
    return getISOWeek(date)
  },

  // ISO week: 01, 02, ..., 53
  'WW': function (date) {
    return addLeadingZeros(getISOWeek(date), 2)
  },

  // Year: 00, 01, ..., 99
  'YY': function (date) {
    return addLeadingZeros(date.getFullYear(), 4).substr(2)
  },

  // Year: 1900, 1901, ..., 2099
  'YYYY': function (date) {
    return addLeadingZeros(date.getFullYear(), 4)
  },

  // ISO week-numbering year: 00, 01, ..., 99
  'GG': function (date) {
    return String(getISOYear(date)).substr(2)
  },

  // ISO week-numbering year: 1900, 1901, ..., 2099
  'GGGG': function (date) {
    return getISOYear(date)
  },

  // Hour: 0, 1, ... 23
  'H': function (date) {
    return date.getHours()
  },

  // Hour: 00, 01, ..., 23
  'HH': function (date) {
    return addLeadingZeros(date.getHours(), 2)
  },

  // Hour: 1, 2, ..., 12
  'h': function (date) {
    var hours = date.getHours()
    if (hours === 0) {
      return 12
    } else if (hours > 12) {
      return hours % 12
    } else {
      return hours
    }
  },

  // Hour: 01, 02, ..., 12
  'hh': function (date) {
    return addLeadingZeros(formatters['h'](date), 2)
  },

  // Minute: 0, 1, ..., 59
  'm': function (date) {
    return date.getMinutes()
  },

  // Minute: 00, 01, ..., 59
  'mm': function (date) {
    return addLeadingZeros(date.getMinutes(), 2)
  },

  // Second: 0, 1, ..., 59
  's': function (date) {
    return date.getSeconds()
  },

  // Second: 00, 01, ..., 59
  'ss': function (date) {
    return addLeadingZeros(date.getSeconds(), 2)
  },

  // 1/10 of second: 0, 1, ..., 9
  'S': function (date) {
    return Math.floor(date.getMilliseconds() / 100)
  },

  // 1/100 of second: 00, 01, ..., 99
  'SS': function (date) {
    return addLeadingZeros(Math.floor(date.getMilliseconds() / 10), 2)
  },

  // Millisecond: 000, 001, ..., 999
  'SSS': function (date) {
    return addLeadingZeros(date.getMilliseconds(), 3)
  },

  // Timezone: -01:00, +00:00, ... +12:00
  'Z': function (date) {
    return formatTimezone(date.getTimezoneOffset(), ':')
  },

  // Timezone: -0100, +0000, ... +1200
  'ZZ': function (date) {
    return formatTimezone(date.getTimezoneOffset())
  },

  // Seconds timestamp: 512969520
  'X': function (date) {
    return Math.floor(date.getTime() / 1000)
  },

  // Milliseconds timestamp: 512969520900
  'x': function (date) {
    return date.getTime()
  }
}

function buildFormatFn (formatStr, localeFormatters, formattingTokensRegExp) {
  var array = formatStr.match(formattingTokensRegExp)
  var length = array.length

  var i
  var formatter
  for (i = 0; i < length; i++) {
    formatter = localeFormatters[array[i]] || formatters[array[i]]
    if (formatter) {
      array[i] = formatter
    } else {
      array[i] = removeFormattingTokens(array[i])
    }
  }

  return function (date) {
    var output = ''
    for (var i = 0; i < length; i++) {
      if (array[i] instanceof Function) {
        output += array[i](date, formatters)
      } else {
        output += array[i]
      }
    }
    return output
  }
}

function removeFormattingTokens (input) {
  if (input.match(/\[[\s\S]/)) {
    return input.replace(/^\[|]$/g, '')
  }
  return input.replace(/\\/g, '')
}

function formatTimezone (offset, delimeter) {
  delimeter = delimeter || ''
  var sign = offset > 0 ? '-' : '+'
  var absOffset = Math.abs(offset)
  var hours = Math.floor(absOffset / 60)
  var minutes = absOffset % 60
  return sign + addLeadingZeros(hours, 2) + delimeter + addLeadingZeros(minutes, 2)
}

function addLeadingZeros (number, targetLength) {
  var output = Math.abs(number).toString()
  while (output.length < targetLength) {
    output = '0' + output
  }
  return output
}

module.exports = format


/***/ }),

/***/ "./node_modules/date-fns/get_date/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/get_date/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Get the day of the month of the given date.
 *
 * @description
 * Get the day of the month of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the day of month
 *
 * @example
 * // Which day of the month is 29 February 2012?
 * var result = getDate(new Date(2012, 1, 29))
 * //=> 29
 */
function getDate (dirtyDate) {
  var date = parse(dirtyDate)
  var dayOfMonth = date.getDate()
  return dayOfMonth
}

module.exports = getDate


/***/ }),

/***/ "./node_modules/date-fns/get_day/index.js":
/*!************************************************!*\
  !*** ./node_modules/date-fns/get_day/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Get the day of the week of the given date.
 *
 * @description
 * Get the day of the week of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the day of week
 *
 * @example
 * // Which day of the week is 29 February 2012?
 * var result = getDay(new Date(2012, 1, 29))
 * //=> 3
 */
function getDay (dirtyDate) {
  var date = parse(dirtyDate)
  var day = date.getDay()
  return day
}

module.exports = getDay


/***/ }),

/***/ "./node_modules/date-fns/get_day_of_year/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/get_day_of_year/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var startOfYear = __webpack_require__(/*! ../start_of_year/index.js */ "./node_modules/date-fns/start_of_year/index.js")
var differenceInCalendarDays = __webpack_require__(/*! ../difference_in_calendar_days/index.js */ "./node_modules/date-fns/difference_in_calendar_days/index.js")

/**
 * @category Day Helpers
 * @summary Get the day of the year of the given date.
 *
 * @description
 * Get the day of the year of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the day of year
 *
 * @example
 * // Which day of the year is 2 July 2014?
 * var result = getDayOfYear(new Date(2014, 6, 2))
 * //=> 183
 */
function getDayOfYear (dirtyDate) {
  var date = parse(dirtyDate)
  var diff = differenceInCalendarDays(date, startOfYear(date))
  var dayOfYear = diff + 1
  return dayOfYear
}

module.exports = getDayOfYear


/***/ }),

/***/ "./node_modules/date-fns/get_days_in_month/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/get_days_in_month/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Get the number of days in a month of the given date.
 *
 * @description
 * Get the number of days in a month of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the number of days in a month
 *
 * @example
 * // How many days are in February 2000?
 * var result = getDaysInMonth(new Date(2000, 1))
 * //=> 29
 */
function getDaysInMonth (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()
  var monthIndex = date.getMonth()
  var lastDayOfMonth = new Date(0)
  lastDayOfMonth.setFullYear(year, monthIndex + 1, 0)
  lastDayOfMonth.setHours(0, 0, 0, 0)
  return lastDayOfMonth.getDate()
}

module.exports = getDaysInMonth


/***/ }),

/***/ "./node_modules/date-fns/get_days_in_year/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/get_days_in_year/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isLeapYear = __webpack_require__(/*! ../is_leap_year/index.js */ "./node_modules/date-fns/is_leap_year/index.js")

/**
 * @category Year Helpers
 * @summary Get the number of days in a year of the given date.
 *
 * @description
 * Get the number of days in a year of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the number of days in a year
 *
 * @example
 * // How many days are in 2012?
 * var result = getDaysInYear(new Date(2012, 0, 1))
 * //=> 366
 */
function getDaysInYear (dirtyDate) {
  return isLeapYear(dirtyDate) ? 366 : 365
}

module.exports = getDaysInYear


/***/ }),

/***/ "./node_modules/date-fns/get_hours/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/get_hours/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Hour Helpers
 * @summary Get the hours of the given date.
 *
 * @description
 * Get the hours of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the hours
 *
 * @example
 * // Get the hours of 29 February 2012 11:45:00:
 * var result = getHours(new Date(2012, 1, 29, 11, 45))
 * //=> 11
 */
function getHours (dirtyDate) {
  var date = parse(dirtyDate)
  var hours = date.getHours()
  return hours
}

module.exports = getHours


/***/ }),

/***/ "./node_modules/date-fns/get_iso_day/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/get_iso_day/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Get the day of the ISO week of the given date.
 *
 * @description
 * Get the day of the ISO week of the given date,
 * which is 7 for Sunday, 1 for Monday etc.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the day of ISO week
 *
 * @example
 * // Which day of the ISO week is 26 February 2012?
 * var result = getISODay(new Date(2012, 1, 26))
 * //=> 7
 */
function getISODay (dirtyDate) {
  var date = parse(dirtyDate)
  var day = date.getDay()

  if (day === 0) {
    day = 7
  }

  return day
}

module.exports = getISODay


/***/ }),

/***/ "./node_modules/date-fns/get_iso_week/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/get_iso_week/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")
var startOfISOYear = __webpack_require__(/*! ../start_of_iso_year/index.js */ "./node_modules/date-fns/start_of_iso_year/index.js")

var MILLISECONDS_IN_WEEK = 604800000

/**
 * @category ISO Week Helpers
 * @summary Get the ISO week of the given date.
 *
 * @description
 * Get the ISO week of the given date.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the ISO week
 *
 * @example
 * // Which week of the ISO-week numbering year is 2 January 2005?
 * var result = getISOWeek(new Date(2005, 0, 2))
 * //=> 53
 */
function getISOWeek (dirtyDate) {
  var date = parse(dirtyDate)
  var diff = startOfISOWeek(date).getTime() - startOfISOYear(date).getTime()

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1
}

module.exports = getISOWeek


/***/ }),

/***/ "./node_modules/date-fns/get_iso_weeks_in_year/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/date-fns/get_iso_weeks_in_year/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfISOYear = __webpack_require__(/*! ../start_of_iso_year/index.js */ "./node_modules/date-fns/start_of_iso_year/index.js")
var addWeeks = __webpack_require__(/*! ../add_weeks/index.js */ "./node_modules/date-fns/add_weeks/index.js")

var MILLISECONDS_IN_WEEK = 604800000

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Get the number of weeks in an ISO week-numbering year of the given date.
 *
 * @description
 * Get the number of weeks in an ISO week-numbering year of the given date.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the number of ISO weeks in a year
 *
 * @example
 * // How many weeks are in ISO week-numbering year 2015?
 * var result = getISOWeeksInYear(new Date(2015, 1, 11))
 * //=> 53
 */
function getISOWeeksInYear (dirtyDate) {
  var thisYear = startOfISOYear(dirtyDate)
  var nextYear = startOfISOYear(addWeeks(thisYear, 60))
  var diff = nextYear.valueOf() - thisYear.valueOf()
  // Round the number of weeks to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK)
}

module.exports = getISOWeeksInYear


/***/ }),

/***/ "./node_modules/date-fns/get_iso_year/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/get_iso_year/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Get the ISO week-numbering year of the given date.
 *
 * @description
 * Get the ISO week-numbering year of the given date,
 * which always starts 3 days before the year's first Thursday.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the ISO week-numbering year
 *
 * @example
 * // Which ISO-week numbering year is 2 January 2005?
 * var result = getISOYear(new Date(2005, 0, 2))
 * //=> 2004
 */
function getISOYear (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()

  var fourthOfJanuaryOfNextYear = new Date(0)
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4)
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0)
  var startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear)

  var fourthOfJanuaryOfThisYear = new Date(0)
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4)
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0)
  var startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear)

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year
  } else {
    return year - 1
  }
}

module.exports = getISOYear


/***/ }),

/***/ "./node_modules/date-fns/get_milliseconds/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/get_milliseconds/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Millisecond Helpers
 * @summary Get the milliseconds of the given date.
 *
 * @description
 * Get the milliseconds of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the milliseconds
 *
 * @example
 * // Get the milliseconds of 29 February 2012 11:45:05.123:
 * var result = getMilliseconds(new Date(2012, 1, 29, 11, 45, 5, 123))
 * //=> 123
 */
function getMilliseconds (dirtyDate) {
  var date = parse(dirtyDate)
  var milliseconds = date.getMilliseconds()
  return milliseconds
}

module.exports = getMilliseconds


/***/ }),

/***/ "./node_modules/date-fns/get_minutes/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/get_minutes/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Minute Helpers
 * @summary Get the minutes of the given date.
 *
 * @description
 * Get the minutes of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the minutes
 *
 * @example
 * // Get the minutes of 29 February 2012 11:45:05:
 * var result = getMinutes(new Date(2012, 1, 29, 11, 45, 5))
 * //=> 45
 */
function getMinutes (dirtyDate) {
  var date = parse(dirtyDate)
  var minutes = date.getMinutes()
  return minutes
}

module.exports = getMinutes


/***/ }),

/***/ "./node_modules/date-fns/get_month/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/get_month/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Get the month of the given date.
 *
 * @description
 * Get the month of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the month
 *
 * @example
 * // Which month is 29 February 2012?
 * var result = getMonth(new Date(2012, 1, 29))
 * //=> 1
 */
function getMonth (dirtyDate) {
  var date = parse(dirtyDate)
  var month = date.getMonth()
  return month
}

module.exports = getMonth


/***/ }),

/***/ "./node_modules/date-fns/get_overlapping_days_in_ranges/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/date-fns/get_overlapping_days_in_ranges/index.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

var MILLISECONDS_IN_DAY = 24 * 60 * 60 * 1000

/**
 * @category Range Helpers
 * @summary Get the number of days that overlap in two date ranges
 *
 * @description
 * Get the number of days that overlap in two date ranges
 *
 * @param {Date|String|Number} initialRangeStartDate - the start of the initial range
 * @param {Date|String|Number} initialRangeEndDate - the end of the initial range
 * @param {Date|String|Number} comparedRangeStartDate - the start of the range to compare it with
 * @param {Date|String|Number} comparedRangeEndDate - the end of the range to compare it with
 * @returns {Number} the number of days that overlap in two date ranges
 * @throws {Error} startDate of a date range cannot be after its endDate
 *
 * @example
 * // For overlapping date ranges adds 1 for each started overlapping day:
 * getOverlappingDaysInRanges(
 *   new Date(2014, 0, 10), new Date(2014, 0, 20), new Date(2014, 0, 17), new Date(2014, 0, 21)
 * )
 * //=> 3
 *
 * @example
 * // For non-overlapping date ranges returns 0:
 * getOverlappingDaysInRanges(
 *   new Date(2014, 0, 10), new Date(2014, 0, 20), new Date(2014, 0, 21), new Date(2014, 0, 22)
 * )
 * //=> 0
 */
function getOverlappingDaysInRanges (dirtyInitialRangeStartDate, dirtyInitialRangeEndDate, dirtyComparedRangeStartDate, dirtyComparedRangeEndDate) {
  var initialStartTime = parse(dirtyInitialRangeStartDate).getTime()
  var initialEndTime = parse(dirtyInitialRangeEndDate).getTime()
  var comparedStartTime = parse(dirtyComparedRangeStartDate).getTime()
  var comparedEndTime = parse(dirtyComparedRangeEndDate).getTime()

  if (initialStartTime > initialEndTime || comparedStartTime > comparedEndTime) {
    throw new Error('The start of the range cannot be after the end of the range')
  }

  var isOverlapping = initialStartTime < comparedEndTime && comparedStartTime < initialEndTime

  if (!isOverlapping) {
    return 0
  }

  var overlapStartDate = comparedStartTime < initialStartTime
    ? initialStartTime
    : comparedStartTime

  var overlapEndDate = comparedEndTime > initialEndTime
    ? initialEndTime
    : comparedEndTime

  var differenceInMs = overlapEndDate - overlapStartDate

  return Math.ceil(differenceInMs / MILLISECONDS_IN_DAY)
}

module.exports = getOverlappingDaysInRanges


/***/ }),

/***/ "./node_modules/date-fns/get_quarter/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/get_quarter/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Quarter Helpers
 * @summary Get the year quarter of the given date.
 *
 * @description
 * Get the year quarter of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the quarter
 *
 * @example
 * // Which quarter is 2 July 2014?
 * var result = getQuarter(new Date(2014, 6, 2))
 * //=> 3
 */
function getQuarter (dirtyDate) {
  var date = parse(dirtyDate)
  var quarter = Math.floor(date.getMonth() / 3) + 1
  return quarter
}

module.exports = getQuarter


/***/ }),

/***/ "./node_modules/date-fns/get_seconds/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/get_seconds/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Second Helpers
 * @summary Get the seconds of the given date.
 *
 * @description
 * Get the seconds of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the seconds
 *
 * @example
 * // Get the seconds of 29 February 2012 11:45:05.123:
 * var result = getSeconds(new Date(2012, 1, 29, 11, 45, 5, 123))
 * //=> 5
 */
function getSeconds (dirtyDate) {
  var date = parse(dirtyDate)
  var seconds = date.getSeconds()
  return seconds
}

module.exports = getSeconds


/***/ }),

/***/ "./node_modules/date-fns/get_time/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/get_time/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Timestamp Helpers
 * @summary Get the milliseconds timestamp of the given date.
 *
 * @description
 * Get the milliseconds timestamp of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the timestamp
 *
 * @example
 * // Get the timestamp of 29 February 2012 11:45:05.123:
 * var result = getTime(new Date(2012, 1, 29, 11, 45, 5, 123))
 * //=> 1330515905123
 */
function getTime (dirtyDate) {
  var date = parse(dirtyDate)
  var timestamp = date.getTime()
  return timestamp
}

module.exports = getTime


/***/ }),

/***/ "./node_modules/date-fns/get_year/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/get_year/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Get the year of the given date.
 *
 * @description
 * Get the year of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the year
 *
 * @example
 * // Which year is 2 July 2014?
 * var result = getYear(new Date(2014, 6, 2))
 * //=> 2014
 */
function getYear (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()
  return year
}

module.exports = getYear


/***/ }),

/***/ "./node_modules/date-fns/index.js":
/*!****************************************!*\
  !*** ./node_modules/date-fns/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = {
  addDays: __webpack_require__(/*! ./add_days/index.js */ "./node_modules/date-fns/add_days/index.js"),
  addHours: __webpack_require__(/*! ./add_hours/index.js */ "./node_modules/date-fns/add_hours/index.js"),
  addISOYears: __webpack_require__(/*! ./add_iso_years/index.js */ "./node_modules/date-fns/add_iso_years/index.js"),
  addMilliseconds: __webpack_require__(/*! ./add_milliseconds/index.js */ "./node_modules/date-fns/add_milliseconds/index.js"),
  addMinutes: __webpack_require__(/*! ./add_minutes/index.js */ "./node_modules/date-fns/add_minutes/index.js"),
  addMonths: __webpack_require__(/*! ./add_months/index.js */ "./node_modules/date-fns/add_months/index.js"),
  addQuarters: __webpack_require__(/*! ./add_quarters/index.js */ "./node_modules/date-fns/add_quarters/index.js"),
  addSeconds: __webpack_require__(/*! ./add_seconds/index.js */ "./node_modules/date-fns/add_seconds/index.js"),
  addWeeks: __webpack_require__(/*! ./add_weeks/index.js */ "./node_modules/date-fns/add_weeks/index.js"),
  addYears: __webpack_require__(/*! ./add_years/index.js */ "./node_modules/date-fns/add_years/index.js"),
  areRangesOverlapping: __webpack_require__(/*! ./are_ranges_overlapping/index.js */ "./node_modules/date-fns/are_ranges_overlapping/index.js"),
  closestIndexTo: __webpack_require__(/*! ./closest_index_to/index.js */ "./node_modules/date-fns/closest_index_to/index.js"),
  closestTo: __webpack_require__(/*! ./closest_to/index.js */ "./node_modules/date-fns/closest_to/index.js"),
  compareAsc: __webpack_require__(/*! ./compare_asc/index.js */ "./node_modules/date-fns/compare_asc/index.js"),
  compareDesc: __webpack_require__(/*! ./compare_desc/index.js */ "./node_modules/date-fns/compare_desc/index.js"),
  differenceInCalendarDays: __webpack_require__(/*! ./difference_in_calendar_days/index.js */ "./node_modules/date-fns/difference_in_calendar_days/index.js"),
  differenceInCalendarISOWeeks: __webpack_require__(/*! ./difference_in_calendar_iso_weeks/index.js */ "./node_modules/date-fns/difference_in_calendar_iso_weeks/index.js"),
  differenceInCalendarISOYears: __webpack_require__(/*! ./difference_in_calendar_iso_years/index.js */ "./node_modules/date-fns/difference_in_calendar_iso_years/index.js"),
  differenceInCalendarMonths: __webpack_require__(/*! ./difference_in_calendar_months/index.js */ "./node_modules/date-fns/difference_in_calendar_months/index.js"),
  differenceInCalendarQuarters: __webpack_require__(/*! ./difference_in_calendar_quarters/index.js */ "./node_modules/date-fns/difference_in_calendar_quarters/index.js"),
  differenceInCalendarWeeks: __webpack_require__(/*! ./difference_in_calendar_weeks/index.js */ "./node_modules/date-fns/difference_in_calendar_weeks/index.js"),
  differenceInCalendarYears: __webpack_require__(/*! ./difference_in_calendar_years/index.js */ "./node_modules/date-fns/difference_in_calendar_years/index.js"),
  differenceInDays: __webpack_require__(/*! ./difference_in_days/index.js */ "./node_modules/date-fns/difference_in_days/index.js"),
  differenceInHours: __webpack_require__(/*! ./difference_in_hours/index.js */ "./node_modules/date-fns/difference_in_hours/index.js"),
  differenceInISOYears: __webpack_require__(/*! ./difference_in_iso_years/index.js */ "./node_modules/date-fns/difference_in_iso_years/index.js"),
  differenceInMilliseconds: __webpack_require__(/*! ./difference_in_milliseconds/index.js */ "./node_modules/date-fns/difference_in_milliseconds/index.js"),
  differenceInMinutes: __webpack_require__(/*! ./difference_in_minutes/index.js */ "./node_modules/date-fns/difference_in_minutes/index.js"),
  differenceInMonths: __webpack_require__(/*! ./difference_in_months/index.js */ "./node_modules/date-fns/difference_in_months/index.js"),
  differenceInQuarters: __webpack_require__(/*! ./difference_in_quarters/index.js */ "./node_modules/date-fns/difference_in_quarters/index.js"),
  differenceInSeconds: __webpack_require__(/*! ./difference_in_seconds/index.js */ "./node_modules/date-fns/difference_in_seconds/index.js"),
  differenceInWeeks: __webpack_require__(/*! ./difference_in_weeks/index.js */ "./node_modules/date-fns/difference_in_weeks/index.js"),
  differenceInYears: __webpack_require__(/*! ./difference_in_years/index.js */ "./node_modules/date-fns/difference_in_years/index.js"),
  distanceInWords: __webpack_require__(/*! ./distance_in_words/index.js */ "./node_modules/date-fns/distance_in_words/index.js"),
  distanceInWordsStrict: __webpack_require__(/*! ./distance_in_words_strict/index.js */ "./node_modules/date-fns/distance_in_words_strict/index.js"),
  distanceInWordsToNow: __webpack_require__(/*! ./distance_in_words_to_now/index.js */ "./node_modules/date-fns/distance_in_words_to_now/index.js"),
  eachDay: __webpack_require__(/*! ./each_day/index.js */ "./node_modules/date-fns/each_day/index.js"),
  endOfDay: __webpack_require__(/*! ./end_of_day/index.js */ "./node_modules/date-fns/end_of_day/index.js"),
  endOfHour: __webpack_require__(/*! ./end_of_hour/index.js */ "./node_modules/date-fns/end_of_hour/index.js"),
  endOfISOWeek: __webpack_require__(/*! ./end_of_iso_week/index.js */ "./node_modules/date-fns/end_of_iso_week/index.js"),
  endOfISOYear: __webpack_require__(/*! ./end_of_iso_year/index.js */ "./node_modules/date-fns/end_of_iso_year/index.js"),
  endOfMinute: __webpack_require__(/*! ./end_of_minute/index.js */ "./node_modules/date-fns/end_of_minute/index.js"),
  endOfMonth: __webpack_require__(/*! ./end_of_month/index.js */ "./node_modules/date-fns/end_of_month/index.js"),
  endOfQuarter: __webpack_require__(/*! ./end_of_quarter/index.js */ "./node_modules/date-fns/end_of_quarter/index.js"),
  endOfSecond: __webpack_require__(/*! ./end_of_second/index.js */ "./node_modules/date-fns/end_of_second/index.js"),
  endOfToday: __webpack_require__(/*! ./end_of_today/index.js */ "./node_modules/date-fns/end_of_today/index.js"),
  endOfTomorrow: __webpack_require__(/*! ./end_of_tomorrow/index.js */ "./node_modules/date-fns/end_of_tomorrow/index.js"),
  endOfWeek: __webpack_require__(/*! ./end_of_week/index.js */ "./node_modules/date-fns/end_of_week/index.js"),
  endOfYear: __webpack_require__(/*! ./end_of_year/index.js */ "./node_modules/date-fns/end_of_year/index.js"),
  endOfYesterday: __webpack_require__(/*! ./end_of_yesterday/index.js */ "./node_modules/date-fns/end_of_yesterday/index.js"),
  format: __webpack_require__(/*! ./format/index.js */ "./node_modules/date-fns/format/index.js"),
  getDate: __webpack_require__(/*! ./get_date/index.js */ "./node_modules/date-fns/get_date/index.js"),
  getDay: __webpack_require__(/*! ./get_day/index.js */ "./node_modules/date-fns/get_day/index.js"),
  getDayOfYear: __webpack_require__(/*! ./get_day_of_year/index.js */ "./node_modules/date-fns/get_day_of_year/index.js"),
  getDaysInMonth: __webpack_require__(/*! ./get_days_in_month/index.js */ "./node_modules/date-fns/get_days_in_month/index.js"),
  getDaysInYear: __webpack_require__(/*! ./get_days_in_year/index.js */ "./node_modules/date-fns/get_days_in_year/index.js"),
  getHours: __webpack_require__(/*! ./get_hours/index.js */ "./node_modules/date-fns/get_hours/index.js"),
  getISODay: __webpack_require__(/*! ./get_iso_day/index.js */ "./node_modules/date-fns/get_iso_day/index.js"),
  getISOWeek: __webpack_require__(/*! ./get_iso_week/index.js */ "./node_modules/date-fns/get_iso_week/index.js"),
  getISOWeeksInYear: __webpack_require__(/*! ./get_iso_weeks_in_year/index.js */ "./node_modules/date-fns/get_iso_weeks_in_year/index.js"),
  getISOYear: __webpack_require__(/*! ./get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js"),
  getMilliseconds: __webpack_require__(/*! ./get_milliseconds/index.js */ "./node_modules/date-fns/get_milliseconds/index.js"),
  getMinutes: __webpack_require__(/*! ./get_minutes/index.js */ "./node_modules/date-fns/get_minutes/index.js"),
  getMonth: __webpack_require__(/*! ./get_month/index.js */ "./node_modules/date-fns/get_month/index.js"),
  getOverlappingDaysInRanges: __webpack_require__(/*! ./get_overlapping_days_in_ranges/index.js */ "./node_modules/date-fns/get_overlapping_days_in_ranges/index.js"),
  getQuarter: __webpack_require__(/*! ./get_quarter/index.js */ "./node_modules/date-fns/get_quarter/index.js"),
  getSeconds: __webpack_require__(/*! ./get_seconds/index.js */ "./node_modules/date-fns/get_seconds/index.js"),
  getTime: __webpack_require__(/*! ./get_time/index.js */ "./node_modules/date-fns/get_time/index.js"),
  getYear: __webpack_require__(/*! ./get_year/index.js */ "./node_modules/date-fns/get_year/index.js"),
  isAfter: __webpack_require__(/*! ./is_after/index.js */ "./node_modules/date-fns/is_after/index.js"),
  isBefore: __webpack_require__(/*! ./is_before/index.js */ "./node_modules/date-fns/is_before/index.js"),
  isDate: __webpack_require__(/*! ./is_date/index.js */ "./node_modules/date-fns/is_date/index.js"),
  isEqual: __webpack_require__(/*! ./is_equal/index.js */ "./node_modules/date-fns/is_equal/index.js"),
  isFirstDayOfMonth: __webpack_require__(/*! ./is_first_day_of_month/index.js */ "./node_modules/date-fns/is_first_day_of_month/index.js"),
  isFriday: __webpack_require__(/*! ./is_friday/index.js */ "./node_modules/date-fns/is_friday/index.js"),
  isFuture: __webpack_require__(/*! ./is_future/index.js */ "./node_modules/date-fns/is_future/index.js"),
  isLastDayOfMonth: __webpack_require__(/*! ./is_last_day_of_month/index.js */ "./node_modules/date-fns/is_last_day_of_month/index.js"),
  isLeapYear: __webpack_require__(/*! ./is_leap_year/index.js */ "./node_modules/date-fns/is_leap_year/index.js"),
  isMonday: __webpack_require__(/*! ./is_monday/index.js */ "./node_modules/date-fns/is_monday/index.js"),
  isPast: __webpack_require__(/*! ./is_past/index.js */ "./node_modules/date-fns/is_past/index.js"),
  isSameDay: __webpack_require__(/*! ./is_same_day/index.js */ "./node_modules/date-fns/is_same_day/index.js"),
  isSameHour: __webpack_require__(/*! ./is_same_hour/index.js */ "./node_modules/date-fns/is_same_hour/index.js"),
  isSameISOWeek: __webpack_require__(/*! ./is_same_iso_week/index.js */ "./node_modules/date-fns/is_same_iso_week/index.js"),
  isSameISOYear: __webpack_require__(/*! ./is_same_iso_year/index.js */ "./node_modules/date-fns/is_same_iso_year/index.js"),
  isSameMinute: __webpack_require__(/*! ./is_same_minute/index.js */ "./node_modules/date-fns/is_same_minute/index.js"),
  isSameMonth: __webpack_require__(/*! ./is_same_month/index.js */ "./node_modules/date-fns/is_same_month/index.js"),
  isSameQuarter: __webpack_require__(/*! ./is_same_quarter/index.js */ "./node_modules/date-fns/is_same_quarter/index.js"),
  isSameSecond: __webpack_require__(/*! ./is_same_second/index.js */ "./node_modules/date-fns/is_same_second/index.js"),
  isSameWeek: __webpack_require__(/*! ./is_same_week/index.js */ "./node_modules/date-fns/is_same_week/index.js"),
  isSameYear: __webpack_require__(/*! ./is_same_year/index.js */ "./node_modules/date-fns/is_same_year/index.js"),
  isSaturday: __webpack_require__(/*! ./is_saturday/index.js */ "./node_modules/date-fns/is_saturday/index.js"),
  isSunday: __webpack_require__(/*! ./is_sunday/index.js */ "./node_modules/date-fns/is_sunday/index.js"),
  isThisHour: __webpack_require__(/*! ./is_this_hour/index.js */ "./node_modules/date-fns/is_this_hour/index.js"),
  isThisISOWeek: __webpack_require__(/*! ./is_this_iso_week/index.js */ "./node_modules/date-fns/is_this_iso_week/index.js"),
  isThisISOYear: __webpack_require__(/*! ./is_this_iso_year/index.js */ "./node_modules/date-fns/is_this_iso_year/index.js"),
  isThisMinute: __webpack_require__(/*! ./is_this_minute/index.js */ "./node_modules/date-fns/is_this_minute/index.js"),
  isThisMonth: __webpack_require__(/*! ./is_this_month/index.js */ "./node_modules/date-fns/is_this_month/index.js"),
  isThisQuarter: __webpack_require__(/*! ./is_this_quarter/index.js */ "./node_modules/date-fns/is_this_quarter/index.js"),
  isThisSecond: __webpack_require__(/*! ./is_this_second/index.js */ "./node_modules/date-fns/is_this_second/index.js"),
  isThisWeek: __webpack_require__(/*! ./is_this_week/index.js */ "./node_modules/date-fns/is_this_week/index.js"),
  isThisYear: __webpack_require__(/*! ./is_this_year/index.js */ "./node_modules/date-fns/is_this_year/index.js"),
  isThursday: __webpack_require__(/*! ./is_thursday/index.js */ "./node_modules/date-fns/is_thursday/index.js"),
  isToday: __webpack_require__(/*! ./is_today/index.js */ "./node_modules/date-fns/is_today/index.js"),
  isTomorrow: __webpack_require__(/*! ./is_tomorrow/index.js */ "./node_modules/date-fns/is_tomorrow/index.js"),
  isTuesday: __webpack_require__(/*! ./is_tuesday/index.js */ "./node_modules/date-fns/is_tuesday/index.js"),
  isValid: __webpack_require__(/*! ./is_valid/index.js */ "./node_modules/date-fns/is_valid/index.js"),
  isWednesday: __webpack_require__(/*! ./is_wednesday/index.js */ "./node_modules/date-fns/is_wednesday/index.js"),
  isWeekend: __webpack_require__(/*! ./is_weekend/index.js */ "./node_modules/date-fns/is_weekend/index.js"),
  isWithinRange: __webpack_require__(/*! ./is_within_range/index.js */ "./node_modules/date-fns/is_within_range/index.js"),
  isYesterday: __webpack_require__(/*! ./is_yesterday/index.js */ "./node_modules/date-fns/is_yesterday/index.js"),
  lastDayOfISOWeek: __webpack_require__(/*! ./last_day_of_iso_week/index.js */ "./node_modules/date-fns/last_day_of_iso_week/index.js"),
  lastDayOfISOYear: __webpack_require__(/*! ./last_day_of_iso_year/index.js */ "./node_modules/date-fns/last_day_of_iso_year/index.js"),
  lastDayOfMonth: __webpack_require__(/*! ./last_day_of_month/index.js */ "./node_modules/date-fns/last_day_of_month/index.js"),
  lastDayOfQuarter: __webpack_require__(/*! ./last_day_of_quarter/index.js */ "./node_modules/date-fns/last_day_of_quarter/index.js"),
  lastDayOfWeek: __webpack_require__(/*! ./last_day_of_week/index.js */ "./node_modules/date-fns/last_day_of_week/index.js"),
  lastDayOfYear: __webpack_require__(/*! ./last_day_of_year/index.js */ "./node_modules/date-fns/last_day_of_year/index.js"),
  max: __webpack_require__(/*! ./max/index.js */ "./node_modules/date-fns/max/index.js"),
  min: __webpack_require__(/*! ./min/index.js */ "./node_modules/date-fns/min/index.js"),
  parse: __webpack_require__(/*! ./parse/index.js */ "./node_modules/date-fns/parse/index.js"),
  setDate: __webpack_require__(/*! ./set_date/index.js */ "./node_modules/date-fns/set_date/index.js"),
  setDay: __webpack_require__(/*! ./set_day/index.js */ "./node_modules/date-fns/set_day/index.js"),
  setDayOfYear: __webpack_require__(/*! ./set_day_of_year/index.js */ "./node_modules/date-fns/set_day_of_year/index.js"),
  setHours: __webpack_require__(/*! ./set_hours/index.js */ "./node_modules/date-fns/set_hours/index.js"),
  setISODay: __webpack_require__(/*! ./set_iso_day/index.js */ "./node_modules/date-fns/set_iso_day/index.js"),
  setISOWeek: __webpack_require__(/*! ./set_iso_week/index.js */ "./node_modules/date-fns/set_iso_week/index.js"),
  setISOYear: __webpack_require__(/*! ./set_iso_year/index.js */ "./node_modules/date-fns/set_iso_year/index.js"),
  setMilliseconds: __webpack_require__(/*! ./set_milliseconds/index.js */ "./node_modules/date-fns/set_milliseconds/index.js"),
  setMinutes: __webpack_require__(/*! ./set_minutes/index.js */ "./node_modules/date-fns/set_minutes/index.js"),
  setMonth: __webpack_require__(/*! ./set_month/index.js */ "./node_modules/date-fns/set_month/index.js"),
  setQuarter: __webpack_require__(/*! ./set_quarter/index.js */ "./node_modules/date-fns/set_quarter/index.js"),
  setSeconds: __webpack_require__(/*! ./set_seconds/index.js */ "./node_modules/date-fns/set_seconds/index.js"),
  setYear: __webpack_require__(/*! ./set_year/index.js */ "./node_modules/date-fns/set_year/index.js"),
  startOfDay: __webpack_require__(/*! ./start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js"),
  startOfHour: __webpack_require__(/*! ./start_of_hour/index.js */ "./node_modules/date-fns/start_of_hour/index.js"),
  startOfISOWeek: __webpack_require__(/*! ./start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js"),
  startOfISOYear: __webpack_require__(/*! ./start_of_iso_year/index.js */ "./node_modules/date-fns/start_of_iso_year/index.js"),
  startOfMinute: __webpack_require__(/*! ./start_of_minute/index.js */ "./node_modules/date-fns/start_of_minute/index.js"),
  startOfMonth: __webpack_require__(/*! ./start_of_month/index.js */ "./node_modules/date-fns/start_of_month/index.js"),
  startOfQuarter: __webpack_require__(/*! ./start_of_quarter/index.js */ "./node_modules/date-fns/start_of_quarter/index.js"),
  startOfSecond: __webpack_require__(/*! ./start_of_second/index.js */ "./node_modules/date-fns/start_of_second/index.js"),
  startOfToday: __webpack_require__(/*! ./start_of_today/index.js */ "./node_modules/date-fns/start_of_today/index.js"),
  startOfTomorrow: __webpack_require__(/*! ./start_of_tomorrow/index.js */ "./node_modules/date-fns/start_of_tomorrow/index.js"),
  startOfWeek: __webpack_require__(/*! ./start_of_week/index.js */ "./node_modules/date-fns/start_of_week/index.js"),
  startOfYear: __webpack_require__(/*! ./start_of_year/index.js */ "./node_modules/date-fns/start_of_year/index.js"),
  startOfYesterday: __webpack_require__(/*! ./start_of_yesterday/index.js */ "./node_modules/date-fns/start_of_yesterday/index.js"),
  subDays: __webpack_require__(/*! ./sub_days/index.js */ "./node_modules/date-fns/sub_days/index.js"),
  subHours: __webpack_require__(/*! ./sub_hours/index.js */ "./node_modules/date-fns/sub_hours/index.js"),
  subISOYears: __webpack_require__(/*! ./sub_iso_years/index.js */ "./node_modules/date-fns/sub_iso_years/index.js"),
  subMilliseconds: __webpack_require__(/*! ./sub_milliseconds/index.js */ "./node_modules/date-fns/sub_milliseconds/index.js"),
  subMinutes: __webpack_require__(/*! ./sub_minutes/index.js */ "./node_modules/date-fns/sub_minutes/index.js"),
  subMonths: __webpack_require__(/*! ./sub_months/index.js */ "./node_modules/date-fns/sub_months/index.js"),
  subQuarters: __webpack_require__(/*! ./sub_quarters/index.js */ "./node_modules/date-fns/sub_quarters/index.js"),
  subSeconds: __webpack_require__(/*! ./sub_seconds/index.js */ "./node_modules/date-fns/sub_seconds/index.js"),
  subWeeks: __webpack_require__(/*! ./sub_weeks/index.js */ "./node_modules/date-fns/sub_weeks/index.js"),
  subYears: __webpack_require__(/*! ./sub_years/index.js */ "./node_modules/date-fns/sub_years/index.js")
}


/***/ }),

/***/ "./node_modules/date-fns/is_after/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/is_after/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Is the first date after the second one?
 *
 * @description
 * Is the first date after the second one?
 *
 * @param {Date|String|Number} date - the date that should be after the other one to return true
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @returns {Boolean} the first date is after the second date
 *
 * @example
 * // Is 10 July 1989 after 11 February 1987?
 * var result = isAfter(new Date(1989, 6, 10), new Date(1987, 1, 11))
 * //=> true
 */
function isAfter (dirtyDate, dirtyDateToCompare) {
  var date = parse(dirtyDate)
  var dateToCompare = parse(dirtyDateToCompare)
  return date.getTime() > dateToCompare.getTime()
}

module.exports = isAfter


/***/ }),

/***/ "./node_modules/date-fns/is_before/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/is_before/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Is the first date before the second one?
 *
 * @description
 * Is the first date before the second one?
 *
 * @param {Date|String|Number} date - the date that should be before the other one to return true
 * @param {Date|String|Number} dateToCompare - the date to compare with
 * @returns {Boolean} the first date is before the second date
 *
 * @example
 * // Is 10 July 1989 before 11 February 1987?
 * var result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))
 * //=> false
 */
function isBefore (dirtyDate, dirtyDateToCompare) {
  var date = parse(dirtyDate)
  var dateToCompare = parse(dirtyDateToCompare)
  return date.getTime() < dateToCompare.getTime()
}

module.exports = isBefore


/***/ }),

/***/ "./node_modules/date-fns/is_date/index.js":
/*!************************************************!*\
  !*** ./node_modules/date-fns/is_date/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @category Common Helpers
 * @summary Is the given argument an instance of Date?
 *
 * @description
 * Is the given argument an instance of Date?
 *
 * @param {*} argument - the argument to check
 * @returns {Boolean} the given argument is an instance of Date
 *
 * @example
 * // Is 'mayonnaise' a Date?
 * var result = isDate('mayonnaise')
 * //=> false
 */
function isDate (argument) {
  return argument instanceof Date
}

module.exports = isDate


/***/ }),

/***/ "./node_modules/date-fns/is_equal/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/is_equal/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Are the given dates equal?
 *
 * @description
 * Are the given dates equal?
 *
 * @param {Date|String|Number} dateLeft - the first date to compare
 * @param {Date|String|Number} dateRight - the second date to compare
 * @returns {Boolean} the dates are equal
 *
 * @example
 * // Are 2 July 2014 06:30:45.000 and 2 July 2014 06:30:45.500 equal?
 * var result = isEqual(
 *   new Date(2014, 6, 2, 6, 30, 45, 0)
 *   new Date(2014, 6, 2, 6, 30, 45, 500)
 * )
 * //=> false
 */
function isEqual (dirtyLeftDate, dirtyRightDate) {
  var dateLeft = parse(dirtyLeftDate)
  var dateRight = parse(dirtyRightDate)
  return dateLeft.getTime() === dateRight.getTime()
}

module.exports = isEqual


/***/ }),

/***/ "./node_modules/date-fns/is_first_day_of_month/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/date-fns/is_first_day_of_month/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Is the given date the first day of a month?
 *
 * @description
 * Is the given date the first day of a month?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is the first day of a month
 *
 * @example
 * // Is 1 September 2014 the first day of a month?
 * var result = isFirstDayOfMonth(new Date(2014, 8, 1))
 * //=> true
 */
function isFirstDayOfMonth (dirtyDate) {
  return parse(dirtyDate).getDate() === 1
}

module.exports = isFirstDayOfMonth


/***/ }),

/***/ "./node_modules/date-fns/is_friday/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/is_friday/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Friday?
 *
 * @description
 * Is the given date Friday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Friday
 *
 * @example
 * // Is 26 September 2014 Friday?
 * var result = isFriday(new Date(2014, 8, 26))
 * //=> true
 */
function isFriday (dirtyDate) {
  return parse(dirtyDate).getDay() === 5
}

module.exports = isFriday


/***/ }),

/***/ "./node_modules/date-fns/is_future/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/is_future/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Is the given date in the future?
 *
 * @description
 * Is the given date in the future?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in the future
 *
 * @example
 * // If today is 6 October 2014, is 31 December 2014 in the future?
 * var result = isFuture(new Date(2014, 11, 31))
 * //=> true
 */
function isFuture (dirtyDate) {
  return parse(dirtyDate).getTime() > new Date().getTime()
}

module.exports = isFuture


/***/ }),

/***/ "./node_modules/date-fns/is_last_day_of_month/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/date-fns/is_last_day_of_month/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var endOfDay = __webpack_require__(/*! ../end_of_day/index.js */ "./node_modules/date-fns/end_of_day/index.js")
var endOfMonth = __webpack_require__(/*! ../end_of_month/index.js */ "./node_modules/date-fns/end_of_month/index.js")

/**
 * @category Month Helpers
 * @summary Is the given date the last day of a month?
 *
 * @description
 * Is the given date the last day of a month?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is the last day of a month
 *
 * @example
 * // Is 28 February 2014 the last day of a month?
 * var result = isLastDayOfMonth(new Date(2014, 1, 28))
 * //=> true
 */
function isLastDayOfMonth (dirtyDate) {
  var date = parse(dirtyDate)
  return endOfDay(date).getTime() === endOfMonth(date).getTime()
}

module.exports = isLastDayOfMonth


/***/ }),

/***/ "./node_modules/date-fns/is_leap_year/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_leap_year/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Is the given date in the leap year?
 *
 * @description
 * Is the given date in the leap year?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in the leap year
 *
 * @example
 * // Is 1 September 2012 in the leap year?
 * var result = isLeapYear(new Date(2012, 8, 1))
 * //=> true
 */
function isLeapYear (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()
  return year % 400 === 0 || year % 4 === 0 && year % 100 !== 0
}

module.exports = isLeapYear


/***/ }),

/***/ "./node_modules/date-fns/is_monday/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/is_monday/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Monday?
 *
 * @description
 * Is the given date Monday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Monday
 *
 * @example
 * // Is 22 September 2014 Monday?
 * var result = isMonday(new Date(2014, 8, 22))
 * //=> true
 */
function isMonday (dirtyDate) {
  return parse(dirtyDate).getDay() === 1
}

module.exports = isMonday


/***/ }),

/***/ "./node_modules/date-fns/is_past/index.js":
/*!************************************************!*\
  !*** ./node_modules/date-fns/is_past/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Is the given date in the past?
 *
 * @description
 * Is the given date in the past?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in the past
 *
 * @example
 * // If today is 6 October 2014, is 2 July 2014 in the past?
 * var result = isPast(new Date(2014, 6, 2))
 * //=> true
 */
function isPast (dirtyDate) {
  return parse(dirtyDate).getTime() < new Date().getTime()
}

module.exports = isPast


/***/ }),

/***/ "./node_modules/date-fns/is_same_day/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/is_same_day/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Are the given dates in the same day?
 *
 * @description
 * Are the given dates in the same day?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * var result = isSameDay(
 *   new Date(2014, 8, 4, 6, 0),
 *   new Date(2014, 8, 4, 18, 0)
 * )
 * //=> true
 */
function isSameDay (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfDay = startOfDay(dirtyDateLeft)
  var dateRightStartOfDay = startOfDay(dirtyDateRight)

  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime()
}

module.exports = isSameDay


/***/ }),

/***/ "./node_modules/date-fns/is_same_hour/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_same_hour/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfHour = __webpack_require__(/*! ../start_of_hour/index.js */ "./node_modules/date-fns/start_of_hour/index.js")

/**
 * @category Hour Helpers
 * @summary Are the given dates in the same hour?
 *
 * @description
 * Are the given dates in the same hour?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same hour
 *
 * @example
 * // Are 4 September 2014 06:00:00 and 4 September 06:30:00 in the same hour?
 * var result = isSameHour(
 *   new Date(2014, 8, 4, 6, 0),
 *   new Date(2014, 8, 4, 6, 30)
 * )
 * //=> true
 */
function isSameHour (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfHour = startOfHour(dirtyDateLeft)
  var dateRightStartOfHour = startOfHour(dirtyDateRight)

  return dateLeftStartOfHour.getTime() === dateRightStartOfHour.getTime()
}

module.exports = isSameHour


/***/ }),

/***/ "./node_modules/date-fns/is_same_iso_week/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/is_same_iso_week/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameWeek = __webpack_require__(/*! ../is_same_week/index.js */ "./node_modules/date-fns/is_same_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Are the given dates in the same ISO week?
 *
 * @description
 * Are the given dates in the same ISO week?
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same ISO week
 *
 * @example
 * // Are 1 September 2014 and 7 September 2014 in the same ISO week?
 * var result = isSameISOWeek(
 *   new Date(2014, 8, 1),
 *   new Date(2014, 8, 7)
 * )
 * //=> true
 */
function isSameISOWeek (dirtyDateLeft, dirtyDateRight) {
  return isSameWeek(dirtyDateLeft, dirtyDateRight, {weekStartsOn: 1})
}

module.exports = isSameISOWeek


/***/ }),

/***/ "./node_modules/date-fns/is_same_iso_year/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/is_same_iso_year/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfISOYear = __webpack_require__(/*! ../start_of_iso_year/index.js */ "./node_modules/date-fns/start_of_iso_year/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Are the given dates in the same ISO week-numbering year?
 *
 * @description
 * Are the given dates in the same ISO week-numbering year?
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same ISO week-numbering year
 *
 * @example
 * // Are 29 December 2003 and 2 January 2005 in the same ISO week-numbering year?
 * var result = isSameISOYear(
 *   new Date(2003, 11, 29),
 *   new Date(2005, 0, 2)
 * )
 * //=> true
 */
function isSameISOYear (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfYear = startOfISOYear(dirtyDateLeft)
  var dateRightStartOfYear = startOfISOYear(dirtyDateRight)

  return dateLeftStartOfYear.getTime() === dateRightStartOfYear.getTime()
}

module.exports = isSameISOYear


/***/ }),

/***/ "./node_modules/date-fns/is_same_minute/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/is_same_minute/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfMinute = __webpack_require__(/*! ../start_of_minute/index.js */ "./node_modules/date-fns/start_of_minute/index.js")

/**
 * @category Minute Helpers
 * @summary Are the given dates in the same minute?
 *
 * @description
 * Are the given dates in the same minute?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same minute
 *
 * @example
 * // Are 4 September 2014 06:30:00 and 4 September 2014 06:30:15
 * // in the same minute?
 * var result = isSameMinute(
 *   new Date(2014, 8, 4, 6, 30),
 *   new Date(2014, 8, 4, 6, 30, 15)
 * )
 * //=> true
 */
function isSameMinute (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfMinute = startOfMinute(dirtyDateLeft)
  var dateRightStartOfMinute = startOfMinute(dirtyDateRight)

  return dateLeftStartOfMinute.getTime() === dateRightStartOfMinute.getTime()
}

module.exports = isSameMinute


/***/ }),

/***/ "./node_modules/date-fns/is_same_month/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/is_same_month/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Are the given dates in the same month?
 *
 * @description
 * Are the given dates in the same month?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same month
 *
 * @example
 * // Are 2 September 2014 and 25 September 2014 in the same month?
 * var result = isSameMonth(
 *   new Date(2014, 8, 2),
 *   new Date(2014, 8, 25)
 * )
 * //=> true
 */
function isSameMonth (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)
  return dateLeft.getFullYear() === dateRight.getFullYear() &&
    dateLeft.getMonth() === dateRight.getMonth()
}

module.exports = isSameMonth


/***/ }),

/***/ "./node_modules/date-fns/is_same_quarter/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/is_same_quarter/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfQuarter = __webpack_require__(/*! ../start_of_quarter/index.js */ "./node_modules/date-fns/start_of_quarter/index.js")

/**
 * @category Quarter Helpers
 * @summary Are the given dates in the same year quarter?
 *
 * @description
 * Are the given dates in the same year quarter?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same quarter
 *
 * @example
 * // Are 1 January 2014 and 8 March 2014 in the same quarter?
 * var result = isSameQuarter(
 *   new Date(2014, 0, 1),
 *   new Date(2014, 2, 8)
 * )
 * //=> true
 */
function isSameQuarter (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfQuarter = startOfQuarter(dirtyDateLeft)
  var dateRightStartOfQuarter = startOfQuarter(dirtyDateRight)

  return dateLeftStartOfQuarter.getTime() === dateRightStartOfQuarter.getTime()
}

module.exports = isSameQuarter


/***/ }),

/***/ "./node_modules/date-fns/is_same_second/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/is_same_second/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfSecond = __webpack_require__(/*! ../start_of_second/index.js */ "./node_modules/date-fns/start_of_second/index.js")

/**
 * @category Second Helpers
 * @summary Are the given dates in the same second?
 *
 * @description
 * Are the given dates in the same second?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same second
 *
 * @example
 * // Are 4 September 2014 06:30:15.000 and 4 September 2014 06:30.15.500
 * // in the same second?
 * var result = isSameSecond(
 *   new Date(2014, 8, 4, 6, 30, 15),
 *   new Date(2014, 8, 4, 6, 30, 15, 500)
 * )
 * //=> true
 */
function isSameSecond (dirtyDateLeft, dirtyDateRight) {
  var dateLeftStartOfSecond = startOfSecond(dirtyDateLeft)
  var dateRightStartOfSecond = startOfSecond(dirtyDateRight)

  return dateLeftStartOfSecond.getTime() === dateRightStartOfSecond.getTime()
}

module.exports = isSameSecond


/***/ }),

/***/ "./node_modules/date-fns/is_same_week/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_same_week/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfWeek = __webpack_require__(/*! ../start_of_week/index.js */ "./node_modules/date-fns/start_of_week/index.js")

/**
 * @category Week Helpers
 * @summary Are the given dates in the same week?
 *
 * @description
 * Are the given dates in the same week?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Boolean} the dates are in the same week
 *
 * @example
 * // Are 31 August 2014 and 4 September 2014 in the same week?
 * var result = isSameWeek(
 *   new Date(2014, 7, 31),
 *   new Date(2014, 8, 4)
 * )
 * //=> true
 *
 * @example
 * // If week starts with Monday,
 * // are 31 August 2014 and 4 September 2014 in the same week?
 * var result = isSameWeek(
 *   new Date(2014, 7, 31),
 *   new Date(2014, 8, 4),
 *   {weekStartsOn: 1}
 * )
 * //=> false
 */
function isSameWeek (dirtyDateLeft, dirtyDateRight, dirtyOptions) {
  var dateLeftStartOfWeek = startOfWeek(dirtyDateLeft, dirtyOptions)
  var dateRightStartOfWeek = startOfWeek(dirtyDateRight, dirtyOptions)

  return dateLeftStartOfWeek.getTime() === dateRightStartOfWeek.getTime()
}

module.exports = isSameWeek


/***/ }),

/***/ "./node_modules/date-fns/is_same_year/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_same_year/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Are the given dates in the same year?
 *
 * @description
 * Are the given dates in the same year?
 *
 * @param {Date|String|Number} dateLeft - the first date to check
 * @param {Date|String|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same year
 *
 * @example
 * // Are 2 September 2014 and 25 September 2014 in the same year?
 * var result = isSameYear(
 *   new Date(2014, 8, 2),
 *   new Date(2014, 8, 25)
 * )
 * //=> true
 */
function isSameYear (dirtyDateLeft, dirtyDateRight) {
  var dateLeft = parse(dirtyDateLeft)
  var dateRight = parse(dirtyDateRight)
  return dateLeft.getFullYear() === dateRight.getFullYear()
}

module.exports = isSameYear


/***/ }),

/***/ "./node_modules/date-fns/is_saturday/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/is_saturday/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Saturday?
 *
 * @description
 * Is the given date Saturday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Saturday
 *
 * @example
 * // Is 27 September 2014 Saturday?
 * var result = isSaturday(new Date(2014, 8, 27))
 * //=> true
 */
function isSaturday (dirtyDate) {
  return parse(dirtyDate).getDay() === 6
}

module.exports = isSaturday


/***/ }),

/***/ "./node_modules/date-fns/is_sunday/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/is_sunday/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Sunday?
 *
 * @description
 * Is the given date Sunday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Sunday
 *
 * @example
 * // Is 21 September 2014 Sunday?
 * var result = isSunday(new Date(2014, 8, 21))
 * //=> true
 */
function isSunday (dirtyDate) {
  return parse(dirtyDate).getDay() === 0
}

module.exports = isSunday


/***/ }),

/***/ "./node_modules/date-fns/is_this_hour/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_this_hour/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameHour = __webpack_require__(/*! ../is_same_hour/index.js */ "./node_modules/date-fns/is_same_hour/index.js")

/**
 * @category Hour Helpers
 * @summary Is the given date in the same hour as the current date?
 *
 * @description
 * Is the given date in the same hour as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this hour
 *
 * @example
 * // If now is 25 September 2014 18:30:15.500,
 * // is 25 September 2014 18:00:00 in this hour?
 * var result = isThisHour(new Date(2014, 8, 25, 18))
 * //=> true
 */
function isThisHour (dirtyDate) {
  return isSameHour(new Date(), dirtyDate)
}

module.exports = isThisHour


/***/ }),

/***/ "./node_modules/date-fns/is_this_iso_week/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/is_this_iso_week/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameISOWeek = __webpack_require__(/*! ../is_same_iso_week/index.js */ "./node_modules/date-fns/is_same_iso_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Is the given date in the same ISO week as the current date?
 *
 * @description
 * Is the given date in the same ISO week as the current date?
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this ISO week
 *
 * @example
 * // If today is 25 September 2014, is 22 September 2014 in this ISO week?
 * var result = isThisISOWeek(new Date(2014, 8, 22))
 * //=> true
 */
function isThisISOWeek (dirtyDate) {
  return isSameISOWeek(new Date(), dirtyDate)
}

module.exports = isThisISOWeek


/***/ }),

/***/ "./node_modules/date-fns/is_this_iso_year/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/is_this_iso_year/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameISOYear = __webpack_require__(/*! ../is_same_iso_year/index.js */ "./node_modules/date-fns/is_same_iso_year/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Is the given date in the same ISO week-numbering year as the current date?
 *
 * @description
 * Is the given date in the same ISO week-numbering year as the current date?
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this ISO week-numbering year
 *
 * @example
 * // If today is 25 September 2014,
 * // is 30 December 2013 in this ISO week-numbering year?
 * var result = isThisISOYear(new Date(2013, 11, 30))
 * //=> true
 */
function isThisISOYear (dirtyDate) {
  return isSameISOYear(new Date(), dirtyDate)
}

module.exports = isThisISOYear


/***/ }),

/***/ "./node_modules/date-fns/is_this_minute/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/is_this_minute/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameMinute = __webpack_require__(/*! ../is_same_minute/index.js */ "./node_modules/date-fns/is_same_minute/index.js")

/**
 * @category Minute Helpers
 * @summary Is the given date in the same minute as the current date?
 *
 * @description
 * Is the given date in the same minute as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this minute
 *
 * @example
 * // If now is 25 September 2014 18:30:15.500,
 * // is 25 September 2014 18:30:00 in this minute?
 * var result = isThisMinute(new Date(2014, 8, 25, 18, 30))
 * //=> true
 */
function isThisMinute (dirtyDate) {
  return isSameMinute(new Date(), dirtyDate)
}

module.exports = isThisMinute


/***/ }),

/***/ "./node_modules/date-fns/is_this_month/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/is_this_month/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameMonth = __webpack_require__(/*! ../is_same_month/index.js */ "./node_modules/date-fns/is_same_month/index.js")

/**
 * @category Month Helpers
 * @summary Is the given date in the same month as the current date?
 *
 * @description
 * Is the given date in the same month as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this month
 *
 * @example
 * // If today is 25 September 2014, is 15 September 2014 in this month?
 * var result = isThisMonth(new Date(2014, 8, 15))
 * //=> true
 */
function isThisMonth (dirtyDate) {
  return isSameMonth(new Date(), dirtyDate)
}

module.exports = isThisMonth


/***/ }),

/***/ "./node_modules/date-fns/is_this_quarter/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/is_this_quarter/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameQuarter = __webpack_require__(/*! ../is_same_quarter/index.js */ "./node_modules/date-fns/is_same_quarter/index.js")

/**
 * @category Quarter Helpers
 * @summary Is the given date in the same quarter as the current date?
 *
 * @description
 * Is the given date in the same quarter as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this quarter
 *
 * @example
 * // If today is 25 September 2014, is 2 July 2014 in this quarter?
 * var result = isThisQuarter(new Date(2014, 6, 2))
 * //=> true
 */
function isThisQuarter (dirtyDate) {
  return isSameQuarter(new Date(), dirtyDate)
}

module.exports = isThisQuarter


/***/ }),

/***/ "./node_modules/date-fns/is_this_second/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/is_this_second/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameSecond = __webpack_require__(/*! ../is_same_second/index.js */ "./node_modules/date-fns/is_same_second/index.js")

/**
 * @category Second Helpers
 * @summary Is the given date in the same second as the current date?
 *
 * @description
 * Is the given date in the same second as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this second
 *
 * @example
 * // If now is 25 September 2014 18:30:15.500,
 * // is 25 September 2014 18:30:15.000 in this second?
 * var result = isThisSecond(new Date(2014, 8, 25, 18, 30, 15))
 * //=> true
 */
function isThisSecond (dirtyDate) {
  return isSameSecond(new Date(), dirtyDate)
}

module.exports = isThisSecond


/***/ }),

/***/ "./node_modules/date-fns/is_this_week/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_this_week/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameWeek = __webpack_require__(/*! ../is_same_week/index.js */ "./node_modules/date-fns/is_same_week/index.js")

/**
 * @category Week Helpers
 * @summary Is the given date in the same week as the current date?
 *
 * @description
 * Is the given date in the same week as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Boolean} the date is in this week
 *
 * @example
 * // If today is 25 September 2014, is 21 September 2014 in this week?
 * var result = isThisWeek(new Date(2014, 8, 21))
 * //=> true
 *
 * @example
 * // If today is 25 September 2014 and week starts with Monday
 * // is 21 September 2014 in this week?
 * var result = isThisWeek(new Date(2014, 8, 21), {weekStartsOn: 1})
 * //=> false
 */
function isThisWeek (dirtyDate, dirtyOptions) {
  return isSameWeek(new Date(), dirtyDate, dirtyOptions)
}

module.exports = isThisWeek


/***/ }),

/***/ "./node_modules/date-fns/is_this_year/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_this_year/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isSameYear = __webpack_require__(/*! ../is_same_year/index.js */ "./node_modules/date-fns/is_same_year/index.js")

/**
 * @category Year Helpers
 * @summary Is the given date in the same year as the current date?
 *
 * @description
 * Is the given date in the same year as the current date?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is in this year
 *
 * @example
 * // If today is 25 September 2014, is 2 July 2014 in this year?
 * var result = isThisYear(new Date(2014, 6, 2))
 * //=> true
 */
function isThisYear (dirtyDate) {
  return isSameYear(new Date(), dirtyDate)
}

module.exports = isThisYear


/***/ }),

/***/ "./node_modules/date-fns/is_thursday/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/is_thursday/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Thursday?
 *
 * @description
 * Is the given date Thursday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Thursday
 *
 * @example
 * // Is 25 September 2014 Thursday?
 * var result = isThursday(new Date(2014, 8, 25))
 * //=> true
 */
function isThursday (dirtyDate) {
  return parse(dirtyDate).getDay() === 4
}

module.exports = isThursday


/***/ }),

/***/ "./node_modules/date-fns/is_today/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/is_today/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Is the given date today?
 *
 * @description
 * Is the given date today?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is today
 *
 * @example
 * // If today is 6 October 2014, is 6 October 14:00:00 today?
 * var result = isToday(new Date(2014, 9, 6, 14, 0))
 * //=> true
 */
function isToday (dirtyDate) {
  return startOfDay(dirtyDate).getTime() === startOfDay(new Date()).getTime()
}

module.exports = isToday


/***/ }),

/***/ "./node_modules/date-fns/is_tomorrow/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/is_tomorrow/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Is the given date tomorrow?
 *
 * @description
 * Is the given date tomorrow?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is tomorrow
 *
 * @example
 * // If today is 6 October 2014, is 7 October 14:00:00 tomorrow?
 * var result = isTomorrow(new Date(2014, 9, 7, 14, 0))
 * //=> true
 */
function isTomorrow (dirtyDate) {
  var tomorrow = new Date()
  tomorrow.setDate(tomorrow.getDate() + 1)
  return startOfDay(dirtyDate).getTime() === startOfDay(tomorrow).getTime()
}

module.exports = isTomorrow


/***/ }),

/***/ "./node_modules/date-fns/is_tuesday/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/is_tuesday/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Tuesday?
 *
 * @description
 * Is the given date Tuesday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Tuesday
 *
 * @example
 * // Is 23 September 2014 Tuesday?
 * var result = isTuesday(new Date(2014, 8, 23))
 * //=> true
 */
function isTuesday (dirtyDate) {
  return parse(dirtyDate).getDay() === 2
}

module.exports = isTuesday


/***/ }),

/***/ "./node_modules/date-fns/is_valid/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/is_valid/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isDate = __webpack_require__(/*! ../is_date/index.js */ "./node_modules/date-fns/is_date/index.js")

/**
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {Date} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} argument must be an instance of Date
 *
 * @example
 * // For the valid date:
 * var result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the invalid date:
 * var result = isValid(new Date(''))
 * //=> false
 */
function isValid (dirtyDate) {
  if (isDate(dirtyDate)) {
    return !isNaN(dirtyDate)
  } else {
    throw new TypeError(toString.call(dirtyDate) + ' is not an instance of Date')
  }
}

module.exports = isValid


/***/ }),

/***/ "./node_modules/date-fns/is_wednesday/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_wednesday/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Is the given date Wednesday?
 *
 * @description
 * Is the given date Wednesday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is Wednesday
 *
 * @example
 * // Is 24 September 2014 Wednesday?
 * var result = isWednesday(new Date(2014, 8, 24))
 * //=> true
 */
function isWednesday (dirtyDate) {
  return parse(dirtyDate).getDay() === 3
}

module.exports = isWednesday


/***/ }),

/***/ "./node_modules/date-fns/is_weekend/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/is_weekend/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Weekday Helpers
 * @summary Does the given date fall on a weekend?
 *
 * @description
 * Does the given date fall on a weekend?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date falls on a weekend
 *
 * @example
 * // Does 5 October 2014 fall on a weekend?
 * var result = isWeekend(new Date(2014, 9, 5))
 * //=> true
 */
function isWeekend (dirtyDate) {
  var date = parse(dirtyDate)
  var day = date.getDay()
  return day === 0 || day === 6
}

module.exports = isWeekend


/***/ }),

/***/ "./node_modules/date-fns/is_within_range/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/is_within_range/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Range Helpers
 * @summary Is the given date within the range?
 *
 * @description
 * Is the given date within the range?
 *
 * @param {Date|String|Number} date - the date to check
 * @param {Date|String|Number} startDate - the start of range
 * @param {Date|String|Number} endDate - the end of range
 * @returns {Boolean} the date is within the range
 * @throws {Error} startDate cannot be after endDate
 *
 * @example
 * // For the date within the range:
 * isWithinRange(
 *   new Date(2014, 0, 3), new Date(2014, 0, 1), new Date(2014, 0, 7)
 * )
 * //=> true
 *
 * @example
 * // For the date outside of the range:
 * isWithinRange(
 *   new Date(2014, 0, 10), new Date(2014, 0, 1), new Date(2014, 0, 7)
 * )
 * //=> false
 */
function isWithinRange (dirtyDate, dirtyStartDate, dirtyEndDate) {
  var time = parse(dirtyDate).getTime()
  var startTime = parse(dirtyStartDate).getTime()
  var endTime = parse(dirtyEndDate).getTime()

  if (startTime > endTime) {
    throw new Error('The start of the range cannot be after the end of the range')
  }

  return time >= startTime && time <= endTime
}

module.exports = isWithinRange


/***/ }),

/***/ "./node_modules/date-fns/is_yesterday/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/is_yesterday/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Is the given date yesterday?
 *
 * @description
 * Is the given date yesterday?
 *
 * @param {Date|String|Number} date - the date to check
 * @returns {Boolean} the date is yesterday
 *
 * @example
 * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?
 * var result = isYesterday(new Date(2014, 9, 5, 14, 0))
 * //=> true
 */
function isYesterday (dirtyDate) {
  var yesterday = new Date()
  yesterday.setDate(yesterday.getDate() - 1)
  return startOfDay(dirtyDate).getTime() === startOfDay(yesterday).getTime()
}

module.exports = isYesterday


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_iso_week/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_iso_week/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var lastDayOfWeek = __webpack_require__(/*! ../last_day_of_week/index.js */ "./node_modules/date-fns/last_day_of_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Return the last day of an ISO week for the given date.
 *
 * @description
 * Return the last day of an ISO week for the given date.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the last day of an ISO week
 *
 * @example
 * // The last day of an ISO week for 2 September 2014 11:55:00:
 * var result = lastDayOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sun Sep 07 2014 00:00:00
 */
function lastDayOfISOWeek (dirtyDate) {
  return lastDayOfWeek(dirtyDate, {weekStartsOn: 1})
}

module.exports = lastDayOfISOWeek


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_iso_year/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_iso_year/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")
var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Return the last day of an ISO week-numbering year for the given date.
 *
 * @description
 * Return the last day of an ISO week-numbering year,
 * which always starts 3 days before the year's first Thursday.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the end of an ISO week-numbering year
 *
 * @example
 * // The last day of an ISO week-numbering year for 2 July 2005:
 * var result = lastDayOfISOYear(new Date(2005, 6, 2))
 * //=> Sun Jan 01 2006 00:00:00
 */
function lastDayOfISOYear (dirtyDate) {
  var year = getISOYear(dirtyDate)
  var fourthOfJanuary = new Date(0)
  fourthOfJanuary.setFullYear(year + 1, 0, 4)
  fourthOfJanuary.setHours(0, 0, 0, 0)
  var date = startOfISOWeek(fourthOfJanuary)
  date.setDate(date.getDate() - 1)
  return date
}

module.exports = lastDayOfISOYear


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_month/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_month/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Return the last day of a month for the given date.
 *
 * @description
 * Return the last day of a month for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the last day of a month
 *
 * @example
 * // The last day of a month for 2 September 2014 11:55:00:
 * var result = lastDayOfMonth(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 30 2014 00:00:00
 */
function lastDayOfMonth (dirtyDate) {
  var date = parse(dirtyDate)
  var month = date.getMonth()
  date.setFullYear(date.getFullYear(), month + 1, 0)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = lastDayOfMonth


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_quarter/index.js":
/*!************************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_quarter/index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Quarter Helpers
 * @summary Return the last day of a year quarter for the given date.
 *
 * @description
 * Return the last day of a year quarter for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the last day of a quarter
 *
 * @example
 * // The last day of a quarter for 2 September 2014 11:55:00:
 * var result = lastDayOfQuarter(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 30 2014 00:00:00
 */
function lastDayOfQuarter (dirtyDate) {
  var date = parse(dirtyDate)
  var currentMonth = date.getMonth()
  var month = currentMonth - currentMonth % 3 + 3
  date.setMonth(month, 0)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = lastDayOfQuarter


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_week/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_week/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Week Helpers
 * @summary Return the last day of a week for the given date.
 *
 * @description
 * Return the last day of a week for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the last day of a week
 *
 * @example
 * // The last day of a week for 2 September 2014 11:55:00:
 * var result = lastDayOfWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sat Sep 06 2014 00:00:00
 *
 * @example
 * // If the week starts on Monday, the last day of the week for 2 September 2014 11:55:00:
 * var result = lastDayOfWeek(new Date(2014, 8, 2, 11, 55, 0), {weekStartsOn: 1})
 * //=> Sun Sep 07 2014 00:00:00
 */
function lastDayOfWeek (dirtyDate, dirtyOptions) {
  var weekStartsOn = dirtyOptions ? (Number(dirtyOptions.weekStartsOn) || 0) : 0

  var date = parse(dirtyDate)
  var day = date.getDay()
  var diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn)

  date.setHours(0, 0, 0, 0)
  date.setDate(date.getDate() + diff)
  return date
}

module.exports = lastDayOfWeek


/***/ }),

/***/ "./node_modules/date-fns/last_day_of_year/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/last_day_of_year/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Return the last day of a year for the given date.
 *
 * @description
 * Return the last day of a year for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the last day of a year
 *
 * @example
 * // The last day of a year for 2 September 2014 11:55:00:
 * var result = lastDayOfYear(new Date(2014, 8, 2, 11, 55, 00))
 * //=> Wed Dec 31 2014 00:00:00
 */
function lastDayOfYear (dirtyDate) {
  var date = parse(dirtyDate)
  var year = date.getFullYear()
  date.setFullYear(year + 1, 0, 0)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = lastDayOfYear


/***/ }),

/***/ "./node_modules/date-fns/locale/_lib/build_formatting_tokens_reg_exp/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/date-fns/locale/_lib/build_formatting_tokens_reg_exp/index.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var commonFormatterKeys = [
  'M', 'MM', 'Q', 'D', 'DD', 'DDD', 'DDDD', 'd',
  'E', 'W', 'WW', 'YY', 'YYYY', 'GG', 'GGGG',
  'H', 'HH', 'h', 'hh', 'm', 'mm',
  's', 'ss', 'S', 'SS', 'SSS',
  'Z', 'ZZ', 'X', 'x'
]

function buildFormattingTokensRegExp (formatters) {
  var formatterKeys = []
  for (var key in formatters) {
    if (formatters.hasOwnProperty(key)) {
      formatterKeys.push(key)
    }
  }

  var formattingTokens = commonFormatterKeys
    .concat(formatterKeys)
    .sort()
    .reverse()
  var formattingTokensRegExp = new RegExp(
    '(\\[[^\\[]*\\])|(\\\\)?' + '(' + formattingTokens.join('|') + '|.)', 'g'
  )

  return formattingTokensRegExp
}

module.exports = buildFormattingTokensRegExp


/***/ }),

/***/ "./node_modules/date-fns/locale/en/build_distance_in_words_locale/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/date-fns/locale/en/build_distance_in_words_locale/index.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function buildDistanceInWordsLocale () {
  var distanceInWordsLocale = {
    lessThanXSeconds: {
      one: 'less than a second',
      other: 'less than {{count}} seconds'
    },

    xSeconds: {
      one: '1 second',
      other: '{{count}} seconds'
    },

    halfAMinute: 'half a minute',

    lessThanXMinutes: {
      one: 'less than a minute',
      other: 'less than {{count}} minutes'
    },

    xMinutes: {
      one: '1 minute',
      other: '{{count}} minutes'
    },

    aboutXHours: {
      one: 'about 1 hour',
      other: 'about {{count}} hours'
    },

    xHours: {
      one: '1 hour',
      other: '{{count}} hours'
    },

    xDays: {
      one: '1 day',
      other: '{{count}} days'
    },

    aboutXMonths: {
      one: 'about 1 month',
      other: 'about {{count}} months'
    },

    xMonths: {
      one: '1 month',
      other: '{{count}} months'
    },

    aboutXYears: {
      one: 'about 1 year',
      other: 'about {{count}} years'
    },

    xYears: {
      one: '1 year',
      other: '{{count}} years'
    },

    overXYears: {
      one: 'over 1 year',
      other: 'over {{count}} years'
    },

    almostXYears: {
      one: 'almost 1 year',
      other: 'almost {{count}} years'
    }
  }

  function localize (token, count, options) {
    options = options || {}

    var result
    if (typeof distanceInWordsLocale[token] === 'string') {
      result = distanceInWordsLocale[token]
    } else if (count === 1) {
      result = distanceInWordsLocale[token].one
    } else {
      result = distanceInWordsLocale[token].other.replace('{{count}}', count)
    }

    if (options.addSuffix) {
      if (options.comparison > 0) {
        return 'in ' + result
      } else {
        return result + ' ago'
      }
    }

    return result
  }

  return {
    localize: localize
  }
}

module.exports = buildDistanceInWordsLocale


/***/ }),

/***/ "./node_modules/date-fns/locale/en/build_format_locale/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/date-fns/locale/en/build_format_locale/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var buildFormattingTokensRegExp = __webpack_require__(/*! ../../_lib/build_formatting_tokens_reg_exp/index.js */ "./node_modules/date-fns/locale/_lib/build_formatting_tokens_reg_exp/index.js")

function buildFormatLocale () {
  // Note: in English, the names of days of the week and months are capitalized.
  // If you are making a new locale based on this one, check if the same is true for the language you're working on.
  // Generally, formatted dates should look like they are in the middle of a sentence,
  // e.g. in Spanish language the weekdays and months should be in the lowercase.
  var months3char = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
  var monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
  var weekdays2char = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']
  var weekdays3char = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
  var weekdaysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
  var meridiemUppercase = ['AM', 'PM']
  var meridiemLowercase = ['am', 'pm']
  var meridiemFull = ['a.m.', 'p.m.']

  var formatters = {
    // Month: Jan, Feb, ..., Dec
    'MMM': function (date) {
      return months3char[date.getMonth()]
    },

    // Month: January, February, ..., December
    'MMMM': function (date) {
      return monthsFull[date.getMonth()]
    },

    // Day of week: Su, Mo, ..., Sa
    'dd': function (date) {
      return weekdays2char[date.getDay()]
    },

    // Day of week: Sun, Mon, ..., Sat
    'ddd': function (date) {
      return weekdays3char[date.getDay()]
    },

    // Day of week: Sunday, Monday, ..., Saturday
    'dddd': function (date) {
      return weekdaysFull[date.getDay()]
    },

    // AM, PM
    'A': function (date) {
      return (date.getHours() / 12) >= 1 ? meridiemUppercase[1] : meridiemUppercase[0]
    },

    // am, pm
    'a': function (date) {
      return (date.getHours() / 12) >= 1 ? meridiemLowercase[1] : meridiemLowercase[0]
    },

    // a.m., p.m.
    'aa': function (date) {
      return (date.getHours() / 12) >= 1 ? meridiemFull[1] : meridiemFull[0]
    }
  }

  // Generate ordinal version of formatters: M -> Mo, D -> Do, etc.
  var ordinalFormatters = ['M', 'D', 'DDD', 'd', 'Q', 'W']
  ordinalFormatters.forEach(function (formatterToken) {
    formatters[formatterToken + 'o'] = function (date, formatters) {
      return ordinal(formatters[formatterToken](date))
    }
  })

  return {
    formatters: formatters,
    formattingTokensRegExp: buildFormattingTokensRegExp(formatters)
  }
}

function ordinal (number) {
  var rem100 = number % 100
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st'
      case 2:
        return number + 'nd'
      case 3:
        return number + 'rd'
    }
  }
  return number + 'th'
}

module.exports = buildFormatLocale


/***/ }),

/***/ "./node_modules/date-fns/locale/en/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/locale/en/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var buildDistanceInWordsLocale = __webpack_require__(/*! ./build_distance_in_words_locale/index.js */ "./node_modules/date-fns/locale/en/build_distance_in_words_locale/index.js")
var buildFormatLocale = __webpack_require__(/*! ./build_format_locale/index.js */ "./node_modules/date-fns/locale/en/build_format_locale/index.js")

/**
 * @category Locales
 * @summary English locale.
 */
module.exports = {
  distanceInWords: buildDistanceInWordsLocale(),
  format: buildFormatLocale()
}


/***/ }),

/***/ "./node_modules/date-fns/max/index.js":
/*!********************************************!*\
  !*** ./node_modules/date-fns/max/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Return the latest of the given dates.
 *
 * @description
 * Return the latest of the given dates.
 *
 * @param {...(Date|String|Number)} dates - the dates to compare
 * @returns {Date} the latest of the dates
 *
 * @example
 * // Which of these dates is the latest?
 * var result = max(
 *   new Date(1989, 6, 10),
 *   new Date(1987, 1, 11),
 *   new Date(1995, 6, 2),
 *   new Date(1990, 0, 1)
 * )
 * //=> Sun Jul 02 1995 00:00:00
 */
function max () {
  var dirtyDates = Array.prototype.slice.call(arguments)
  var dates = dirtyDates.map(function (dirtyDate) {
    return parse(dirtyDate)
  })
  var latestTimestamp = Math.max.apply(null, dates)
  return new Date(latestTimestamp)
}

module.exports = max


/***/ }),

/***/ "./node_modules/date-fns/min/index.js":
/*!********************************************!*\
  !*** ./node_modules/date-fns/min/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Common Helpers
 * @summary Return the earliest of the given dates.
 *
 * @description
 * Return the earliest of the given dates.
 *
 * @param {...(Date|String|Number)} dates - the dates to compare
 * @returns {Date} the earliest of the dates
 *
 * @example
 * // Which of these dates is the earliest?
 * var result = min(
 *   new Date(1989, 6, 10),
 *   new Date(1987, 1, 11),
 *   new Date(1995, 6, 2),
 *   new Date(1990, 0, 1)
 * )
 * //=> Wed Feb 11 1987 00:00:00
 */
function min () {
  var dirtyDates = Array.prototype.slice.call(arguments)
  var dates = dirtyDates.map(function (dirtyDate) {
    return parse(dirtyDate)
  })
  var earliestTimestamp = Math.min.apply(null, dates)
  return new Date(earliestTimestamp)
}

module.exports = min


/***/ }),

/***/ "./node_modules/date-fns/parse/index.js":
/*!**********************************************!*\
  !*** ./node_modules/date-fns/parse/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getTimezoneOffsetInMilliseconds = __webpack_require__(/*! ../_lib/getTimezoneOffsetInMilliseconds/index.js */ "./node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds/index.js")
var isDate = __webpack_require__(/*! ../is_date/index.js */ "./node_modules/date-fns/is_date/index.js")

var MILLISECONDS_IN_HOUR = 3600000
var MILLISECONDS_IN_MINUTE = 60000
var DEFAULT_ADDITIONAL_DIGITS = 2

var parseTokenDateTimeDelimeter = /[T ]/
var parseTokenPlainTime = /:/

// year tokens
var parseTokenYY = /^(\d{2})$/
var parseTokensYYY = [
  /^([+-]\d{2})$/, // 0 additional digits
  /^([+-]\d{3})$/, // 1 additional digit
  /^([+-]\d{4})$/ // 2 additional digits
]

var parseTokenYYYY = /^(\d{4})/
var parseTokensYYYYY = [
  /^([+-]\d{4})/, // 0 additional digits
  /^([+-]\d{5})/, // 1 additional digit
  /^([+-]\d{6})/ // 2 additional digits
]

// date tokens
var parseTokenMM = /^-(\d{2})$/
var parseTokenDDD = /^-?(\d{3})$/
var parseTokenMMDD = /^-?(\d{2})-?(\d{2})$/
var parseTokenWww = /^-?W(\d{2})$/
var parseTokenWwwD = /^-?W(\d{2})-?(\d{1})$/

// time tokens
var parseTokenHH = /^(\d{2}([.,]\d*)?)$/
var parseTokenHHMM = /^(\d{2}):?(\d{2}([.,]\d*)?)$/
var parseTokenHHMMSS = /^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/

// timezone tokens
var parseTokenTimezone = /([Z+-].*)$/
var parseTokenTimezoneZ = /^(Z)$/
var parseTokenTimezoneHH = /^([+-])(\d{2})$/
var parseTokenTimezoneHHMM = /^([+-])(\d{2}):?(\d{2})$/

/**
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If an argument is a string, the function tries to parse it.
 * Function accepts complete ISO 8601 formats as well as partial implementations.
 * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601
 *
 * If all above fails, the function passes the given argument to Date constructor.
 *
 * @param {Date|String|Number} argument - the value to convert
 * @param {Object} [options] - the object with options
 * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format
 * @returns {Date} the parsed date in the local time zone
 *
 * @example
 * // Convert string '2014-02-11T11:30:30' to date:
 * var result = parse('2014-02-11T11:30:30')
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Parse string '+02014101',
 * // if the additional number of digits in the extended year format is 1:
 * var result = parse('+02014101', {additionalDigits: 1})
 * //=> Fri Apr 11 2014 00:00:00
 */
function parse (argument, dirtyOptions) {
  if (isDate(argument)) {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime())
  } else if (typeof argument !== 'string') {
    return new Date(argument)
  }

  var options = dirtyOptions || {}
  var additionalDigits = options.additionalDigits
  if (additionalDigits == null) {
    additionalDigits = DEFAULT_ADDITIONAL_DIGITS
  } else {
    additionalDigits = Number(additionalDigits)
  }

  var dateStrings = splitDateString(argument)

  var parseYearResult = parseYear(dateStrings.date, additionalDigits)
  var year = parseYearResult.year
  var restDateString = parseYearResult.restDateString

  var date = parseDate(restDateString, year)

  if (date) {
    var timestamp = date.getTime()
    var time = 0
    var offset

    if (dateStrings.time) {
      time = parseTime(dateStrings.time)
    }

    if (dateStrings.timezone) {
      offset = parseTimezone(dateStrings.timezone) * MILLISECONDS_IN_MINUTE
    } else {
      var fullTime = timestamp + time
      var fullTimeDate = new Date(fullTime)

      offset = getTimezoneOffsetInMilliseconds(fullTimeDate)

      // Adjust time when it's coming from DST
      var fullTimeDateNextDay = new Date(fullTime)
      fullTimeDateNextDay.setDate(fullTimeDate.getDate() + 1)
      var offsetDiff =
        getTimezoneOffsetInMilliseconds(fullTimeDateNextDay) -
        getTimezoneOffsetInMilliseconds(fullTimeDate)
      if (offsetDiff > 0) {
        offset += offsetDiff
      }
    }

    return new Date(timestamp + time + offset)
  } else {
    return new Date(argument)
  }
}

function splitDateString (dateString) {
  var dateStrings = {}
  var array = dateString.split(parseTokenDateTimeDelimeter)
  var timeString

  if (parseTokenPlainTime.test(array[0])) {
    dateStrings.date = null
    timeString = array[0]
  } else {
    dateStrings.date = array[0]
    timeString = array[1]
  }

  if (timeString) {
    var token = parseTokenTimezone.exec(timeString)
    if (token) {
      dateStrings.time = timeString.replace(token[1], '')
      dateStrings.timezone = token[1]
    } else {
      dateStrings.time = timeString
    }
  }

  return dateStrings
}

function parseYear (dateString, additionalDigits) {
  var parseTokenYYY = parseTokensYYY[additionalDigits]
  var parseTokenYYYYY = parseTokensYYYYY[additionalDigits]

  var token

  // YYYY or ±YYYYY
  token = parseTokenYYYY.exec(dateString) || parseTokenYYYYY.exec(dateString)
  if (token) {
    var yearString = token[1]
    return {
      year: parseInt(yearString, 10),
      restDateString: dateString.slice(yearString.length)
    }
  }

  // YY or ±YYY
  token = parseTokenYY.exec(dateString) || parseTokenYYY.exec(dateString)
  if (token) {
    var centuryString = token[1]
    return {
      year: parseInt(centuryString, 10) * 100,
      restDateString: dateString.slice(centuryString.length)
    }
  }

  // Invalid ISO-formatted year
  return {
    year: null
  }
}

function parseDate (dateString, year) {
  // Invalid ISO-formatted year
  if (year === null) {
    return null
  }

  var token
  var date
  var month
  var week

  // YYYY
  if (dateString.length === 0) {
    date = new Date(0)
    date.setUTCFullYear(year)
    return date
  }

  // YYYY-MM
  token = parseTokenMM.exec(dateString)
  if (token) {
    date = new Date(0)
    month = parseInt(token[1], 10) - 1
    date.setUTCFullYear(year, month)
    return date
  }

  // YYYY-DDD or YYYYDDD
  token = parseTokenDDD.exec(dateString)
  if (token) {
    date = new Date(0)
    var dayOfYear = parseInt(token[1], 10)
    date.setUTCFullYear(year, 0, dayOfYear)
    return date
  }

  // YYYY-MM-DD or YYYYMMDD
  token = parseTokenMMDD.exec(dateString)
  if (token) {
    date = new Date(0)
    month = parseInt(token[1], 10) - 1
    var day = parseInt(token[2], 10)
    date.setUTCFullYear(year, month, day)
    return date
  }

  // YYYY-Www or YYYYWww
  token = parseTokenWww.exec(dateString)
  if (token) {
    week = parseInt(token[1], 10) - 1
    return dayOfISOYear(year, week)
  }

  // YYYY-Www-D or YYYYWwwD
  token = parseTokenWwwD.exec(dateString)
  if (token) {
    week = parseInt(token[1], 10) - 1
    var dayOfWeek = parseInt(token[2], 10) - 1
    return dayOfISOYear(year, week, dayOfWeek)
  }

  // Invalid ISO-formatted date
  return null
}

function parseTime (timeString) {
  var token
  var hours
  var minutes

  // hh
  token = parseTokenHH.exec(timeString)
  if (token) {
    hours = parseFloat(token[1].replace(',', '.'))
    return (hours % 24) * MILLISECONDS_IN_HOUR
  }

  // hh:mm or hhmm
  token = parseTokenHHMM.exec(timeString)
  if (token) {
    hours = parseInt(token[1], 10)
    minutes = parseFloat(token[2].replace(',', '.'))
    return (hours % 24) * MILLISECONDS_IN_HOUR +
      minutes * MILLISECONDS_IN_MINUTE
  }

  // hh:mm:ss or hhmmss
  token = parseTokenHHMMSS.exec(timeString)
  if (token) {
    hours = parseInt(token[1], 10)
    minutes = parseInt(token[2], 10)
    var seconds = parseFloat(token[3].replace(',', '.'))
    return (hours % 24) * MILLISECONDS_IN_HOUR +
      minutes * MILLISECONDS_IN_MINUTE +
      seconds * 1000
  }

  // Invalid ISO-formatted time
  return null
}

function parseTimezone (timezoneString) {
  var token
  var absoluteOffset

  // Z
  token = parseTokenTimezoneZ.exec(timezoneString)
  if (token) {
    return 0
  }

  // ±hh
  token = parseTokenTimezoneHH.exec(timezoneString)
  if (token) {
    absoluteOffset = parseInt(token[2], 10) * 60
    return (token[1] === '+') ? -absoluteOffset : absoluteOffset
  }

  // ±hh:mm or ±hhmm
  token = parseTokenTimezoneHHMM.exec(timezoneString)
  if (token) {
    absoluteOffset = parseInt(token[2], 10) * 60 + parseInt(token[3], 10)
    return (token[1] === '+') ? -absoluteOffset : absoluteOffset
  }

  return 0
}

function dayOfISOYear (isoYear, week, day) {
  week = week || 0
  day = day || 0
  var date = new Date(0)
  date.setUTCFullYear(isoYear, 0, 4)
  var fourthOfJanuaryDay = date.getUTCDay() || 7
  var diff = week * 7 + day + 1 - fourthOfJanuaryDay
  date.setUTCDate(date.getUTCDate() + diff)
  return date
}

module.exports = parse


/***/ }),

/***/ "./node_modules/date-fns/set_date/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/set_date/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Set the day of the month to the given date.
 *
 * @description
 * Set the day of the month to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} dayOfMonth - the day of the month of the new date
 * @returns {Date} the new date with the day of the month setted
 *
 * @example
 * // Set the 30th day of the month to 1 September 2014:
 * var result = setDate(new Date(2014, 8, 1), 30)
 * //=> Tue Sep 30 2014 00:00:00
 */
function setDate (dirtyDate, dirtyDayOfMonth) {
  var date = parse(dirtyDate)
  var dayOfMonth = Number(dirtyDayOfMonth)
  date.setDate(dayOfMonth)
  return date
}

module.exports = setDate


/***/ }),

/***/ "./node_modules/date-fns/set_day/index.js":
/*!************************************************!*\
  !*** ./node_modules/date-fns/set_day/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var addDays = __webpack_require__(/*! ../add_days/index.js */ "./node_modules/date-fns/add_days/index.js")

/**
 * @category Weekday Helpers
 * @summary Set the day of the week to the given date.
 *
 * @description
 * Set the day of the week to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} day - the day of the week of the new date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the new date with the day of the week setted
 *
 * @example
 * // Set Sunday to 1 September 2014:
 * var result = setDay(new Date(2014, 8, 1), 0)
 * //=> Sun Aug 31 2014 00:00:00
 *
 * @example
 * // If week starts with Monday, set Sunday to 1 September 2014:
 * var result = setDay(new Date(2014, 8, 1), 0, {weekStartsOn: 1})
 * //=> Sun Sep 07 2014 00:00:00
 */
function setDay (dirtyDate, dirtyDay, dirtyOptions) {
  var weekStartsOn = dirtyOptions ? (Number(dirtyOptions.weekStartsOn) || 0) : 0
  var date = parse(dirtyDate)
  var day = Number(dirtyDay)
  var currentDay = date.getDay()

  var remainder = day % 7
  var dayIndex = (remainder + 7) % 7

  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay
  return addDays(date, diff)
}

module.exports = setDay


/***/ }),

/***/ "./node_modules/date-fns/set_day_of_year/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/set_day_of_year/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Set the day of the year to the given date.
 *
 * @description
 * Set the day of the year to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} dayOfYear - the day of the year of the new date
 * @returns {Date} the new date with the day of the year setted
 *
 * @example
 * // Set the 2nd day of the year to 2 July 2014:
 * var result = setDayOfYear(new Date(2014, 6, 2), 2)
 * //=> Thu Jan 02 2014 00:00:00
 */
function setDayOfYear (dirtyDate, dirtyDayOfYear) {
  var date = parse(dirtyDate)
  var dayOfYear = Number(dirtyDayOfYear)
  date.setMonth(0)
  date.setDate(dayOfYear)
  return date
}

module.exports = setDayOfYear


/***/ }),

/***/ "./node_modules/date-fns/set_hours/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/set_hours/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Hour Helpers
 * @summary Set the hours to the given date.
 *
 * @description
 * Set the hours to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} hours - the hours of the new date
 * @returns {Date} the new date with the hours setted
 *
 * @example
 * // Set 4 hours to 1 September 2014 11:30:00:
 * var result = setHours(new Date(2014, 8, 1, 11, 30), 4)
 * //=> Mon Sep 01 2014 04:30:00
 */
function setHours (dirtyDate, dirtyHours) {
  var date = parse(dirtyDate)
  var hours = Number(dirtyHours)
  date.setHours(hours)
  return date
}

module.exports = setHours


/***/ }),

/***/ "./node_modules/date-fns/set_iso_day/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/set_iso_day/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var addDays = __webpack_require__(/*! ../add_days/index.js */ "./node_modules/date-fns/add_days/index.js")
var getISODay = __webpack_require__(/*! ../get_iso_day/index.js */ "./node_modules/date-fns/get_iso_day/index.js")

/**
 * @category Weekday Helpers
 * @summary Set the day of the ISO week to the given date.
 *
 * @description
 * Set the day of the ISO week to the given date.
 * ISO week starts with Monday.
 * 7 is the index of Sunday, 1 is the index of Monday etc.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} day - the day of the ISO week of the new date
 * @returns {Date} the new date with the day of the ISO week setted
 *
 * @example
 * // Set Sunday to 1 September 2014:
 * var result = setISODay(new Date(2014, 8, 1), 7)
 * //=> Sun Sep 07 2014 00:00:00
 */
function setISODay (dirtyDate, dirtyDay) {
  var date = parse(dirtyDate)
  var day = Number(dirtyDay)
  var currentDay = getISODay(date)
  var diff = day - currentDay
  return addDays(date, diff)
}

module.exports = setISODay


/***/ }),

/***/ "./node_modules/date-fns/set_iso_week/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/set_iso_week/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var getISOWeek = __webpack_require__(/*! ../get_iso_week/index.js */ "./node_modules/date-fns/get_iso_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Set the ISO week to the given date.
 *
 * @description
 * Set the ISO week to the given date, saving the weekday number.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} isoWeek - the ISO week of the new date
 * @returns {Date} the new date with the ISO week setted
 *
 * @example
 * // Set the 53rd ISO week to 7 August 2004:
 * var result = setISOWeek(new Date(2004, 7, 7), 53)
 * //=> Sat Jan 01 2005 00:00:00
 */
function setISOWeek (dirtyDate, dirtyISOWeek) {
  var date = parse(dirtyDate)
  var isoWeek = Number(dirtyISOWeek)
  var diff = getISOWeek(date) - isoWeek
  date.setDate(date.getDate() - diff * 7)
  return date
}

module.exports = setISOWeek


/***/ }),

/***/ "./node_modules/date-fns/set_iso_year/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/set_iso_year/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var startOfISOYear = __webpack_require__(/*! ../start_of_iso_year/index.js */ "./node_modules/date-fns/start_of_iso_year/index.js")
var differenceInCalendarDays = __webpack_require__(/*! ../difference_in_calendar_days/index.js */ "./node_modules/date-fns/difference_in_calendar_days/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Set the ISO week-numbering year to the given date.
 *
 * @description
 * Set the ISO week-numbering year to the given date,
 * saving the week number and the weekday number.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} isoYear - the ISO week-numbering year of the new date
 * @returns {Date} the new date with the ISO week-numbering year setted
 *
 * @example
 * // Set ISO week-numbering year 2007 to 29 December 2008:
 * var result = setISOYear(new Date(2008, 11, 29), 2007)
 * //=> Mon Jan 01 2007 00:00:00
 */
function setISOYear (dirtyDate, dirtyISOYear) {
  var date = parse(dirtyDate)
  var isoYear = Number(dirtyISOYear)
  var diff = differenceInCalendarDays(date, startOfISOYear(date))
  var fourthOfJanuary = new Date(0)
  fourthOfJanuary.setFullYear(isoYear, 0, 4)
  fourthOfJanuary.setHours(0, 0, 0, 0)
  date = startOfISOYear(fourthOfJanuary)
  date.setDate(date.getDate() + diff)
  return date
}

module.exports = setISOYear


/***/ }),

/***/ "./node_modules/date-fns/set_milliseconds/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/set_milliseconds/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Millisecond Helpers
 * @summary Set the milliseconds to the given date.
 *
 * @description
 * Set the milliseconds to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} milliseconds - the milliseconds of the new date
 * @returns {Date} the new date with the milliseconds setted
 *
 * @example
 * // Set 300 milliseconds to 1 September 2014 11:30:40.500:
 * var result = setMilliseconds(new Date(2014, 8, 1, 11, 30, 40, 500), 300)
 * //=> Mon Sep 01 2014 11:30:40.300
 */
function setMilliseconds (dirtyDate, dirtyMilliseconds) {
  var date = parse(dirtyDate)
  var milliseconds = Number(dirtyMilliseconds)
  date.setMilliseconds(milliseconds)
  return date
}

module.exports = setMilliseconds


/***/ }),

/***/ "./node_modules/date-fns/set_minutes/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/set_minutes/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Minute Helpers
 * @summary Set the minutes to the given date.
 *
 * @description
 * Set the minutes to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} minutes - the minutes of the new date
 * @returns {Date} the new date with the minutes setted
 *
 * @example
 * // Set 45 minutes to 1 September 2014 11:30:40:
 * var result = setMinutes(new Date(2014, 8, 1, 11, 30, 40), 45)
 * //=> Mon Sep 01 2014 11:45:40
 */
function setMinutes (dirtyDate, dirtyMinutes) {
  var date = parse(dirtyDate)
  var minutes = Number(dirtyMinutes)
  date.setMinutes(minutes)
  return date
}

module.exports = setMinutes


/***/ }),

/***/ "./node_modules/date-fns/set_month/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/set_month/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var getDaysInMonth = __webpack_require__(/*! ../get_days_in_month/index.js */ "./node_modules/date-fns/get_days_in_month/index.js")

/**
 * @category Month Helpers
 * @summary Set the month to the given date.
 *
 * @description
 * Set the month to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} month - the month of the new date
 * @returns {Date} the new date with the month setted
 *
 * @example
 * // Set February to 1 September 2014:
 * var result = setMonth(new Date(2014, 8, 1), 1)
 * //=> Sat Feb 01 2014 00:00:00
 */
function setMonth (dirtyDate, dirtyMonth) {
  var date = parse(dirtyDate)
  var month = Number(dirtyMonth)
  var year = date.getFullYear()
  var day = date.getDate()

  var dateWithDesiredMonth = new Date(0)
  dateWithDesiredMonth.setFullYear(year, month, 15)
  dateWithDesiredMonth.setHours(0, 0, 0, 0)
  var daysInMonth = getDaysInMonth(dateWithDesiredMonth)
  // Set the last day of the new month
  // if the original date was the last day of the longer month
  date.setMonth(month, Math.min(day, daysInMonth))
  return date
}

module.exports = setMonth


/***/ }),

/***/ "./node_modules/date-fns/set_quarter/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/set_quarter/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")
var setMonth = __webpack_require__(/*! ../set_month/index.js */ "./node_modules/date-fns/set_month/index.js")

/**
 * @category Quarter Helpers
 * @summary Set the year quarter to the given date.
 *
 * @description
 * Set the year quarter to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} quarter - the quarter of the new date
 * @returns {Date} the new date with the quarter setted
 *
 * @example
 * // Set the 2nd quarter to 2 July 2014:
 * var result = setQuarter(new Date(2014, 6, 2), 2)
 * //=> Wed Apr 02 2014 00:00:00
 */
function setQuarter (dirtyDate, dirtyQuarter) {
  var date = parse(dirtyDate)
  var quarter = Number(dirtyQuarter)
  var oldQuarter = Math.floor(date.getMonth() / 3) + 1
  var diff = quarter - oldQuarter
  return setMonth(date, date.getMonth() + diff * 3)
}

module.exports = setQuarter


/***/ }),

/***/ "./node_modules/date-fns/set_seconds/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/set_seconds/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Second Helpers
 * @summary Set the seconds to the given date.
 *
 * @description
 * Set the seconds to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} seconds - the seconds of the new date
 * @returns {Date} the new date with the seconds setted
 *
 * @example
 * // Set 45 seconds to 1 September 2014 11:30:40:
 * var result = setSeconds(new Date(2014, 8, 1, 11, 30, 40), 45)
 * //=> Mon Sep 01 2014 11:30:45
 */
function setSeconds (dirtyDate, dirtySeconds) {
  var date = parse(dirtyDate)
  var seconds = Number(dirtySeconds)
  date.setSeconds(seconds)
  return date
}

module.exports = setSeconds


/***/ }),

/***/ "./node_modules/date-fns/set_year/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/set_year/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Set the year to the given date.
 *
 * @description
 * Set the year to the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} year - the year of the new date
 * @returns {Date} the new date with the year setted
 *
 * @example
 * // Set year 2013 to 1 September 2014:
 * var result = setYear(new Date(2014, 8, 1), 2013)
 * //=> Sun Sep 01 2013 00:00:00
 */
function setYear (dirtyDate, dirtyYear) {
  var date = parse(dirtyDate)
  var year = Number(dirtyYear)
  date.setFullYear(year)
  return date
}

module.exports = setYear


/***/ }),

/***/ "./node_modules/date-fns/start_of_day/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/start_of_day/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a day
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * var result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */
function startOfDay (dirtyDate) {
  var date = parse(dirtyDate)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfDay


/***/ }),

/***/ "./node_modules/date-fns/start_of_hour/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/start_of_hour/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Hour Helpers
 * @summary Return the start of an hour for the given date.
 *
 * @description
 * Return the start of an hour for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of an hour
 *
 * @example
 * // The start of an hour for 2 September 2014 11:55:00:
 * var result = startOfHour(new Date(2014, 8, 2, 11, 55))
 * //=> Tue Sep 02 2014 11:00:00
 */
function startOfHour (dirtyDate) {
  var date = parse(dirtyDate)
  date.setMinutes(0, 0, 0)
  return date
}

module.exports = startOfHour


/***/ }),

/***/ "./node_modules/date-fns/start_of_iso_week/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/start_of_iso_week/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfWeek = __webpack_require__(/*! ../start_of_week/index.js */ "./node_modules/date-fns/start_of_week/index.js")

/**
 * @category ISO Week Helpers
 * @summary Return the start of an ISO week for the given date.
 *
 * @description
 * Return the start of an ISO week for the given date.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of an ISO week
 *
 * @example
 * // The start of an ISO week for 2 September 2014 11:55:00:
 * var result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Mon Sep 01 2014 00:00:00
 */
function startOfISOWeek (dirtyDate) {
  return startOfWeek(dirtyDate, {weekStartsOn: 1})
}

module.exports = startOfISOWeek


/***/ }),

/***/ "./node_modules/date-fns/start_of_iso_year/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/start_of_iso_year/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getISOYear = __webpack_require__(/*! ../get_iso_year/index.js */ "./node_modules/date-fns/get_iso_year/index.js")
var startOfISOWeek = __webpack_require__(/*! ../start_of_iso_week/index.js */ "./node_modules/date-fns/start_of_iso_week/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Return the start of an ISO week-numbering year for the given date.
 *
 * @description
 * Return the start of an ISO week-numbering year,
 * which always starts 3 days before the year's first Thursday.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of an ISO year
 *
 * @example
 * // The start of an ISO week-numbering year for 2 July 2005:
 * var result = startOfISOYear(new Date(2005, 6, 2))
 * //=> Mon Jan 03 2005 00:00:00
 */
function startOfISOYear (dirtyDate) {
  var year = getISOYear(dirtyDate)
  var fourthOfJanuary = new Date(0)
  fourthOfJanuary.setFullYear(year, 0, 4)
  fourthOfJanuary.setHours(0, 0, 0, 0)
  var date = startOfISOWeek(fourthOfJanuary)
  return date
}

module.exports = startOfISOYear


/***/ }),

/***/ "./node_modules/date-fns/start_of_minute/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/start_of_minute/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Minute Helpers
 * @summary Return the start of a minute for the given date.
 *
 * @description
 * Return the start of a minute for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a minute
 *
 * @example
 * // The start of a minute for 1 December 2014 22:15:45.400:
 * var result = startOfMinute(new Date(2014, 11, 1, 22, 15, 45, 400))
 * //=> Mon Dec 01 2014 22:15:00
 */
function startOfMinute (dirtyDate) {
  var date = parse(dirtyDate)
  date.setSeconds(0, 0)
  return date
}

module.exports = startOfMinute


/***/ }),

/***/ "./node_modules/date-fns/start_of_month/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/start_of_month/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Month Helpers
 * @summary Return the start of a month for the given date.
 *
 * @description
 * Return the start of a month for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a month
 *
 * @example
 * // The start of a month for 2 September 2014 11:55:00:
 * var result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Mon Sep 01 2014 00:00:00
 */
function startOfMonth (dirtyDate) {
  var date = parse(dirtyDate)
  date.setDate(1)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfMonth


/***/ }),

/***/ "./node_modules/date-fns/start_of_quarter/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/start_of_quarter/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Quarter Helpers
 * @summary Return the start of a year quarter for the given date.
 *
 * @description
 * Return the start of a year quarter for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a quarter
 *
 * @example
 * // The start of a quarter for 2 September 2014 11:55:00:
 * var result = startOfQuarter(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Jul 01 2014 00:00:00
 */
function startOfQuarter (dirtyDate) {
  var date = parse(dirtyDate)
  var currentMonth = date.getMonth()
  var month = currentMonth - currentMonth % 3
  date.setMonth(month, 1)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfQuarter


/***/ }),

/***/ "./node_modules/date-fns/start_of_second/index.js":
/*!********************************************************!*\
  !*** ./node_modules/date-fns/start_of_second/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Second Helpers
 * @summary Return the start of a second for the given date.
 *
 * @description
 * Return the start of a second for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a second
 *
 * @example
 * // The start of a second for 1 December 2014 22:15:45.400:
 * var result = startOfSecond(new Date(2014, 11, 1, 22, 15, 45, 400))
 * //=> Mon Dec 01 2014 22:15:45.000
 */
function startOfSecond (dirtyDate) {
  var date = parse(dirtyDate)
  date.setMilliseconds(0)
  return date
}

module.exports = startOfSecond


/***/ }),

/***/ "./node_modules/date-fns/start_of_today/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/date-fns/start_of_today/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var startOfDay = __webpack_require__(/*! ../start_of_day/index.js */ "./node_modules/date-fns/start_of_day/index.js")

/**
 * @category Day Helpers
 * @summary Return the start of today.
 *
 * @description
 * Return the start of today.
 *
 * @returns {Date} the start of today
 *
 * @example
 * // If today is 6 October 2014:
 * var result = startOfToday()
 * //=> Mon Oct 6 2014 00:00:00
 */
function startOfToday () {
  return startOfDay(new Date())
}

module.exports = startOfToday


/***/ }),

/***/ "./node_modules/date-fns/start_of_tomorrow/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/date-fns/start_of_tomorrow/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @category Day Helpers
 * @summary Return the start of tomorrow.
 *
 * @description
 * Return the start of tomorrow.
 *
 * @returns {Date} the start of tomorrow
 *
 * @example
 * // If today is 6 October 2014:
 * var result = startOfTomorrow()
 * //=> Tue Oct 7 2014 00:00:00
 */
function startOfTomorrow () {
  var now = new Date()
  var year = now.getFullYear()
  var month = now.getMonth()
  var day = now.getDate()

  var date = new Date(0)
  date.setFullYear(year, month, day + 1)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfTomorrow


/***/ }),

/***/ "./node_modules/date-fns/start_of_week/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/start_of_week/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Week Helpers
 * @summary Return the start of a week for the given date.
 *
 * @description
 * Return the start of a week for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the start of a week
 *
 * @example
 * // The start of a week for 2 September 2014 11:55:00:
 * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sun Aug 31 2014 00:00:00
 *
 * @example
 * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:
 * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), {weekStartsOn: 1})
 * //=> Mon Sep 01 2014 00:00:00
 */
function startOfWeek (dirtyDate, dirtyOptions) {
  var weekStartsOn = dirtyOptions ? (Number(dirtyOptions.weekStartsOn) || 0) : 0

  var date = parse(dirtyDate)
  var day = date.getDay()
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn

  date.setDate(date.getDate() - diff)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfWeek


/***/ }),

/***/ "./node_modules/date-fns/start_of_year/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/start_of_year/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var parse = __webpack_require__(/*! ../parse/index.js */ "./node_modules/date-fns/parse/index.js")

/**
 * @category Year Helpers
 * @summary Return the start of a year for the given date.
 *
 * @description
 * Return the start of a year for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a year
 *
 * @example
 * // The start of a year for 2 September 2014 11:55:00:
 * var result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))
 * //=> Wed Jan 01 2014 00:00:00
 */
function startOfYear (dirtyDate) {
  var cleanDate = parse(dirtyDate)
  var date = new Date(0)
  date.setFullYear(cleanDate.getFullYear(), 0, 1)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfYear


/***/ }),

/***/ "./node_modules/date-fns/start_of_yesterday/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/date-fns/start_of_yesterday/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @category Day Helpers
 * @summary Return the start of yesterday.
 *
 * @description
 * Return the start of yesterday.
 *
 * @returns {Date} the start of yesterday
 *
 * @example
 * // If today is 6 October 2014:
 * var result = startOfYesterday()
 * //=> Sun Oct 5 2014 00:00:00
 */
function startOfYesterday () {
  var now = new Date()
  var year = now.getFullYear()
  var month = now.getMonth()
  var day = now.getDate()

  var date = new Date(0)
  date.setFullYear(year, month, day - 1)
  date.setHours(0, 0, 0, 0)
  return date
}

module.exports = startOfYesterday


/***/ }),

/***/ "./node_modules/date-fns/sub_days/index.js":
/*!*************************************************!*\
  !*** ./node_modules/date-fns/sub_days/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addDays = __webpack_require__(/*! ../add_days/index.js */ "./node_modules/date-fns/add_days/index.js")

/**
 * @category Day Helpers
 * @summary Subtract the specified number of days from the given date.
 *
 * @description
 * Subtract the specified number of days from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be subtracted
 * @returns {Date} the new date with the days subtracted
 *
 * @example
 * // Subtract 10 days from 1 September 2014:
 * var result = subDays(new Date(2014, 8, 1), 10)
 * //=> Fri Aug 22 2014 00:00:00
 */
function subDays (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addDays(dirtyDate, -amount)
}

module.exports = subDays


/***/ }),

/***/ "./node_modules/date-fns/sub_hours/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/sub_hours/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addHours = __webpack_require__(/*! ../add_hours/index.js */ "./node_modules/date-fns/add_hours/index.js")

/**
 * @category Hour Helpers
 * @summary Subtract the specified number of hours from the given date.
 *
 * @description
 * Subtract the specified number of hours from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of hours to be subtracted
 * @returns {Date} the new date with the hours subtracted
 *
 * @example
 * // Subtract 2 hours from 11 July 2014 01:00:00:
 * var result = subHours(new Date(2014, 6, 11, 1, 0), 2)
 * //=> Thu Jul 10 2014 23:00:00
 */
function subHours (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addHours(dirtyDate, -amount)
}

module.exports = subHours


/***/ }),

/***/ "./node_modules/date-fns/sub_iso_years/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/sub_iso_years/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addISOYears = __webpack_require__(/*! ../add_iso_years/index.js */ "./node_modules/date-fns/add_iso_years/index.js")

/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Subtract the specified number of ISO week-numbering years from the given date.
 *
 * @description
 * Subtract the specified number of ISO week-numbering years from the given date.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of ISO week-numbering years to be subtracted
 * @returns {Date} the new date with the ISO week-numbering years subtracted
 *
 * @example
 * // Subtract 5 ISO week-numbering years from 1 September 2014:
 * var result = subISOYears(new Date(2014, 8, 1), 5)
 * //=> Mon Aug 31 2009 00:00:00
 */
function subISOYears (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addISOYears(dirtyDate, -amount)
}

module.exports = subISOYears


/***/ }),

/***/ "./node_modules/date-fns/sub_milliseconds/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/date-fns/sub_milliseconds/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMilliseconds = __webpack_require__(/*! ../add_milliseconds/index.js */ "./node_modules/date-fns/add_milliseconds/index.js")

/**
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted
 * @returns {Date} the new date with the milliseconds subtracted
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * var result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */
function subMilliseconds (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMilliseconds(dirtyDate, -amount)
}

module.exports = subMilliseconds


/***/ }),

/***/ "./node_modules/date-fns/sub_minutes/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/sub_minutes/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMinutes = __webpack_require__(/*! ../add_minutes/index.js */ "./node_modules/date-fns/add_minutes/index.js")

/**
 * @category Minute Helpers
 * @summary Subtract the specified number of minutes from the given date.
 *
 * @description
 * Subtract the specified number of minutes from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of minutes to be subtracted
 * @returns {Date} the new date with the mintues subtracted
 *
 * @example
 * // Subtract 30 minutes from 10 July 2014 12:00:00:
 * var result = subMinutes(new Date(2014, 6, 10, 12, 0), 30)
 * //=> Thu Jul 10 2014 11:30:00
 */
function subMinutes (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMinutes(dirtyDate, -amount)
}

module.exports = subMinutes


/***/ }),

/***/ "./node_modules/date-fns/sub_months/index.js":
/*!***************************************************!*\
  !*** ./node_modules/date-fns/sub_months/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addMonths = __webpack_require__(/*! ../add_months/index.js */ "./node_modules/date-fns/add_months/index.js")

/**
 * @category Month Helpers
 * @summary Subtract the specified number of months from the given date.
 *
 * @description
 * Subtract the specified number of months from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of months to be subtracted
 * @returns {Date} the new date with the months subtracted
 *
 * @example
 * // Subtract 5 months from 1 February 2015:
 * var result = subMonths(new Date(2015, 1, 1), 5)
 * //=> Mon Sep 01 2014 00:00:00
 */
function subMonths (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addMonths(dirtyDate, -amount)
}

module.exports = subMonths


/***/ }),

/***/ "./node_modules/date-fns/sub_quarters/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/date-fns/sub_quarters/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addQuarters = __webpack_require__(/*! ../add_quarters/index.js */ "./node_modules/date-fns/add_quarters/index.js")

/**
 * @category Quarter Helpers
 * @summary Subtract the specified number of year quarters from the given date.
 *
 * @description
 * Subtract the specified number of year quarters from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of quarters to be subtracted
 * @returns {Date} the new date with the quarters subtracted
 *
 * @example
 * // Subtract 3 quarters from 1 September 2014:
 * var result = subQuarters(new Date(2014, 8, 1), 3)
 * //=> Sun Dec 01 2013 00:00:00
 */
function subQuarters (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addQuarters(dirtyDate, -amount)
}

module.exports = subQuarters


/***/ }),

/***/ "./node_modules/date-fns/sub_seconds/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/sub_seconds/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addSeconds = __webpack_require__(/*! ../add_seconds/index.js */ "./node_modules/date-fns/add_seconds/index.js")

/**
 * @category Second Helpers
 * @summary Subtract the specified number of seconds from the given date.
 *
 * @description
 * Subtract the specified number of seconds from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of seconds to be subtracted
 * @returns {Date} the new date with the seconds subtracted
 *
 * @example
 * // Subtract 30 seconds from 10 July 2014 12:45:00:
 * var result = subSeconds(new Date(2014, 6, 10, 12, 45, 0), 30)
 * //=> Thu Jul 10 2014 12:44:30
 */
function subSeconds (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addSeconds(dirtyDate, -amount)
}

module.exports = subSeconds


/***/ }),

/***/ "./node_modules/date-fns/sub_weeks/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/sub_weeks/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addWeeks = __webpack_require__(/*! ../add_weeks/index.js */ "./node_modules/date-fns/add_weeks/index.js")

/**
 * @category Week Helpers
 * @summary Subtract the specified number of weeks from the given date.
 *
 * @description
 * Subtract the specified number of weeks from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of weeks to be subtracted
 * @returns {Date} the new date with the weeks subtracted
 *
 * @example
 * // Subtract 4 weeks from 1 September 2014:
 * var result = subWeeks(new Date(2014, 8, 1), 4)
 * //=> Mon Aug 04 2014 00:00:00
 */
function subWeeks (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addWeeks(dirtyDate, -amount)
}

module.exports = subWeeks


/***/ }),

/***/ "./node_modules/date-fns/sub_years/index.js":
/*!**************************************************!*\
  !*** ./node_modules/date-fns/sub_years/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var addYears = __webpack_require__(/*! ../add_years/index.js */ "./node_modules/date-fns/add_years/index.js")

/**
 * @category Year Helpers
 * @summary Subtract the specified number of years from the given date.
 *
 * @description
 * Subtract the specified number of years from the given date.
 *
 * @param {Date|String|Number} date - the date to be changed
 * @param {Number} amount - the amount of years to be subtracted
 * @returns {Date} the new date with the years subtracted
 *
 * @example
 * // Subtract 5 years from 1 September 2014:
 * var result = subYears(new Date(2014, 8, 1), 5)
 * //=> Tue Sep 01 2009 00:00:00
 */
function subYears (dirtyDate, dirtyAmount) {
  var amount = Number(dirtyAmount)
  return addYears(dirtyDate, -amount)
}

module.exports = subYears


/***/ }),

/***/ "./node_modules/style-loader/lib/addStyles.js":
/*!****************************************************!*\
  !*** ./node_modules/style-loader/lib/addStyles.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getTarget = function (target, parent) {
  if (parent){
    return parent.querySelector(target);
  }
  return document.querySelector(target);
};

var getElement = (function (fn) {
	var memo = {};

	return function(target, parent) {
                // If passing function in options, then use it for resolve "head" element.
                // Useful for Shadow Root style i.e
                // {
                //   insertInto: function () { return document.querySelector("#foo").shadowRoot }
                // }
                if (typeof target === 'function') {
                        return target();
                }
                if (typeof memo[target] === "undefined") {
			var styleTarget = getTarget.call(this, target, parent);
			// Special case to return head of iframe instead of iframe itself
			if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
				try {
					// This will throw an exception if access to iframe is blocked
					// due to cross-origin restrictions
					styleTarget = styleTarget.contentDocument.head;
				} catch(e) {
					styleTarget = null;
				}
			}
			memo[target] = styleTarget;
		}
		return memo[target]
	};
})();

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(/*! ./urls */ "./node_modules/style-loader/lib/urls.js");

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
        if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else if (typeof options.insertAt === "object" && options.insertAt.before) {
		var nextSibling = getElement(options.insertAt.before, target);
		target.insertBefore(style, nextSibling);
	} else {
		throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}

	if(options.attrs.nonce === undefined) {
		var nonce = getNonce();
		if (nonce) {
			options.attrs.nonce = nonce;
		}
	}

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function getNonce() {
	if (false) {}

	return __webpack_require__.nc;
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = typeof options.transform === 'function'
		 ? options.transform(obj.css) 
		 : options.transform.default(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),

/***/ "./node_modules/style-loader/lib/urls.js":
/*!***********************************************!*\
  !*** ./node_modules/style-loader/lib/urls.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
  // get current location
  var location = typeof window !== "undefined" && window.location;

  if (!location) {
    throw new Error("fixUrls requires window.location");
  }

	// blank or null?
	if (!css || typeof css !== "string") {
	  return css;
  }

  var baseUrl = location.protocol + "//" + location.host;
  var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
	This regular expression is just a way to recursively match brackets within
	a string.

	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
	   (  = Start a capturing group
	     (?:  = Start a non-capturing group
	         [^)(]  = Match anything that isn't a parentheses
	         |  = OR
	         \(  = Match a start parentheses
	             (?:  = Start another non-capturing groups
	                 [^)(]+  = Match anything that isn't a parentheses
	                 |  = OR
	                 \(  = Match a start parentheses
	                     [^)(]*  = Match anything that isn't a parentheses
	                 \)  = Match a end parentheses
	             )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
	 \)  = Match a close parens

	 /gi  = Get all matches, not the first.  Be case insensitive.
	 */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl
			.trim()
			.replace(/^"(.*)"$/, function(o, $1){ return $1; })
			.replace(/^'(.*)'$/, function(o, $1){ return $1; });

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)) {
		  return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
		  	//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};


/***/ }),

/***/ "./node_modules/uuid/index.js":
/*!************************************!*\
  !*** ./node_modules/uuid/index.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var v1 = __webpack_require__(/*! ./v1 */ "./node_modules/uuid/v1.js");
var v4 = __webpack_require__(/*! ./v4 */ "./node_modules/uuid/v4.js");

var uuid = v4;
uuid.v1 = v1;
uuid.v4 = v4;

module.exports = uuid;


/***/ }),

/***/ "./node_modules/uuid/lib/bytesToUuid.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */
var byteToHex = [];
for (var i = 0; i < 256; ++i) {
  byteToHex[i] = (i + 0x100).toString(16).substr(1);
}

function bytesToUuid(buf, offset) {
  var i = offset || 0;
  var bth = byteToHex;
  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4
  return ([
    bth[buf[i++]], bth[buf[i++]],
    bth[buf[i++]], bth[buf[i++]], '-',
    bth[buf[i++]], bth[buf[i++]], '-',
    bth[buf[i++]], bth[buf[i++]], '-',
    bth[buf[i++]], bth[buf[i++]], '-',
    bth[buf[i++]], bth[buf[i++]],
    bth[buf[i++]], bth[buf[i++]],
    bth[buf[i++]], bth[buf[i++]]
  ]).join('');
}

module.exports = bytesToUuid;


/***/ }),

/***/ "./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Unique ID creation requires a high quality random # generator.  In the
// browser this is a little complicated due to unknown quality of Math.random()
// and inconsistent support for the `crypto` API.  We do the best we can via
// feature-detection

// getRandomValues needs to be invoked in a context where "this" is a Crypto
// implementation. Also, find the complete implementation of crypto on IE11.
var getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||
                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));

if (getRandomValues) {
  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto
  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef

  module.exports = function whatwgRNG() {
    getRandomValues(rnds8);
    return rnds8;
  };
} else {
  // Math.random()-based (RNG)
  //
  // If all else fails, use Math.random().  It's fast, but is of unspecified
  // quality.
  var rnds = new Array(16);

  module.exports = function mathRNG() {
    for (var i = 0, r; i < 16; i++) {
      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;
      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;
    }

    return rnds;
  };
}


/***/ }),

/***/ "./node_modules/uuid/v1.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v1.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var rng = __webpack_require__(/*! ./lib/rng */ "./node_modules/uuid/lib/rng-browser.js");
var bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ "./node_modules/uuid/lib/bytesToUuid.js");

// **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html

var _nodeId;
var _clockseq;

// Previous uuid creation time
var _lastMSecs = 0;
var _lastNSecs = 0;

// See https://github.com/uuidjs/uuid for API details
function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || [];

  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;

  // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189
  if (node == null || clockseq == null) {
    var seedBytes = rng();
    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [
        seedBytes[0] | 0x01,
        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]
      ];
    }
    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  }

  // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.
  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();

  // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock
  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;

  // Time since last uuid creation (in msecs)
  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;

  // Per 4.2.1.2, Bump clockseq on clock regression
  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  }

  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval
  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  }

  // Per 4.2.1.2 Throw error if too many uuids are requested
  if (nsecs >= 10000) {
    throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq;

  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch
  msecs += 12219292800000;

  // `time_low`
  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff;

  // `time_mid`
  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff;

  // `time_high_and_version`
  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version
  b[i++] = tmh >>> 16 & 0xff;

  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)
  b[i++] = clockseq >>> 8 | 0x80;

  // `clock_seq_low`
  b[i++] = clockseq & 0xff;

  // `node`
  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf ? buf : bytesToUuid(b);
}

module.exports = v1;


/***/ }),

/***/ "./node_modules/uuid/v4.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var rng = __webpack_require__(/*! ./lib/rng */ "./node_modules/uuid/lib/rng-browser.js");
var bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ "./node_modules/uuid/lib/bytesToUuid.js");

function v4(options, buf, offset) {
  var i = buf && offset || 0;

  if (typeof(options) == 'string') {
    buf = options === 'binary' ? new Array(16) : null;
    options = null;
  }
  options = options || {};

  var rnds = options.random || (options.rng || rng)();

  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
  rnds[6] = (rnds[6] & 0x0f) | 0x40;
  rnds[8] = (rnds[8] & 0x3f) | 0x80;

  // Copy bytes to buffer, if provided
  if (buf) {
    for (var ii = 0; ii < 16; ++ii) {
      buf[i + ii] = rnds[ii];
    }
  }

  return buf || bytesToUuid(rnds);
}

module.exports = v4;


/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./thirdparty/mouse-event-polyfill/MouseEventPolyfill.js":
/*!***************************************************************!*\
  !*** ./thirdparty/mouse-event-polyfill/MouseEventPolyfill.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

try {
  new window.MouseEvent('test');
} catch (e) {
  // Polyfills DOM4 MouseEvent
  var MouseEvent = function MouseEvent(eventType, params) {
    params = params || { bubbles: false, cancelable: false };
    var mouseEvent = document.createEvent("MouseEvent");
    mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, params.screenX || 0, params.screenY || 0, params.clientX || 0, params.clientY || 0, false, false, false, false, 0, null);
    return mouseEvent;
  };

  MouseEvent.prototype = Event.prototype;

  window.MouseEvent = MouseEvent;
}

/***/ })

/******/ });
//# sourceMappingURL=BimMarkups.js.map